name = "authforge"
main = "src/index.ts"
compatibility_date = "2024-12-01"
compatibility_flags = ["nodejs_compat"]

[[d1_databases]]
binding = "DB"
database_name = "authforge-db"
database_id = "90c666a0-b337-4bfe-8c42-476a10c8d4df"

[[kv_namespaces]]
binding = "SESSIONS"
id = "e83f64073d5840c4847d272ad1ec3479"
preview_id = "9cc59429dd614bc08e464cbf238ba690"

[[kv_namespaces]]
binding = "RATE_LIMIT"
id = "93d9464af19a4904875b04c2713fad9a"
preview_id = "fc033b32b0c849559657e59810b93423"

[vars]
WEBAUTHN_RP_NAME = "AuthForge"
WEBAUTHN_RP_ID = "localhost"
ALLOWED_ORIGINS = "http://localhost:3002,http://localhost:3000,http://localhost:3003,http://localhost:3004,http://localhost:5173,http://127.0.0.1:8787"
# Email (set via Cloudflare Dashboard secrets in production)
# RESEND_API_KEY = "re_xxxxxxxxxxxx" (set as secret)
EMAIL_FROM = "AuthForge <noreply@authforge.dev>"

[dev]
port = 8787

[env.production]
vars = { ENVIRONMENT = "production", EMAIL_FROM = "AuthForge <noreply@authforge.dev>" }
# Secrets to set in Cloudflare Dashboard:
# - JWT_SECRET
# - RESEND_API_KEY
# - GOOGLE_CLIENT_ID (optional)
# - GOOGLE_CLIENT_SECRET (optional)
# - GITHUB_CLIENT_ID (optional)
# - GITHUB_CLIENT_SECRET (optional)