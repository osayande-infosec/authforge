{
  "version": 3,
  "sources": ["../bundle-TwbsO9/strip-cf-connecting-ip-header.js", "../../../node_modules/unenv/dist/runtime/_internal/utils.mjs", "../../../node_modules/unenv/dist/runtime/node/internal/perf_hooks/performance.mjs", "../../../node_modules/unenv/dist/runtime/node/perf_hooks.mjs", "../../../node_modules/@cloudflare/unenv-preset/dist/runtime/polyfill/performance.mjs", "../../../node_modules/unenv/dist/runtime/mock/noop.mjs", "../../../node_modules/unenv/dist/runtime/node/console.mjs", "../../../node_modules/@cloudflare/unenv-preset/dist/runtime/node/console.mjs", "../../../node_modules/wrangler/_virtual_unenv_global_polyfill-@cloudflare-unenv-preset-node-console", "../../../node_modules/unenv/dist/runtime/node/internal/process/hrtime.mjs", "../../../node_modules/unenv/dist/runtime/node/internal/tty/read-stream.mjs", "../../../node_modules/unenv/dist/runtime/node/internal/tty/write-stream.mjs", "../../../node_modules/unenv/dist/runtime/node/tty.mjs", "../../../node_modules/unenv/dist/runtime/node/internal/process/process.mjs", "../../../node_modules/@cloudflare/unenv-preset/dist/runtime/node/process.mjs", "../../../node_modules/wrangler/_virtual_unenv_global_polyfill-@cloudflare-unenv-preset-node-process", "wrangler-modules-watch:wrangler:modules-watch", "../../../node_modules/wrangler/templates/modules-watch-stub.js", "../../../node_modules/qrcode/lib/can-promise.js", "../../../node_modules/qrcode/lib/core/utils.js", "../../../node_modules/qrcode/lib/core/error-correction-level.js", "../../../node_modules/qrcode/lib/core/bit-buffer.js", "../../../node_modules/qrcode/lib/core/bit-matrix.js", "../../../node_modules/qrcode/lib/core/alignment-pattern.js", "../../../node_modules/qrcode/lib/core/finder-pattern.js", "../../../node_modules/qrcode/lib/core/mask-pattern.js", "../../../node_modules/qrcode/lib/core/error-correction-code.js", "../../../node_modules/qrcode/lib/core/galois-field.js", "../../../node_modules/qrcode/lib/core/polynomial.js", "../../../node_modules/qrcode/lib/core/reed-solomon-encoder.js", "../../../node_modules/qrcode/lib/core/version-check.js", "../../../node_modules/qrcode/lib/core/regex.js", "../../../node_modules/qrcode/lib/core/mode.js", "../../../node_modules/qrcode/lib/core/version.js", "../../../node_modules/qrcode/lib/core/format-info.js", "../../../node_modules/qrcode/lib/core/numeric-data.js", "../../../node_modules/qrcode/lib/core/alphanumeric-data.js", "../../../node_modules/qrcode/lib/core/byte-data.js", "../../../node_modules/qrcode/lib/core/kanji-data.js", "../../../node_modules/dijkstrajs/dijkstra.js", "../../../node_modules/qrcode/lib/core/segments.js", "../../../node_modules/qrcode/lib/core/qrcode.js", "../../../node_modules/qrcode/lib/renderer/utils.js", "../../../node_modules/qrcode/lib/renderer/canvas.js", "../../../node_modules/qrcode/lib/renderer/svg-tag.js", "../../../node_modules/qrcode/lib/browser.js", "../../../node_modules/pvtsutils/build/index.js", "../bundle-TwbsO9/middleware-loader.entry.ts", "../bundle-TwbsO9/middleware-insertion-facade.js", "../../../src/index.ts", "../../../node_modules/hono/dist/index.js", "../../../node_modules/hono/dist/hono.js", "../../../node_modules/hono/dist/hono-base.js", "../../../node_modules/hono/dist/compose.js", "../../../node_modules/hono/dist/context.js", "../../../node_modules/hono/dist/request.js", "../../../node_modules/hono/dist/http-exception.js", "../../../node_modules/hono/dist/request/constants.js", "../../../node_modules/hono/dist/utils/body.js", "../../../node_modules/hono/dist/utils/url.js", "../../../node_modules/hono/dist/utils/html.js", "../../../node_modules/hono/dist/router.js", "../../../node_modules/hono/dist/utils/constants.js", "../../../node_modules/hono/dist/router/reg-exp-router/index.js", "../../../node_modules/hono/dist/router/reg-exp-router/router.js", "../../../node_modules/hono/dist/router/reg-exp-router/matcher.js", "../../../node_modules/hono/dist/router/reg-exp-router/node.js", "../../../node_modules/hono/dist/router/reg-exp-router/trie.js", "../../../node_modules/hono/dist/router/reg-exp-router/prepared-router.js", "../../../node_modules/hono/dist/router/smart-router/index.js", "../../../node_modules/hono/dist/router/smart-router/router.js", "../../../node_modules/hono/dist/router/trie-router/index.js", "../../../node_modules/hono/dist/router/trie-router/router.js", "../../../node_modules/hono/dist/router/trie-router/node.js", "../../../node_modules/hono/dist/middleware/cors/index.js", "../../../node_modules/hono/dist/middleware/secure-headers/index.js", "../../../node_modules/hono/dist/middleware/secure-headers/secure-headers.js", "../../../node_modules/hono/dist/utils/encode.js", "../../../node_modules/hono/dist/middleware/logger/index.js", "../../../node_modules/hono/dist/utils/color.js", "../../../src/routes/auth.ts", "../../../src/lib/utils.ts", "../../../node_modules/nanoid/index.browser.js", "../../../node_modules/nanoid/url-alphabet/index.js", "../../../src/lib/middleware.ts", "../../../node_modules/otpauth/dist/otpauth.esm.js", "../../../src/routes/passkeys.ts", "../../../node_modules/@simplewebauthn/server/esm/index.js", "../../../node_modules/@simplewebauthn/server/esm/registration/generateRegistrationOptions.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/generateChallenge.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/iso/index.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/iso/isoBase64URL.js", "../../../node_modules/@simplewebauthn/server/esm/deps.js", "../../../node_modules/@levischuck/tiny-cbor/esm/index.js", "../../../node_modules/@levischuck/tiny-cbor/esm/cbor/cbor.js", "../../../node_modules/@levischuck/tiny-cbor/esm/cbor/cbor_internal.js", "../../../node_modules/@hexagon/base64/src/base64.js", "../../../node_modules/unenv/dist/runtime/npm/cross-fetch.mjs", "../../../node_modules/@peculiar/asn1-schema/build/es2015/index.js", "../../../node_modules/@peculiar/asn1-schema/build/es2015/converters.js", "../../../node_modules/asn1js/build/index.es.js", "../../../node_modules/pvutils/build/utils.es.js", "../../../node_modules/@peculiar/asn1-schema/build/es2015/enums.js", "../../../node_modules/@peculiar/asn1-schema/build/es2015/types/index.js", "../../../node_modules/@peculiar/asn1-schema/build/es2015/types/bit_string.js", "../../../node_modules/@peculiar/asn1-schema/build/es2015/types/octet_string.js", "../../../node_modules/@peculiar/asn1-schema/build/es2015/decorators.js", "../../../node_modules/@peculiar/asn1-schema/build/es2015/storage.js", "../../../node_modules/@peculiar/asn1-schema/build/es2015/schema.js", "../../../node_modules/@peculiar/asn1-schema/build/es2015/helper.js", "../../../node_modules/@peculiar/asn1-schema/build/es2015/parser.js", "../../../node_modules/@peculiar/asn1-schema/build/es2015/errors/index.js", "../../../node_modules/@peculiar/asn1-schema/build/es2015/errors/schema_validation.js", "../../../node_modules/@peculiar/asn1-schema/build/es2015/serializer.js", "../../../node_modules/@peculiar/asn1-schema/build/es2015/objects.js", "../../../node_modules/@peculiar/asn1-schema/build/es2015/convert.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/index.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/extensions/index.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/extensions/authority_information_access.js", "../../../node_modules/tslib/tslib.es6.mjs", "../../../node_modules/@peculiar/asn1-x509/build/es2015/general_name.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/ip_converter.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/name.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/object_identifiers.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/extensions/authority_key_identifier.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/extensions/basic_constraints.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/extensions/certificate_issuer.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/general_names.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/extensions/certificate_policies.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/extensions/crl_delta_indicator.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/extensions/crl_number.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/extensions/crl_distribution_points.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/extensions/crl_freshest.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/extensions/crl_issuing_distribution_point.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/extensions/crl_reason.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/extensions/extended_key_usage.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/extensions/inhibit_any_policy.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/extensions/invalidity_date.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/extensions/issuer_alternative_name.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/extensions/key_usage.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/extensions/name_constraints.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/extensions/policy_constraints.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/extensions/policy_mappings.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/extensions/subject_alternative_name.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/extensions/subject_directory_attributes.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/attribute.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/extensions/subject_key_identifier.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/extensions/private_key_usage_period.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/extensions/entrust_version_info.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/extensions/subject_info_access.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/algorithm_identifier.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/certificate.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/tbs_certificate.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/subject_public_key_info.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/validity.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/time.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/extension.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/types.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/certificate_list.js", "../../../node_modules/@peculiar/asn1-x509/build/es2015/tbs_cert_list.js", "../../../node_modules/@peculiar/asn1-ecc/build/es2015/index.js", "../../../node_modules/@peculiar/asn1-ecc/build/es2015/algorithms.js", "../../../node_modules/@peculiar/asn1-ecc/build/es2015/object_identifiers.js", "../../../node_modules/@peculiar/asn1-ecc/build/es2015/ec_parameters.js", "../../../node_modules/@peculiar/asn1-ecc/build/es2015/rfc3279.js", "../../../node_modules/@peculiar/asn1-ecc/build/es2015/ec_private_key.js", "../../../node_modules/@peculiar/asn1-ecc/build/es2015/ec_signature_value.js", "../../../node_modules/@peculiar/asn1-rsa/build/es2015/index.js", "../../../node_modules/@peculiar/asn1-rsa/build/es2015/parameters/index.js", "../../../node_modules/@peculiar/asn1-rsa/build/es2015/parameters/rsaes_oaep.js", "../../../node_modules/@peculiar/asn1-rsa/build/es2015/object_identifiers.js", "../../../node_modules/@peculiar/asn1-rsa/build/es2015/algorithms.js", "../../../node_modules/@peculiar/asn1-rsa/build/es2015/parameters/rsassa_pss.js", "../../../node_modules/@peculiar/asn1-rsa/build/es2015/parameters/rsassa_pkcs1_v1_5.js", "../../../node_modules/@peculiar/asn1-rsa/build/es2015/other_prime_info.js", "../../../node_modules/@peculiar/asn1-rsa/build/es2015/rsa_private_key.js", "../../../node_modules/@peculiar/asn1-rsa/build/es2015/rsa_public_key.js", "../../../node_modules/@peculiar/asn1-android/build/es2015/index.js", "../../../node_modules/@peculiar/asn1-android/build/es2015/key_description.js", "../../../node_modules/@peculiar/asn1-android/build/es2015/nonstandard.js", "../../../node_modules/@peculiar/asn1-android/build/es2015/attestation.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/iso/isoCBOR.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/iso/isoCrypto/index.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/iso/isoCrypto/digest.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/iso/isoCrypto/mapCoseAlgToWebCryptoAlg.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/cose.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/iso/isoCrypto/getWebCrypto.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/iso/isoCrypto/getRandomValues.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/iso/isoCrypto/verify.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/iso/isoCrypto/verifyEC2.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/iso/isoCrypto/importKey.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/iso/isoCrypto/verifyRSA.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/iso/isoCrypto/mapCoseAlgToWebCryptoKeyAlgName.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/iso/isoCrypto/verifyOKP.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/index.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/convertAAGUIDToString.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/convertCertBufferToPEM.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/convertCOSEtoPKCS.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/decodeAttestationObject.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/decodeClientDataJSON.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/decodeCredentialPublicKey.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/generateUserID.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/getCertificateInfo.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/isCertRevoked.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/fetch.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/parseAuthenticatorData.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/decodeAuthenticatorExtensions.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/toHash.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/validateCertificatePath.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/verifySignature.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/convertX509PublicKeyToCOSE.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/mapX509SignatureAlgToCOSEAlg.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/convertPEMToBytes.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/iso/isoCrypto/unwrapEC2Signature.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/iso/isoUint8Array.js", "../../../node_modules/@simplewebauthn/server/esm/registration/verifyRegistrationResponse.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/parseBackupFlags.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/matchExpectedRPID.js", "../../../node_modules/@simplewebauthn/server/esm/services/settingsService.js", "../../../node_modules/@simplewebauthn/server/esm/services/defaultRootCerts/android-safetynet.js", "../../../node_modules/@simplewebauthn/server/esm/services/defaultRootCerts/android-key.js", "../../../node_modules/@simplewebauthn/server/esm/services/defaultRootCerts/apple.js", "../../../node_modules/@simplewebauthn/server/esm/services/defaultRootCerts/mds.js", "../../../node_modules/@simplewebauthn/server/esm/registration/verifications/verifyAttestationFIDOU2F.js", "../../../node_modules/@simplewebauthn/server/esm/registration/verifications/verifyAttestationPacked.js", "../../../node_modules/@simplewebauthn/server/esm/services/metadataService.js", "../../../node_modules/@simplewebauthn/server/esm/helpers/logging.js", "../../../node_modules/@simplewebauthn/server/esm/metadata/parseJWT.js", "../../../node_modules/@simplewebauthn/server/esm/metadata/verifyJWT.js", "../../../node_modules/@simplewebauthn/server/esm/metadata/verifyAttestationWithMetadata.js", "../../../node_modules/@simplewebauthn/server/esm/registration/verifications/verifyAttestationAndroidSafetyNet.js", "../../../node_modules/@simplewebauthn/server/esm/registration/verifications/tpm/verifyAttestationTPM.js", "../../../node_modules/@simplewebauthn/server/esm/registration/verifications/tpm/constants.js", "../../../node_modules/@simplewebauthn/server/esm/registration/verifications/tpm/parseCertInfo.js", "../../../node_modules/@simplewebauthn/server/esm/registration/verifications/tpm/parsePubArea.js", "../../../node_modules/@simplewebauthn/server/esm/registration/verifications/verifyAttestationAndroidKey.js", "../../../node_modules/@simplewebauthn/server/esm/registration/verifications/verifyAttestationApple.js", "../../../node_modules/@simplewebauthn/server/esm/authentication/generateAuthenticationOptions.js", "../../../node_modules/@simplewebauthn/server/esm/authentication/verifyAuthenticationResponse.js", "../../../src/routes/oauth.ts", "../../../src/routes/oidc.ts", "../../../node_modules/hono/dist/middleware/jwt/index.js", "../../../node_modules/hono/dist/middleware/jwt/jwt.js", "../../../node_modules/hono/dist/helper/cookie/index.js", "../../../node_modules/hono/dist/utils/cookie.js", "../../../node_modules/hono/dist/utils/jwt/index.js", "../../../node_modules/hono/dist/utils/jwt/jwt.js", "../../../node_modules/hono/dist/utils/jwt/jwa.js", "../../../node_modules/hono/dist/utils/jwt/jws.js", "../../../node_modules/hono/dist/helper/adapter/index.js", "../../../node_modules/hono/dist/utils/jwt/types.js", "../../../node_modules/hono/dist/utils/jwt/utf8.js", "../../../src/routes/sessions.ts", "../../../src/routes/vault.ts", "../../../src/routes/users.ts", "../../../node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts", "../../../node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts", "../../../node_modules/wrangler/templates/middleware/common.ts"],
  "sourceRoot": "C:\\Users\\osayande\\Downloads\\linkedin-portfolio-projects\\authforge\\.wrangler\\tmp\\dev-wYs7x0",
  "sourcesContent": ["function stripCfConnectingIPHeader(input, init) {\n\tconst request = new Request(input, init);\n\trequest.headers.delete(\"CF-Connecting-IP\");\n\treturn request;\n}\n\nglobalThis.fetch = new Proxy(globalThis.fetch, {\n\tapply(target, thisArg, argArray) {\n\t\treturn Reflect.apply(target, thisArg, [\n\t\t\tstripCfConnectingIPHeader.apply(null, argArray),\n\t\t]);\n\t},\n});\n", "/*@__NO_SIDE_EFFECTS__*/ export function rawHeaders(headers) {\n\tconst rawHeaders = [];\n\tfor (const key in headers) {\n\t\tif (Array.isArray(headers[key])) {\n\t\t\tfor (const h of headers[key]) {\n\t\t\t\trawHeaders.push(key, h);\n\t\t\t}\n\t\t} else {\n\t\t\trawHeaders.push(key, headers[key]);\n\t\t}\n\t}\n\treturn rawHeaders;\n}\n/*@__NO_SIDE_EFFECTS__*/ export function mergeFns(...functions) {\n\treturn function(...args) {\n\t\tfor (const fn of functions) {\n\t\t\tfn(...args);\n\t\t}\n\t};\n}\n/*@__NO_SIDE_EFFECTS__*/ export function createNotImplementedError(name) {\n\treturn new Error(`[unenv] ${name} is not implemented yet!`);\n}\n/*@__NO_SIDE_EFFECTS__*/ export function notImplemented(name) {\n\tconst fn = () => {\n\t\tthrow createNotImplementedError(name);\n\t};\n\treturn Object.assign(fn, { __unenv__: true });\n}\n/*@__NO_SIDE_EFFECTS__*/ export function notImplementedAsync(name) {\n\tconst fn = notImplemented(name);\n\tfn.__promisify__ = () => notImplemented(name + \".__promisify__\");\n\tfn.native = fn;\n\treturn fn;\n}\n/*@__NO_SIDE_EFFECTS__*/ export function notImplementedClass(name) {\n\treturn class {\n\t\t__unenv__ = true;\n\t\tconstructor() {\n\t\t\tthrow new Error(`[unenv] ${name} is not implemented yet!`);\n\t\t}\n\t};\n}\n", "import { createNotImplementedError } from \"../../../_internal/utils.mjs\";\nconst _timeOrigin = globalThis.performance?.timeOrigin ?? Date.now();\nconst _performanceNow = globalThis.performance?.now ? globalThis.performance.now.bind(globalThis.performance) : () => Date.now() - _timeOrigin;\nconst nodeTiming = {\n\tname: \"node\",\n\tentryType: \"node\",\n\tstartTime: 0,\n\tduration: 0,\n\tnodeStart: 0,\n\tv8Start: 0,\n\tbootstrapComplete: 0,\n\tenvironment: 0,\n\tloopStart: 0,\n\tloopExit: 0,\n\tidleTime: 0,\n\tuvMetricsInfo: {\n\t\tloopCount: 0,\n\t\tevents: 0,\n\t\teventsWaiting: 0\n\t},\n\tdetail: undefined,\n\ttoJSON() {\n\t\treturn this;\n\t}\n};\nexport class PerformanceEntry {\n\t__unenv__ = true;\n\tdetail;\n\tentryType = \"event\";\n\tname;\n\tstartTime;\n\tconstructor(name, options) {\n\t\tthis.name = name;\n\t\tthis.startTime = options?.startTime || _performanceNow();\n\t\tthis.detail = options?.detail;\n\t}\n\tget duration() {\n\t\treturn _performanceNow() - this.startTime;\n\t}\n\ttoJSON() {\n\t\treturn {\n\t\t\tname: this.name,\n\t\t\tentryType: this.entryType,\n\t\t\tstartTime: this.startTime,\n\t\t\tduration: this.duration,\n\t\t\tdetail: this.detail\n\t\t};\n\t}\n}\nexport const PerformanceMark = class PerformanceMark extends PerformanceEntry {\n\tentryType = \"mark\";\n\tconstructor() {\n\t\tsuper(...arguments);\n\t}\n\tget duration() {\n\t\treturn 0;\n\t}\n};\nexport class PerformanceMeasure extends PerformanceEntry {\n\tentryType = \"measure\";\n}\nexport class PerformanceResourceTiming extends PerformanceEntry {\n\tentryType = \"resource\";\n\tserverTiming = [];\n\tconnectEnd = 0;\n\tconnectStart = 0;\n\tdecodedBodySize = 0;\n\tdomainLookupEnd = 0;\n\tdomainLookupStart = 0;\n\tencodedBodySize = 0;\n\tfetchStart = 0;\n\tinitiatorType = \"\";\n\tname = \"\";\n\tnextHopProtocol = \"\";\n\tredirectEnd = 0;\n\tredirectStart = 0;\n\trequestStart = 0;\n\tresponseEnd = 0;\n\tresponseStart = 0;\n\tsecureConnectionStart = 0;\n\tstartTime = 0;\n\ttransferSize = 0;\n\tworkerStart = 0;\n\tresponseStatus = 0;\n}\nexport class PerformanceObserverEntryList {\n\t__unenv__ = true;\n\tgetEntries() {\n\t\treturn [];\n\t}\n\tgetEntriesByName(_name, _type) {\n\t\treturn [];\n\t}\n\tgetEntriesByType(type) {\n\t\treturn [];\n\t}\n}\nexport class Performance {\n\t__unenv__ = true;\n\ttimeOrigin = _timeOrigin;\n\teventCounts = new Map();\n\t_entries = [];\n\t_resourceTimingBufferSize = 0;\n\tnavigation = undefined;\n\ttiming = undefined;\n\ttimerify(_fn, _options) {\n\t\tthrow createNotImplementedError(\"Performance.timerify\");\n\t}\n\tget nodeTiming() {\n\t\treturn nodeTiming;\n\t}\n\teventLoopUtilization() {\n\t\treturn {};\n\t}\n\tmarkResourceTiming() {\n\t\treturn new PerformanceResourceTiming(\"\");\n\t}\n\tonresourcetimingbufferfull = null;\n\tnow() {\n\t\tif (this.timeOrigin === _timeOrigin) {\n\t\t\treturn _performanceNow();\n\t\t}\n\t\treturn Date.now() - this.timeOrigin;\n\t}\n\tclearMarks(markName) {\n\t\tthis._entries = markName ? this._entries.filter((e) => e.name !== markName) : this._entries.filter((e) => e.entryType !== \"mark\");\n\t}\n\tclearMeasures(measureName) {\n\t\tthis._entries = measureName ? this._entries.filter((e) => e.name !== measureName) : this._entries.filter((e) => e.entryType !== \"measure\");\n\t}\n\tclearResourceTimings() {\n\t\tthis._entries = this._entries.filter((e) => e.entryType !== \"resource\" || e.entryType !== \"navigation\");\n\t}\n\tgetEntries() {\n\t\treturn this._entries;\n\t}\n\tgetEntriesByName(name, type) {\n\t\treturn this._entries.filter((e) => e.name === name && (!type || e.entryType === type));\n\t}\n\tgetEntriesByType(type) {\n\t\treturn this._entries.filter((e) => e.entryType === type);\n\t}\n\tmark(name, options) {\n\t\tconst entry = new PerformanceMark(name, options);\n\t\tthis._entries.push(entry);\n\t\treturn entry;\n\t}\n\tmeasure(measureName, startOrMeasureOptions, endMark) {\n\t\tlet start;\n\t\tlet end;\n\t\tif (typeof startOrMeasureOptions === \"string\") {\n\t\t\tstart = this.getEntriesByName(startOrMeasureOptions, \"mark\")[0]?.startTime;\n\t\t\tend = this.getEntriesByName(endMark, \"mark\")[0]?.startTime;\n\t\t} else {\n\t\t\tstart = Number.parseFloat(startOrMeasureOptions?.start) || this.now();\n\t\t\tend = Number.parseFloat(startOrMeasureOptions?.end) || this.now();\n\t\t}\n\t\tconst entry = new PerformanceMeasure(measureName, {\n\t\t\tstartTime: start,\n\t\t\tdetail: {\n\t\t\t\tstart,\n\t\t\t\tend\n\t\t\t}\n\t\t});\n\t\tthis._entries.push(entry);\n\t\treturn entry;\n\t}\n\tsetResourceTimingBufferSize(maxSize) {\n\t\tthis._resourceTimingBufferSize = maxSize;\n\t}\n\taddEventListener(type, listener, options) {\n\t\tthrow createNotImplementedError(\"Performance.addEventListener\");\n\t}\n\tremoveEventListener(type, listener, options) {\n\t\tthrow createNotImplementedError(\"Performance.removeEventListener\");\n\t}\n\tdispatchEvent(event) {\n\t\tthrow createNotImplementedError(\"Performance.dispatchEvent\");\n\t}\n\ttoJSON() {\n\t\treturn this;\n\t}\n}\nexport class PerformanceObserver {\n\t__unenv__ = true;\n\tstatic supportedEntryTypes = [];\n\t_callback = null;\n\tconstructor(callback) {\n\t\tthis._callback = callback;\n\t}\n\ttakeRecords() {\n\t\treturn [];\n\t}\n\tdisconnect() {\n\t\tthrow createNotImplementedError(\"PerformanceObserver.disconnect\");\n\t}\n\tobserve(options) {\n\t\tthrow createNotImplementedError(\"PerformanceObserver.observe\");\n\t}\n\tbind(fn) {\n\t\treturn fn;\n\t}\n\trunInAsyncScope(fn, thisArg, ...args) {\n\t\treturn fn.call(thisArg, ...args);\n\t}\n\tasyncId() {\n\t\treturn 0;\n\t}\n\ttriggerAsyncId() {\n\t\treturn 0;\n\t}\n\temitDestroy() {\n\t\treturn this;\n\t}\n}\nexport const performance = globalThis.performance && \"addEventListener\" in globalThis.performance ? globalThis.performance : new Performance();\n", "import { IntervalHistogram, RecordableHistogram } from \"./internal/perf_hooks/histogram.mjs\";\nimport { performance, Performance, PerformanceEntry, PerformanceMark, PerformanceMeasure, PerformanceObserverEntryList, PerformanceObserver, PerformanceResourceTiming } from \"./internal/perf_hooks/performance.mjs\";\nexport * from \"./internal/perf_hooks/performance.mjs\";\nimport { NODE_PERFORMANCE_GC_MAJOR, NODE_PERFORMANCE_GC_MINOR, NODE_PERFORMANCE_GC_INCREMENTAL, NODE_PERFORMANCE_GC_WEAKCB, NODE_PERFORMANCE_GC_FLAGS_NO, NODE_PERFORMANCE_GC_FLAGS_CONSTRUCT_RETAINED, NODE_PERFORMANCE_GC_FLAGS_FORCED, NODE_PERFORMANCE_GC_FLAGS_SYNCHRONOUS_PHANTOM_PROCESSING, NODE_PERFORMANCE_GC_FLAGS_ALL_AVAILABLE_GARBAGE, NODE_PERFORMANCE_GC_FLAGS_ALL_EXTERNAL_MEMORY, NODE_PERFORMANCE_GC_FLAGS_SCHEDULE_IDLE, NODE_PERFORMANCE_ENTRY_TYPE_GC, NODE_PERFORMANCE_ENTRY_TYPE_HTTP, NODE_PERFORMANCE_ENTRY_TYPE_HTTP2, NODE_PERFORMANCE_ENTRY_TYPE_NET, NODE_PERFORMANCE_ENTRY_TYPE_DNS, NODE_PERFORMANCE_MILESTONE_TIME_ORIGIN_TIMESTAMP, NODE_PERFORMANCE_MILESTONE_TIME_ORIGIN, NODE_PERFORMANCE_MILESTONE_ENVIRONMENT, NODE_PERFORMANCE_MILESTONE_NODE_START, NODE_PERFORMANCE_MILESTONE_V8_START, NODE_PERFORMANCE_MILESTONE_LOOP_START, NODE_PERFORMANCE_MILESTONE_LOOP_EXIT, NODE_PERFORMANCE_MILESTONE_BOOTSTRAP_COMPLETE } from \"./internal/perf_hooks/constants.mjs\";\nexport const constants = {\n\tNODE_PERFORMANCE_GC_MAJOR,\n\tNODE_PERFORMANCE_GC_MINOR,\n\tNODE_PERFORMANCE_GC_INCREMENTAL,\n\tNODE_PERFORMANCE_GC_WEAKCB,\n\tNODE_PERFORMANCE_GC_FLAGS_NO,\n\tNODE_PERFORMANCE_GC_FLAGS_CONSTRUCT_RETAINED,\n\tNODE_PERFORMANCE_GC_FLAGS_FORCED,\n\tNODE_PERFORMANCE_GC_FLAGS_SYNCHRONOUS_PHANTOM_PROCESSING,\n\tNODE_PERFORMANCE_GC_FLAGS_ALL_AVAILABLE_GARBAGE,\n\tNODE_PERFORMANCE_GC_FLAGS_ALL_EXTERNAL_MEMORY,\n\tNODE_PERFORMANCE_GC_FLAGS_SCHEDULE_IDLE,\n\tNODE_PERFORMANCE_ENTRY_TYPE_GC,\n\tNODE_PERFORMANCE_ENTRY_TYPE_HTTP,\n\tNODE_PERFORMANCE_ENTRY_TYPE_HTTP2,\n\tNODE_PERFORMANCE_ENTRY_TYPE_NET,\n\tNODE_PERFORMANCE_ENTRY_TYPE_DNS,\n\tNODE_PERFORMANCE_MILESTONE_TIME_ORIGIN_TIMESTAMP,\n\tNODE_PERFORMANCE_MILESTONE_TIME_ORIGIN,\n\tNODE_PERFORMANCE_MILESTONE_ENVIRONMENT,\n\tNODE_PERFORMANCE_MILESTONE_NODE_START,\n\tNODE_PERFORMANCE_MILESTONE_V8_START,\n\tNODE_PERFORMANCE_MILESTONE_LOOP_START,\n\tNODE_PERFORMANCE_MILESTONE_LOOP_EXIT,\n\tNODE_PERFORMANCE_MILESTONE_BOOTSTRAP_COMPLETE\n};\nexport const monitorEventLoopDelay = function(_options) {\n\treturn new IntervalHistogram();\n};\nexport const createHistogram = function(_options) {\n\treturn new RecordableHistogram();\n};\nexport default {\n\tPerformance,\n\tPerformanceMark,\n\tPerformanceEntry,\n\tPerformanceMeasure,\n\tPerformanceObserverEntryList,\n\tPerformanceObserver,\n\tPerformanceResourceTiming,\n\tperformance,\n\tconstants,\n\tcreateHistogram,\n\tmonitorEventLoopDelay\n};\n", "import {\n  performance,\n  Performance,\n  PerformanceEntry,\n  PerformanceMark,\n  PerformanceMeasure,\n  PerformanceObserver,\n  PerformanceObserverEntryList,\n  PerformanceResourceTiming\n} from \"node:perf_hooks\";\nglobalThis.performance = performance;\nglobalThis.Performance = Performance;\nglobalThis.PerformanceEntry = PerformanceEntry;\nglobalThis.PerformanceMark = PerformanceMark;\nglobalThis.PerformanceMeasure = PerformanceMeasure;\nglobalThis.PerformanceObserver = PerformanceObserver;\nglobalThis.PerformanceObserverEntryList = PerformanceObserverEntryList;\nglobalThis.PerformanceResourceTiming = PerformanceResourceTiming;\n", "export default Object.assign(() => {}, { __unenv__: true });\n", "import { Writable } from \"node:stream\";\nimport noop from \"../mock/noop.mjs\";\nimport { notImplemented, notImplementedClass } from \"../_internal/utils.mjs\";\nconst _console = globalThis.console;\nexport const _ignoreErrors = true;\nexport const _stderr = new Writable();\nexport const _stdout = new Writable();\nexport const log = _console?.log ?? noop;\nexport const info = _console?.info ?? log;\nexport const trace = _console?.trace ?? info;\nexport const debug = _console?.debug ?? log;\nexport const table = _console?.table ?? log;\nexport const error = _console?.error ?? log;\nexport const warn = _console?.warn ?? error;\nexport const createTask = _console?.createTask ?? /*@__PURE__*/ notImplemented(\"console.createTask\");\nexport const assert = /*@__PURE__*/ notImplemented(\"console.assert\");\nexport const clear = _console?.clear ?? noop;\nexport const count = _console?.count ?? noop;\nexport const countReset = _console?.countReset ?? noop;\nexport const dir = _console?.dir ?? noop;\nexport const dirxml = _console?.dirxml ?? noop;\nexport const group = _console?.group ?? noop;\nexport const groupEnd = _console?.groupEnd ?? noop;\nexport const groupCollapsed = _console?.groupCollapsed ?? noop;\nexport const profile = _console?.profile ?? noop;\nexport const profileEnd = _console?.profileEnd ?? noop;\nexport const time = _console?.time ?? noop;\nexport const timeEnd = _console?.timeEnd ?? noop;\nexport const timeLog = _console?.timeLog ?? noop;\nexport const timeStamp = _console?.timeStamp ?? noop;\nexport const Console = _console?.Console ?? /*@__PURE__*/ notImplementedClass(\"console.Console\");\nexport const _times = /*@__PURE__*/ new Map();\nexport function context() {\n\treturn _console;\n}\nexport const _stdoutErrorHandler = noop;\nexport const _stderrErrorHandler = noop;\nexport default {\n\t_times,\n\t_ignoreErrors,\n\t_stdoutErrorHandler,\n\t_stderrErrorHandler,\n\t_stdout,\n\t_stderr,\n\tassert,\n\tclear,\n\tConsole,\n\tcount,\n\tcountReset,\n\tdebug,\n\tdir,\n\tdirxml,\n\terror,\n\tcontext,\n\tcreateTask,\n\tgroup,\n\tgroupEnd,\n\tgroupCollapsed,\n\tinfo,\n\tlog,\n\tprofile,\n\tprofileEnd,\n\ttable,\n\ttime,\n\ttimeEnd,\n\ttimeLog,\n\ttimeStamp,\n\ttrace,\n\twarn\n};\n", "import {\n  _ignoreErrors,\n  _stderr,\n  _stderrErrorHandler,\n  _stdout,\n  _stdoutErrorHandler,\n  _times,\n  Console\n} from \"unenv/node/console\";\nexport {\n  Console,\n  _ignoreErrors,\n  _stderr,\n  _stderrErrorHandler,\n  _stdout,\n  _stdoutErrorHandler,\n  _times\n} from \"unenv/node/console\";\nconst workerdConsole = globalThis[\"console\"];\nexport const {\n  assert,\n  clear,\n  // @ts-expect-error undocumented public API\n  context,\n  count,\n  countReset,\n  // @ts-expect-error undocumented public API\n  createTask,\n  debug,\n  dir,\n  dirxml,\n  error,\n  group,\n  groupCollapsed,\n  groupEnd,\n  info,\n  log,\n  profile,\n  profileEnd,\n  table,\n  time,\n  timeEnd,\n  timeLog,\n  timeStamp,\n  trace,\n  warn\n} = workerdConsole;\nObject.assign(workerdConsole, {\n  Console,\n  _ignoreErrors,\n  _stderr,\n  _stderrErrorHandler,\n  _stdout,\n  _stdoutErrorHandler,\n  _times\n});\nexport default workerdConsole;\n", "import { default as defaultExport } from \"@cloudflare/unenv-preset/node/console\";\nglobalThis.console = defaultExport;", "export const hrtime = /*@__PURE__*/ Object.assign(function hrtime(startTime) {\n\tconst now = Date.now();\n\tconst seconds = Math.trunc(now / 1e3);\n\tconst nanos = now % 1e3 * 1e6;\n\tif (startTime) {\n\t\tlet diffSeconds = seconds - startTime[0];\n\t\tlet diffNanos = nanos - startTime[0];\n\t\tif (diffNanos < 0) {\n\t\t\tdiffSeconds = diffSeconds - 1;\n\t\t\tdiffNanos = 1e9 + diffNanos;\n\t\t}\n\t\treturn [diffSeconds, diffNanos];\n\t}\n\treturn [seconds, nanos];\n}, { bigint: function bigint() {\n\treturn BigInt(Date.now() * 1e6);\n} });\n", "import { Socket } from \"node:net\";\nexport class ReadStream extends Socket {\n\tfd;\n\tconstructor(fd) {\n\t\tsuper();\n\t\tthis.fd = fd;\n\t}\n\tisRaw = false;\n\tsetRawMode(mode) {\n\t\tthis.isRaw = mode;\n\t\treturn this;\n\t}\n\tisTTY = false;\n}\n", "import { Socket } from \"node:net\";\nexport class WriteStream extends Socket {\n\tfd;\n\tconstructor(fd) {\n\t\tsuper();\n\t\tthis.fd = fd;\n\t}\n\tclearLine(dir, callback) {\n\t\tcallback && callback();\n\t\treturn false;\n\t}\n\tclearScreenDown(callback) {\n\t\tcallback && callback();\n\t\treturn false;\n\t}\n\tcursorTo(x, y, callback) {\n\t\tcallback && typeof callback === \"function\" && callback();\n\t\treturn false;\n\t}\n\tmoveCursor(dx, dy, callback) {\n\t\tcallback && callback();\n\t\treturn false;\n\t}\n\tgetColorDepth(env) {\n\t\treturn 1;\n\t}\n\thasColors(count, env) {\n\t\treturn false;\n\t}\n\tgetWindowSize() {\n\t\treturn [this.columns, this.rows];\n\t}\n\tcolumns = 80;\n\trows = 24;\n\tisTTY = false;\n}\n", "import { ReadStream } from \"./internal/tty/read-stream.mjs\";\nimport { WriteStream } from \"./internal/tty/write-stream.mjs\";\nexport { ReadStream } from \"./internal/tty/read-stream.mjs\";\nexport { WriteStream } from \"./internal/tty/write-stream.mjs\";\nexport const isatty = function() {\n\treturn false;\n};\nexport default {\n\tReadStream,\n\tWriteStream,\n\tisatty\n};\n", "import { EventEmitter } from \"node:events\";\nimport { ReadStream, WriteStream } from \"node:tty\";\nimport { notImplemented, createNotImplementedError } from \"../../../_internal/utils.mjs\";\nexport class Process extends EventEmitter {\n\tenv;\n\thrtime;\n\tnextTick;\n\tconstructor(impl) {\n\t\tsuper();\n\t\tthis.env = impl.env;\n\t\tthis.hrtime = impl.hrtime;\n\t\tthis.nextTick = impl.nextTick;\n\t\tfor (const prop of [...Object.getOwnPropertyNames(Process.prototype), ...Object.getOwnPropertyNames(EventEmitter.prototype)]) {\n\t\t\tconst value = this[prop];\n\t\t\tif (typeof value === \"function\") {\n\t\t\t\tthis[prop] = value.bind(this);\n\t\t\t}\n\t\t}\n\t}\n\temitWarning(warning, type, code) {\n\t\tconsole.warn(`${code ? `[${code}] ` : \"\"}${type ? `${type}: ` : \"\"}${warning}`);\n\t}\n\temit(...args) {\n\t\treturn super.emit(...args);\n\t}\n\tlisteners(eventName) {\n\t\treturn super.listeners(eventName);\n\t}\n\t#stdin;\n\t#stdout;\n\t#stderr;\n\tget stdin() {\n\t\treturn this.#stdin ??= new ReadStream(0);\n\t}\n\tget stdout() {\n\t\treturn this.#stdout ??= new WriteStream(1);\n\t}\n\tget stderr() {\n\t\treturn this.#stderr ??= new WriteStream(2);\n\t}\n\t#cwd = \"/\";\n\tchdir(cwd) {\n\t\tthis.#cwd = cwd;\n\t}\n\tcwd() {\n\t\treturn this.#cwd;\n\t}\n\tarch = \"\";\n\tplatform = \"\";\n\targv = [];\n\targv0 = \"\";\n\texecArgv = [];\n\texecPath = \"\";\n\ttitle = \"\";\n\tpid = 200;\n\tppid = 100;\n\tget version() {\n\t\treturn \"\";\n\t}\n\tget versions() {\n\t\treturn {};\n\t}\n\tget allowedNodeEnvironmentFlags() {\n\t\treturn new Set();\n\t}\n\tget sourceMapsEnabled() {\n\t\treturn false;\n\t}\n\tget debugPort() {\n\t\treturn 0;\n\t}\n\tget throwDeprecation() {\n\t\treturn false;\n\t}\n\tget traceDeprecation() {\n\t\treturn false;\n\t}\n\tget features() {\n\t\treturn {};\n\t}\n\tget release() {\n\t\treturn {};\n\t}\n\tget connected() {\n\t\treturn false;\n\t}\n\tget config() {\n\t\treturn {};\n\t}\n\tget moduleLoadList() {\n\t\treturn [];\n\t}\n\tconstrainedMemory() {\n\t\treturn 0;\n\t}\n\tavailableMemory() {\n\t\treturn 0;\n\t}\n\tuptime() {\n\t\treturn 0;\n\t}\n\tresourceUsage() {\n\t\treturn {};\n\t}\n\tref() {}\n\tunref() {}\n\tumask() {\n\t\tthrow createNotImplementedError(\"process.umask\");\n\t}\n\tgetBuiltinModule() {\n\t\treturn undefined;\n\t}\n\tgetActiveResourcesInfo() {\n\t\tthrow createNotImplementedError(\"process.getActiveResourcesInfo\");\n\t}\n\texit() {\n\t\tthrow createNotImplementedError(\"process.exit\");\n\t}\n\treallyExit() {\n\t\tthrow createNotImplementedError(\"process.reallyExit\");\n\t}\n\tkill() {\n\t\tthrow createNotImplementedError(\"process.kill\");\n\t}\n\tabort() {\n\t\tthrow createNotImplementedError(\"process.abort\");\n\t}\n\tdlopen() {\n\t\tthrow createNotImplementedError(\"process.dlopen\");\n\t}\n\tsetSourceMapsEnabled() {\n\t\tthrow createNotImplementedError(\"process.setSourceMapsEnabled\");\n\t}\n\tloadEnvFile() {\n\t\tthrow createNotImplementedError(\"process.loadEnvFile\");\n\t}\n\tdisconnect() {\n\t\tthrow createNotImplementedError(\"process.disconnect\");\n\t}\n\tcpuUsage() {\n\t\tthrow createNotImplementedError(\"process.cpuUsage\");\n\t}\n\tsetUncaughtExceptionCaptureCallback() {\n\t\tthrow createNotImplementedError(\"process.setUncaughtExceptionCaptureCallback\");\n\t}\n\thasUncaughtExceptionCaptureCallback() {\n\t\tthrow createNotImplementedError(\"process.hasUncaughtExceptionCaptureCallback\");\n\t}\n\tinitgroups() {\n\t\tthrow createNotImplementedError(\"process.initgroups\");\n\t}\n\topenStdin() {\n\t\tthrow createNotImplementedError(\"process.openStdin\");\n\t}\n\tassert() {\n\t\tthrow createNotImplementedError(\"process.assert\");\n\t}\n\tbinding() {\n\t\tthrow createNotImplementedError(\"process.binding\");\n\t}\n\tpermission = { has: /*@__PURE__*/ notImplemented(\"process.permission.has\") };\n\treport = {\n\t\tdirectory: \"\",\n\t\tfilename: \"\",\n\t\tsignal: \"SIGUSR2\",\n\t\tcompact: false,\n\t\treportOnFatalError: false,\n\t\treportOnSignal: false,\n\t\treportOnUncaughtException: false,\n\t\tgetReport: /*@__PURE__*/ notImplemented(\"process.report.getReport\"),\n\t\twriteReport: /*@__PURE__*/ notImplemented(\"process.report.writeReport\")\n\t};\n\tfinalization = {\n\t\tregister: /*@__PURE__*/ notImplemented(\"process.finalization.register\"),\n\t\tunregister: /*@__PURE__*/ notImplemented(\"process.finalization.unregister\"),\n\t\tregisterBeforeExit: /*@__PURE__*/ notImplemented(\"process.finalization.registerBeforeExit\")\n\t};\n\tmemoryUsage = Object.assign(() => ({\n\t\tarrayBuffers: 0,\n\t\trss: 0,\n\t\texternal: 0,\n\t\theapTotal: 0,\n\t\theapUsed: 0\n\t}), { rss: () => 0 });\n\tmainModule = undefined;\n\tdomain = undefined;\n\tsend = undefined;\n\texitCode = undefined;\n\tchannel = undefined;\n\tgetegid = undefined;\n\tgeteuid = undefined;\n\tgetgid = undefined;\n\tgetgroups = undefined;\n\tgetuid = undefined;\n\tsetegid = undefined;\n\tseteuid = undefined;\n\tsetgid = undefined;\n\tsetgroups = undefined;\n\tsetuid = undefined;\n\t_events = undefined;\n\t_eventsCount = undefined;\n\t_exiting = undefined;\n\t_maxListeners = undefined;\n\t_debugEnd = undefined;\n\t_debugProcess = undefined;\n\t_fatalException = undefined;\n\t_getActiveHandles = undefined;\n\t_getActiveRequests = undefined;\n\t_kill = undefined;\n\t_preload_modules = undefined;\n\t_rawDebug = undefined;\n\t_startProfilerIdleNotifier = undefined;\n\t_stopProfilerIdleNotifier = undefined;\n\t_tickCallback = undefined;\n\t_disconnect = undefined;\n\t_handleQueue = undefined;\n\t_pendingMessage = undefined;\n\t_channel = undefined;\n\t_send = undefined;\n\t_linkedBinding = undefined;\n}\n", "import { hrtime as UnenvHrTime } from \"unenv/node/internal/process/hrtime\";\nimport { Process as UnenvProcess } from \"unenv/node/internal/process/process\";\nconst globalProcess = globalThis[\"process\"];\nexport const getBuiltinModule = globalProcess.getBuiltinModule;\nexport const { exit, platform, nextTick } = getBuiltinModule(\n  \"node:process\"\n);\nconst unenvProcess = new UnenvProcess({\n  env: globalProcess.env,\n  hrtime: UnenvHrTime,\n  nextTick\n});\nexport const {\n  abort,\n  addListener,\n  allowedNodeEnvironmentFlags,\n  hasUncaughtExceptionCaptureCallback,\n  setUncaughtExceptionCaptureCallback,\n  loadEnvFile,\n  sourceMapsEnabled,\n  arch,\n  argv,\n  argv0,\n  chdir,\n  config,\n  connected,\n  constrainedMemory,\n  availableMemory,\n  cpuUsage,\n  cwd,\n  debugPort,\n  dlopen,\n  disconnect,\n  emit,\n  emitWarning,\n  env,\n  eventNames,\n  execArgv,\n  execPath,\n  finalization,\n  features,\n  getActiveResourcesInfo,\n  getMaxListeners,\n  hrtime,\n  kill,\n  listeners,\n  listenerCount,\n  memoryUsage,\n  on,\n  off,\n  once,\n  pid,\n  ppid,\n  prependListener,\n  prependOnceListener,\n  rawListeners,\n  release,\n  removeAllListeners,\n  removeListener,\n  report,\n  resourceUsage,\n  setMaxListeners,\n  setSourceMapsEnabled,\n  stderr,\n  stdin,\n  stdout,\n  title,\n  throwDeprecation,\n  traceDeprecation,\n  umask,\n  uptime,\n  version,\n  versions,\n  domain,\n  initgroups,\n  moduleLoadList,\n  reallyExit,\n  openStdin,\n  assert,\n  binding,\n  send,\n  exitCode,\n  channel,\n  getegid,\n  geteuid,\n  getgid,\n  getgroups,\n  getuid,\n  setegid,\n  seteuid,\n  setgid,\n  setgroups,\n  setuid,\n  permission,\n  mainModule,\n  _events,\n  _eventsCount,\n  _exiting,\n  _maxListeners,\n  _debugEnd,\n  _debugProcess,\n  _fatalException,\n  _getActiveHandles,\n  _getActiveRequests,\n  _kill,\n  _preload_modules,\n  _rawDebug,\n  _startProfilerIdleNotifier,\n  _stopProfilerIdleNotifier,\n  _tickCallback,\n  _disconnect,\n  _handleQueue,\n  _pendingMessage,\n  _channel,\n  _send,\n  _linkedBinding\n} = unenvProcess;\nconst _process = {\n  abort,\n  addListener,\n  allowedNodeEnvironmentFlags,\n  hasUncaughtExceptionCaptureCallback,\n  setUncaughtExceptionCaptureCallback,\n  loadEnvFile,\n  sourceMapsEnabled,\n  arch,\n  argv,\n  argv0,\n  chdir,\n  config,\n  connected,\n  constrainedMemory,\n  availableMemory,\n  cpuUsage,\n  cwd,\n  debugPort,\n  dlopen,\n  disconnect,\n  emit,\n  emitWarning,\n  env,\n  eventNames,\n  execArgv,\n  execPath,\n  exit,\n  finalization,\n  features,\n  getBuiltinModule,\n  getActiveResourcesInfo,\n  getMaxListeners,\n  hrtime,\n  kill,\n  listeners,\n  listenerCount,\n  memoryUsage,\n  nextTick,\n  on,\n  off,\n  once,\n  pid,\n  platform,\n  ppid,\n  prependListener,\n  prependOnceListener,\n  rawListeners,\n  release,\n  removeAllListeners,\n  removeListener,\n  report,\n  resourceUsage,\n  setMaxListeners,\n  setSourceMapsEnabled,\n  stderr,\n  stdin,\n  stdout,\n  title,\n  throwDeprecation,\n  traceDeprecation,\n  umask,\n  uptime,\n  version,\n  versions,\n  // @ts-expect-error old API\n  domain,\n  initgroups,\n  moduleLoadList,\n  reallyExit,\n  openStdin,\n  assert,\n  binding,\n  send,\n  exitCode,\n  channel,\n  getegid,\n  geteuid,\n  getgid,\n  getgroups,\n  getuid,\n  setegid,\n  seteuid,\n  setgid,\n  setgroups,\n  setuid,\n  permission,\n  mainModule,\n  _events,\n  _eventsCount,\n  _exiting,\n  _maxListeners,\n  _debugEnd,\n  _debugProcess,\n  _fatalException,\n  _getActiveHandles,\n  _getActiveRequests,\n  _kill,\n  _preload_modules,\n  _rawDebug,\n  _startProfilerIdleNotifier,\n  _stopProfilerIdleNotifier,\n  _tickCallback,\n  _disconnect,\n  _handleQueue,\n  _pendingMessage,\n  _channel,\n  _send,\n  _linkedBinding\n};\nexport default _process;\n", "import { default as defaultExport } from \"@cloudflare/unenv-preset/node/process\";\nglobalThis.process = defaultExport;", "", "// `esbuild` doesn't support returning `watch*` options from `onStart()`\n// plugin callbacks. Instead, we define an empty virtual module that is\n// imported by this injected file. Importing the module registers watchers.\nimport \"wrangler:modules-watch\";\n", "// can-promise has a crash in some versions of react native that dont have\n// standard global objects\n// https://github.com/soldair/node-qrcode/issues/157\n\nmodule.exports = function () {\n  return typeof Promise === 'function' && Promise.prototype && Promise.prototype.then\n}\n", "let toSJISFunction\nconst CODEWORDS_COUNT = [\n  0, // Not used\n  26, 44, 70, 100, 134, 172, 196, 242, 292, 346,\n  404, 466, 532, 581, 655, 733, 815, 901, 991, 1085,\n  1156, 1258, 1364, 1474, 1588, 1706, 1828, 1921, 2051, 2185,\n  2323, 2465, 2611, 2761, 2876, 3034, 3196, 3362, 3532, 3706\n]\n\n/**\n * Returns the QR Code size for the specified version\n *\n * @param  {Number} version QR Code version\n * @return {Number}         size of QR code\n */\nexports.getSymbolSize = function getSymbolSize (version) {\n  if (!version) throw new Error('\"version\" cannot be null or undefined')\n  if (version < 1 || version > 40) throw new Error('\"version\" should be in range from 1 to 40')\n  return version * 4 + 17\n}\n\n/**\n * Returns the total number of codewords used to store data and EC information.\n *\n * @param  {Number} version QR Code version\n * @return {Number}         Data length in bits\n */\nexports.getSymbolTotalCodewords = function getSymbolTotalCodewords (version) {\n  return CODEWORDS_COUNT[version]\n}\n\n/**\n * Encode data with Bose-Chaudhuri-Hocquenghem\n *\n * @param  {Number} data Value to encode\n * @return {Number}      Encoded value\n */\nexports.getBCHDigit = function (data) {\n  let digit = 0\n\n  while (data !== 0) {\n    digit++\n    data >>>= 1\n  }\n\n  return digit\n}\n\nexports.setToSJISFunction = function setToSJISFunction (f) {\n  if (typeof f !== 'function') {\n    throw new Error('\"toSJISFunc\" is not a valid function.')\n  }\n\n  toSJISFunction = f\n}\n\nexports.isKanjiModeEnabled = function () {\n  return typeof toSJISFunction !== 'undefined'\n}\n\nexports.toSJIS = function toSJIS (kanji) {\n  return toSJISFunction(kanji)\n}\n", "exports.L = { bit: 1 }\nexports.M = { bit: 0 }\nexports.Q = { bit: 3 }\nexports.H = { bit: 2 }\n\nfunction fromString (string) {\n  if (typeof string !== 'string') {\n    throw new Error('Param is not a string')\n  }\n\n  const lcStr = string.toLowerCase()\n\n  switch (lcStr) {\n    case 'l':\n    case 'low':\n      return exports.L\n\n    case 'm':\n    case 'medium':\n      return exports.M\n\n    case 'q':\n    case 'quartile':\n      return exports.Q\n\n    case 'h':\n    case 'high':\n      return exports.H\n\n    default:\n      throw new Error('Unknown EC Level: ' + string)\n  }\n}\n\nexports.isValid = function isValid (level) {\n  return level && typeof level.bit !== 'undefined' &&\n    level.bit >= 0 && level.bit < 4\n}\n\nexports.from = function from (value, defaultValue) {\n  if (exports.isValid(value)) {\n    return value\n  }\n\n  try {\n    return fromString(value)\n  } catch (e) {\n    return defaultValue\n  }\n}\n", "function BitBuffer () {\n  this.buffer = []\n  this.length = 0\n}\n\nBitBuffer.prototype = {\n\n  get: function (index) {\n    const bufIndex = Math.floor(index / 8)\n    return ((this.buffer[bufIndex] >>> (7 - index % 8)) & 1) === 1\n  },\n\n  put: function (num, length) {\n    for (let i = 0; i < length; i++) {\n      this.putBit(((num >>> (length - i - 1)) & 1) === 1)\n    }\n  },\n\n  getLengthInBits: function () {\n    return this.length\n  },\n\n  putBit: function (bit) {\n    const bufIndex = Math.floor(this.length / 8)\n    if (this.buffer.length <= bufIndex) {\n      this.buffer.push(0)\n    }\n\n    if (bit) {\n      this.buffer[bufIndex] |= (0x80 >>> (this.length % 8))\n    }\n\n    this.length++\n  }\n}\n\nmodule.exports = BitBuffer\n", "/**\n * Helper class to handle QR Code symbol modules\n *\n * @param {Number} size Symbol size\n */\nfunction BitMatrix (size) {\n  if (!size || size < 1) {\n    throw new Error('BitMatrix size must be defined and greater than 0')\n  }\n\n  this.size = size\n  this.data = new Uint8Array(size * size)\n  this.reservedBit = new Uint8Array(size * size)\n}\n\n/**\n * Set bit value at specified location\n * If reserved flag is set, this bit will be ignored during masking process\n *\n * @param {Number}  row\n * @param {Number}  col\n * @param {Boolean} value\n * @param {Boolean} reserved\n */\nBitMatrix.prototype.set = function (row, col, value, reserved) {\n  const index = row * this.size + col\n  this.data[index] = value\n  if (reserved) this.reservedBit[index] = true\n}\n\n/**\n * Returns bit value at specified location\n *\n * @param  {Number}  row\n * @param  {Number}  col\n * @return {Boolean}\n */\nBitMatrix.prototype.get = function (row, col) {\n  return this.data[row * this.size + col]\n}\n\n/**\n * Applies xor operator at specified location\n * (used during masking process)\n *\n * @param {Number}  row\n * @param {Number}  col\n * @param {Boolean} value\n */\nBitMatrix.prototype.xor = function (row, col, value) {\n  this.data[row * this.size + col] ^= value\n}\n\n/**\n * Check if bit at specified location is reserved\n *\n * @param {Number}   row\n * @param {Number}   col\n * @return {Boolean}\n */\nBitMatrix.prototype.isReserved = function (row, col) {\n  return this.reservedBit[row * this.size + col]\n}\n\nmodule.exports = BitMatrix\n", "/**\n * Alignment pattern are fixed reference pattern in defined positions\n * in a matrix symbology, which enables the decode software to re-synchronise\n * the coordinate mapping of the image modules in the event of moderate amounts\n * of distortion of the image.\n *\n * Alignment patterns are present only in QR Code symbols of version 2 or larger\n * and their number depends on the symbol version.\n */\n\nconst getSymbolSize = require('./utils').getSymbolSize\n\n/**\n * Calculate the row/column coordinates of the center module of each alignment pattern\n * for the specified QR Code version.\n *\n * The alignment patterns are positioned symmetrically on either side of the diagonal\n * running from the top left corner of the symbol to the bottom right corner.\n *\n * Since positions are simmetrical only half of the coordinates are returned.\n * Each item of the array will represent in turn the x and y coordinate.\n * @see {@link getPositions}\n *\n * @param  {Number} version QR Code version\n * @return {Array}          Array of coordinate\n */\nexports.getRowColCoords = function getRowColCoords (version) {\n  if (version === 1) return []\n\n  const posCount = Math.floor(version / 7) + 2\n  const size = getSymbolSize(version)\n  const intervals = size === 145 ? 26 : Math.ceil((size - 13) / (2 * posCount - 2)) * 2\n  const positions = [size - 7] // Last coord is always (size - 7)\n\n  for (let i = 1; i < posCount - 1; i++) {\n    positions[i] = positions[i - 1] - intervals\n  }\n\n  positions.push(6) // First coord is always 6\n\n  return positions.reverse()\n}\n\n/**\n * Returns an array containing the positions of each alignment pattern.\n * Each array's element represent the center point of the pattern as (x, y) coordinates\n *\n * Coordinates are calculated expanding the row/column coordinates returned by {@link getRowColCoords}\n * and filtering out the items that overlaps with finder pattern\n *\n * @example\n * For a Version 7 symbol {@link getRowColCoords} returns values 6, 22 and 38.\n * The alignment patterns, therefore, are to be centered on (row, column)\n * positions (6,22), (22,6), (22,22), (22,38), (38,22), (38,38).\n * Note that the coordinates (6,6), (6,38), (38,6) are occupied by finder patterns\n * and are not therefore used for alignment patterns.\n *\n * let pos = getPositions(7)\n * // [[6,22], [22,6], [22,22], [22,38], [38,22], [38,38]]\n *\n * @param  {Number} version QR Code version\n * @return {Array}          Array of coordinates\n */\nexports.getPositions = function getPositions (version) {\n  const coords = []\n  const pos = exports.getRowColCoords(version)\n  const posLength = pos.length\n\n  for (let i = 0; i < posLength; i++) {\n    for (let j = 0; j < posLength; j++) {\n      // Skip if position is occupied by finder patterns\n      if ((i === 0 && j === 0) || // top-left\n          (i === 0 && j === posLength - 1) || // bottom-left\n          (i === posLength - 1 && j === 0)) { // top-right\n        continue\n      }\n\n      coords.push([pos[i], pos[j]])\n    }\n  }\n\n  return coords\n}\n", "const getSymbolSize = require('./utils').getSymbolSize\nconst FINDER_PATTERN_SIZE = 7\n\n/**\n * Returns an array containing the positions of each finder pattern.\n * Each array's element represent the top-left point of the pattern as (x, y) coordinates\n *\n * @param  {Number} version QR Code version\n * @return {Array}          Array of coordinates\n */\nexports.getPositions = function getPositions (version) {\n  const size = getSymbolSize(version)\n\n  return [\n    // top-left\n    [0, 0],\n    // top-right\n    [size - FINDER_PATTERN_SIZE, 0],\n    // bottom-left\n    [0, size - FINDER_PATTERN_SIZE]\n  ]\n}\n", "/**\n * Data mask pattern reference\n * @type {Object}\n */\nexports.Patterns = {\n  PATTERN000: 0,\n  PATTERN001: 1,\n  PATTERN010: 2,\n  PATTERN011: 3,\n  PATTERN100: 4,\n  PATTERN101: 5,\n  PATTERN110: 6,\n  PATTERN111: 7\n}\n\n/**\n * Weighted penalty scores for the undesirable features\n * @type {Object}\n */\nconst PenaltyScores = {\n  N1: 3,\n  N2: 3,\n  N3: 40,\n  N4: 10\n}\n\n/**\n * Check if mask pattern value is valid\n *\n * @param  {Number}  mask    Mask pattern\n * @return {Boolean}         true if valid, false otherwise\n */\nexports.isValid = function isValid (mask) {\n  return mask != null && mask !== '' && !isNaN(mask) && mask >= 0 && mask <= 7\n}\n\n/**\n * Returns mask pattern from a value.\n * If value is not valid, returns undefined\n *\n * @param  {Number|String} value        Mask pattern value\n * @return {Number}                     Valid mask pattern or undefined\n */\nexports.from = function from (value) {\n  return exports.isValid(value) ? parseInt(value, 10) : undefined\n}\n\n/**\n* Find adjacent modules in row/column with the same color\n* and assign a penalty value.\n*\n* Points: N1 + i\n* i is the amount by which the number of adjacent modules of the same color exceeds 5\n*/\nexports.getPenaltyN1 = function getPenaltyN1 (data) {\n  const size = data.size\n  let points = 0\n  let sameCountCol = 0\n  let sameCountRow = 0\n  let lastCol = null\n  let lastRow = null\n\n  for (let row = 0; row < size; row++) {\n    sameCountCol = sameCountRow = 0\n    lastCol = lastRow = null\n\n    for (let col = 0; col < size; col++) {\n      let module = data.get(row, col)\n      if (module === lastCol) {\n        sameCountCol++\n      } else {\n        if (sameCountCol >= 5) points += PenaltyScores.N1 + (sameCountCol - 5)\n        lastCol = module\n        sameCountCol = 1\n      }\n\n      module = data.get(col, row)\n      if (module === lastRow) {\n        sameCountRow++\n      } else {\n        if (sameCountRow >= 5) points += PenaltyScores.N1 + (sameCountRow - 5)\n        lastRow = module\n        sameCountRow = 1\n      }\n    }\n\n    if (sameCountCol >= 5) points += PenaltyScores.N1 + (sameCountCol - 5)\n    if (sameCountRow >= 5) points += PenaltyScores.N1 + (sameCountRow - 5)\n  }\n\n  return points\n}\n\n/**\n * Find 2x2 blocks with the same color and assign a penalty value\n *\n * Points: N2 * (m - 1) * (n - 1)\n */\nexports.getPenaltyN2 = function getPenaltyN2 (data) {\n  const size = data.size\n  let points = 0\n\n  for (let row = 0; row < size - 1; row++) {\n    for (let col = 0; col < size - 1; col++) {\n      const last = data.get(row, col) +\n        data.get(row, col + 1) +\n        data.get(row + 1, col) +\n        data.get(row + 1, col + 1)\n\n      if (last === 4 || last === 0) points++\n    }\n  }\n\n  return points * PenaltyScores.N2\n}\n\n/**\n * Find 1:1:3:1:1 ratio (dark:light:dark:light:dark) pattern in row/column,\n * preceded or followed by light area 4 modules wide\n *\n * Points: N3 * number of pattern found\n */\nexports.getPenaltyN3 = function getPenaltyN3 (data) {\n  const size = data.size\n  let points = 0\n  let bitsCol = 0\n  let bitsRow = 0\n\n  for (let row = 0; row < size; row++) {\n    bitsCol = bitsRow = 0\n    for (let col = 0; col < size; col++) {\n      bitsCol = ((bitsCol << 1) & 0x7FF) | data.get(row, col)\n      if (col >= 10 && (bitsCol === 0x5D0 || bitsCol === 0x05D)) points++\n\n      bitsRow = ((bitsRow << 1) & 0x7FF) | data.get(col, row)\n      if (col >= 10 && (bitsRow === 0x5D0 || bitsRow === 0x05D)) points++\n    }\n  }\n\n  return points * PenaltyScores.N3\n}\n\n/**\n * Calculate proportion of dark modules in entire symbol\n *\n * Points: N4 * k\n *\n * k is the rating of the deviation of the proportion of dark modules\n * in the symbol from 50% in steps of 5%\n */\nexports.getPenaltyN4 = function getPenaltyN4 (data) {\n  let darkCount = 0\n  const modulesCount = data.data.length\n\n  for (let i = 0; i < modulesCount; i++) darkCount += data.data[i]\n\n  const k = Math.abs(Math.ceil((darkCount * 100 / modulesCount) / 5) - 10)\n\n  return k * PenaltyScores.N4\n}\n\n/**\n * Return mask value at given position\n *\n * @param  {Number} maskPattern Pattern reference value\n * @param  {Number} i           Row\n * @param  {Number} j           Column\n * @return {Boolean}            Mask value\n */\nfunction getMaskAt (maskPattern, i, j) {\n  switch (maskPattern) {\n    case exports.Patterns.PATTERN000: return (i + j) % 2 === 0\n    case exports.Patterns.PATTERN001: return i % 2 === 0\n    case exports.Patterns.PATTERN010: return j % 3 === 0\n    case exports.Patterns.PATTERN011: return (i + j) % 3 === 0\n    case exports.Patterns.PATTERN100: return (Math.floor(i / 2) + Math.floor(j / 3)) % 2 === 0\n    case exports.Patterns.PATTERN101: return (i * j) % 2 + (i * j) % 3 === 0\n    case exports.Patterns.PATTERN110: return ((i * j) % 2 + (i * j) % 3) % 2 === 0\n    case exports.Patterns.PATTERN111: return ((i * j) % 3 + (i + j) % 2) % 2 === 0\n\n    default: throw new Error('bad maskPattern:' + maskPattern)\n  }\n}\n\n/**\n * Apply a mask pattern to a BitMatrix\n *\n * @param  {Number}    pattern Pattern reference number\n * @param  {BitMatrix} data    BitMatrix data\n */\nexports.applyMask = function applyMask (pattern, data) {\n  const size = data.size\n\n  for (let col = 0; col < size; col++) {\n    for (let row = 0; row < size; row++) {\n      if (data.isReserved(row, col)) continue\n      data.xor(row, col, getMaskAt(pattern, row, col))\n    }\n  }\n}\n\n/**\n * Returns the best mask pattern for data\n *\n * @param  {BitMatrix} data\n * @return {Number} Mask pattern reference number\n */\nexports.getBestMask = function getBestMask (data, setupFormatFunc) {\n  const numPatterns = Object.keys(exports.Patterns).length\n  let bestPattern = 0\n  let lowerPenalty = Infinity\n\n  for (let p = 0; p < numPatterns; p++) {\n    setupFormatFunc(p)\n    exports.applyMask(p, data)\n\n    // Calculate penalty\n    const penalty =\n      exports.getPenaltyN1(data) +\n      exports.getPenaltyN2(data) +\n      exports.getPenaltyN3(data) +\n      exports.getPenaltyN4(data)\n\n    // Undo previously applied mask\n    exports.applyMask(p, data)\n\n    if (penalty < lowerPenalty) {\n      lowerPenalty = penalty\n      bestPattern = p\n    }\n  }\n\n  return bestPattern\n}\n", "const ECLevel = require('./error-correction-level')\r\n\r\nconst EC_BLOCKS_TABLE = [\r\n// L  M  Q  H\r\n  1, 1, 1, 1,\r\n  1, 1, 1, 1,\r\n  1, 1, 2, 2,\r\n  1, 2, 2, 4,\r\n  1, 2, 4, 4,\r\n  2, 4, 4, 4,\r\n  2, 4, 6, 5,\r\n  2, 4, 6, 6,\r\n  2, 5, 8, 8,\r\n  4, 5, 8, 8,\r\n  4, 5, 8, 11,\r\n  4, 8, 10, 11,\r\n  4, 9, 12, 16,\r\n  4, 9, 16, 16,\r\n  6, 10, 12, 18,\r\n  6, 10, 17, 16,\r\n  6, 11, 16, 19,\r\n  6, 13, 18, 21,\r\n  7, 14, 21, 25,\r\n  8, 16, 20, 25,\r\n  8, 17, 23, 25,\r\n  9, 17, 23, 34,\r\n  9, 18, 25, 30,\r\n  10, 20, 27, 32,\r\n  12, 21, 29, 35,\r\n  12, 23, 34, 37,\r\n  12, 25, 34, 40,\r\n  13, 26, 35, 42,\r\n  14, 28, 38, 45,\r\n  15, 29, 40, 48,\r\n  16, 31, 43, 51,\r\n  17, 33, 45, 54,\r\n  18, 35, 48, 57,\r\n  19, 37, 51, 60,\r\n  19, 38, 53, 63,\r\n  20, 40, 56, 66,\r\n  21, 43, 59, 70,\r\n  22, 45, 62, 74,\r\n  24, 47, 65, 77,\r\n  25, 49, 68, 81\r\n]\r\n\r\nconst EC_CODEWORDS_TABLE = [\r\n// L  M  Q  H\r\n  7, 10, 13, 17,\r\n  10, 16, 22, 28,\r\n  15, 26, 36, 44,\r\n  20, 36, 52, 64,\r\n  26, 48, 72, 88,\r\n  36, 64, 96, 112,\r\n  40, 72, 108, 130,\r\n  48, 88, 132, 156,\r\n  60, 110, 160, 192,\r\n  72, 130, 192, 224,\r\n  80, 150, 224, 264,\r\n  96, 176, 260, 308,\r\n  104, 198, 288, 352,\r\n  120, 216, 320, 384,\r\n  132, 240, 360, 432,\r\n  144, 280, 408, 480,\r\n  168, 308, 448, 532,\r\n  180, 338, 504, 588,\r\n  196, 364, 546, 650,\r\n  224, 416, 600, 700,\r\n  224, 442, 644, 750,\r\n  252, 476, 690, 816,\r\n  270, 504, 750, 900,\r\n  300, 560, 810, 960,\r\n  312, 588, 870, 1050,\r\n  336, 644, 952, 1110,\r\n  360, 700, 1020, 1200,\r\n  390, 728, 1050, 1260,\r\n  420, 784, 1140, 1350,\r\n  450, 812, 1200, 1440,\r\n  480, 868, 1290, 1530,\r\n  510, 924, 1350, 1620,\r\n  540, 980, 1440, 1710,\r\n  570, 1036, 1530, 1800,\r\n  570, 1064, 1590, 1890,\r\n  600, 1120, 1680, 1980,\r\n  630, 1204, 1770, 2100,\r\n  660, 1260, 1860, 2220,\r\n  720, 1316, 1950, 2310,\r\n  750, 1372, 2040, 2430\r\n]\r\n\r\n/**\r\n * Returns the number of error correction block that the QR Code should contain\r\n * for the specified version and error correction level.\r\n *\r\n * @param  {Number} version              QR Code version\r\n * @param  {Number} errorCorrectionLevel Error correction level\r\n * @return {Number}                      Number of error correction blocks\r\n */\r\nexports.getBlocksCount = function getBlocksCount (version, errorCorrectionLevel) {\r\n  switch (errorCorrectionLevel) {\r\n    case ECLevel.L:\r\n      return EC_BLOCKS_TABLE[(version - 1) * 4 + 0]\r\n    case ECLevel.M:\r\n      return EC_BLOCKS_TABLE[(version - 1) * 4 + 1]\r\n    case ECLevel.Q:\r\n      return EC_BLOCKS_TABLE[(version - 1) * 4 + 2]\r\n    case ECLevel.H:\r\n      return EC_BLOCKS_TABLE[(version - 1) * 4 + 3]\r\n    default:\r\n      return undefined\r\n  }\r\n}\r\n\r\n/**\r\n * Returns the number of error correction codewords to use for the specified\r\n * version and error correction level.\r\n *\r\n * @param  {Number} version              QR Code version\r\n * @param  {Number} errorCorrectionLevel Error correction level\r\n * @return {Number}                      Number of error correction codewords\r\n */\r\nexports.getTotalCodewordsCount = function getTotalCodewordsCount (version, errorCorrectionLevel) {\r\n  switch (errorCorrectionLevel) {\r\n    case ECLevel.L:\r\n      return EC_CODEWORDS_TABLE[(version - 1) * 4 + 0]\r\n    case ECLevel.M:\r\n      return EC_CODEWORDS_TABLE[(version - 1) * 4 + 1]\r\n    case ECLevel.Q:\r\n      return EC_CODEWORDS_TABLE[(version - 1) * 4 + 2]\r\n    case ECLevel.H:\r\n      return EC_CODEWORDS_TABLE[(version - 1) * 4 + 3]\r\n    default:\r\n      return undefined\r\n  }\r\n}\r\n", "const EXP_TABLE = new Uint8Array(512)\nconst LOG_TABLE = new Uint8Array(256)\n/**\n * Precompute the log and anti-log tables for faster computation later\n *\n * For each possible value in the galois field 2^8, we will pre-compute\n * the logarithm and anti-logarithm (exponential) of this value\n *\n * ref {@link https://en.wikiversity.org/wiki/Reed%E2%80%93Solomon_codes_for_coders#Introduction_to_mathematical_fields}\n */\n;(function initTables () {\n  let x = 1\n  for (let i = 0; i < 255; i++) {\n    EXP_TABLE[i] = x\n    LOG_TABLE[x] = i\n\n    x <<= 1 // multiply by 2\n\n    // The QR code specification says to use byte-wise modulo 100011101 arithmetic.\n    // This means that when a number is 256 or larger, it should be XORed with 0x11D.\n    if (x & 0x100) { // similar to x >= 256, but a lot faster (because 0x100 == 256)\n      x ^= 0x11D\n    }\n  }\n\n  // Optimization: double the size of the anti-log table so that we don't need to mod 255 to\n  // stay inside the bounds (because we will mainly use this table for the multiplication of\n  // two GF numbers, no more).\n  // @see {@link mul}\n  for (let i = 255; i < 512; i++) {\n    EXP_TABLE[i] = EXP_TABLE[i - 255]\n  }\n}())\n\n/**\n * Returns log value of n inside Galois Field\n *\n * @param  {Number} n\n * @return {Number}\n */\nexports.log = function log (n) {\n  if (n < 1) throw new Error('log(' + n + ')')\n  return LOG_TABLE[n]\n}\n\n/**\n * Returns anti-log value of n inside Galois Field\n *\n * @param  {Number} n\n * @return {Number}\n */\nexports.exp = function exp (n) {\n  return EXP_TABLE[n]\n}\n\n/**\n * Multiplies two number inside Galois Field\n *\n * @param  {Number} x\n * @param  {Number} y\n * @return {Number}\n */\nexports.mul = function mul (x, y) {\n  if (x === 0 || y === 0) return 0\n\n  // should be EXP_TABLE[(LOG_TABLE[x] + LOG_TABLE[y]) % 255] if EXP_TABLE wasn't oversized\n  // @see {@link initTables}\n  return EXP_TABLE[LOG_TABLE[x] + LOG_TABLE[y]]\n}\n", "const GF = require('./galois-field')\n\n/**\n * Multiplies two polynomials inside Galois Field\n *\n * @param  {Uint8Array} p1 Polynomial\n * @param  {Uint8Array} p2 Polynomial\n * @return {Uint8Array}    Product of p1 and p2\n */\nexports.mul = function mul (p1, p2) {\n  const coeff = new Uint8Array(p1.length + p2.length - 1)\n\n  for (let i = 0; i < p1.length; i++) {\n    for (let j = 0; j < p2.length; j++) {\n      coeff[i + j] ^= GF.mul(p1[i], p2[j])\n    }\n  }\n\n  return coeff\n}\n\n/**\n * Calculate the remainder of polynomials division\n *\n * @param  {Uint8Array} divident Polynomial\n * @param  {Uint8Array} divisor  Polynomial\n * @return {Uint8Array}          Remainder\n */\nexports.mod = function mod (divident, divisor) {\n  let result = new Uint8Array(divident)\n\n  while ((result.length - divisor.length) >= 0) {\n    const coeff = result[0]\n\n    for (let i = 0; i < divisor.length; i++) {\n      result[i] ^= GF.mul(divisor[i], coeff)\n    }\n\n    // remove all zeros from buffer head\n    let offset = 0\n    while (offset < result.length && result[offset] === 0) offset++\n    result = result.slice(offset)\n  }\n\n  return result\n}\n\n/**\n * Generate an irreducible generator polynomial of specified degree\n * (used by Reed-Solomon encoder)\n *\n * @param  {Number} degree Degree of the generator polynomial\n * @return {Uint8Array}    Buffer containing polynomial coefficients\n */\nexports.generateECPolynomial = function generateECPolynomial (degree) {\n  let poly = new Uint8Array([1])\n  for (let i = 0; i < degree; i++) {\n    poly = exports.mul(poly, new Uint8Array([1, GF.exp(i)]))\n  }\n\n  return poly\n}\n", "const Polynomial = require('./polynomial')\n\nfunction ReedSolomonEncoder (degree) {\n  this.genPoly = undefined\n  this.degree = degree\n\n  if (this.degree) this.initialize(this.degree)\n}\n\n/**\n * Initialize the encoder.\n * The input param should correspond to the number of error correction codewords.\n *\n * @param  {Number} degree\n */\nReedSolomonEncoder.prototype.initialize = function initialize (degree) {\n  // create an irreducible generator polynomial\n  this.degree = degree\n  this.genPoly = Polynomial.generateECPolynomial(this.degree)\n}\n\n/**\n * Encodes a chunk of data\n *\n * @param  {Uint8Array} data Buffer containing input data\n * @return {Uint8Array}      Buffer containing encoded data\n */\nReedSolomonEncoder.prototype.encode = function encode (data) {\n  if (!this.genPoly) {\n    throw new Error('Encoder not initialized')\n  }\n\n  // Calculate EC for this data block\n  // extends data size to data+genPoly size\n  const paddedData = new Uint8Array(data.length + this.degree)\n  paddedData.set(data)\n\n  // The error correction codewords are the remainder after dividing the data codewords\n  // by a generator polynomial\n  const remainder = Polynomial.mod(paddedData, this.genPoly)\n\n  // return EC data blocks (last n byte, where n is the degree of genPoly)\n  // If coefficients number in remainder are less than genPoly degree,\n  // pad with 0s to the left to reach the needed number of coefficients\n  const start = this.degree - remainder.length\n  if (start > 0) {\n    const buff = new Uint8Array(this.degree)\n    buff.set(remainder, start)\n\n    return buff\n  }\n\n  return remainder\n}\n\nmodule.exports = ReedSolomonEncoder\n", "/**\n * Check if QR Code version is valid\n *\n * @param  {Number}  version QR Code version\n * @return {Boolean}         true if valid version, false otherwise\n */\nexports.isValid = function isValid (version) {\n  return !isNaN(version) && version >= 1 && version <= 40\n}\n", "const numeric = '[0-9]+'\nconst alphanumeric = '[A-Z $%*+\\\\-./:]+'\nlet kanji = '(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|' +\n  '[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|' +\n  '[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|' +\n  '[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+'\nkanji = kanji.replace(/u/g, '\\\\u')\n\nconst byte = '(?:(?![A-Z0-9 $%*+\\\\-./:]|' + kanji + ')(?:.|[\\r\\n]))+'\n\nexports.KANJI = new RegExp(kanji, 'g')\nexports.BYTE_KANJI = new RegExp('[^A-Z0-9 $%*+\\\\-./:]+', 'g')\nexports.BYTE = new RegExp(byte, 'g')\nexports.NUMERIC = new RegExp(numeric, 'g')\nexports.ALPHANUMERIC = new RegExp(alphanumeric, 'g')\n\nconst TEST_KANJI = new RegExp('^' + kanji + '$')\nconst TEST_NUMERIC = new RegExp('^' + numeric + '$')\nconst TEST_ALPHANUMERIC = new RegExp('^[A-Z0-9 $%*+\\\\-./:]+$')\n\nexports.testKanji = function testKanji (str) {\n  return TEST_KANJI.test(str)\n}\n\nexports.testNumeric = function testNumeric (str) {\n  return TEST_NUMERIC.test(str)\n}\n\nexports.testAlphanumeric = function testAlphanumeric (str) {\n  return TEST_ALPHANUMERIC.test(str)\n}\n", "const VersionCheck = require('./version-check')\nconst Regex = require('./regex')\n\n/**\n * Numeric mode encodes data from the decimal digit set (0 - 9)\n * (byte values 30HEX to 39HEX).\n * Normally, 3 data characters are represented by 10 bits.\n *\n * @type {Object}\n */\nexports.NUMERIC = {\n  id: 'Numeric',\n  bit: 1 << 0,\n  ccBits: [10, 12, 14]\n}\n\n/**\n * Alphanumeric mode encodes data from a set of 45 characters,\n * i.e. 10 numeric digits (0 - 9),\n *      26 alphabetic characters (A - Z),\n *   and 9 symbols (SP, $, %, *, +, -, ., /, :).\n * Normally, two input characters are represented by 11 bits.\n *\n * @type {Object}\n */\nexports.ALPHANUMERIC = {\n  id: 'Alphanumeric',\n  bit: 1 << 1,\n  ccBits: [9, 11, 13]\n}\n\n/**\n * In byte mode, data is encoded at 8 bits per character.\n *\n * @type {Object}\n */\nexports.BYTE = {\n  id: 'Byte',\n  bit: 1 << 2,\n  ccBits: [8, 16, 16]\n}\n\n/**\n * The Kanji mode efficiently encodes Kanji characters in accordance with\n * the Shift JIS system based on JIS X 0208.\n * The Shift JIS values are shifted from the JIS X 0208 values.\n * JIS X 0208 gives details of the shift coded representation.\n * Each two-byte character value is compacted to a 13-bit binary codeword.\n *\n * @type {Object}\n */\nexports.KANJI = {\n  id: 'Kanji',\n  bit: 1 << 3,\n  ccBits: [8, 10, 12]\n}\n\n/**\n * Mixed mode will contain a sequences of data in a combination of any of\n * the modes described above\n *\n * @type {Object}\n */\nexports.MIXED = {\n  bit: -1\n}\n\n/**\n * Returns the number of bits needed to store the data length\n * according to QR Code specifications.\n *\n * @param  {Mode}   mode    Data mode\n * @param  {Number} version QR Code version\n * @return {Number}         Number of bits\n */\nexports.getCharCountIndicator = function getCharCountIndicator (mode, version) {\n  if (!mode.ccBits) throw new Error('Invalid mode: ' + mode)\n\n  if (!VersionCheck.isValid(version)) {\n    throw new Error('Invalid version: ' + version)\n  }\n\n  if (version >= 1 && version < 10) return mode.ccBits[0]\n  else if (version < 27) return mode.ccBits[1]\n  return mode.ccBits[2]\n}\n\n/**\n * Returns the most efficient mode to store the specified data\n *\n * @param  {String} dataStr Input data string\n * @return {Mode}           Best mode\n */\nexports.getBestModeForData = function getBestModeForData (dataStr) {\n  if (Regex.testNumeric(dataStr)) return exports.NUMERIC\n  else if (Regex.testAlphanumeric(dataStr)) return exports.ALPHANUMERIC\n  else if (Regex.testKanji(dataStr)) return exports.KANJI\n  else return exports.BYTE\n}\n\n/**\n * Return mode name as string\n *\n * @param {Mode} mode Mode object\n * @returns {String}  Mode name\n */\nexports.toString = function toString (mode) {\n  if (mode && mode.id) return mode.id\n  throw new Error('Invalid mode')\n}\n\n/**\n * Check if input param is a valid mode object\n *\n * @param   {Mode}    mode Mode object\n * @returns {Boolean} True if valid mode, false otherwise\n */\nexports.isValid = function isValid (mode) {\n  return mode && mode.bit && mode.ccBits\n}\n\n/**\n * Get mode object from its name\n *\n * @param   {String} string Mode name\n * @returns {Mode}          Mode object\n */\nfunction fromString (string) {\n  if (typeof string !== 'string') {\n    throw new Error('Param is not a string')\n  }\n\n  const lcStr = string.toLowerCase()\n\n  switch (lcStr) {\n    case 'numeric':\n      return exports.NUMERIC\n    case 'alphanumeric':\n      return exports.ALPHANUMERIC\n    case 'kanji':\n      return exports.KANJI\n    case 'byte':\n      return exports.BYTE\n    default:\n      throw new Error('Unknown mode: ' + string)\n  }\n}\n\n/**\n * Returns mode from a value.\n * If value is not a valid mode, returns defaultValue\n *\n * @param  {Mode|String} value        Encoding mode\n * @param  {Mode}        defaultValue Fallback value\n * @return {Mode}                     Encoding mode\n */\nexports.from = function from (value, defaultValue) {\n  if (exports.isValid(value)) {\n    return value\n  }\n\n  try {\n    return fromString(value)\n  } catch (e) {\n    return defaultValue\n  }\n}\n", "const Utils = require('./utils')\nconst ECCode = require('./error-correction-code')\nconst ECLevel = require('./error-correction-level')\nconst Mode = require('./mode')\nconst VersionCheck = require('./version-check')\n\n// Generator polynomial used to encode version information\nconst G18 = (1 << 12) | (1 << 11) | (1 << 10) | (1 << 9) | (1 << 8) | (1 << 5) | (1 << 2) | (1 << 0)\nconst G18_BCH = Utils.getBCHDigit(G18)\n\nfunction getBestVersionForDataLength (mode, length, errorCorrectionLevel) {\n  for (let currentVersion = 1; currentVersion <= 40; currentVersion++) {\n    if (length <= exports.getCapacity(currentVersion, errorCorrectionLevel, mode)) {\n      return currentVersion\n    }\n  }\n\n  return undefined\n}\n\nfunction getReservedBitsCount (mode, version) {\n  // Character count indicator + mode indicator bits\n  return Mode.getCharCountIndicator(mode, version) + 4\n}\n\nfunction getTotalBitsFromDataArray (segments, version) {\n  let totalBits = 0\n\n  segments.forEach(function (data) {\n    const reservedBits = getReservedBitsCount(data.mode, version)\n    totalBits += reservedBits + data.getBitsLength()\n  })\n\n  return totalBits\n}\n\nfunction getBestVersionForMixedData (segments, errorCorrectionLevel) {\n  for (let currentVersion = 1; currentVersion <= 40; currentVersion++) {\n    const length = getTotalBitsFromDataArray(segments, currentVersion)\n    if (length <= exports.getCapacity(currentVersion, errorCorrectionLevel, Mode.MIXED)) {\n      return currentVersion\n    }\n  }\n\n  return undefined\n}\n\n/**\n * Returns version number from a value.\n * If value is not a valid version, returns defaultValue\n *\n * @param  {Number|String} value        QR Code version\n * @param  {Number}        defaultValue Fallback value\n * @return {Number}                     QR Code version number\n */\nexports.from = function from (value, defaultValue) {\n  if (VersionCheck.isValid(value)) {\n    return parseInt(value, 10)\n  }\n\n  return defaultValue\n}\n\n/**\n * Returns how much data can be stored with the specified QR code version\n * and error correction level\n *\n * @param  {Number} version              QR Code version (1-40)\n * @param  {Number} errorCorrectionLevel Error correction level\n * @param  {Mode}   mode                 Data mode\n * @return {Number}                      Quantity of storable data\n */\nexports.getCapacity = function getCapacity (version, errorCorrectionLevel, mode) {\n  if (!VersionCheck.isValid(version)) {\n    throw new Error('Invalid QR Code version')\n  }\n\n  // Use Byte mode as default\n  if (typeof mode === 'undefined') mode = Mode.BYTE\n\n  // Total codewords for this QR code version (Data + Error correction)\n  const totalCodewords = Utils.getSymbolTotalCodewords(version)\n\n  // Total number of error correction codewords\n  const ecTotalCodewords = ECCode.getTotalCodewordsCount(version, errorCorrectionLevel)\n\n  // Total number of data codewords\n  const dataTotalCodewordsBits = (totalCodewords - ecTotalCodewords) * 8\n\n  if (mode === Mode.MIXED) return dataTotalCodewordsBits\n\n  const usableBits = dataTotalCodewordsBits - getReservedBitsCount(mode, version)\n\n  // Return max number of storable codewords\n  switch (mode) {\n    case Mode.NUMERIC:\n      return Math.floor((usableBits / 10) * 3)\n\n    case Mode.ALPHANUMERIC:\n      return Math.floor((usableBits / 11) * 2)\n\n    case Mode.KANJI:\n      return Math.floor(usableBits / 13)\n\n    case Mode.BYTE:\n    default:\n      return Math.floor(usableBits / 8)\n  }\n}\n\n/**\n * Returns the minimum version needed to contain the amount of data\n *\n * @param  {Segment} data                    Segment of data\n * @param  {Number} [errorCorrectionLevel=H] Error correction level\n * @param  {Mode} mode                       Data mode\n * @return {Number}                          QR Code version\n */\nexports.getBestVersionForData = function getBestVersionForData (data, errorCorrectionLevel) {\n  let seg\n\n  const ecl = ECLevel.from(errorCorrectionLevel, ECLevel.M)\n\n  if (Array.isArray(data)) {\n    if (data.length > 1) {\n      return getBestVersionForMixedData(data, ecl)\n    }\n\n    if (data.length === 0) {\n      return 1\n    }\n\n    seg = data[0]\n  } else {\n    seg = data\n  }\n\n  return getBestVersionForDataLength(seg.mode, seg.getLength(), ecl)\n}\n\n/**\n * Returns version information with relative error correction bits\n *\n * The version information is included in QR Code symbols of version 7 or larger.\n * It consists of an 18-bit sequence containing 6 data bits,\n * with 12 error correction bits calculated using the (18, 6) Golay code.\n *\n * @param  {Number} version QR Code version\n * @return {Number}         Encoded version info bits\n */\nexports.getEncodedBits = function getEncodedBits (version) {\n  if (!VersionCheck.isValid(version) || version < 7) {\n    throw new Error('Invalid QR Code version')\n  }\n\n  let d = version << 12\n\n  while (Utils.getBCHDigit(d) - G18_BCH >= 0) {\n    d ^= (G18 << (Utils.getBCHDigit(d) - G18_BCH))\n  }\n\n  return (version << 12) | d\n}\n", "const Utils = require('./utils')\n\nconst G15 = (1 << 10) | (1 << 8) | (1 << 5) | (1 << 4) | (1 << 2) | (1 << 1) | (1 << 0)\nconst G15_MASK = (1 << 14) | (1 << 12) | (1 << 10) | (1 << 4) | (1 << 1)\nconst G15_BCH = Utils.getBCHDigit(G15)\n\n/**\n * Returns format information with relative error correction bits\n *\n * The format information is a 15-bit sequence containing 5 data bits,\n * with 10 error correction bits calculated using the (15, 5) BCH code.\n *\n * @param  {Number} errorCorrectionLevel Error correction level\n * @param  {Number} mask                 Mask pattern\n * @return {Number}                      Encoded format information bits\n */\nexports.getEncodedBits = function getEncodedBits (errorCorrectionLevel, mask) {\n  const data = ((errorCorrectionLevel.bit << 3) | mask)\n  let d = data << 10\n\n  while (Utils.getBCHDigit(d) - G15_BCH >= 0) {\n    d ^= (G15 << (Utils.getBCHDigit(d) - G15_BCH))\n  }\n\n  // xor final data with mask pattern in order to ensure that\n  // no combination of Error Correction Level and data mask pattern\n  // will result in an all-zero data string\n  return ((data << 10) | d) ^ G15_MASK\n}\n", "const Mode = require('./mode')\n\nfunction NumericData (data) {\n  this.mode = Mode.NUMERIC\n  this.data = data.toString()\n}\n\nNumericData.getBitsLength = function getBitsLength (length) {\n  return 10 * Math.floor(length / 3) + ((length % 3) ? ((length % 3) * 3 + 1) : 0)\n}\n\nNumericData.prototype.getLength = function getLength () {\n  return this.data.length\n}\n\nNumericData.prototype.getBitsLength = function getBitsLength () {\n  return NumericData.getBitsLength(this.data.length)\n}\n\nNumericData.prototype.write = function write (bitBuffer) {\n  let i, group, value\n\n  // The input data string is divided into groups of three digits,\n  // and each group is converted to its 10-bit binary equivalent.\n  for (i = 0; i + 3 <= this.data.length; i += 3) {\n    group = this.data.substr(i, 3)\n    value = parseInt(group, 10)\n\n    bitBuffer.put(value, 10)\n  }\n\n  // If the number of input digits is not an exact multiple of three,\n  // the final one or two digits are converted to 4 or 7 bits respectively.\n  const remainingNum = this.data.length - i\n  if (remainingNum > 0) {\n    group = this.data.substr(i)\n    value = parseInt(group, 10)\n\n    bitBuffer.put(value, remainingNum * 3 + 1)\n  }\n}\n\nmodule.exports = NumericData\n", "const Mode = require('./mode')\n\n/**\n * Array of characters available in alphanumeric mode\n *\n * As per QR Code specification, to each character\n * is assigned a value from 0 to 44 which in this case coincides\n * with the array index\n *\n * @type {Array}\n */\nconst ALPHA_NUM_CHARS = [\n  '0', '1', '2', '3', '4', '5', '6', '7', '8', '9',\n  'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M',\n  'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z',\n  ' ', '$', '%', '*', '+', '-', '.', '/', ':'\n]\n\nfunction AlphanumericData (data) {\n  this.mode = Mode.ALPHANUMERIC\n  this.data = data\n}\n\nAlphanumericData.getBitsLength = function getBitsLength (length) {\n  return 11 * Math.floor(length / 2) + 6 * (length % 2)\n}\n\nAlphanumericData.prototype.getLength = function getLength () {\n  return this.data.length\n}\n\nAlphanumericData.prototype.getBitsLength = function getBitsLength () {\n  return AlphanumericData.getBitsLength(this.data.length)\n}\n\nAlphanumericData.prototype.write = function write (bitBuffer) {\n  let i\n\n  // Input data characters are divided into groups of two characters\n  // and encoded as 11-bit binary codes.\n  for (i = 0; i + 2 <= this.data.length; i += 2) {\n    // The character value of the first character is multiplied by 45\n    let value = ALPHA_NUM_CHARS.indexOf(this.data[i]) * 45\n\n    // The character value of the second digit is added to the product\n    value += ALPHA_NUM_CHARS.indexOf(this.data[i + 1])\n\n    // The sum is then stored as 11-bit binary number\n    bitBuffer.put(value, 11)\n  }\n\n  // If the number of input data characters is not a multiple of two,\n  // the character value of the final character is encoded as a 6-bit binary number.\n  if (this.data.length % 2) {\n    bitBuffer.put(ALPHA_NUM_CHARS.indexOf(this.data[i]), 6)\n  }\n}\n\nmodule.exports = AlphanumericData\n", "const Mode = require('./mode')\n\nfunction ByteData (data) {\n  this.mode = Mode.BYTE\n  if (typeof (data) === 'string') {\n    this.data = new TextEncoder().encode(data)\n  } else {\n    this.data = new Uint8Array(data)\n  }\n}\n\nByteData.getBitsLength = function getBitsLength (length) {\n  return length * 8\n}\n\nByteData.prototype.getLength = function getLength () {\n  return this.data.length\n}\n\nByteData.prototype.getBitsLength = function getBitsLength () {\n  return ByteData.getBitsLength(this.data.length)\n}\n\nByteData.prototype.write = function (bitBuffer) {\n  for (let i = 0, l = this.data.length; i < l; i++) {\n    bitBuffer.put(this.data[i], 8)\n  }\n}\n\nmodule.exports = ByteData\n", "const Mode = require('./mode')\nconst Utils = require('./utils')\n\nfunction KanjiData (data) {\n  this.mode = Mode.KANJI\n  this.data = data\n}\n\nKanjiData.getBitsLength = function getBitsLength (length) {\n  return length * 13\n}\n\nKanjiData.prototype.getLength = function getLength () {\n  return this.data.length\n}\n\nKanjiData.prototype.getBitsLength = function getBitsLength () {\n  return KanjiData.getBitsLength(this.data.length)\n}\n\nKanjiData.prototype.write = function (bitBuffer) {\n  let i\n\n  // In the Shift JIS system, Kanji characters are represented by a two byte combination.\n  // These byte values are shifted from the JIS X 0208 values.\n  // JIS X 0208 gives details of the shift coded representation.\n  for (i = 0; i < this.data.length; i++) {\n    let value = Utils.toSJIS(this.data[i])\n\n    // For characters with Shift JIS values from 0x8140 to 0x9FFC:\n    if (value >= 0x8140 && value <= 0x9FFC) {\n      // Subtract 0x8140 from Shift JIS value\n      value -= 0x8140\n\n    // For characters with Shift JIS values from 0xE040 to 0xEBBF\n    } else if (value >= 0xE040 && value <= 0xEBBF) {\n      // Subtract 0xC140 from Shift JIS value\n      value -= 0xC140\n    } else {\n      throw new Error(\n        'Invalid SJIS character: ' + this.data[i] + '\\n' +\n        'Make sure your charset is UTF-8')\n    }\n\n    // Multiply most significant byte of result by 0xC0\n    // and add least significant byte to product\n    value = (((value >>> 8) & 0xff) * 0xC0) + (value & 0xff)\n\n    // Convert result to a 13-bit binary string\n    bitBuffer.put(value, 13)\n  }\n}\n\nmodule.exports = KanjiData\n", "'use strict';\n\n/******************************************************************************\n * Created 2008-08-19.\n *\n * Dijkstra path-finding functions. Adapted from the Dijkstar Python project.\n *\n * Copyright (C) 2008\n *   Wyatt Baldwin <self@wyattbaldwin.com>\n *   All rights reserved\n *\n * Licensed under the MIT license.\n *\n *   http://www.opensource.org/licenses/mit-license.php\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n *****************************************************************************/\nvar dijkstra = {\n  single_source_shortest_paths: function(graph, s, d) {\n    // Predecessor map for each node that has been encountered.\n    // node ID => predecessor node ID\n    var predecessors = {};\n\n    // Costs of shortest paths from s to all nodes encountered.\n    // node ID => cost\n    var costs = {};\n    costs[s] = 0;\n\n    // Costs of shortest paths from s to all nodes encountered; differs from\n    // `costs` in that it provides easy access to the node that currently has\n    // the known shortest path from s.\n    // XXX: Do we actually need both `costs` and `open`?\n    var open = dijkstra.PriorityQueue.make();\n    open.push(s, 0);\n\n    var closest,\n        u, v,\n        cost_of_s_to_u,\n        adjacent_nodes,\n        cost_of_e,\n        cost_of_s_to_u_plus_cost_of_e,\n        cost_of_s_to_v,\n        first_visit;\n    while (!open.empty()) {\n      // In the nodes remaining in graph that have a known cost from s,\n      // find the node, u, that currently has the shortest path from s.\n      closest = open.pop();\n      u = closest.value;\n      cost_of_s_to_u = closest.cost;\n\n      // Get nodes adjacent to u...\n      adjacent_nodes = graph[u] || {};\n\n      // ...and explore the edges that connect u to those nodes, updating\n      // the cost of the shortest paths to any or all of those nodes as\n      // necessary. v is the node across the current edge from u.\n      for (v in adjacent_nodes) {\n        if (adjacent_nodes.hasOwnProperty(v)) {\n          // Get the cost of the edge running from u to v.\n          cost_of_e = adjacent_nodes[v];\n\n          // Cost of s to u plus the cost of u to v across e--this is *a*\n          // cost from s to v that may or may not be less than the current\n          // known cost to v.\n          cost_of_s_to_u_plus_cost_of_e = cost_of_s_to_u + cost_of_e;\n\n          // If we haven't visited v yet OR if the current known cost from s to\n          // v is greater than the new cost we just found (cost of s to u plus\n          // cost of u to v across e), update v's cost in the cost list and\n          // update v's predecessor in the predecessor list (it's now u).\n          cost_of_s_to_v = costs[v];\n          first_visit = (typeof costs[v] === 'undefined');\n          if (first_visit || cost_of_s_to_v > cost_of_s_to_u_plus_cost_of_e) {\n            costs[v] = cost_of_s_to_u_plus_cost_of_e;\n            open.push(v, cost_of_s_to_u_plus_cost_of_e);\n            predecessors[v] = u;\n          }\n        }\n      }\n    }\n\n    if (typeof d !== 'undefined' && typeof costs[d] === 'undefined') {\n      var msg = ['Could not find a path from ', s, ' to ', d, '.'].join('');\n      throw new Error(msg);\n    }\n\n    return predecessors;\n  },\n\n  extract_shortest_path_from_predecessor_list: function(predecessors, d) {\n    var nodes = [];\n    var u = d;\n    var predecessor;\n    while (u) {\n      nodes.push(u);\n      predecessor = predecessors[u];\n      u = predecessors[u];\n    }\n    nodes.reverse();\n    return nodes;\n  },\n\n  find_path: function(graph, s, d) {\n    var predecessors = dijkstra.single_source_shortest_paths(graph, s, d);\n    return dijkstra.extract_shortest_path_from_predecessor_list(\n      predecessors, d);\n  },\n\n  /**\n   * A very naive priority queue implementation.\n   */\n  PriorityQueue: {\n    make: function (opts) {\n      var T = dijkstra.PriorityQueue,\n          t = {},\n          key;\n      opts = opts || {};\n      for (key in T) {\n        if (T.hasOwnProperty(key)) {\n          t[key] = T[key];\n        }\n      }\n      t.queue = [];\n      t.sorter = opts.sorter || T.default_sorter;\n      return t;\n    },\n\n    default_sorter: function (a, b) {\n      return a.cost - b.cost;\n    },\n\n    /**\n     * Add a new item to the queue and ensure the highest priority element\n     * is at the front of the queue.\n     */\n    push: function (value, cost) {\n      var item = {value: value, cost: cost};\n      this.queue.push(item);\n      this.queue.sort(this.sorter);\n    },\n\n    /**\n     * Return the highest priority element in the queue.\n     */\n    pop: function () {\n      return this.queue.shift();\n    },\n\n    empty: function () {\n      return this.queue.length === 0;\n    }\n  }\n};\n\n\n// node.js module exports\nif (typeof module !== 'undefined') {\n  module.exports = dijkstra;\n}\n", "const Mode = require('./mode')\nconst NumericData = require('./numeric-data')\nconst AlphanumericData = require('./alphanumeric-data')\nconst ByteData = require('./byte-data')\nconst KanjiData = require('./kanji-data')\nconst Regex = require('./regex')\nconst Utils = require('./utils')\nconst dijkstra = require('dijkstrajs')\n\n/**\n * Returns UTF8 byte length\n *\n * @param  {String} str Input string\n * @return {Number}     Number of byte\n */\nfunction getStringByteLength (str) {\n  return unescape(encodeURIComponent(str)).length\n}\n\n/**\n * Get a list of segments of the specified mode\n * from a string\n *\n * @param  {Mode}   mode Segment mode\n * @param  {String} str  String to process\n * @return {Array}       Array of object with segments data\n */\nfunction getSegments (regex, mode, str) {\n  const segments = []\n  let result\n\n  while ((result = regex.exec(str)) !== null) {\n    segments.push({\n      data: result[0],\n      index: result.index,\n      mode: mode,\n      length: result[0].length\n    })\n  }\n\n  return segments\n}\n\n/**\n * Extracts a series of segments with the appropriate\n * modes from a string\n *\n * @param  {String} dataStr Input string\n * @return {Array}          Array of object with segments data\n */\nfunction getSegmentsFromString (dataStr) {\n  const numSegs = getSegments(Regex.NUMERIC, Mode.NUMERIC, dataStr)\n  const alphaNumSegs = getSegments(Regex.ALPHANUMERIC, Mode.ALPHANUMERIC, dataStr)\n  let byteSegs\n  let kanjiSegs\n\n  if (Utils.isKanjiModeEnabled()) {\n    byteSegs = getSegments(Regex.BYTE, Mode.BYTE, dataStr)\n    kanjiSegs = getSegments(Regex.KANJI, Mode.KANJI, dataStr)\n  } else {\n    byteSegs = getSegments(Regex.BYTE_KANJI, Mode.BYTE, dataStr)\n    kanjiSegs = []\n  }\n\n  const segs = numSegs.concat(alphaNumSegs, byteSegs, kanjiSegs)\n\n  return segs\n    .sort(function (s1, s2) {\n      return s1.index - s2.index\n    })\n    .map(function (obj) {\n      return {\n        data: obj.data,\n        mode: obj.mode,\n        length: obj.length\n      }\n    })\n}\n\n/**\n * Returns how many bits are needed to encode a string of\n * specified length with the specified mode\n *\n * @param  {Number} length String length\n * @param  {Mode} mode     Segment mode\n * @return {Number}        Bit length\n */\nfunction getSegmentBitsLength (length, mode) {\n  switch (mode) {\n    case Mode.NUMERIC:\n      return NumericData.getBitsLength(length)\n    case Mode.ALPHANUMERIC:\n      return AlphanumericData.getBitsLength(length)\n    case Mode.KANJI:\n      return KanjiData.getBitsLength(length)\n    case Mode.BYTE:\n      return ByteData.getBitsLength(length)\n  }\n}\n\n/**\n * Merges adjacent segments which have the same mode\n *\n * @param  {Array} segs Array of object with segments data\n * @return {Array}      Array of object with segments data\n */\nfunction mergeSegments (segs) {\n  return segs.reduce(function (acc, curr) {\n    const prevSeg = acc.length - 1 >= 0 ? acc[acc.length - 1] : null\n    if (prevSeg && prevSeg.mode === curr.mode) {\n      acc[acc.length - 1].data += curr.data\n      return acc\n    }\n\n    acc.push(curr)\n    return acc\n  }, [])\n}\n\n/**\n * Generates a list of all possible nodes combination which\n * will be used to build a segments graph.\n *\n * Nodes are divided by groups. Each group will contain a list of all the modes\n * in which is possible to encode the given text.\n *\n * For example the text '12345' can be encoded as Numeric, Alphanumeric or Byte.\n * The group for '12345' will contain then 3 objects, one for each\n * possible encoding mode.\n *\n * Each node represents a possible segment.\n *\n * @param  {Array} segs Array of object with segments data\n * @return {Array}      Array of object with segments data\n */\nfunction buildNodes (segs) {\n  const nodes = []\n  for (let i = 0; i < segs.length; i++) {\n    const seg = segs[i]\n\n    switch (seg.mode) {\n      case Mode.NUMERIC:\n        nodes.push([seg,\n          { data: seg.data, mode: Mode.ALPHANUMERIC, length: seg.length },\n          { data: seg.data, mode: Mode.BYTE, length: seg.length }\n        ])\n        break\n      case Mode.ALPHANUMERIC:\n        nodes.push([seg,\n          { data: seg.data, mode: Mode.BYTE, length: seg.length }\n        ])\n        break\n      case Mode.KANJI:\n        nodes.push([seg,\n          { data: seg.data, mode: Mode.BYTE, length: getStringByteLength(seg.data) }\n        ])\n        break\n      case Mode.BYTE:\n        nodes.push([\n          { data: seg.data, mode: Mode.BYTE, length: getStringByteLength(seg.data) }\n        ])\n    }\n  }\n\n  return nodes\n}\n\n/**\n * Builds a graph from a list of nodes.\n * All segments in each node group will be connected with all the segments of\n * the next group and so on.\n *\n * At each connection will be assigned a weight depending on the\n * segment's byte length.\n *\n * @param  {Array} nodes    Array of object with segments data\n * @param  {Number} version QR Code version\n * @return {Object}         Graph of all possible segments\n */\nfunction buildGraph (nodes, version) {\n  const table = {}\n  const graph = { start: {} }\n  let prevNodeIds = ['start']\n\n  for (let i = 0; i < nodes.length; i++) {\n    const nodeGroup = nodes[i]\n    const currentNodeIds = []\n\n    for (let j = 0; j < nodeGroup.length; j++) {\n      const node = nodeGroup[j]\n      const key = '' + i + j\n\n      currentNodeIds.push(key)\n      table[key] = { node: node, lastCount: 0 }\n      graph[key] = {}\n\n      for (let n = 0; n < prevNodeIds.length; n++) {\n        const prevNodeId = prevNodeIds[n]\n\n        if (table[prevNodeId] && table[prevNodeId].node.mode === node.mode) {\n          graph[prevNodeId][key] =\n            getSegmentBitsLength(table[prevNodeId].lastCount + node.length, node.mode) -\n            getSegmentBitsLength(table[prevNodeId].lastCount, node.mode)\n\n          table[prevNodeId].lastCount += node.length\n        } else {\n          if (table[prevNodeId]) table[prevNodeId].lastCount = node.length\n\n          graph[prevNodeId][key] = getSegmentBitsLength(node.length, node.mode) +\n            4 + Mode.getCharCountIndicator(node.mode, version) // switch cost\n        }\n      }\n    }\n\n    prevNodeIds = currentNodeIds\n  }\n\n  for (let n = 0; n < prevNodeIds.length; n++) {\n    graph[prevNodeIds[n]].end = 0\n  }\n\n  return { map: graph, table: table }\n}\n\n/**\n * Builds a segment from a specified data and mode.\n * If a mode is not specified, the more suitable will be used.\n *\n * @param  {String} data             Input data\n * @param  {Mode | String} modesHint Data mode\n * @return {Segment}                 Segment\n */\nfunction buildSingleSegment (data, modesHint) {\n  let mode\n  const bestMode = Mode.getBestModeForData(data)\n\n  mode = Mode.from(modesHint, bestMode)\n\n  // Make sure data can be encoded\n  if (mode !== Mode.BYTE && mode.bit < bestMode.bit) {\n    throw new Error('\"' + data + '\"' +\n      ' cannot be encoded with mode ' + Mode.toString(mode) +\n      '.\\n Suggested mode is: ' + Mode.toString(bestMode))\n  }\n\n  // Use Mode.BYTE if Kanji support is disabled\n  if (mode === Mode.KANJI && !Utils.isKanjiModeEnabled()) {\n    mode = Mode.BYTE\n  }\n\n  switch (mode) {\n    case Mode.NUMERIC:\n      return new NumericData(data)\n\n    case Mode.ALPHANUMERIC:\n      return new AlphanumericData(data)\n\n    case Mode.KANJI:\n      return new KanjiData(data)\n\n    case Mode.BYTE:\n      return new ByteData(data)\n  }\n}\n\n/**\n * Builds a list of segments from an array.\n * Array can contain Strings or Objects with segment's info.\n *\n * For each item which is a string, will be generated a segment with the given\n * string and the more appropriate encoding mode.\n *\n * For each item which is an object, will be generated a segment with the given\n * data and mode.\n * Objects must contain at least the property \"data\".\n * If property \"mode\" is not present, the more suitable mode will be used.\n *\n * @param  {Array} array Array of objects with segments data\n * @return {Array}       Array of Segments\n */\nexports.fromArray = function fromArray (array) {\n  return array.reduce(function (acc, seg) {\n    if (typeof seg === 'string') {\n      acc.push(buildSingleSegment(seg, null))\n    } else if (seg.data) {\n      acc.push(buildSingleSegment(seg.data, seg.mode))\n    }\n\n    return acc\n  }, [])\n}\n\n/**\n * Builds an optimized sequence of segments from a string,\n * which will produce the shortest possible bitstream.\n *\n * @param  {String} data    Input string\n * @param  {Number} version QR Code version\n * @return {Array}          Array of segments\n */\nexports.fromString = function fromString (data, version) {\n  const segs = getSegmentsFromString(data, Utils.isKanjiModeEnabled())\n\n  const nodes = buildNodes(segs)\n  const graph = buildGraph(nodes, version)\n  const path = dijkstra.find_path(graph.map, 'start', 'end')\n\n  const optimizedSegs = []\n  for (let i = 1; i < path.length - 1; i++) {\n    optimizedSegs.push(graph.table[path[i]].node)\n  }\n\n  return exports.fromArray(mergeSegments(optimizedSegs))\n}\n\n/**\n * Splits a string in various segments with the modes which\n * best represent their content.\n * The produced segments are far from being optimized.\n * The output of this function is only used to estimate a QR Code version\n * which may contain the data.\n *\n * @param  {string} data Input string\n * @return {Array}       Array of segments\n */\nexports.rawSplit = function rawSplit (data) {\n  return exports.fromArray(\n    getSegmentsFromString(data, Utils.isKanjiModeEnabled())\n  )\n}\n", "const Utils = require('./utils')\nconst ECLevel = require('./error-correction-level')\nconst BitBuffer = require('./bit-buffer')\nconst BitMatrix = require('./bit-matrix')\nconst AlignmentPattern = require('./alignment-pattern')\nconst FinderPattern = require('./finder-pattern')\nconst MaskPattern = require('./mask-pattern')\nconst ECCode = require('./error-correction-code')\nconst ReedSolomonEncoder = require('./reed-solomon-encoder')\nconst Version = require('./version')\nconst FormatInfo = require('./format-info')\nconst Mode = require('./mode')\nconst Segments = require('./segments')\n\n/**\n * QRCode for JavaScript\n *\n * modified by Ryan Day for nodejs support\n * Copyright (c) 2011 Ryan Day\n *\n * Licensed under the MIT license:\n *   http://www.opensource.org/licenses/mit-license.php\n *\n//---------------------------------------------------------------------\n// QRCode for JavaScript\n//\n// Copyright (c) 2009 Kazuhiko Arase\n//\n// URL: http://www.d-project.com/\n//\n// Licensed under the MIT license:\n//   http://www.opensource.org/licenses/mit-license.php\n//\n// The word \"QR Code\" is registered trademark of\n// DENSO WAVE INCORPORATED\n//   http://www.denso-wave.com/qrcode/faqpatent-e.html\n//\n//---------------------------------------------------------------------\n*/\n\n/**\n * Add finder patterns bits to matrix\n *\n * @param  {BitMatrix} matrix  Modules matrix\n * @param  {Number}    version QR Code version\n */\nfunction setupFinderPattern (matrix, version) {\n  const size = matrix.size\n  const pos = FinderPattern.getPositions(version)\n\n  for (let i = 0; i < pos.length; i++) {\n    const row = pos[i][0]\n    const col = pos[i][1]\n\n    for (let r = -1; r <= 7; r++) {\n      if (row + r <= -1 || size <= row + r) continue\n\n      for (let c = -1; c <= 7; c++) {\n        if (col + c <= -1 || size <= col + c) continue\n\n        if ((r >= 0 && r <= 6 && (c === 0 || c === 6)) ||\n          (c >= 0 && c <= 6 && (r === 0 || r === 6)) ||\n          (r >= 2 && r <= 4 && c >= 2 && c <= 4)) {\n          matrix.set(row + r, col + c, true, true)\n        } else {\n          matrix.set(row + r, col + c, false, true)\n        }\n      }\n    }\n  }\n}\n\n/**\n * Add timing pattern bits to matrix\n *\n * Note: this function must be called before {@link setupAlignmentPattern}\n *\n * @param  {BitMatrix} matrix Modules matrix\n */\nfunction setupTimingPattern (matrix) {\n  const size = matrix.size\n\n  for (let r = 8; r < size - 8; r++) {\n    const value = r % 2 === 0\n    matrix.set(r, 6, value, true)\n    matrix.set(6, r, value, true)\n  }\n}\n\n/**\n * Add alignment patterns bits to matrix\n *\n * Note: this function must be called after {@link setupTimingPattern}\n *\n * @param  {BitMatrix} matrix  Modules matrix\n * @param  {Number}    version QR Code version\n */\nfunction setupAlignmentPattern (matrix, version) {\n  const pos = AlignmentPattern.getPositions(version)\n\n  for (let i = 0; i < pos.length; i++) {\n    const row = pos[i][0]\n    const col = pos[i][1]\n\n    for (let r = -2; r <= 2; r++) {\n      for (let c = -2; c <= 2; c++) {\n        if (r === -2 || r === 2 || c === -2 || c === 2 ||\n          (r === 0 && c === 0)) {\n          matrix.set(row + r, col + c, true, true)\n        } else {\n          matrix.set(row + r, col + c, false, true)\n        }\n      }\n    }\n  }\n}\n\n/**\n * Add version info bits to matrix\n *\n * @param  {BitMatrix} matrix  Modules matrix\n * @param  {Number}    version QR Code version\n */\nfunction setupVersionInfo (matrix, version) {\n  const size = matrix.size\n  const bits = Version.getEncodedBits(version)\n  let row, col, mod\n\n  for (let i = 0; i < 18; i++) {\n    row = Math.floor(i / 3)\n    col = i % 3 + size - 8 - 3\n    mod = ((bits >> i) & 1) === 1\n\n    matrix.set(row, col, mod, true)\n    matrix.set(col, row, mod, true)\n  }\n}\n\n/**\n * Add format info bits to matrix\n *\n * @param  {BitMatrix} matrix               Modules matrix\n * @param  {ErrorCorrectionLevel}    errorCorrectionLevel Error correction level\n * @param  {Number}    maskPattern          Mask pattern reference value\n */\nfunction setupFormatInfo (matrix, errorCorrectionLevel, maskPattern) {\n  const size = matrix.size\n  const bits = FormatInfo.getEncodedBits(errorCorrectionLevel, maskPattern)\n  let i, mod\n\n  for (i = 0; i < 15; i++) {\n    mod = ((bits >> i) & 1) === 1\n\n    // vertical\n    if (i < 6) {\n      matrix.set(i, 8, mod, true)\n    } else if (i < 8) {\n      matrix.set(i + 1, 8, mod, true)\n    } else {\n      matrix.set(size - 15 + i, 8, mod, true)\n    }\n\n    // horizontal\n    if (i < 8) {\n      matrix.set(8, size - i - 1, mod, true)\n    } else if (i < 9) {\n      matrix.set(8, 15 - i - 1 + 1, mod, true)\n    } else {\n      matrix.set(8, 15 - i - 1, mod, true)\n    }\n  }\n\n  // fixed module\n  matrix.set(size - 8, 8, 1, true)\n}\n\n/**\n * Add encoded data bits to matrix\n *\n * @param  {BitMatrix}  matrix Modules matrix\n * @param  {Uint8Array} data   Data codewords\n */\nfunction setupData (matrix, data) {\n  const size = matrix.size\n  let inc = -1\n  let row = size - 1\n  let bitIndex = 7\n  let byteIndex = 0\n\n  for (let col = size - 1; col > 0; col -= 2) {\n    if (col === 6) col--\n\n    while (true) {\n      for (let c = 0; c < 2; c++) {\n        if (!matrix.isReserved(row, col - c)) {\n          let dark = false\n\n          if (byteIndex < data.length) {\n            dark = (((data[byteIndex] >>> bitIndex) & 1) === 1)\n          }\n\n          matrix.set(row, col - c, dark)\n          bitIndex--\n\n          if (bitIndex === -1) {\n            byteIndex++\n            bitIndex = 7\n          }\n        }\n      }\n\n      row += inc\n\n      if (row < 0 || size <= row) {\n        row -= inc\n        inc = -inc\n        break\n      }\n    }\n  }\n}\n\n/**\n * Create encoded codewords from data input\n *\n * @param  {Number}   version              QR Code version\n * @param  {ErrorCorrectionLevel}   errorCorrectionLevel Error correction level\n * @param  {ByteData} data                 Data input\n * @return {Uint8Array}                    Buffer containing encoded codewords\n */\nfunction createData (version, errorCorrectionLevel, segments) {\n  // Prepare data buffer\n  const buffer = new BitBuffer()\n\n  segments.forEach(function (data) {\n    // prefix data with mode indicator (4 bits)\n    buffer.put(data.mode.bit, 4)\n\n    // Prefix data with character count indicator.\n    // The character count indicator is a string of bits that represents the\n    // number of characters that are being encoded.\n    // The character count indicator must be placed after the mode indicator\n    // and must be a certain number of bits long, depending on the QR version\n    // and data mode\n    // @see {@link Mode.getCharCountIndicator}.\n    buffer.put(data.getLength(), Mode.getCharCountIndicator(data.mode, version))\n\n    // add binary data sequence to buffer\n    data.write(buffer)\n  })\n\n  // Calculate required number of bits\n  const totalCodewords = Utils.getSymbolTotalCodewords(version)\n  const ecTotalCodewords = ECCode.getTotalCodewordsCount(version, errorCorrectionLevel)\n  const dataTotalCodewordsBits = (totalCodewords - ecTotalCodewords) * 8\n\n  // Add a terminator.\n  // If the bit string is shorter than the total number of required bits,\n  // a terminator of up to four 0s must be added to the right side of the string.\n  // If the bit string is more than four bits shorter than the required number of bits,\n  // add four 0s to the end.\n  if (buffer.getLengthInBits() + 4 <= dataTotalCodewordsBits) {\n    buffer.put(0, 4)\n  }\n\n  // If the bit string is fewer than four bits shorter, add only the number of 0s that\n  // are needed to reach the required number of bits.\n\n  // After adding the terminator, if the number of bits in the string is not a multiple of 8,\n  // pad the string on the right with 0s to make the string's length a multiple of 8.\n  while (buffer.getLengthInBits() % 8 !== 0) {\n    buffer.putBit(0)\n  }\n\n  // Add pad bytes if the string is still shorter than the total number of required bits.\n  // Extend the buffer to fill the data capacity of the symbol corresponding to\n  // the Version and Error Correction Level by adding the Pad Codewords 11101100 (0xEC)\n  // and 00010001 (0x11) alternately.\n  const remainingByte = (dataTotalCodewordsBits - buffer.getLengthInBits()) / 8\n  for (let i = 0; i < remainingByte; i++) {\n    buffer.put(i % 2 ? 0x11 : 0xEC, 8)\n  }\n\n  return createCodewords(buffer, version, errorCorrectionLevel)\n}\n\n/**\n * Encode input data with Reed-Solomon and return codewords with\n * relative error correction bits\n *\n * @param  {BitBuffer} bitBuffer            Data to encode\n * @param  {Number}    version              QR Code version\n * @param  {ErrorCorrectionLevel} errorCorrectionLevel Error correction level\n * @return {Uint8Array}                     Buffer containing encoded codewords\n */\nfunction createCodewords (bitBuffer, version, errorCorrectionLevel) {\n  // Total codewords for this QR code version (Data + Error correction)\n  const totalCodewords = Utils.getSymbolTotalCodewords(version)\n\n  // Total number of error correction codewords\n  const ecTotalCodewords = ECCode.getTotalCodewordsCount(version, errorCorrectionLevel)\n\n  // Total number of data codewords\n  const dataTotalCodewords = totalCodewords - ecTotalCodewords\n\n  // Total number of blocks\n  const ecTotalBlocks = ECCode.getBlocksCount(version, errorCorrectionLevel)\n\n  // Calculate how many blocks each group should contain\n  const blocksInGroup2 = totalCodewords % ecTotalBlocks\n  const blocksInGroup1 = ecTotalBlocks - blocksInGroup2\n\n  const totalCodewordsInGroup1 = Math.floor(totalCodewords / ecTotalBlocks)\n\n  const dataCodewordsInGroup1 = Math.floor(dataTotalCodewords / ecTotalBlocks)\n  const dataCodewordsInGroup2 = dataCodewordsInGroup1 + 1\n\n  // Number of EC codewords is the same for both groups\n  const ecCount = totalCodewordsInGroup1 - dataCodewordsInGroup1\n\n  // Initialize a Reed-Solomon encoder with a generator polynomial of degree ecCount\n  const rs = new ReedSolomonEncoder(ecCount)\n\n  let offset = 0\n  const dcData = new Array(ecTotalBlocks)\n  const ecData = new Array(ecTotalBlocks)\n  let maxDataSize = 0\n  const buffer = new Uint8Array(bitBuffer.buffer)\n\n  // Divide the buffer into the required number of blocks\n  for (let b = 0; b < ecTotalBlocks; b++) {\n    const dataSize = b < blocksInGroup1 ? dataCodewordsInGroup1 : dataCodewordsInGroup2\n\n    // extract a block of data from buffer\n    dcData[b] = buffer.slice(offset, offset + dataSize)\n\n    // Calculate EC codewords for this data block\n    ecData[b] = rs.encode(dcData[b])\n\n    offset += dataSize\n    maxDataSize = Math.max(maxDataSize, dataSize)\n  }\n\n  // Create final data\n  // Interleave the data and error correction codewords from each block\n  const data = new Uint8Array(totalCodewords)\n  let index = 0\n  let i, r\n\n  // Add data codewords\n  for (i = 0; i < maxDataSize; i++) {\n    for (r = 0; r < ecTotalBlocks; r++) {\n      if (i < dcData[r].length) {\n        data[index++] = dcData[r][i]\n      }\n    }\n  }\n\n  // Apped EC codewords\n  for (i = 0; i < ecCount; i++) {\n    for (r = 0; r < ecTotalBlocks; r++) {\n      data[index++] = ecData[r][i]\n    }\n  }\n\n  return data\n}\n\n/**\n * Build QR Code symbol\n *\n * @param  {String} data                 Input string\n * @param  {Number} version              QR Code version\n * @param  {ErrorCorretionLevel} errorCorrectionLevel Error level\n * @param  {MaskPattern} maskPattern     Mask pattern\n * @return {Object}                      Object containing symbol data\n */\nfunction createSymbol (data, version, errorCorrectionLevel, maskPattern) {\n  let segments\n\n  if (Array.isArray(data)) {\n    segments = Segments.fromArray(data)\n  } else if (typeof data === 'string') {\n    let estimatedVersion = version\n\n    if (!estimatedVersion) {\n      const rawSegments = Segments.rawSplit(data)\n\n      // Estimate best version that can contain raw splitted segments\n      estimatedVersion = Version.getBestVersionForData(rawSegments, errorCorrectionLevel)\n    }\n\n    // Build optimized segments\n    // If estimated version is undefined, try with the highest version\n    segments = Segments.fromString(data, estimatedVersion || 40)\n  } else {\n    throw new Error('Invalid data')\n  }\n\n  // Get the min version that can contain data\n  const bestVersion = Version.getBestVersionForData(segments, errorCorrectionLevel)\n\n  // If no version is found, data cannot be stored\n  if (!bestVersion) {\n    throw new Error('The amount of data is too big to be stored in a QR Code')\n  }\n\n  // If not specified, use min version as default\n  if (!version) {\n    version = bestVersion\n\n  // Check if the specified version can contain the data\n  } else if (version < bestVersion) {\n    throw new Error('\\n' +\n      'The chosen QR Code version cannot contain this amount of data.\\n' +\n      'Minimum version required to store current data is: ' + bestVersion + '.\\n'\n    )\n  }\n\n  const dataBits = createData(version, errorCorrectionLevel, segments)\n\n  // Allocate matrix buffer\n  const moduleCount = Utils.getSymbolSize(version)\n  const modules = new BitMatrix(moduleCount)\n\n  // Add function modules\n  setupFinderPattern(modules, version)\n  setupTimingPattern(modules)\n  setupAlignmentPattern(modules, version)\n\n  // Add temporary dummy bits for format info just to set them as reserved.\n  // This is needed to prevent these bits from being masked by {@link MaskPattern.applyMask}\n  // since the masking operation must be performed only on the encoding region.\n  // These blocks will be replaced with correct values later in code.\n  setupFormatInfo(modules, errorCorrectionLevel, 0)\n\n  if (version >= 7) {\n    setupVersionInfo(modules, version)\n  }\n\n  // Add data codewords\n  setupData(modules, dataBits)\n\n  if (isNaN(maskPattern)) {\n    // Find best mask pattern\n    maskPattern = MaskPattern.getBestMask(modules,\n      setupFormatInfo.bind(null, modules, errorCorrectionLevel))\n  }\n\n  // Apply mask pattern\n  MaskPattern.applyMask(maskPattern, modules)\n\n  // Replace format info bits with correct values\n  setupFormatInfo(modules, errorCorrectionLevel, maskPattern)\n\n  return {\n    modules: modules,\n    version: version,\n    errorCorrectionLevel: errorCorrectionLevel,\n    maskPattern: maskPattern,\n    segments: segments\n  }\n}\n\n/**\n * QR Code\n *\n * @param {String | Array} data                 Input data\n * @param {Object} options                      Optional configurations\n * @param {Number} options.version              QR Code version\n * @param {String} options.errorCorrectionLevel Error correction level\n * @param {Function} options.toSJISFunc         Helper func to convert utf8 to sjis\n */\nexports.create = function create (data, options) {\n  if (typeof data === 'undefined' || data === '') {\n    throw new Error('No input text')\n  }\n\n  let errorCorrectionLevel = ECLevel.M\n  let version\n  let mask\n\n  if (typeof options !== 'undefined') {\n    // Use higher error correction level as default\n    errorCorrectionLevel = ECLevel.from(options.errorCorrectionLevel, ECLevel.M)\n    version = Version.from(options.version)\n    mask = MaskPattern.from(options.maskPattern)\n\n    if (options.toSJISFunc) {\n      Utils.setToSJISFunction(options.toSJISFunc)\n    }\n  }\n\n  return createSymbol(data, version, errorCorrectionLevel, mask)\n}\n", "function hex2rgba (hex) {\n  if (typeof hex === 'number') {\n    hex = hex.toString()\n  }\n\n  if (typeof hex !== 'string') {\n    throw new Error('Color should be defined as hex string')\n  }\n\n  let hexCode = hex.slice().replace('#', '').split('')\n  if (hexCode.length < 3 || hexCode.length === 5 || hexCode.length > 8) {\n    throw new Error('Invalid hex color: ' + hex)\n  }\n\n  // Convert from short to long form (fff -> ffffff)\n  if (hexCode.length === 3 || hexCode.length === 4) {\n    hexCode = Array.prototype.concat.apply([], hexCode.map(function (c) {\n      return [c, c]\n    }))\n  }\n\n  // Add default alpha value\n  if (hexCode.length === 6) hexCode.push('F', 'F')\n\n  const hexValue = parseInt(hexCode.join(''), 16)\n\n  return {\n    r: (hexValue >> 24) & 255,\n    g: (hexValue >> 16) & 255,\n    b: (hexValue >> 8) & 255,\n    a: hexValue & 255,\n    hex: '#' + hexCode.slice(0, 6).join('')\n  }\n}\n\nexports.getOptions = function getOptions (options) {\n  if (!options) options = {}\n  if (!options.color) options.color = {}\n\n  const margin = typeof options.margin === 'undefined' ||\n    options.margin === null ||\n    options.margin < 0\n    ? 4\n    : options.margin\n\n  const width = options.width && options.width >= 21 ? options.width : undefined\n  const scale = options.scale || 4\n\n  return {\n    width: width,\n    scale: width ? 4 : scale,\n    margin: margin,\n    color: {\n      dark: hex2rgba(options.color.dark || '#000000ff'),\n      light: hex2rgba(options.color.light || '#ffffffff')\n    },\n    type: options.type,\n    rendererOpts: options.rendererOpts || {}\n  }\n}\n\nexports.getScale = function getScale (qrSize, opts) {\n  return opts.width && opts.width >= qrSize + opts.margin * 2\n    ? opts.width / (qrSize + opts.margin * 2)\n    : opts.scale\n}\n\nexports.getImageWidth = function getImageWidth (qrSize, opts) {\n  const scale = exports.getScale(qrSize, opts)\n  return Math.floor((qrSize + opts.margin * 2) * scale)\n}\n\nexports.qrToImageData = function qrToImageData (imgData, qr, opts) {\n  const size = qr.modules.size\n  const data = qr.modules.data\n  const scale = exports.getScale(size, opts)\n  const symbolSize = Math.floor((size + opts.margin * 2) * scale)\n  const scaledMargin = opts.margin * scale\n  const palette = [opts.color.light, opts.color.dark]\n\n  for (let i = 0; i < symbolSize; i++) {\n    for (let j = 0; j < symbolSize; j++) {\n      let posDst = (i * symbolSize + j) * 4\n      let pxColor = opts.color.light\n\n      if (i >= scaledMargin && j >= scaledMargin &&\n        i < symbolSize - scaledMargin && j < symbolSize - scaledMargin) {\n        const iSrc = Math.floor((i - scaledMargin) / scale)\n        const jSrc = Math.floor((j - scaledMargin) / scale)\n        pxColor = palette[data[iSrc * size + jSrc] ? 1 : 0]\n      }\n\n      imgData[posDst++] = pxColor.r\n      imgData[posDst++] = pxColor.g\n      imgData[posDst++] = pxColor.b\n      imgData[posDst] = pxColor.a\n    }\n  }\n}\n", "const Utils = require('./utils')\n\nfunction clearCanvas (ctx, canvas, size) {\n  ctx.clearRect(0, 0, canvas.width, canvas.height)\n\n  if (!canvas.style) canvas.style = {}\n  canvas.height = size\n  canvas.width = size\n  canvas.style.height = size + 'px'\n  canvas.style.width = size + 'px'\n}\n\nfunction getCanvasElement () {\n  try {\n    return document.createElement('canvas')\n  } catch (e) {\n    throw new Error('You need to specify a canvas element')\n  }\n}\n\nexports.render = function render (qrData, canvas, options) {\n  let opts = options\n  let canvasEl = canvas\n\n  if (typeof opts === 'undefined' && (!canvas || !canvas.getContext)) {\n    opts = canvas\n    canvas = undefined\n  }\n\n  if (!canvas) {\n    canvasEl = getCanvasElement()\n  }\n\n  opts = Utils.getOptions(opts)\n  const size = Utils.getImageWidth(qrData.modules.size, opts)\n\n  const ctx = canvasEl.getContext('2d')\n  const image = ctx.createImageData(size, size)\n  Utils.qrToImageData(image.data, qrData, opts)\n\n  clearCanvas(ctx, canvasEl, size)\n  ctx.putImageData(image, 0, 0)\n\n  return canvasEl\n}\n\nexports.renderToDataURL = function renderToDataURL (qrData, canvas, options) {\n  let opts = options\n\n  if (typeof opts === 'undefined' && (!canvas || !canvas.getContext)) {\n    opts = canvas\n    canvas = undefined\n  }\n\n  if (!opts) opts = {}\n\n  const canvasEl = exports.render(qrData, canvas, opts)\n\n  const type = opts.type || 'image/png'\n  const rendererOpts = opts.rendererOpts || {}\n\n  return canvasEl.toDataURL(type, rendererOpts.quality)\n}\n", "const Utils = require('./utils')\n\nfunction getColorAttrib (color, attrib) {\n  const alpha = color.a / 255\n  const str = attrib + '=\"' + color.hex + '\"'\n\n  return alpha < 1\n    ? str + ' ' + attrib + '-opacity=\"' + alpha.toFixed(2).slice(1) + '\"'\n    : str\n}\n\nfunction svgCmd (cmd, x, y) {\n  let str = cmd + x\n  if (typeof y !== 'undefined') str += ' ' + y\n\n  return str\n}\n\nfunction qrToPath (data, size, margin) {\n  let path = ''\n  let moveBy = 0\n  let newRow = false\n  let lineLength = 0\n\n  for (let i = 0; i < data.length; i++) {\n    const col = Math.floor(i % size)\n    const row = Math.floor(i / size)\n\n    if (!col && !newRow) newRow = true\n\n    if (data[i]) {\n      lineLength++\n\n      if (!(i > 0 && col > 0 && data[i - 1])) {\n        path += newRow\n          ? svgCmd('M', col + margin, 0.5 + row + margin)\n          : svgCmd('m', moveBy, 0)\n\n        moveBy = 0\n        newRow = false\n      }\n\n      if (!(col + 1 < size && data[i + 1])) {\n        path += svgCmd('h', lineLength)\n        lineLength = 0\n      }\n    } else {\n      moveBy++\n    }\n  }\n\n  return path\n}\n\nexports.render = function render (qrData, options, cb) {\n  const opts = Utils.getOptions(options)\n  const size = qrData.modules.size\n  const data = qrData.modules.data\n  const qrcodesize = size + opts.margin * 2\n\n  const bg = !opts.color.light.a\n    ? ''\n    : '<path ' + getColorAttrib(opts.color.light, 'fill') +\n      ' d=\"M0 0h' + qrcodesize + 'v' + qrcodesize + 'H0z\"/>'\n\n  const path =\n    '<path ' + getColorAttrib(opts.color.dark, 'stroke') +\n    ' d=\"' + qrToPath(data, size, opts.margin) + '\"/>'\n\n  const viewBox = 'viewBox=\"' + '0 0 ' + qrcodesize + ' ' + qrcodesize + '\"'\n\n  const width = !opts.width ? '' : 'width=\"' + opts.width + '\" height=\"' + opts.width + '\" '\n\n  const svgTag = '<svg xmlns=\"http://www.w3.org/2000/svg\" ' + width + viewBox + ' shape-rendering=\"crispEdges\">' + bg + path + '</svg>\\n'\n\n  if (typeof cb === 'function') {\n    cb(null, svgTag)\n  }\n\n  return svgTag\n}\n", "\nconst canPromise = require('./can-promise')\n\nconst QRCode = require('./core/qrcode')\nconst CanvasRenderer = require('./renderer/canvas')\nconst SvgRenderer = require('./renderer/svg-tag.js')\n\nfunction renderCanvas (renderFunc, canvas, text, opts, cb) {\n  const args = [].slice.call(arguments, 1)\n  const argsNum = args.length\n  const isLastArgCb = typeof args[argsNum - 1] === 'function'\n\n  if (!isLastArgCb && !canPromise()) {\n    throw new Error('Callback required as last argument')\n  }\n\n  if (isLastArgCb) {\n    if (argsNum < 2) {\n      throw new Error('Too few arguments provided')\n    }\n\n    if (argsNum === 2) {\n      cb = text\n      text = canvas\n      canvas = opts = undefined\n    } else if (argsNum === 3) {\n      if (canvas.getContext && typeof cb === 'undefined') {\n        cb = opts\n        opts = undefined\n      } else {\n        cb = opts\n        opts = text\n        text = canvas\n        canvas = undefined\n      }\n    }\n  } else {\n    if (argsNum < 1) {\n      throw new Error('Too few arguments provided')\n    }\n\n    if (argsNum === 1) {\n      text = canvas\n      canvas = opts = undefined\n    } else if (argsNum === 2 && !canvas.getContext) {\n      opts = text\n      text = canvas\n      canvas = undefined\n    }\n\n    return new Promise(function (resolve, reject) {\n      try {\n        const data = QRCode.create(text, opts)\n        resolve(renderFunc(data, canvas, opts))\n      } catch (e) {\n        reject(e)\n      }\n    })\n  }\n\n  try {\n    const data = QRCode.create(text, opts)\n    cb(null, renderFunc(data, canvas, opts))\n  } catch (e) {\n    cb(e)\n  }\n}\n\nexports.create = QRCode.create\nexports.toCanvas = renderCanvas.bind(null, CanvasRenderer.render)\nexports.toDataURL = renderCanvas.bind(null, CanvasRenderer.renderToDataURL)\n\n// only svg for now.\nexports.toString = renderCanvas.bind(null, function (data, _, opts) {\n  return SvgRenderer.render(data, opts)\n})\n", "/*!\n * MIT License\n * \n * Copyright (c) 2017-2024 Peculiar Ventures, LLC\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * \n */\n\n'use strict';\n\nconst ARRAY_BUFFER_NAME = \"[object ArrayBuffer]\";\nclass BufferSourceConverter {\n    static isArrayBuffer(data) {\n        return Object.prototype.toString.call(data) === ARRAY_BUFFER_NAME;\n    }\n    static toArrayBuffer(data) {\n        if (this.isArrayBuffer(data)) {\n            return data;\n        }\n        if (data.byteLength === data.buffer.byteLength) {\n            return data.buffer;\n        }\n        if (data.byteOffset === 0 && data.byteLength === data.buffer.byteLength) {\n            return data.buffer;\n        }\n        return this.toUint8Array(data.buffer)\n            .slice(data.byteOffset, data.byteOffset + data.byteLength)\n            .buffer;\n    }\n    static toUint8Array(data) {\n        return this.toView(data, Uint8Array);\n    }\n    static toView(data, type) {\n        if (data.constructor === type) {\n            return data;\n        }\n        if (this.isArrayBuffer(data)) {\n            return new type(data);\n        }\n        if (this.isArrayBufferView(data)) {\n            return new type(data.buffer, data.byteOffset, data.byteLength);\n        }\n        throw new TypeError(\"The provided value is not of type '(ArrayBuffer or ArrayBufferView)'\");\n    }\n    static isBufferSource(data) {\n        return this.isArrayBufferView(data)\n            || this.isArrayBuffer(data);\n    }\n    static isArrayBufferView(data) {\n        return ArrayBuffer.isView(data)\n            || (data && this.isArrayBuffer(data.buffer));\n    }\n    static isEqual(a, b) {\n        const aView = BufferSourceConverter.toUint8Array(a);\n        const bView = BufferSourceConverter.toUint8Array(b);\n        if (aView.length !== bView.byteLength) {\n            return false;\n        }\n        for (let i = 0; i < aView.length; i++) {\n            if (aView[i] !== bView[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n    static concat(...args) {\n        let buffers;\n        if (Array.isArray(args[0]) && !(args[1] instanceof Function)) {\n            buffers = args[0];\n        }\n        else if (Array.isArray(args[0]) && args[1] instanceof Function) {\n            buffers = args[0];\n        }\n        else {\n            if (args[args.length - 1] instanceof Function) {\n                buffers = args.slice(0, args.length - 1);\n            }\n            else {\n                buffers = args;\n            }\n        }\n        let size = 0;\n        for (const buffer of buffers) {\n            size += buffer.byteLength;\n        }\n        const res = new Uint8Array(size);\n        let offset = 0;\n        for (const buffer of buffers) {\n            const view = this.toUint8Array(buffer);\n            res.set(view, offset);\n            offset += view.length;\n        }\n        if (args[args.length - 1] instanceof Function) {\n            return this.toView(res, args[args.length - 1]);\n        }\n        return res.buffer;\n    }\n}\n\nconst STRING_TYPE = \"string\";\nconst HEX_REGEX = /^[0-9a-f\\s]+$/i;\nconst BASE64_REGEX = /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/;\nconst BASE64URL_REGEX = /^[a-zA-Z0-9-_]+$/;\nclass Utf8Converter {\n    static fromString(text) {\n        const s = unescape(encodeURIComponent(text));\n        const uintArray = new Uint8Array(s.length);\n        for (let i = 0; i < s.length; i++) {\n            uintArray[i] = s.charCodeAt(i);\n        }\n        return uintArray.buffer;\n    }\n    static toString(buffer) {\n        const buf = BufferSourceConverter.toUint8Array(buffer);\n        let encodedString = \"\";\n        for (let i = 0; i < buf.length; i++) {\n            encodedString += String.fromCharCode(buf[i]);\n        }\n        const decodedString = decodeURIComponent(escape(encodedString));\n        return decodedString;\n    }\n}\nclass Utf16Converter {\n    static toString(buffer, littleEndian = false) {\n        const arrayBuffer = BufferSourceConverter.toArrayBuffer(buffer);\n        const dataView = new DataView(arrayBuffer);\n        let res = \"\";\n        for (let i = 0; i < arrayBuffer.byteLength; i += 2) {\n            const code = dataView.getUint16(i, littleEndian);\n            res += String.fromCharCode(code);\n        }\n        return res;\n    }\n    static fromString(text, littleEndian = false) {\n        const res = new ArrayBuffer(text.length * 2);\n        const dataView = new DataView(res);\n        for (let i = 0; i < text.length; i++) {\n            dataView.setUint16(i * 2, text.charCodeAt(i), littleEndian);\n        }\n        return res;\n    }\n}\nclass Convert {\n    static isHex(data) {\n        return typeof data === STRING_TYPE\n            && HEX_REGEX.test(data);\n    }\n    static isBase64(data) {\n        return typeof data === STRING_TYPE\n            && BASE64_REGEX.test(data);\n    }\n    static isBase64Url(data) {\n        return typeof data === STRING_TYPE\n            && BASE64URL_REGEX.test(data);\n    }\n    static ToString(buffer, enc = \"utf8\") {\n        const buf = BufferSourceConverter.toUint8Array(buffer);\n        switch (enc.toLowerCase()) {\n            case \"utf8\":\n                return this.ToUtf8String(buf);\n            case \"binary\":\n                return this.ToBinary(buf);\n            case \"hex\":\n                return this.ToHex(buf);\n            case \"base64\":\n                return this.ToBase64(buf);\n            case \"base64url\":\n                return this.ToBase64Url(buf);\n            case \"utf16le\":\n                return Utf16Converter.toString(buf, true);\n            case \"utf16\":\n            case \"utf16be\":\n                return Utf16Converter.toString(buf);\n            default:\n                throw new Error(`Unknown type of encoding '${enc}'`);\n        }\n    }\n    static FromString(str, enc = \"utf8\") {\n        if (!str) {\n            return new ArrayBuffer(0);\n        }\n        switch (enc.toLowerCase()) {\n            case \"utf8\":\n                return this.FromUtf8String(str);\n            case \"binary\":\n                return this.FromBinary(str);\n            case \"hex\":\n                return this.FromHex(str);\n            case \"base64\":\n                return this.FromBase64(str);\n            case \"base64url\":\n                return this.FromBase64Url(str);\n            case \"utf16le\":\n                return Utf16Converter.fromString(str, true);\n            case \"utf16\":\n            case \"utf16be\":\n                return Utf16Converter.fromString(str);\n            default:\n                throw new Error(`Unknown type of encoding '${enc}'`);\n        }\n    }\n    static ToBase64(buffer) {\n        const buf = BufferSourceConverter.toUint8Array(buffer);\n        if (typeof btoa !== \"undefined\") {\n            const binary = this.ToString(buf, \"binary\");\n            return btoa(binary);\n        }\n        else {\n            return Buffer.from(buf).toString(\"base64\");\n        }\n    }\n    static FromBase64(base64) {\n        const formatted = this.formatString(base64);\n        if (!formatted) {\n            return new ArrayBuffer(0);\n        }\n        if (!Convert.isBase64(formatted)) {\n            throw new TypeError(\"Argument 'base64Text' is not Base64 encoded\");\n        }\n        if (typeof atob !== \"undefined\") {\n            return this.FromBinary(atob(formatted));\n        }\n        else {\n            return new Uint8Array(Buffer.from(formatted, \"base64\")).buffer;\n        }\n    }\n    static FromBase64Url(base64url) {\n        const formatted = this.formatString(base64url);\n        if (!formatted) {\n            return new ArrayBuffer(0);\n        }\n        if (!Convert.isBase64Url(formatted)) {\n            throw new TypeError(\"Argument 'base64url' is not Base64Url encoded\");\n        }\n        return this.FromBase64(this.Base64Padding(formatted.replace(/\\-/g, \"+\").replace(/\\_/g, \"/\")));\n    }\n    static ToBase64Url(data) {\n        return this.ToBase64(data).replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/\\=/g, \"\");\n    }\n    static FromUtf8String(text, encoding = Convert.DEFAULT_UTF8_ENCODING) {\n        switch (encoding) {\n            case \"ascii\":\n                return this.FromBinary(text);\n            case \"utf8\":\n                return Utf8Converter.fromString(text);\n            case \"utf16\":\n            case \"utf16be\":\n                return Utf16Converter.fromString(text);\n            case \"utf16le\":\n            case \"usc2\":\n                return Utf16Converter.fromString(text, true);\n            default:\n                throw new Error(`Unknown type of encoding '${encoding}'`);\n        }\n    }\n    static ToUtf8String(buffer, encoding = Convert.DEFAULT_UTF8_ENCODING) {\n        switch (encoding) {\n            case \"ascii\":\n                return this.ToBinary(buffer);\n            case \"utf8\":\n                return Utf8Converter.toString(buffer);\n            case \"utf16\":\n            case \"utf16be\":\n                return Utf16Converter.toString(buffer);\n            case \"utf16le\":\n            case \"usc2\":\n                return Utf16Converter.toString(buffer, true);\n            default:\n                throw new Error(`Unknown type of encoding '${encoding}'`);\n        }\n    }\n    static FromBinary(text) {\n        const stringLength = text.length;\n        const resultView = new Uint8Array(stringLength);\n        for (let i = 0; i < stringLength; i++) {\n            resultView[i] = text.charCodeAt(i);\n        }\n        return resultView.buffer;\n    }\n    static ToBinary(buffer) {\n        const buf = BufferSourceConverter.toUint8Array(buffer);\n        let res = \"\";\n        for (let i = 0; i < buf.length; i++) {\n            res += String.fromCharCode(buf[i]);\n        }\n        return res;\n    }\n    static ToHex(buffer) {\n        const buf = BufferSourceConverter.toUint8Array(buffer);\n        let result = \"\";\n        const len = buf.length;\n        for (let i = 0; i < len; i++) {\n            const byte = buf[i];\n            if (byte < 16) {\n                result += \"0\";\n            }\n            result += byte.toString(16);\n        }\n        return result;\n    }\n    static FromHex(hexString) {\n        let formatted = this.formatString(hexString);\n        if (!formatted) {\n            return new ArrayBuffer(0);\n        }\n        if (!Convert.isHex(formatted)) {\n            throw new TypeError(\"Argument 'hexString' is not HEX encoded\");\n        }\n        if (formatted.length % 2) {\n            formatted = `0${formatted}`;\n        }\n        const res = new Uint8Array(formatted.length / 2);\n        for (let i = 0; i < formatted.length; i = i + 2) {\n            const c = formatted.slice(i, i + 2);\n            res[i / 2] = parseInt(c, 16);\n        }\n        return res.buffer;\n    }\n    static ToUtf16String(buffer, littleEndian = false) {\n        return Utf16Converter.toString(buffer, littleEndian);\n    }\n    static FromUtf16String(text, littleEndian = false) {\n        return Utf16Converter.fromString(text, littleEndian);\n    }\n    static Base64Padding(base64) {\n        const padCount = 4 - (base64.length % 4);\n        if (padCount < 4) {\n            for (let i = 0; i < padCount; i++) {\n                base64 += \"=\";\n            }\n        }\n        return base64;\n    }\n    static formatString(data) {\n        return (data === null || data === void 0 ? void 0 : data.replace(/[\\n\\r\\t ]/g, \"\")) || \"\";\n    }\n}\nConvert.DEFAULT_UTF8_ENCODING = \"utf8\";\n\nfunction assign(target, ...sources) {\n    const res = arguments[0];\n    for (let i = 1; i < arguments.length; i++) {\n        const obj = arguments[i];\n        for (const prop in obj) {\n            res[prop] = obj[prop];\n        }\n    }\n    return res;\n}\nfunction combine(...buf) {\n    const totalByteLength = buf.map((item) => item.byteLength).reduce((prev, cur) => prev + cur);\n    const res = new Uint8Array(totalByteLength);\n    let currentPos = 0;\n    buf.map((item) => new Uint8Array(item)).forEach((arr) => {\n        for (const item2 of arr) {\n            res[currentPos++] = item2;\n        }\n    });\n    return res.buffer;\n}\nfunction isEqual(bytes1, bytes2) {\n    if (!(bytes1 && bytes2)) {\n        return false;\n    }\n    if (bytes1.byteLength !== bytes2.byteLength) {\n        return false;\n    }\n    const b1 = new Uint8Array(bytes1);\n    const b2 = new Uint8Array(bytes2);\n    for (let i = 0; i < bytes1.byteLength; i++) {\n        if (b1[i] !== b2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n\nexports.BufferSourceConverter = BufferSourceConverter;\nexports.Convert = Convert;\nexports.assign = assign;\nexports.combine = combine;\nexports.isEqual = isEqual;\n", "// This loads all middlewares exposed on the middleware object and then starts\n// the invocation chain. The big idea is that we can add these to the middleware\n// export dynamically through wrangler, or we can potentially let users directly\n// add them as a sort of \"plugin\" system.\n\nimport ENTRY, { __INTERNAL_WRANGLER_MIDDLEWARE__ } from \"C:\\\\Users\\\\osayande\\\\Downloads\\\\linkedin-portfolio-projects\\\\authforge\\\\.wrangler\\\\tmp\\\\bundle-TwbsO9\\\\middleware-insertion-facade.js\";\nimport { __facade_invoke__, __facade_register__, Dispatcher } from \"C:\\\\Users\\\\osayande\\\\Downloads\\\\linkedin-portfolio-projects\\\\authforge\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\common.ts\";\nimport type { WorkerEntrypointConstructor } from \"C:\\\\Users\\\\osayande\\\\Downloads\\\\linkedin-portfolio-projects\\\\authforge\\\\.wrangler\\\\tmp\\\\bundle-TwbsO9\\\\middleware-insertion-facade.js\";\n\n// Preserve all the exports from the worker\nexport * from \"C:\\\\Users\\\\osayande\\\\Downloads\\\\linkedin-portfolio-projects\\\\authforge\\\\.wrangler\\\\tmp\\\\bundle-TwbsO9\\\\middleware-insertion-facade.js\";\n\nclass __Facade_ScheduledController__ implements ScheduledController {\n\treadonly #noRetry: ScheduledController[\"noRetry\"];\n\n\tconstructor(\n\t\treadonly scheduledTime: number,\n\t\treadonly cron: string,\n\t\tnoRetry: ScheduledController[\"noRetry\"]\n\t) {\n\t\tthis.#noRetry = noRetry;\n\t}\n\n\tnoRetry() {\n\t\tif (!(this instanceof __Facade_ScheduledController__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#noRetry();\n\t}\n}\n\nfunction wrapExportedHandler(worker: ExportedHandler): ExportedHandler {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn worker;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\tconst fetchDispatcher: ExportedHandlerFetchHandler = function (\n\t\trequest,\n\t\tenv,\n\t\tctx\n\t) {\n\t\tif (worker.fetch === undefined) {\n\t\t\tthrow new Error(\"Handler does not export a fetch() function.\");\n\t\t}\n\t\treturn worker.fetch(request, env, ctx);\n\t};\n\n\treturn {\n\t\t...worker,\n\t\tfetch(request, env, ctx) {\n\t\t\tconst dispatcher: Dispatcher = function (type, init) {\n\t\t\t\tif (type === \"scheduled\" && worker.scheduled !== undefined) {\n\t\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\t\tDate.now(),\n\t\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t\t() => {}\n\t\t\t\t\t);\n\t\t\t\t\treturn worker.scheduled(controller, env, ctx);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn __facade_invoke__(request, env, ctx, dispatcher, fetchDispatcher);\n\t\t},\n\t};\n}\n\nfunction wrapWorkerEntrypoint(\n\tklass: WorkerEntrypointConstructor\n): WorkerEntrypointConstructor {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn klass;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\t// `extend`ing `klass` here so other RPC methods remain callable\n\treturn class extends klass {\n\t\t#fetchDispatcher: ExportedHandlerFetchHandler<Record<string, unknown>> = (\n\t\t\trequest,\n\t\t\tenv,\n\t\t\tctx\n\t\t) => {\n\t\t\tthis.env = env;\n\t\t\tthis.ctx = ctx;\n\t\t\tif (super.fetch === undefined) {\n\t\t\t\tthrow new Error(\"Entrypoint class does not define a fetch() function.\");\n\t\t\t}\n\t\t\treturn super.fetch(request);\n\t\t};\n\n\t\t#dispatcher: Dispatcher = (type, init) => {\n\t\t\tif (type === \"scheduled\" && super.scheduled !== undefined) {\n\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\tDate.now(),\n\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t() => {}\n\t\t\t\t);\n\t\t\t\treturn super.scheduled(controller);\n\t\t\t}\n\t\t};\n\n\t\tfetch(request: Request<unknown, IncomingRequestCfProperties>) {\n\t\t\treturn __facade_invoke__(\n\t\t\t\trequest,\n\t\t\t\tthis.env,\n\t\t\t\tthis.ctx,\n\t\t\t\tthis.#dispatcher,\n\t\t\t\tthis.#fetchDispatcher\n\t\t\t);\n\t\t}\n\t};\n}\n\nlet WRAPPED_ENTRY: ExportedHandler | WorkerEntrypointConstructor | undefined;\nif (typeof ENTRY === \"object\") {\n\tWRAPPED_ENTRY = wrapExportedHandler(ENTRY);\n} else if (typeof ENTRY === \"function\") {\n\tWRAPPED_ENTRY = wrapWorkerEntrypoint(ENTRY);\n}\nexport default WRAPPED_ENTRY;\n", "\t\t\t\timport worker, * as OTHER_EXPORTS from \"C:\\\\Users\\\\osayande\\\\Downloads\\\\linkedin-portfolio-projects\\\\authforge\\\\src\\\\index.ts\";\n\t\t\t\timport * as __MIDDLEWARE_0__ from \"C:\\\\Users\\\\osayande\\\\Downloads\\\\linkedin-portfolio-projects\\\\authforge\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-ensure-req-body-drained.ts\";\nimport * as __MIDDLEWARE_1__ from \"C:\\\\Users\\\\osayande\\\\Downloads\\\\linkedin-portfolio-projects\\\\authforge\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-miniflare3-json-error.ts\";\n\n\t\t\t\texport * from \"C:\\\\Users\\\\osayande\\\\Downloads\\\\linkedin-portfolio-projects\\\\authforge\\\\src\\\\index.ts\";\n\n\t\t\t\texport const __INTERNAL_WRANGLER_MIDDLEWARE__ = [\n\t\t\t\t\t\n\t\t\t\t\t__MIDDLEWARE_0__.default,__MIDDLEWARE_1__.default\n\t\t\t\t]\n\t\t\t\texport default worker;", "// AuthForge - Self-hosted Authentication Platform\r\n// Main entry point for Cloudflare Workers\r\n\r\nimport { Hono } from 'hono';\r\nimport { cors } from 'hono/cors';\r\nimport { secureHeaders } from 'hono/secure-headers';\r\nimport { logger } from 'hono/logger';\r\n\r\nimport { authRoutes } from './routes/auth';\r\nimport { passkeysRoutes } from './routes/passkeys';\r\nimport { oauthRoutes } from './routes/oauth';\r\nimport { oidcRoutes } from './routes/oidc';\r\nimport { sessionsRoutes } from './routes/sessions';\r\nimport { vaultRoutes } from './routes/vault';\r\nimport { usersRoutes } from './routes/users';\r\nimport { Env } from './types';\r\n\r\nconst app = new Hono<{ Bindings: Env }>();\r\n\r\n// Global middleware\r\napp.use('*', logger());\r\napp.use('*', secureHeaders());\r\napp.use('*', cors({\r\n  origin: (origin, c) => {\r\n    const allowed = c.env.ALLOWED_ORIGINS?.split(',') || [];\r\n    if (!origin || allowed.includes(origin) || allowed.includes('*')) {\r\n      return origin || '*';\r\n    }\r\n    return null;\r\n  },\r\n  credentials: true,\r\n  allowMethods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'],\r\n  allowHeaders: ['Content-Type', 'Authorization', 'X-API-Key'],\r\n  exposeHeaders: ['X-Request-Id'],\r\n  maxAge: 86400,\r\n}));\r\n\r\n// Health check\r\napp.get('/', (c) => {\r\n  return c.json({\r\n    name: 'AuthForge',\r\n    version: '1.0.0',\r\n    status: 'healthy',\r\n    docs: '/docs',\r\n    timestamp: new Date().toISOString()\r\n  });\r\n});\r\n\r\n// API documentation\r\napp.get('/docs', (c) => {\r\n  return c.json({\r\n    name: 'AuthForge API',\r\n    version: '1.0.0',\r\n    description: 'Self-hosted authentication platform with Passkeys, OAuth, Magic Links & Encrypted Vault',\r\n    endpoints: {\r\n      auth: {\r\n        'POST /auth/register': 'Register with email/password',\r\n        'POST /auth/login': 'Login with email/password',\r\n        'POST /auth/magic-link': 'Request magic link',\r\n        'GET /auth/magic-link/verify': 'Verify magic link',\r\n        'POST /auth/logout': 'Logout current session',\r\n        'POST /auth/2fa/setup': 'Setup TOTP 2FA',\r\n        'POST /auth/2fa/verify': 'Verify TOTP code',\r\n        'POST /auth/2fa/disable': 'Disable 2FA',\r\n      },\r\n      passkeys: {\r\n        'POST /passkeys/register/options': 'Get registration options',\r\n        'POST /passkeys/register/verify': 'Verify and save passkey',\r\n        'POST /passkeys/login/options': 'Get authentication options',\r\n        'POST /passkeys/login/verify': 'Verify passkey login',\r\n        'GET /passkeys': 'List user passkeys',\r\n        'DELETE /passkeys/:id': 'Remove a passkey',\r\n      },\r\n      oauth: {\r\n        'GET /oauth/google': 'Initiate Google OAuth',\r\n        'GET /oauth/google/callback': 'Google OAuth callback',\r\n        'GET /oauth/github': 'Initiate GitHub OAuth',\r\n        'GET /oauth/github/callback': 'GitHub OAuth callback',\r\n      },\r\n      sessions: {\r\n        'GET /sessions': 'List active sessions',\r\n        'DELETE /sessions/:id': 'Revoke a session',\r\n        'DELETE /sessions': 'Revoke all other sessions',\r\n      },\r\n      vault: {\r\n        'GET /vault/items': 'List vault items',\r\n        'POST /vault/items': 'Create vault item',\r\n        'GET /vault/items/:id': 'Get vault item',\r\n        'PUT /vault/items/:id': 'Update vault item',\r\n        'DELETE /vault/items/:id': 'Delete vault item',\r\n        'GET /vault/folders': 'List folders',\r\n        'POST /vault/folders': 'Create folder',\r\n      },\r\n      users: {\r\n        'GET /users/me': 'Get current user',\r\n        'PUT /users/me': 'Update profile',\r\n        'DELETE /users/me': 'Delete account',\r\n        'GET /users/audit-log': 'Get audit log',\r\n      },\r\n      oidc: {\r\n        'GET /.well-known/openid-configuration': 'OIDC Discovery (auto-configure SSO)',\r\n        'GET /oidc/authorize': 'Authorization endpoint',\r\n        'POST /oidc/token': 'Token endpoint',\r\n        'GET /oidc/userinfo': 'User info endpoint',\r\n        'GET /oidc/jwks': 'JSON Web Key Set',\r\n        'POST /oidc/register': 'Dynamic client registration',\r\n      }\r\n    }\r\n  });\r\n});\r\n\r\n// Mount routes\r\napp.route('/auth', authRoutes);\r\napp.route('/passkeys', passkeysRoutes);\r\napp.route('/oauth', oauthRoutes);\r\napp.route('/oidc', oidcRoutes);\r\napp.route('/sessions', sessionsRoutes);\r\napp.route('/vault', vaultRoutes);\r\napp.route('/users', usersRoutes);\r\n\r\n// OIDC Discovery at well-known path (required by spec)\r\napp.route('', oidcRoutes);\r\n\r\n// 404 handler\r\napp.notFound((c) => {\r\n  return c.json({ error: 'Not Found', message: 'The requested endpoint does not exist' }, 404);\r\n});\r\n\r\n// Error handler\r\napp.onError((err, c) => {\r\n  console.error('Unhandled error:', err);\r\n  return c.json({ \r\n    error: 'Internal Server Error', \r\n    message: c.env.ENVIRONMENT === 'production' ? 'Something went wrong' : err.message \r\n  }, 500);\r\n});\r\n\r\nexport default app;\r\n", "// src/index.ts\nimport { Hono } from \"./hono.js\";\nexport {\n  Hono\n};\n", "// src/hono.ts\nimport { HonoBase } from \"./hono-base.js\";\nimport { RegExpRouter } from \"./router/reg-exp-router/index.js\";\nimport { SmartRouter } from \"./router/smart-router/index.js\";\nimport { TrieRouter } from \"./router/trie-router/index.js\";\nvar Hono = class extends HonoBase {\n  /**\n   * Creates an instance of the Hono class.\n   *\n   * @param options - Optional configuration options for the Hono instance.\n   */\n  constructor(options = {}) {\n    super(options);\n    this.router = options.router ?? new SmartRouter({\n      routers: [new RegExpRouter(), new TrieRouter()]\n    });\n  }\n};\nexport {\n  Hono\n};\n", "// src/hono-base.ts\nimport { compose } from \"./compose.js\";\nimport { Context } from \"./context.js\";\nimport { METHODS, METHOD_NAME_ALL, METHOD_NAME_ALL_LOWERCASE } from \"./router.js\";\nimport { COMPOSED_HANDLER } from \"./utils/constants.js\";\nimport { getPath, getPathNoStrict, mergePath } from \"./utils/url.js\";\nvar notFoundHandler = (c) => {\n  return c.text(\"404 Not Found\", 404);\n};\nvar errorHandler = (err, c) => {\n  if (\"getResponse\" in err) {\n    const res = err.getResponse();\n    return c.newResponse(res.body, res);\n  }\n  console.error(err);\n  return c.text(\"Internal Server Error\", 500);\n};\nvar Hono = class _Hono {\n  get;\n  post;\n  put;\n  delete;\n  options;\n  patch;\n  all;\n  on;\n  use;\n  /*\n    This class is like an abstract class and does not have a router.\n    To use it, inherit the class and implement router in the constructor.\n  */\n  router;\n  getPath;\n  // Cannot use `#` because it requires visibility at JavaScript runtime.\n  _basePath = \"/\";\n  #path = \"/\";\n  routes = [];\n  constructor(options = {}) {\n    const allMethods = [...METHODS, METHOD_NAME_ALL_LOWERCASE];\n    allMethods.forEach((method) => {\n      this[method] = (args1, ...args) => {\n        if (typeof args1 === \"string\") {\n          this.#path = args1;\n        } else {\n          this.#addRoute(method, this.#path, args1);\n        }\n        args.forEach((handler) => {\n          this.#addRoute(method, this.#path, handler);\n        });\n        return this;\n      };\n    });\n    this.on = (method, path, ...handlers) => {\n      for (const p of [path].flat()) {\n        this.#path = p;\n        for (const m of [method].flat()) {\n          handlers.map((handler) => {\n            this.#addRoute(m.toUpperCase(), this.#path, handler);\n          });\n        }\n      }\n      return this;\n    };\n    this.use = (arg1, ...handlers) => {\n      if (typeof arg1 === \"string\") {\n        this.#path = arg1;\n      } else {\n        this.#path = \"*\";\n        handlers.unshift(arg1);\n      }\n      handlers.forEach((handler) => {\n        this.#addRoute(METHOD_NAME_ALL, this.#path, handler);\n      });\n      return this;\n    };\n    const { strict, ...optionsWithoutStrict } = options;\n    Object.assign(this, optionsWithoutStrict);\n    this.getPath = strict ?? true ? options.getPath ?? getPath : getPathNoStrict;\n  }\n  #clone() {\n    const clone = new _Hono({\n      router: this.router,\n      getPath: this.getPath\n    });\n    clone.errorHandler = this.errorHandler;\n    clone.#notFoundHandler = this.#notFoundHandler;\n    clone.routes = this.routes;\n    return clone;\n  }\n  #notFoundHandler = notFoundHandler;\n  // Cannot use `#` because it requires visibility at JavaScript runtime.\n  errorHandler = errorHandler;\n  /**\n   * `.route()` allows grouping other Hono instance in routes.\n   *\n   * @see {@link https://hono.dev/docs/api/routing#grouping}\n   *\n   * @param {string} path - base Path\n   * @param {Hono} app - other Hono instance\n   * @returns {Hono} routed Hono instance\n   *\n   * @example\n   * ```ts\n   * const app = new Hono()\n   * const app2 = new Hono()\n   *\n   * app2.get(\"/user\", (c) => c.text(\"user\"))\n   * app.route(\"/api\", app2) // GET /api/user\n   * ```\n   */\n  route(path, app) {\n    const subApp = this.basePath(path);\n    app.routes.map((r) => {\n      let handler;\n      if (app.errorHandler === errorHandler) {\n        handler = r.handler;\n      } else {\n        handler = async (c, next) => (await compose([], app.errorHandler)(c, () => r.handler(c, next))).res;\n        handler[COMPOSED_HANDLER] = r.handler;\n      }\n      subApp.#addRoute(r.method, r.path, handler);\n    });\n    return this;\n  }\n  /**\n   * `.basePath()` allows base paths to be specified.\n   *\n   * @see {@link https://hono.dev/docs/api/routing#base-path}\n   *\n   * @param {string} path - base Path\n   * @returns {Hono} changed Hono instance\n   *\n   * @example\n   * ```ts\n   * const api = new Hono().basePath('/api')\n   * ```\n   */\n  basePath(path) {\n    const subApp = this.#clone();\n    subApp._basePath = mergePath(this._basePath, path);\n    return subApp;\n  }\n  /**\n   * `.onError()` handles an error and returns a customized Response.\n   *\n   * @see {@link https://hono.dev/docs/api/hono#error-handling}\n   *\n   * @param {ErrorHandler} handler - request Handler for error\n   * @returns {Hono} changed Hono instance\n   *\n   * @example\n   * ```ts\n   * app.onError((err, c) => {\n   *   console.error(`${err}`)\n   *   return c.text('Custom Error Message', 500)\n   * })\n   * ```\n   */\n  onError = (handler) => {\n    this.errorHandler = handler;\n    return this;\n  };\n  /**\n   * `.notFound()` allows you to customize a Not Found Response.\n   *\n   * @see {@link https://hono.dev/docs/api/hono#not-found}\n   *\n   * @param {NotFoundHandler} handler - request handler for not-found\n   * @returns {Hono} changed Hono instance\n   *\n   * @example\n   * ```ts\n   * app.notFound((c) => {\n   *   return c.text('Custom 404 Message', 404)\n   * })\n   * ```\n   */\n  notFound = (handler) => {\n    this.#notFoundHandler = handler;\n    return this;\n  };\n  /**\n   * `.mount()` allows you to mount applications built with other frameworks into your Hono application.\n   *\n   * @see {@link https://hono.dev/docs/api/hono#mount}\n   *\n   * @param {string} path - base Path\n   * @param {Function} applicationHandler - other Request Handler\n   * @param {MountOptions} [options] - options of `.mount()`\n   * @returns {Hono} mounted Hono instance\n   *\n   * @example\n   * ```ts\n   * import { Router as IttyRouter } from 'itty-router'\n   * import { Hono } from 'hono'\n   * // Create itty-router application\n   * const ittyRouter = IttyRouter()\n   * // GET /itty-router/hello\n   * ittyRouter.get('/hello', () => new Response('Hello from itty-router'))\n   *\n   * const app = new Hono()\n   * app.mount('/itty-router', ittyRouter.handle)\n   * ```\n   *\n   * @example\n   * ```ts\n   * const app = new Hono()\n   * // Send the request to another application without modification.\n   * app.mount('/app', anotherApp, {\n   *   replaceRequest: (req) => req,\n   * })\n   * ```\n   */\n  mount(path, applicationHandler, options) {\n    let replaceRequest;\n    let optionHandler;\n    if (options) {\n      if (typeof options === \"function\") {\n        optionHandler = options;\n      } else {\n        optionHandler = options.optionHandler;\n        if (options.replaceRequest === false) {\n          replaceRequest = (request) => request;\n        } else {\n          replaceRequest = options.replaceRequest;\n        }\n      }\n    }\n    const getOptions = optionHandler ? (c) => {\n      const options2 = optionHandler(c);\n      return Array.isArray(options2) ? options2 : [options2];\n    } : (c) => {\n      let executionContext = void 0;\n      try {\n        executionContext = c.executionCtx;\n      } catch {\n      }\n      return [c.env, executionContext];\n    };\n    replaceRequest ||= (() => {\n      const mergedPath = mergePath(this._basePath, path);\n      const pathPrefixLength = mergedPath === \"/\" ? 0 : mergedPath.length;\n      return (request) => {\n        const url = new URL(request.url);\n        url.pathname = url.pathname.slice(pathPrefixLength) || \"/\";\n        return new Request(url, request);\n      };\n    })();\n    const handler = async (c, next) => {\n      const res = await applicationHandler(replaceRequest(c.req.raw), ...getOptions(c));\n      if (res) {\n        return res;\n      }\n      await next();\n    };\n    this.#addRoute(METHOD_NAME_ALL, mergePath(path, \"*\"), handler);\n    return this;\n  }\n  #addRoute(method, path, handler) {\n    method = method.toUpperCase();\n    path = mergePath(this._basePath, path);\n    const r = { basePath: this._basePath, path, method, handler };\n    this.router.add(method, path, [handler, r]);\n    this.routes.push(r);\n  }\n  #handleError(err, c) {\n    if (err instanceof Error) {\n      return this.errorHandler(err, c);\n    }\n    throw err;\n  }\n  #dispatch(request, executionCtx, env, method) {\n    if (method === \"HEAD\") {\n      return (async () => new Response(null, await this.#dispatch(request, executionCtx, env, \"GET\")))();\n    }\n    const path = this.getPath(request, { env });\n    const matchResult = this.router.match(method, path);\n    const c = new Context(request, {\n      path,\n      matchResult,\n      env,\n      executionCtx,\n      notFoundHandler: this.#notFoundHandler\n    });\n    if (matchResult[0].length === 1) {\n      let res;\n      try {\n        res = matchResult[0][0][0][0](c, async () => {\n          c.res = await this.#notFoundHandler(c);\n        });\n      } catch (err) {\n        return this.#handleError(err, c);\n      }\n      return res instanceof Promise ? res.then(\n        (resolved) => resolved || (c.finalized ? c.res : this.#notFoundHandler(c))\n      ).catch((err) => this.#handleError(err, c)) : res ?? this.#notFoundHandler(c);\n    }\n    const composed = compose(matchResult[0], this.errorHandler, this.#notFoundHandler);\n    return (async () => {\n      try {\n        const context = await composed(c);\n        if (!context.finalized) {\n          throw new Error(\n            \"Context is not finalized. Did you forget to return a Response object or `await next()`?\"\n          );\n        }\n        return context.res;\n      } catch (err) {\n        return this.#handleError(err, c);\n      }\n    })();\n  }\n  /**\n   * `.fetch()` will be entry point of your app.\n   *\n   * @see {@link https://hono.dev/docs/api/hono#fetch}\n   *\n   * @param {Request} request - request Object of request\n   * @param {Env} Env - env Object\n   * @param {ExecutionContext} - context of execution\n   * @returns {Response | Promise<Response>} response of request\n   *\n   */\n  fetch = (request, ...rest) => {\n    return this.#dispatch(request, rest[1], rest[0], request.method);\n  };\n  /**\n   * `.request()` is a useful method for testing.\n   * You can pass a URL or pathname to send a GET request.\n   * app will return a Response object.\n   * ```ts\n   * test('GET /hello is ok', async () => {\n   *   const res = await app.request('/hello')\n   *   expect(res.status).toBe(200)\n   * })\n   * ```\n   * @see https://hono.dev/docs/api/hono#request\n   */\n  request = (input, requestInit, Env, executionCtx) => {\n    if (input instanceof Request) {\n      return this.fetch(requestInit ? new Request(input, requestInit) : input, Env, executionCtx);\n    }\n    input = input.toString();\n    return this.fetch(\n      new Request(\n        /^https?:\\/\\//.test(input) ? input : `http://localhost${mergePath(\"/\", input)}`,\n        requestInit\n      ),\n      Env,\n      executionCtx\n    );\n  };\n  /**\n   * `.fire()` automatically adds a global fetch event listener.\n   * This can be useful for environments that adhere to the Service Worker API, such as non-ES module Cloudflare Workers.\n   * @deprecated\n   * Use `fire` from `hono/service-worker` instead.\n   * ```ts\n   * import { Hono } from 'hono'\n   * import { fire } from 'hono/service-worker'\n   *\n   * const app = new Hono()\n   * // ...\n   * fire(app)\n   * ```\n   * @see https://hono.dev/docs/api/hono#fire\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API\n   * @see https://developers.cloudflare.com/workers/reference/migrate-to-module-workers/\n   */\n  fire = () => {\n    addEventListener(\"fetch\", (event) => {\n      event.respondWith(this.#dispatch(event.request, event, void 0, event.request.method));\n    });\n  };\n};\nexport {\n  Hono as HonoBase\n};\n", "// src/compose.ts\nvar compose = (middleware, onError, onNotFound) => {\n  return (context, next) => {\n    let index = -1;\n    return dispatch(0);\n    async function dispatch(i) {\n      if (i <= index) {\n        throw new Error(\"next() called multiple times\");\n      }\n      index = i;\n      let res;\n      let isError = false;\n      let handler;\n      if (middleware[i]) {\n        handler = middleware[i][0][0];\n        context.req.routeIndex = i;\n      } else {\n        handler = i === middleware.length && next || void 0;\n      }\n      if (handler) {\n        try {\n          res = await handler(context, () => dispatch(i + 1));\n        } catch (err) {\n          if (err instanceof Error && onError) {\n            context.error = err;\n            res = await onError(err, context);\n            isError = true;\n          } else {\n            throw err;\n          }\n        }\n      } else {\n        if (context.finalized === false && onNotFound) {\n          res = await onNotFound(context);\n        }\n      }\n      if (res && (context.finalized === false || isError)) {\n        context.res = res;\n      }\n      return context;\n    }\n  };\n};\nexport {\n  compose\n};\n", "// src/context.ts\nimport { HonoRequest } from \"./request.js\";\nimport { HtmlEscapedCallbackPhase, resolveCallback } from \"./utils/html.js\";\nvar TEXT_PLAIN = \"text/plain; charset=UTF-8\";\nvar setDefaultContentType = (contentType, headers) => {\n  return {\n    \"Content-Type\": contentType,\n    ...headers\n  };\n};\nvar Context = class {\n  #rawRequest;\n  #req;\n  /**\n   * `.env` can get bindings (environment variables, secrets, KV namespaces, D1 database, R2 bucket etc.) in Cloudflare Workers.\n   *\n   * @see {@link https://hono.dev/docs/api/context#env}\n   *\n   * @example\n   * ```ts\n   * // Environment object for Cloudflare Workers\n   * app.get('*', async c => {\n   *   const counter = c.env.COUNTER\n   * })\n   * ```\n   */\n  env = {};\n  #var;\n  finalized = false;\n  /**\n   * `.error` can get the error object from the middleware if the Handler throws an error.\n   *\n   * @see {@link https://hono.dev/docs/api/context#error}\n   *\n   * @example\n   * ```ts\n   * app.use('*', async (c, next) => {\n   *   await next()\n   *   if (c.error) {\n   *     // do something...\n   *   }\n   * })\n   * ```\n   */\n  error;\n  #status;\n  #executionCtx;\n  #res;\n  #layout;\n  #renderer;\n  #notFoundHandler;\n  #preparedHeaders;\n  #matchResult;\n  #path;\n  /**\n   * Creates an instance of the Context class.\n   *\n   * @param req - The Request object.\n   * @param options - Optional configuration options for the context.\n   */\n  constructor(req, options) {\n    this.#rawRequest = req;\n    if (options) {\n      this.#executionCtx = options.executionCtx;\n      this.env = options.env;\n      this.#notFoundHandler = options.notFoundHandler;\n      this.#path = options.path;\n      this.#matchResult = options.matchResult;\n    }\n  }\n  /**\n   * `.req` is the instance of {@link HonoRequest}.\n   */\n  get req() {\n    this.#req ??= new HonoRequest(this.#rawRequest, this.#path, this.#matchResult);\n    return this.#req;\n  }\n  /**\n   * @see {@link https://hono.dev/docs/api/context#event}\n   * The FetchEvent associated with the current request.\n   *\n   * @throws Will throw an error if the context does not have a FetchEvent.\n   */\n  get event() {\n    if (this.#executionCtx && \"respondWith\" in this.#executionCtx) {\n      return this.#executionCtx;\n    } else {\n      throw Error(\"This context has no FetchEvent\");\n    }\n  }\n  /**\n   * @see {@link https://hono.dev/docs/api/context#executionctx}\n   * The ExecutionContext associated with the current request.\n   *\n   * @throws Will throw an error if the context does not have an ExecutionContext.\n   */\n  get executionCtx() {\n    if (this.#executionCtx) {\n      return this.#executionCtx;\n    } else {\n      throw Error(\"This context has no ExecutionContext\");\n    }\n  }\n  /**\n   * @see {@link https://hono.dev/docs/api/context#res}\n   * The Response object for the current request.\n   */\n  get res() {\n    return this.#res ||= new Response(null, {\n      headers: this.#preparedHeaders ??= new Headers()\n    });\n  }\n  /**\n   * Sets the Response object for the current request.\n   *\n   * @param _res - The Response object to set.\n   */\n  set res(_res) {\n    if (this.#res && _res) {\n      _res = new Response(_res.body, _res);\n      for (const [k, v] of this.#res.headers.entries()) {\n        if (k === \"content-type\") {\n          continue;\n        }\n        if (k === \"set-cookie\") {\n          const cookies = this.#res.headers.getSetCookie();\n          _res.headers.delete(\"set-cookie\");\n          for (const cookie of cookies) {\n            _res.headers.append(\"set-cookie\", cookie);\n          }\n        } else {\n          _res.headers.set(k, v);\n        }\n      }\n    }\n    this.#res = _res;\n    this.finalized = true;\n  }\n  /**\n   * `.render()` can create a response within a layout.\n   *\n   * @see {@link https://hono.dev/docs/api/context#render-setrenderer}\n   *\n   * @example\n   * ```ts\n   * app.get('/', (c) => {\n   *   return c.render('Hello!')\n   * })\n   * ```\n   */\n  render = (...args) => {\n    this.#renderer ??= (content) => this.html(content);\n    return this.#renderer(...args);\n  };\n  /**\n   * Sets the layout for the response.\n   *\n   * @param layout - The layout to set.\n   * @returns The layout function.\n   */\n  setLayout = (layout) => this.#layout = layout;\n  /**\n   * Gets the current layout for the response.\n   *\n   * @returns The current layout function.\n   */\n  getLayout = () => this.#layout;\n  /**\n   * `.setRenderer()` can set the layout in the custom middleware.\n   *\n   * @see {@link https://hono.dev/docs/api/context#render-setrenderer}\n   *\n   * @example\n   * ```tsx\n   * app.use('*', async (c, next) => {\n   *   c.setRenderer((content) => {\n   *     return c.html(\n   *       <html>\n   *         <body>\n   *           <p>{content}</p>\n   *         </body>\n   *       </html>\n   *     )\n   *   })\n   *   await next()\n   * })\n   * ```\n   */\n  setRenderer = (renderer) => {\n    this.#renderer = renderer;\n  };\n  /**\n   * `.header()` can set headers.\n   *\n   * @see {@link https://hono.dev/docs/api/context#header}\n   *\n   * @example\n   * ```ts\n   * app.get('/welcome', (c) => {\n   *   // Set headers\n   *   c.header('X-Message', 'Hello!')\n   *   c.header('Content-Type', 'text/plain')\n   *\n   *   return c.body('Thank you for coming')\n   * })\n   * ```\n   */\n  header = (name, value, options) => {\n    if (this.finalized) {\n      this.#res = new Response(this.#res.body, this.#res);\n    }\n    const headers = this.#res ? this.#res.headers : this.#preparedHeaders ??= new Headers();\n    if (value === void 0) {\n      headers.delete(name);\n    } else if (options?.append) {\n      headers.append(name, value);\n    } else {\n      headers.set(name, value);\n    }\n  };\n  status = (status) => {\n    this.#status = status;\n  };\n  /**\n   * `.set()` can set the value specified by the key.\n   *\n   * @see {@link https://hono.dev/docs/api/context#set-get}\n   *\n   * @example\n   * ```ts\n   * app.use('*', async (c, next) => {\n   *   c.set('message', 'Hono is hot!!')\n   *   await next()\n   * })\n   * ```\n   */\n  set = (key, value) => {\n    this.#var ??= /* @__PURE__ */ new Map();\n    this.#var.set(key, value);\n  };\n  /**\n   * `.get()` can use the value specified by the key.\n   *\n   * @see {@link https://hono.dev/docs/api/context#set-get}\n   *\n   * @example\n   * ```ts\n   * app.get('/', (c) => {\n   *   const message = c.get('message')\n   *   return c.text(`The message is \"${message}\"`)\n   * })\n   * ```\n   */\n  get = (key) => {\n    return this.#var ? this.#var.get(key) : void 0;\n  };\n  /**\n   * `.var` can access the value of a variable.\n   *\n   * @see {@link https://hono.dev/docs/api/context#var}\n   *\n   * @example\n   * ```ts\n   * const result = c.var.client.oneMethod()\n   * ```\n   */\n  // c.var.propName is a read-only\n  get var() {\n    if (!this.#var) {\n      return {};\n    }\n    return Object.fromEntries(this.#var);\n  }\n  #newResponse(data, arg, headers) {\n    const responseHeaders = this.#res ? new Headers(this.#res.headers) : this.#preparedHeaders ?? new Headers();\n    if (typeof arg === \"object\" && \"headers\" in arg) {\n      const argHeaders = arg.headers instanceof Headers ? arg.headers : new Headers(arg.headers);\n      for (const [key, value] of argHeaders) {\n        if (key.toLowerCase() === \"set-cookie\") {\n          responseHeaders.append(key, value);\n        } else {\n          responseHeaders.set(key, value);\n        }\n      }\n    }\n    if (headers) {\n      for (const [k, v] of Object.entries(headers)) {\n        if (typeof v === \"string\") {\n          responseHeaders.set(k, v);\n        } else {\n          responseHeaders.delete(k);\n          for (const v2 of v) {\n            responseHeaders.append(k, v2);\n          }\n        }\n      }\n    }\n    const status = typeof arg === \"number\" ? arg : arg?.status ?? this.#status;\n    return new Response(data, { status, headers: responseHeaders });\n  }\n  newResponse = (...args) => this.#newResponse(...args);\n  /**\n   * `.body()` can return the HTTP response.\n   * You can set headers with `.header()` and set HTTP status code with `.status`.\n   * This can also be set in `.text()`, `.json()` and so on.\n   *\n   * @see {@link https://hono.dev/docs/api/context#body}\n   *\n   * @example\n   * ```ts\n   * app.get('/welcome', (c) => {\n   *   // Set headers\n   *   c.header('X-Message', 'Hello!')\n   *   c.header('Content-Type', 'text/plain')\n   *   // Set HTTP status code\n   *   c.status(201)\n   *\n   *   // Return the response body\n   *   return c.body('Thank you for coming')\n   * })\n   * ```\n   */\n  body = (data, arg, headers) => this.#newResponse(data, arg, headers);\n  /**\n   * `.text()` can render text as `Content-Type:text/plain`.\n   *\n   * @see {@link https://hono.dev/docs/api/context#text}\n   *\n   * @example\n   * ```ts\n   * app.get('/say', (c) => {\n   *   return c.text('Hello!')\n   * })\n   * ```\n   */\n  text = (text, arg, headers) => {\n    return !this.#preparedHeaders && !this.#status && !arg && !headers && !this.finalized ? new Response(text) : this.#newResponse(\n      text,\n      arg,\n      setDefaultContentType(TEXT_PLAIN, headers)\n    );\n  };\n  /**\n   * `.json()` can render JSON as `Content-Type:application/json`.\n   *\n   * @see {@link https://hono.dev/docs/api/context#json}\n   *\n   * @example\n   * ```ts\n   * app.get('/api', (c) => {\n   *   return c.json({ message: 'Hello!' })\n   * })\n   * ```\n   */\n  json = (object, arg, headers) => {\n    return this.#newResponse(\n      JSON.stringify(object),\n      arg,\n      setDefaultContentType(\"application/json\", headers)\n    );\n  };\n  html = (html, arg, headers) => {\n    const res = (html2) => this.#newResponse(html2, arg, setDefaultContentType(\"text/html; charset=UTF-8\", headers));\n    return typeof html === \"object\" ? resolveCallback(html, HtmlEscapedCallbackPhase.Stringify, false, {}).then(res) : res(html);\n  };\n  /**\n   * `.redirect()` can Redirect, default status code is 302.\n   *\n   * @see {@link https://hono.dev/docs/api/context#redirect}\n   *\n   * @example\n   * ```ts\n   * app.get('/redirect', (c) => {\n   *   return c.redirect('/')\n   * })\n   * app.get('/redirect-permanently', (c) => {\n   *   return c.redirect('/', 301)\n   * })\n   * ```\n   */\n  redirect = (location, status) => {\n    const locationString = String(location);\n    this.header(\n      \"Location\",\n      // Multibyes should be encoded\n      // eslint-disable-next-line no-control-regex\n      !/[^\\x00-\\xFF]/.test(locationString) ? locationString : encodeURI(locationString)\n    );\n    return this.newResponse(null, status ?? 302);\n  };\n  /**\n   * `.notFound()` can return the Not Found Response.\n   *\n   * @see {@link https://hono.dev/docs/api/context#notfound}\n   *\n   * @example\n   * ```ts\n   * app.get('/notfound', (c) => {\n   *   return c.notFound()\n   * })\n   * ```\n   */\n  notFound = () => {\n    this.#notFoundHandler ??= () => new Response();\n    return this.#notFoundHandler(this);\n  };\n};\nexport {\n  Context,\n  TEXT_PLAIN\n};\n", "// src/request.ts\nimport { HTTPException } from \"./http-exception.js\";\nimport { GET_MATCH_RESULT } from \"./request/constants.js\";\nimport { parseBody } from \"./utils/body.js\";\nimport { decodeURIComponent_, getQueryParam, getQueryParams, tryDecode } from \"./utils/url.js\";\nvar tryDecodeURIComponent = (str) => tryDecode(str, decodeURIComponent_);\nvar HonoRequest = class {\n  /**\n   * `.raw` can get the raw Request object.\n   *\n   * @see {@link https://hono.dev/docs/api/request#raw}\n   *\n   * @example\n   * ```ts\n   * // For Cloudflare Workers\n   * app.post('/', async (c) => {\n   *   const metadata = c.req.raw.cf?.hostMetadata?\n   *   ...\n   * })\n   * ```\n   */\n  raw;\n  #validatedData;\n  // Short name of validatedData\n  #matchResult;\n  routeIndex = 0;\n  /**\n   * `.path` can get the pathname of the request.\n   *\n   * @see {@link https://hono.dev/docs/api/request#path}\n   *\n   * @example\n   * ```ts\n   * app.get('/about/me', (c) => {\n   *   const pathname = c.req.path // `/about/me`\n   * })\n   * ```\n   */\n  path;\n  bodyCache = {};\n  constructor(request, path = \"/\", matchResult = [[]]) {\n    this.raw = request;\n    this.path = path;\n    this.#matchResult = matchResult;\n    this.#validatedData = {};\n  }\n  param(key) {\n    return key ? this.#getDecodedParam(key) : this.#getAllDecodedParams();\n  }\n  #getDecodedParam(key) {\n    const paramKey = this.#matchResult[0][this.routeIndex][1][key];\n    const param = this.#getParamValue(paramKey);\n    return param && /\\%/.test(param) ? tryDecodeURIComponent(param) : param;\n  }\n  #getAllDecodedParams() {\n    const decoded = {};\n    const keys = Object.keys(this.#matchResult[0][this.routeIndex][1]);\n    for (const key of keys) {\n      const value = this.#getParamValue(this.#matchResult[0][this.routeIndex][1][key]);\n      if (value !== void 0) {\n        decoded[key] = /\\%/.test(value) ? tryDecodeURIComponent(value) : value;\n      }\n    }\n    return decoded;\n  }\n  #getParamValue(paramKey) {\n    return this.#matchResult[1] ? this.#matchResult[1][paramKey] : paramKey;\n  }\n  query(key) {\n    return getQueryParam(this.url, key);\n  }\n  queries(key) {\n    return getQueryParams(this.url, key);\n  }\n  header(name) {\n    if (name) {\n      return this.raw.headers.get(name) ?? void 0;\n    }\n    const headerData = {};\n    this.raw.headers.forEach((value, key) => {\n      headerData[key] = value;\n    });\n    return headerData;\n  }\n  async parseBody(options) {\n    return this.bodyCache.parsedBody ??= await parseBody(this, options);\n  }\n  #cachedBody = (key) => {\n    const { bodyCache, raw } = this;\n    const cachedBody = bodyCache[key];\n    if (cachedBody) {\n      return cachedBody;\n    }\n    const anyCachedKey = Object.keys(bodyCache)[0];\n    if (anyCachedKey) {\n      return bodyCache[anyCachedKey].then((body) => {\n        if (anyCachedKey === \"json\") {\n          body = JSON.stringify(body);\n        }\n        return new Response(body)[key]();\n      });\n    }\n    return bodyCache[key] = raw[key]();\n  };\n  /**\n   * `.json()` can parse Request body of type `application/json`\n   *\n   * @see {@link https://hono.dev/docs/api/request#json}\n   *\n   * @example\n   * ```ts\n   * app.post('/entry', async (c) => {\n   *   const body = await c.req.json()\n   * })\n   * ```\n   */\n  json() {\n    return this.#cachedBody(\"text\").then((text) => JSON.parse(text));\n  }\n  /**\n   * `.text()` can parse Request body of type `text/plain`\n   *\n   * @see {@link https://hono.dev/docs/api/request#text}\n   *\n   * @example\n   * ```ts\n   * app.post('/entry', async (c) => {\n   *   const body = await c.req.text()\n   * })\n   * ```\n   */\n  text() {\n    return this.#cachedBody(\"text\");\n  }\n  /**\n   * `.arrayBuffer()` parse Request body as an `ArrayBuffer`\n   *\n   * @see {@link https://hono.dev/docs/api/request#arraybuffer}\n   *\n   * @example\n   * ```ts\n   * app.post('/entry', async (c) => {\n   *   const body = await c.req.arrayBuffer()\n   * })\n   * ```\n   */\n  arrayBuffer() {\n    return this.#cachedBody(\"arrayBuffer\");\n  }\n  /**\n   * Parses the request body as a `Blob`.\n   * @example\n   * ```ts\n   * app.post('/entry', async (c) => {\n   *   const body = await c.req.blob();\n   * });\n   * ```\n   * @see https://hono.dev/docs/api/request#blob\n   */\n  blob() {\n    return this.#cachedBody(\"blob\");\n  }\n  /**\n   * Parses the request body as `FormData`.\n   * @example\n   * ```ts\n   * app.post('/entry', async (c) => {\n   *   const body = await c.req.formData();\n   * });\n   * ```\n   * @see https://hono.dev/docs/api/request#formdata\n   */\n  formData() {\n    return this.#cachedBody(\"formData\");\n  }\n  /**\n   * Adds validated data to the request.\n   *\n   * @param target - The target of the validation.\n   * @param data - The validated data to add.\n   */\n  addValidatedData(target, data) {\n    this.#validatedData[target] = data;\n  }\n  valid(target) {\n    return this.#validatedData[target];\n  }\n  /**\n   * `.url()` can get the request url strings.\n   *\n   * @see {@link https://hono.dev/docs/api/request#url}\n   *\n   * @example\n   * ```ts\n   * app.get('/about/me', (c) => {\n   *   const url = c.req.url // `http://localhost:8787/about/me`\n   *   ...\n   * })\n   * ```\n   */\n  get url() {\n    return this.raw.url;\n  }\n  /**\n   * `.method()` can get the method name of the request.\n   *\n   * @see {@link https://hono.dev/docs/api/request#method}\n   *\n   * @example\n   * ```ts\n   * app.get('/about/me', (c) => {\n   *   const method = c.req.method // `GET`\n   * })\n   * ```\n   */\n  get method() {\n    return this.raw.method;\n  }\n  get [GET_MATCH_RESULT]() {\n    return this.#matchResult;\n  }\n  /**\n   * `.matchedRoutes()` can return a matched route in the handler\n   *\n   * @deprecated\n   *\n   * Use matchedRoutes helper defined in \"hono/route\" instead.\n   *\n   * @see {@link https://hono.dev/docs/api/request#matchedroutes}\n   *\n   * @example\n   * ```ts\n   * app.use('*', async function logger(c, next) {\n   *   await next()\n   *   c.req.matchedRoutes.forEach(({ handler, method, path }, i) => {\n   *     const name = handler.name || (handler.length < 2 ? '[handler]' : '[middleware]')\n   *     console.log(\n   *       method,\n   *       ' ',\n   *       path,\n   *       ' '.repeat(Math.max(10 - path.length, 0)),\n   *       name,\n   *       i === c.req.routeIndex ? '<- respond from here' : ''\n   *     )\n   *   })\n   * })\n   * ```\n   */\n  get matchedRoutes() {\n    return this.#matchResult[0].map(([[, route]]) => route);\n  }\n  /**\n   * `routePath()` can retrieve the path registered within the handler\n   *\n   * @deprecated\n   *\n   * Use routePath helper defined in \"hono/route\" instead.\n   *\n   * @see {@link https://hono.dev/docs/api/request#routepath}\n   *\n   * @example\n   * ```ts\n   * app.get('/posts/:id', (c) => {\n   *   return c.json({ path: c.req.routePath })\n   * })\n   * ```\n   */\n  get routePath() {\n    return this.#matchResult[0].map(([[, route]]) => route)[this.routeIndex].path;\n  }\n};\nvar cloneRawRequest = async (req) => {\n  if (!req.raw.bodyUsed) {\n    return req.raw.clone();\n  }\n  const cacheKey = Object.keys(req.bodyCache)[0];\n  if (!cacheKey) {\n    throw new HTTPException(500, {\n      message: \"Cannot clone request: body was already consumed and not cached. Please use HonoRequest methods (e.g., req.json(), req.text()) instead of consuming req.raw directly.\"\n    });\n  }\n  const requestInit = {\n    body: await req[cacheKey](),\n    cache: req.raw.cache,\n    credentials: req.raw.credentials,\n    headers: req.header(),\n    integrity: req.raw.integrity,\n    keepalive: req.raw.keepalive,\n    method: req.method,\n    mode: req.raw.mode,\n    redirect: req.raw.redirect,\n    referrer: req.raw.referrer,\n    referrerPolicy: req.raw.referrerPolicy,\n    signal: req.raw.signal\n  };\n  return new Request(req.url, requestInit);\n};\nexport {\n  HonoRequest,\n  cloneRawRequest\n};\n", "// src/http-exception.ts\nvar HTTPException = class extends Error {\n  res;\n  status;\n  /**\n   * Creates an instance of `HTTPException`.\n   * @param status - HTTP status code for the exception. Defaults to 500.\n   * @param options - Additional options for the exception.\n   */\n  constructor(status = 500, options) {\n    super(options?.message, { cause: options?.cause });\n    this.res = options?.res;\n    this.status = status;\n  }\n  /**\n   * Returns the response object associated with the exception.\n   * If a response object is not provided, a new response is created with the error message and status code.\n   * @returns The response object.\n   */\n  getResponse() {\n    if (this.res) {\n      const newResponse = new Response(this.res.body, {\n        status: this.status,\n        headers: this.res.headers\n      });\n      return newResponse;\n    }\n    return new Response(this.message, {\n      status: this.status\n    });\n  }\n};\nexport {\n  HTTPException\n};\n", "// src/request/constants.ts\nvar GET_MATCH_RESULT = /* @__PURE__ */ Symbol();\nexport {\n  GET_MATCH_RESULT\n};\n", "// src/utils/body.ts\nimport { HonoRequest } from \"../request.js\";\nvar parseBody = async (request, options = /* @__PURE__ */ Object.create(null)) => {\n  const { all = false, dot = false } = options;\n  const headers = request instanceof HonoRequest ? request.raw.headers : request.headers;\n  const contentType = headers.get(\"Content-Type\");\n  if (contentType?.startsWith(\"multipart/form-data\") || contentType?.startsWith(\"application/x-www-form-urlencoded\")) {\n    return parseFormData(request, { all, dot });\n  }\n  return {};\n};\nasync function parseFormData(request, options) {\n  const formData = await request.formData();\n  if (formData) {\n    return convertFormDataToBodyData(formData, options);\n  }\n  return {};\n}\nfunction convertFormDataToBodyData(formData, options) {\n  const form = /* @__PURE__ */ Object.create(null);\n  formData.forEach((value, key) => {\n    const shouldParseAllValues = options.all || key.endsWith(\"[]\");\n    if (!shouldParseAllValues) {\n      form[key] = value;\n    } else {\n      handleParsingAllValues(form, key, value);\n    }\n  });\n  if (options.dot) {\n    Object.entries(form).forEach(([key, value]) => {\n      const shouldParseDotValues = key.includes(\".\");\n      if (shouldParseDotValues) {\n        handleParsingNestedValues(form, key, value);\n        delete form[key];\n      }\n    });\n  }\n  return form;\n}\nvar handleParsingAllValues = (form, key, value) => {\n  if (form[key] !== void 0) {\n    if (Array.isArray(form[key])) {\n      ;\n      form[key].push(value);\n    } else {\n      form[key] = [form[key], value];\n    }\n  } else {\n    if (!key.endsWith(\"[]\")) {\n      form[key] = value;\n    } else {\n      form[key] = [value];\n    }\n  }\n};\nvar handleParsingNestedValues = (form, key, value) => {\n  let nestedForm = form;\n  const keys = key.split(\".\");\n  keys.forEach((key2, index) => {\n    if (index === keys.length - 1) {\n      nestedForm[key2] = value;\n    } else {\n      if (!nestedForm[key2] || typeof nestedForm[key2] !== \"object\" || Array.isArray(nestedForm[key2]) || nestedForm[key2] instanceof File) {\n        nestedForm[key2] = /* @__PURE__ */ Object.create(null);\n      }\n      nestedForm = nestedForm[key2];\n    }\n  });\n};\nexport {\n  parseBody\n};\n", "// src/utils/url.ts\nvar splitPath = (path) => {\n  const paths = path.split(\"/\");\n  if (paths[0] === \"\") {\n    paths.shift();\n  }\n  return paths;\n};\nvar splitRoutingPath = (routePath) => {\n  const { groups, path } = extractGroupsFromPath(routePath);\n  const paths = splitPath(path);\n  return replaceGroupMarks(paths, groups);\n};\nvar extractGroupsFromPath = (path) => {\n  const groups = [];\n  path = path.replace(/\\{[^}]+\\}/g, (match, index) => {\n    const mark = `@${index}`;\n    groups.push([mark, match]);\n    return mark;\n  });\n  return { groups, path };\n};\nvar replaceGroupMarks = (paths, groups) => {\n  for (let i = groups.length - 1; i >= 0; i--) {\n    const [mark] = groups[i];\n    for (let j = paths.length - 1; j >= 0; j--) {\n      if (paths[j].includes(mark)) {\n        paths[j] = paths[j].replace(mark, groups[i][1]);\n        break;\n      }\n    }\n  }\n  return paths;\n};\nvar patternCache = {};\nvar getPattern = (label, next) => {\n  if (label === \"*\") {\n    return \"*\";\n  }\n  const match = label.match(/^\\:([^\\{\\}]+)(?:\\{(.+)\\})?$/);\n  if (match) {\n    const cacheKey = `${label}#${next}`;\n    if (!patternCache[cacheKey]) {\n      if (match[2]) {\n        patternCache[cacheKey] = next && next[0] !== \":\" && next[0] !== \"*\" ? [cacheKey, match[1], new RegExp(`^${match[2]}(?=/${next})`)] : [label, match[1], new RegExp(`^${match[2]}$`)];\n      } else {\n        patternCache[cacheKey] = [label, match[1], true];\n      }\n    }\n    return patternCache[cacheKey];\n  }\n  return null;\n};\nvar tryDecode = (str, decoder) => {\n  try {\n    return decoder(str);\n  } catch {\n    return str.replace(/(?:%[0-9A-Fa-f]{2})+/g, (match) => {\n      try {\n        return decoder(match);\n      } catch {\n        return match;\n      }\n    });\n  }\n};\nvar tryDecodeURI = (str) => tryDecode(str, decodeURI);\nvar getPath = (request) => {\n  const url = request.url;\n  const start = url.indexOf(\"/\", url.indexOf(\":\") + 4);\n  let i = start;\n  for (; i < url.length; i++) {\n    const charCode = url.charCodeAt(i);\n    if (charCode === 37) {\n      const queryIndex = url.indexOf(\"?\", i);\n      const path = url.slice(start, queryIndex === -1 ? void 0 : queryIndex);\n      return tryDecodeURI(path.includes(\"%25\") ? path.replace(/%25/g, \"%2525\") : path);\n    } else if (charCode === 63) {\n      break;\n    }\n  }\n  return url.slice(start, i);\n};\nvar getQueryStrings = (url) => {\n  const queryIndex = url.indexOf(\"?\", 8);\n  return queryIndex === -1 ? \"\" : \"?\" + url.slice(queryIndex + 1);\n};\nvar getPathNoStrict = (request) => {\n  const result = getPath(request);\n  return result.length > 1 && result.at(-1) === \"/\" ? result.slice(0, -1) : result;\n};\nvar mergePath = (base, sub, ...rest) => {\n  if (rest.length) {\n    sub = mergePath(sub, ...rest);\n  }\n  return `${base?.[0] === \"/\" ? \"\" : \"/\"}${base}${sub === \"/\" ? \"\" : `${base?.at(-1) === \"/\" ? \"\" : \"/\"}${sub?.[0] === \"/\" ? sub.slice(1) : sub}`}`;\n};\nvar checkOptionalParameter = (path) => {\n  if (path.charCodeAt(path.length - 1) !== 63 || !path.includes(\":\")) {\n    return null;\n  }\n  const segments = path.split(\"/\");\n  const results = [];\n  let basePath = \"\";\n  segments.forEach((segment) => {\n    if (segment !== \"\" && !/\\:/.test(segment)) {\n      basePath += \"/\" + segment;\n    } else if (/\\:/.test(segment)) {\n      if (/\\?/.test(segment)) {\n        if (results.length === 0 && basePath === \"\") {\n          results.push(\"/\");\n        } else {\n          results.push(basePath);\n        }\n        const optionalSegment = segment.replace(\"?\", \"\");\n        basePath += \"/\" + optionalSegment;\n        results.push(basePath);\n      } else {\n        basePath += \"/\" + segment;\n      }\n    }\n  });\n  return results.filter((v, i, a) => a.indexOf(v) === i);\n};\nvar _decodeURI = (value) => {\n  if (!/[%+]/.test(value)) {\n    return value;\n  }\n  if (value.indexOf(\"+\") !== -1) {\n    value = value.replace(/\\+/g, \" \");\n  }\n  return value.indexOf(\"%\") !== -1 ? tryDecode(value, decodeURIComponent_) : value;\n};\nvar _getQueryParam = (url, key, multiple) => {\n  let encoded;\n  if (!multiple && key && !/[%+]/.test(key)) {\n    let keyIndex2 = url.indexOf(\"?\", 8);\n    if (keyIndex2 === -1) {\n      return void 0;\n    }\n    if (!url.startsWith(key, keyIndex2 + 1)) {\n      keyIndex2 = url.indexOf(`&${key}`, keyIndex2 + 1);\n    }\n    while (keyIndex2 !== -1) {\n      const trailingKeyCode = url.charCodeAt(keyIndex2 + key.length + 1);\n      if (trailingKeyCode === 61) {\n        const valueIndex = keyIndex2 + key.length + 2;\n        const endIndex = url.indexOf(\"&\", valueIndex);\n        return _decodeURI(url.slice(valueIndex, endIndex === -1 ? void 0 : endIndex));\n      } else if (trailingKeyCode == 38 || isNaN(trailingKeyCode)) {\n        return \"\";\n      }\n      keyIndex2 = url.indexOf(`&${key}`, keyIndex2 + 1);\n    }\n    encoded = /[%+]/.test(url);\n    if (!encoded) {\n      return void 0;\n    }\n  }\n  const results = {};\n  encoded ??= /[%+]/.test(url);\n  let keyIndex = url.indexOf(\"?\", 8);\n  while (keyIndex !== -1) {\n    const nextKeyIndex = url.indexOf(\"&\", keyIndex + 1);\n    let valueIndex = url.indexOf(\"=\", keyIndex);\n    if (valueIndex > nextKeyIndex && nextKeyIndex !== -1) {\n      valueIndex = -1;\n    }\n    let name = url.slice(\n      keyIndex + 1,\n      valueIndex === -1 ? nextKeyIndex === -1 ? void 0 : nextKeyIndex : valueIndex\n    );\n    if (encoded) {\n      name = _decodeURI(name);\n    }\n    keyIndex = nextKeyIndex;\n    if (name === \"\") {\n      continue;\n    }\n    let value;\n    if (valueIndex === -1) {\n      value = \"\";\n    } else {\n      value = url.slice(valueIndex + 1, nextKeyIndex === -1 ? void 0 : nextKeyIndex);\n      if (encoded) {\n        value = _decodeURI(value);\n      }\n    }\n    if (multiple) {\n      if (!(results[name] && Array.isArray(results[name]))) {\n        results[name] = [];\n      }\n      ;\n      results[name].push(value);\n    } else {\n      results[name] ??= value;\n    }\n  }\n  return key ? results[key] : results;\n};\nvar getQueryParam = _getQueryParam;\nvar getQueryParams = (url, key) => {\n  return _getQueryParam(url, key, true);\n};\nvar decodeURIComponent_ = decodeURIComponent;\nexport {\n  checkOptionalParameter,\n  decodeURIComponent_,\n  getPath,\n  getPathNoStrict,\n  getPattern,\n  getQueryParam,\n  getQueryParams,\n  getQueryStrings,\n  mergePath,\n  splitPath,\n  splitRoutingPath,\n  tryDecode\n};\n", "// src/utils/html.ts\nvar HtmlEscapedCallbackPhase = {\n  Stringify: 1,\n  BeforeStream: 2,\n  Stream: 3\n};\nvar raw = (value, callbacks) => {\n  const escapedString = new String(value);\n  escapedString.isEscaped = true;\n  escapedString.callbacks = callbacks;\n  return escapedString;\n};\nvar escapeRe = /[&<>'\"]/;\nvar stringBufferToString = async (buffer, callbacks) => {\n  let str = \"\";\n  callbacks ||= [];\n  const resolvedBuffer = await Promise.all(buffer);\n  for (let i = resolvedBuffer.length - 1; ; i--) {\n    str += resolvedBuffer[i];\n    i--;\n    if (i < 0) {\n      break;\n    }\n    let r = resolvedBuffer[i];\n    if (typeof r === \"object\") {\n      callbacks.push(...r.callbacks || []);\n    }\n    const isEscaped = r.isEscaped;\n    r = await (typeof r === \"object\" ? r.toString() : r);\n    if (typeof r === \"object\") {\n      callbacks.push(...r.callbacks || []);\n    }\n    if (r.isEscaped ?? isEscaped) {\n      str += r;\n    } else {\n      const buf = [str];\n      escapeToBuffer(r, buf);\n      str = buf[0];\n    }\n  }\n  return raw(str, callbacks);\n};\nvar escapeToBuffer = (str, buffer) => {\n  const match = str.search(escapeRe);\n  if (match === -1) {\n    buffer[0] += str;\n    return;\n  }\n  let escape;\n  let index;\n  let lastIndex = 0;\n  for (index = match; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34:\n        escape = \"&quot;\";\n        break;\n      case 39:\n        escape = \"&#39;\";\n        break;\n      case 38:\n        escape = \"&amp;\";\n        break;\n      case 60:\n        escape = \"&lt;\";\n        break;\n      case 62:\n        escape = \"&gt;\";\n        break;\n      default:\n        continue;\n    }\n    buffer[0] += str.substring(lastIndex, index) + escape;\n    lastIndex = index + 1;\n  }\n  buffer[0] += str.substring(lastIndex, index);\n};\nvar resolveCallbackSync = (str) => {\n  const callbacks = str.callbacks;\n  if (!callbacks?.length) {\n    return str;\n  }\n  const buffer = [str];\n  const context = {};\n  callbacks.forEach((c) => c({ phase: HtmlEscapedCallbackPhase.Stringify, buffer, context }));\n  return buffer[0];\n};\nvar resolveCallback = async (str, phase, preserveCallbacks, context, buffer) => {\n  if (typeof str === \"object\" && !(str instanceof String)) {\n    if (!(str instanceof Promise)) {\n      str = str.toString();\n    }\n    if (str instanceof Promise) {\n      str = await str;\n    }\n  }\n  const callbacks = str.callbacks;\n  if (!callbacks?.length) {\n    return Promise.resolve(str);\n  }\n  if (buffer) {\n    buffer[0] += str;\n  } else {\n    buffer = [str];\n  }\n  const resStr = Promise.all(callbacks.map((c) => c({ phase, buffer, context }))).then(\n    (res) => Promise.all(\n      res.filter(Boolean).map((str2) => resolveCallback(str2, phase, false, context, buffer))\n    ).then(() => buffer[0])\n  );\n  if (preserveCallbacks) {\n    return raw(await resStr, callbacks);\n  } else {\n    return resStr;\n  }\n};\nexport {\n  HtmlEscapedCallbackPhase,\n  escapeToBuffer,\n  raw,\n  resolveCallback,\n  resolveCallbackSync,\n  stringBufferToString\n};\n", "// src/router.ts\nvar METHOD_NAME_ALL = \"ALL\";\nvar METHOD_NAME_ALL_LOWERCASE = \"all\";\nvar METHODS = [\"get\", \"post\", \"put\", \"delete\", \"options\", \"patch\"];\nvar MESSAGE_MATCHER_IS_ALREADY_BUILT = \"Can not add a route since the matcher is already built.\";\nvar UnsupportedPathError = class extends Error {\n};\nexport {\n  MESSAGE_MATCHER_IS_ALREADY_BUILT,\n  METHODS,\n  METHOD_NAME_ALL,\n  METHOD_NAME_ALL_LOWERCASE,\n  UnsupportedPathError\n};\n", "// src/utils/constants.ts\nvar COMPOSED_HANDLER = \"__COMPOSED_HANDLER\";\nexport {\n  COMPOSED_HANDLER\n};\n", "// src/router/reg-exp-router/index.ts\nimport { RegExpRouter } from \"./router.js\";\nimport { PreparedRegExpRouter, buildInitParams, serializeInitParams } from \"./prepared-router.js\";\nexport {\n  PreparedRegExpRouter,\n  RegExpRouter,\n  buildInitParams,\n  serializeInitParams\n};\n", "// src/router/reg-exp-router/router.ts\nimport {\n  MESSAGE_MATCHER_IS_ALREADY_BUILT,\n  METHOD_NAME_ALL,\n  UnsupportedPathError\n} from \"../../router.js\";\nimport { checkOptionalParameter } from \"../../utils/url.js\";\nimport { match, emptyParam } from \"./matcher.js\";\nimport { PATH_ERROR } from \"./node.js\";\nimport { Trie } from \"./trie.js\";\nvar nullMatcher = [/^$/, [], /* @__PURE__ */ Object.create(null)];\nvar wildcardRegExpCache = /* @__PURE__ */ Object.create(null);\nfunction buildWildcardRegExp(path) {\n  return wildcardRegExpCache[path] ??= new RegExp(\n    path === \"*\" ? \"\" : `^${path.replace(\n      /\\/\\*$|([.\\\\+*[^\\]$()])/g,\n      (_, metaChar) => metaChar ? `\\\\${metaChar}` : \"(?:|/.*)\"\n    )}$`\n  );\n}\nfunction clearWildcardRegExpCache() {\n  wildcardRegExpCache = /* @__PURE__ */ Object.create(null);\n}\nfunction buildMatcherFromPreprocessedRoutes(routes) {\n  const trie = new Trie();\n  const handlerData = [];\n  if (routes.length === 0) {\n    return nullMatcher;\n  }\n  const routesWithStaticPathFlag = routes.map(\n    (route) => [!/\\*|\\/:/.test(route[0]), ...route]\n  ).sort(\n    ([isStaticA, pathA], [isStaticB, pathB]) => isStaticA ? 1 : isStaticB ? -1 : pathA.length - pathB.length\n  );\n  const staticMap = /* @__PURE__ */ Object.create(null);\n  for (let i = 0, j = -1, len = routesWithStaticPathFlag.length; i < len; i++) {\n    const [pathErrorCheckOnly, path, handlers] = routesWithStaticPathFlag[i];\n    if (pathErrorCheckOnly) {\n      staticMap[path] = [handlers.map(([h]) => [h, /* @__PURE__ */ Object.create(null)]), emptyParam];\n    } else {\n      j++;\n    }\n    let paramAssoc;\n    try {\n      paramAssoc = trie.insert(path, j, pathErrorCheckOnly);\n    } catch (e) {\n      throw e === PATH_ERROR ? new UnsupportedPathError(path) : e;\n    }\n    if (pathErrorCheckOnly) {\n      continue;\n    }\n    handlerData[j] = handlers.map(([h, paramCount]) => {\n      const paramIndexMap = /* @__PURE__ */ Object.create(null);\n      paramCount -= 1;\n      for (; paramCount >= 0; paramCount--) {\n        const [key, value] = paramAssoc[paramCount];\n        paramIndexMap[key] = value;\n      }\n      return [h, paramIndexMap];\n    });\n  }\n  const [regexp, indexReplacementMap, paramReplacementMap] = trie.buildRegExp();\n  for (let i = 0, len = handlerData.length; i < len; i++) {\n    for (let j = 0, len2 = handlerData[i].length; j < len2; j++) {\n      const map = handlerData[i][j]?.[1];\n      if (!map) {\n        continue;\n      }\n      const keys = Object.keys(map);\n      for (let k = 0, len3 = keys.length; k < len3; k++) {\n        map[keys[k]] = paramReplacementMap[map[keys[k]]];\n      }\n    }\n  }\n  const handlerMap = [];\n  for (const i in indexReplacementMap) {\n    handlerMap[i] = handlerData[indexReplacementMap[i]];\n  }\n  return [regexp, handlerMap, staticMap];\n}\nfunction findMiddleware(middleware, path) {\n  if (!middleware) {\n    return void 0;\n  }\n  for (const k of Object.keys(middleware).sort((a, b) => b.length - a.length)) {\n    if (buildWildcardRegExp(k).test(path)) {\n      return [...middleware[k]];\n    }\n  }\n  return void 0;\n}\nvar RegExpRouter = class {\n  name = \"RegExpRouter\";\n  #middleware;\n  #routes;\n  constructor() {\n    this.#middleware = { [METHOD_NAME_ALL]: /* @__PURE__ */ Object.create(null) };\n    this.#routes = { [METHOD_NAME_ALL]: /* @__PURE__ */ Object.create(null) };\n  }\n  add(method, path, handler) {\n    const middleware = this.#middleware;\n    const routes = this.#routes;\n    if (!middleware || !routes) {\n      throw new Error(MESSAGE_MATCHER_IS_ALREADY_BUILT);\n    }\n    if (!middleware[method]) {\n      ;\n      [middleware, routes].forEach((handlerMap) => {\n        handlerMap[method] = /* @__PURE__ */ Object.create(null);\n        Object.keys(handlerMap[METHOD_NAME_ALL]).forEach((p) => {\n          handlerMap[method][p] = [...handlerMap[METHOD_NAME_ALL][p]];\n        });\n      });\n    }\n    if (path === \"/*\") {\n      path = \"*\";\n    }\n    const paramCount = (path.match(/\\/:/g) || []).length;\n    if (/\\*$/.test(path)) {\n      const re = buildWildcardRegExp(path);\n      if (method === METHOD_NAME_ALL) {\n        Object.keys(middleware).forEach((m) => {\n          middleware[m][path] ||= findMiddleware(middleware[m], path) || findMiddleware(middleware[METHOD_NAME_ALL], path) || [];\n        });\n      } else {\n        middleware[method][path] ||= findMiddleware(middleware[method], path) || findMiddleware(middleware[METHOD_NAME_ALL], path) || [];\n      }\n      Object.keys(middleware).forEach((m) => {\n        if (method === METHOD_NAME_ALL || method === m) {\n          Object.keys(middleware[m]).forEach((p) => {\n            re.test(p) && middleware[m][p].push([handler, paramCount]);\n          });\n        }\n      });\n      Object.keys(routes).forEach((m) => {\n        if (method === METHOD_NAME_ALL || method === m) {\n          Object.keys(routes[m]).forEach(\n            (p) => re.test(p) && routes[m][p].push([handler, paramCount])\n          );\n        }\n      });\n      return;\n    }\n    const paths = checkOptionalParameter(path) || [path];\n    for (let i = 0, len = paths.length; i < len; i++) {\n      const path2 = paths[i];\n      Object.keys(routes).forEach((m) => {\n        if (method === METHOD_NAME_ALL || method === m) {\n          routes[m][path2] ||= [\n            ...findMiddleware(middleware[m], path2) || findMiddleware(middleware[METHOD_NAME_ALL], path2) || []\n          ];\n          routes[m][path2].push([handler, paramCount - len + i + 1]);\n        }\n      });\n    }\n  }\n  match = match;\n  buildAllMatchers() {\n    const matchers = /* @__PURE__ */ Object.create(null);\n    Object.keys(this.#routes).concat(Object.keys(this.#middleware)).forEach((method) => {\n      matchers[method] ||= this.#buildMatcher(method);\n    });\n    this.#middleware = this.#routes = void 0;\n    clearWildcardRegExpCache();\n    return matchers;\n  }\n  #buildMatcher(method) {\n    const routes = [];\n    let hasOwnRoute = method === METHOD_NAME_ALL;\n    [this.#middleware, this.#routes].forEach((r) => {\n      const ownRoute = r[method] ? Object.keys(r[method]).map((path) => [path, r[method][path]]) : [];\n      if (ownRoute.length !== 0) {\n        hasOwnRoute ||= true;\n        routes.push(...ownRoute);\n      } else if (method !== METHOD_NAME_ALL) {\n        routes.push(\n          ...Object.keys(r[METHOD_NAME_ALL]).map((path) => [path, r[METHOD_NAME_ALL][path]])\n        );\n      }\n    });\n    if (!hasOwnRoute) {\n      return null;\n    } else {\n      return buildMatcherFromPreprocessedRoutes(routes);\n    }\n  }\n};\nexport {\n  RegExpRouter\n};\n", "// src/router/reg-exp-router/matcher.ts\nimport { METHOD_NAME_ALL } from \"../../router.js\";\nvar emptyParam = [];\nfunction match(method, path) {\n  const matchers = this.buildAllMatchers();\n  const match2 = ((method2, path2) => {\n    const matcher = matchers[method2] || matchers[METHOD_NAME_ALL];\n    const staticMatch = matcher[2][path2];\n    if (staticMatch) {\n      return staticMatch;\n    }\n    const match3 = path2.match(matcher[0]);\n    if (!match3) {\n      return [[], emptyParam];\n    }\n    const index = match3.indexOf(\"\", 1);\n    return [matcher[1][index], match3];\n  });\n  this.match = match2;\n  return match2(method, path);\n}\nexport {\n  emptyParam,\n  match\n};\n", "// src/router/reg-exp-router/node.ts\nvar LABEL_REG_EXP_STR = \"[^/]+\";\nvar ONLY_WILDCARD_REG_EXP_STR = \".*\";\nvar TAIL_WILDCARD_REG_EXP_STR = \"(?:|/.*)\";\nvar PATH_ERROR = /* @__PURE__ */ Symbol();\nvar regExpMetaChars = new Set(\".\\\\+*[^]$()\");\nfunction compareKey(a, b) {\n  if (a.length === 1) {\n    return b.length === 1 ? a < b ? -1 : 1 : -1;\n  }\n  if (b.length === 1) {\n    return 1;\n  }\n  if (a === ONLY_WILDCARD_REG_EXP_STR || a === TAIL_WILDCARD_REG_EXP_STR) {\n    return 1;\n  } else if (b === ONLY_WILDCARD_REG_EXP_STR || b === TAIL_WILDCARD_REG_EXP_STR) {\n    return -1;\n  }\n  if (a === LABEL_REG_EXP_STR) {\n    return 1;\n  } else if (b === LABEL_REG_EXP_STR) {\n    return -1;\n  }\n  return a.length === b.length ? a < b ? -1 : 1 : b.length - a.length;\n}\nvar Node = class _Node {\n  #index;\n  #varIndex;\n  #children = /* @__PURE__ */ Object.create(null);\n  insert(tokens, index, paramMap, context, pathErrorCheckOnly) {\n    if (tokens.length === 0) {\n      if (this.#index !== void 0) {\n        throw PATH_ERROR;\n      }\n      if (pathErrorCheckOnly) {\n        return;\n      }\n      this.#index = index;\n      return;\n    }\n    const [token, ...restTokens] = tokens;\n    const pattern = token === \"*\" ? restTokens.length === 0 ? [\"\", \"\", ONLY_WILDCARD_REG_EXP_STR] : [\"\", \"\", LABEL_REG_EXP_STR] : token === \"/*\" ? [\"\", \"\", TAIL_WILDCARD_REG_EXP_STR] : token.match(/^\\:([^\\{\\}]+)(?:\\{(.+)\\})?$/);\n    let node;\n    if (pattern) {\n      const name = pattern[1];\n      let regexpStr = pattern[2] || LABEL_REG_EXP_STR;\n      if (name && pattern[2]) {\n        if (regexpStr === \".*\") {\n          throw PATH_ERROR;\n        }\n        regexpStr = regexpStr.replace(/^\\((?!\\?:)(?=[^)]+\\)$)/, \"(?:\");\n        if (/\\((?!\\?:)/.test(regexpStr)) {\n          throw PATH_ERROR;\n        }\n      }\n      node = this.#children[regexpStr];\n      if (!node) {\n        if (Object.keys(this.#children).some(\n          (k) => k !== ONLY_WILDCARD_REG_EXP_STR && k !== TAIL_WILDCARD_REG_EXP_STR\n        )) {\n          throw PATH_ERROR;\n        }\n        if (pathErrorCheckOnly) {\n          return;\n        }\n        node = this.#children[regexpStr] = new _Node();\n        if (name !== \"\") {\n          node.#varIndex = context.varIndex++;\n        }\n      }\n      if (!pathErrorCheckOnly && name !== \"\") {\n        paramMap.push([name, node.#varIndex]);\n      }\n    } else {\n      node = this.#children[token];\n      if (!node) {\n        if (Object.keys(this.#children).some(\n          (k) => k.length > 1 && k !== ONLY_WILDCARD_REG_EXP_STR && k !== TAIL_WILDCARD_REG_EXP_STR\n        )) {\n          throw PATH_ERROR;\n        }\n        if (pathErrorCheckOnly) {\n          return;\n        }\n        node = this.#children[token] = new _Node();\n      }\n    }\n    node.insert(restTokens, index, paramMap, context, pathErrorCheckOnly);\n  }\n  buildRegExpStr() {\n    const childKeys = Object.keys(this.#children).sort(compareKey);\n    const strList = childKeys.map((k) => {\n      const c = this.#children[k];\n      return (typeof c.#varIndex === \"number\" ? `(${k})@${c.#varIndex}` : regExpMetaChars.has(k) ? `\\\\${k}` : k) + c.buildRegExpStr();\n    });\n    if (typeof this.#index === \"number\") {\n      strList.unshift(`#${this.#index}`);\n    }\n    if (strList.length === 0) {\n      return \"\";\n    }\n    if (strList.length === 1) {\n      return strList[0];\n    }\n    return \"(?:\" + strList.join(\"|\") + \")\";\n  }\n};\nexport {\n  Node,\n  PATH_ERROR\n};\n", "// src/router/reg-exp-router/trie.ts\nimport { Node } from \"./node.js\";\nvar Trie = class {\n  #context = { varIndex: 0 };\n  #root = new Node();\n  insert(path, index, pathErrorCheckOnly) {\n    const paramAssoc = [];\n    const groups = [];\n    for (let i = 0; ; ) {\n      let replaced = false;\n      path = path.replace(/\\{[^}]+\\}/g, (m) => {\n        const mark = `@\\\\${i}`;\n        groups[i] = [mark, m];\n        i++;\n        replaced = true;\n        return mark;\n      });\n      if (!replaced) {\n        break;\n      }\n    }\n    const tokens = path.match(/(?::[^\\/]+)|(?:\\/\\*$)|./g) || [];\n    for (let i = groups.length - 1; i >= 0; i--) {\n      const [mark] = groups[i];\n      for (let j = tokens.length - 1; j >= 0; j--) {\n        if (tokens[j].indexOf(mark) !== -1) {\n          tokens[j] = tokens[j].replace(mark, groups[i][1]);\n          break;\n        }\n      }\n    }\n    this.#root.insert(tokens, index, paramAssoc, this.#context, pathErrorCheckOnly);\n    return paramAssoc;\n  }\n  buildRegExp() {\n    let regexp = this.#root.buildRegExpStr();\n    if (regexp === \"\") {\n      return [/^$/, [], []];\n    }\n    let captureIndex = 0;\n    const indexReplacementMap = [];\n    const paramReplacementMap = [];\n    regexp = regexp.replace(/#(\\d+)|@(\\d+)|\\.\\*\\$/g, (_, handlerIndex, paramIndex) => {\n      if (handlerIndex !== void 0) {\n        indexReplacementMap[++captureIndex] = Number(handlerIndex);\n        return \"$()\";\n      }\n      if (paramIndex !== void 0) {\n        paramReplacementMap[Number(paramIndex)] = ++captureIndex;\n        return \"\";\n      }\n      return \"\";\n    });\n    return [new RegExp(`^${regexp}`), indexReplacementMap, paramReplacementMap];\n  }\n};\nexport {\n  Trie\n};\n", "// src/router/reg-exp-router/prepared-router.ts\nimport { METHOD_NAME_ALL } from \"../../router.js\";\nimport { match, emptyParam } from \"./matcher.js\";\nimport { RegExpRouter } from \"./router.js\";\nvar PreparedRegExpRouter = class {\n  name = \"PreparedRegExpRouter\";\n  #matchers;\n  #relocateMap;\n  constructor(matchers, relocateMap) {\n    this.#matchers = matchers;\n    this.#relocateMap = relocateMap;\n  }\n  #addWildcard(method, handlerData) {\n    const matcher = this.#matchers[method];\n    matcher[1].forEach((list) => list && list.push(handlerData));\n    Object.values(matcher[2]).forEach((list) => list[0].push(handlerData));\n  }\n  #addPath(method, path, handler, indexes, map) {\n    const matcher = this.#matchers[method];\n    if (!map) {\n      matcher[2][path][0].push([handler, {}]);\n    } else {\n      indexes.forEach((index) => {\n        if (typeof index === \"number\") {\n          matcher[1][index].push([handler, map]);\n        } else {\n          ;\n          matcher[2][index || path][0].push([handler, map]);\n        }\n      });\n    }\n  }\n  add(method, path, handler) {\n    if (!this.#matchers[method]) {\n      const all = this.#matchers[METHOD_NAME_ALL];\n      const staticMap = {};\n      for (const key in all[2]) {\n        staticMap[key] = [all[2][key][0].slice(), emptyParam];\n      }\n      this.#matchers[method] = [\n        all[0],\n        all[1].map((list) => Array.isArray(list) ? list.slice() : 0),\n        staticMap\n      ];\n    }\n    if (path === \"/*\" || path === \"*\") {\n      const handlerData = [handler, {}];\n      if (method === METHOD_NAME_ALL) {\n        for (const m in this.#matchers) {\n          this.#addWildcard(m, handlerData);\n        }\n      } else {\n        this.#addWildcard(method, handlerData);\n      }\n      return;\n    }\n    const data = this.#relocateMap[path];\n    if (!data) {\n      throw new Error(`Path ${path} is not registered`);\n    }\n    for (const [indexes, map] of data) {\n      if (method === METHOD_NAME_ALL) {\n        for (const m in this.#matchers) {\n          this.#addPath(m, path, handler, indexes, map);\n        }\n      } else {\n        this.#addPath(method, path, handler, indexes, map);\n      }\n    }\n  }\n  buildAllMatchers() {\n    return this.#matchers;\n  }\n  match = match;\n};\nvar buildInitParams = ({ paths }) => {\n  const RegExpRouterWithMatcherExport = class extends RegExpRouter {\n    buildAndExportAllMatchers() {\n      return this.buildAllMatchers();\n    }\n  };\n  const router = new RegExpRouterWithMatcherExport();\n  for (const path of paths) {\n    router.add(METHOD_NAME_ALL, path, path);\n  }\n  const matchers = router.buildAndExportAllMatchers();\n  const all = matchers[METHOD_NAME_ALL];\n  const relocateMap = {};\n  for (const path of paths) {\n    if (path === \"/*\" || path === \"*\") {\n      continue;\n    }\n    all[1].forEach((list, i) => {\n      list.forEach(([p, map]) => {\n        if (p === path) {\n          if (relocateMap[path]) {\n            relocateMap[path][0][1] = {\n              ...relocateMap[path][0][1],\n              ...map\n            };\n          } else {\n            relocateMap[path] = [[[], map]];\n          }\n          if (relocateMap[path][0][0].findIndex((j) => j === i) === -1) {\n            relocateMap[path][0][0].push(i);\n          }\n        }\n      });\n    });\n    for (const path2 in all[2]) {\n      all[2][path2][0].forEach(([p]) => {\n        if (p === path) {\n          relocateMap[path] ||= [[[]]];\n          const value = path2 === path ? \"\" : path2;\n          if (relocateMap[path][0][0].findIndex((v) => v === value) === -1) {\n            relocateMap[path][0][0].push(value);\n          }\n        }\n      });\n    }\n  }\n  for (let i = 0, len = all[1].length; i < len; i++) {\n    all[1][i] = all[1][i] ? [] : 0;\n  }\n  for (const path in all[2]) {\n    all[2][path][0] = [];\n  }\n  return [matchers, relocateMap];\n};\nvar serializeInitParams = ([matchers, relocateMap]) => {\n  const matchersStr = JSON.stringify(\n    matchers,\n    (_, value) => value instanceof RegExp ? `##${value.toString()}##` : value\n  ).replace(/\"##(.+?)##\"/g, (_, str) => str.replace(/\\\\\\\\/g, \"\\\\\"));\n  const relocateMapStr = JSON.stringify(relocateMap);\n  return `[${matchersStr},${relocateMapStr}]`;\n};\nexport {\n  PreparedRegExpRouter,\n  buildInitParams,\n  serializeInitParams\n};\n", "// src/router/smart-router/index.ts\nimport { SmartRouter } from \"./router.js\";\nexport {\n  SmartRouter\n};\n", "// src/router/smart-router/router.ts\nimport { MESSAGE_MATCHER_IS_ALREADY_BUILT, UnsupportedPathError } from \"../../router.js\";\nvar SmartRouter = class {\n  name = \"SmartRouter\";\n  #routers = [];\n  #routes = [];\n  constructor(init) {\n    this.#routers = init.routers;\n  }\n  add(method, path, handler) {\n    if (!this.#routes) {\n      throw new Error(MESSAGE_MATCHER_IS_ALREADY_BUILT);\n    }\n    this.#routes.push([method, path, handler]);\n  }\n  match(method, path) {\n    if (!this.#routes) {\n      throw new Error(\"Fatal error\");\n    }\n    const routers = this.#routers;\n    const routes = this.#routes;\n    const len = routers.length;\n    let i = 0;\n    let res;\n    for (; i < len; i++) {\n      const router = routers[i];\n      try {\n        for (let i2 = 0, len2 = routes.length; i2 < len2; i2++) {\n          router.add(...routes[i2]);\n        }\n        res = router.match(method, path);\n      } catch (e) {\n        if (e instanceof UnsupportedPathError) {\n          continue;\n        }\n        throw e;\n      }\n      this.match = router.match.bind(router);\n      this.#routers = [router];\n      this.#routes = void 0;\n      break;\n    }\n    if (i === len) {\n      throw new Error(\"Fatal error\");\n    }\n    this.name = `SmartRouter + ${this.activeRouter.name}`;\n    return res;\n  }\n  get activeRouter() {\n    if (this.#routes || this.#routers.length !== 1) {\n      throw new Error(\"No active router has been determined yet.\");\n    }\n    return this.#routers[0];\n  }\n};\nexport {\n  SmartRouter\n};\n", "// src/router/trie-router/index.ts\nimport { TrieRouter } from \"./router.js\";\nexport {\n  TrieRouter\n};\n", "// src/router/trie-router/router.ts\nimport { checkOptionalParameter } from \"../../utils/url.js\";\nimport { Node } from \"./node.js\";\nvar TrieRouter = class {\n  name = \"TrieRouter\";\n  #node;\n  constructor() {\n    this.#node = new Node();\n  }\n  add(method, path, handler) {\n    const results = checkOptionalParameter(path);\n    if (results) {\n      for (let i = 0, len = results.length; i < len; i++) {\n        this.#node.insert(method, results[i], handler);\n      }\n      return;\n    }\n    this.#node.insert(method, path, handler);\n  }\n  match(method, path) {\n    return this.#node.search(method, path);\n  }\n};\nexport {\n  TrieRouter\n};\n", "// src/router/trie-router/node.ts\nimport { METHOD_NAME_ALL } from \"../../router.js\";\nimport { getPattern, splitPath, splitRoutingPath } from \"../../utils/url.js\";\nvar emptyParams = /* @__PURE__ */ Object.create(null);\nvar Node = class _Node {\n  #methods;\n  #children;\n  #patterns;\n  #order = 0;\n  #params = emptyParams;\n  constructor(method, handler, children) {\n    this.#children = children || /* @__PURE__ */ Object.create(null);\n    this.#methods = [];\n    if (method && handler) {\n      const m = /* @__PURE__ */ Object.create(null);\n      m[method] = { handler, possibleKeys: [], score: 0 };\n      this.#methods = [m];\n    }\n    this.#patterns = [];\n  }\n  insert(method, path, handler) {\n    this.#order = ++this.#order;\n    let curNode = this;\n    const parts = splitRoutingPath(path);\n    const possibleKeys = [];\n    for (let i = 0, len = parts.length; i < len; i++) {\n      const p = parts[i];\n      const nextP = parts[i + 1];\n      const pattern = getPattern(p, nextP);\n      const key = Array.isArray(pattern) ? pattern[0] : p;\n      if (key in curNode.#children) {\n        curNode = curNode.#children[key];\n        if (pattern) {\n          possibleKeys.push(pattern[1]);\n        }\n        continue;\n      }\n      curNode.#children[key] = new _Node();\n      if (pattern) {\n        curNode.#patterns.push(pattern);\n        possibleKeys.push(pattern[1]);\n      }\n      curNode = curNode.#children[key];\n    }\n    curNode.#methods.push({\n      [method]: {\n        handler,\n        possibleKeys: possibleKeys.filter((v, i, a) => a.indexOf(v) === i),\n        score: this.#order\n      }\n    });\n    return curNode;\n  }\n  #getHandlerSets(node, method, nodeParams, params) {\n    const handlerSets = [];\n    for (let i = 0, len = node.#methods.length; i < len; i++) {\n      const m = node.#methods[i];\n      const handlerSet = m[method] || m[METHOD_NAME_ALL];\n      const processedSet = {};\n      if (handlerSet !== void 0) {\n        handlerSet.params = /* @__PURE__ */ Object.create(null);\n        handlerSets.push(handlerSet);\n        if (nodeParams !== emptyParams || params && params !== emptyParams) {\n          for (let i2 = 0, len2 = handlerSet.possibleKeys.length; i2 < len2; i2++) {\n            const key = handlerSet.possibleKeys[i2];\n            const processed = processedSet[handlerSet.score];\n            handlerSet.params[key] = params?.[key] && !processed ? params[key] : nodeParams[key] ?? params?.[key];\n            processedSet[handlerSet.score] = true;\n          }\n        }\n      }\n    }\n    return handlerSets;\n  }\n  search(method, path) {\n    const handlerSets = [];\n    this.#params = emptyParams;\n    const curNode = this;\n    let curNodes = [curNode];\n    const parts = splitPath(path);\n    const curNodesQueue = [];\n    for (let i = 0, len = parts.length; i < len; i++) {\n      const part = parts[i];\n      const isLast = i === len - 1;\n      const tempNodes = [];\n      for (let j = 0, len2 = curNodes.length; j < len2; j++) {\n        const node = curNodes[j];\n        const nextNode = node.#children[part];\n        if (nextNode) {\n          nextNode.#params = node.#params;\n          if (isLast) {\n            if (nextNode.#children[\"*\"]) {\n              handlerSets.push(\n                ...this.#getHandlerSets(nextNode.#children[\"*\"], method, node.#params)\n              );\n            }\n            handlerSets.push(...this.#getHandlerSets(nextNode, method, node.#params));\n          } else {\n            tempNodes.push(nextNode);\n          }\n        }\n        for (let k = 0, len3 = node.#patterns.length; k < len3; k++) {\n          const pattern = node.#patterns[k];\n          const params = node.#params === emptyParams ? {} : { ...node.#params };\n          if (pattern === \"*\") {\n            const astNode = node.#children[\"*\"];\n            if (astNode) {\n              handlerSets.push(...this.#getHandlerSets(astNode, method, node.#params));\n              astNode.#params = params;\n              tempNodes.push(astNode);\n            }\n            continue;\n          }\n          const [key, name, matcher] = pattern;\n          if (!part && !(matcher instanceof RegExp)) {\n            continue;\n          }\n          const child = node.#children[key];\n          const restPathString = parts.slice(i).join(\"/\");\n          if (matcher instanceof RegExp) {\n            const m = matcher.exec(restPathString);\n            if (m) {\n              params[name] = m[0];\n              handlerSets.push(...this.#getHandlerSets(child, method, node.#params, params));\n              if (Object.keys(child.#children).length) {\n                child.#params = params;\n                const componentCount = m[0].match(/\\//)?.length ?? 0;\n                const targetCurNodes = curNodesQueue[componentCount] ||= [];\n                targetCurNodes.push(child);\n              }\n              continue;\n            }\n          }\n          if (matcher === true || matcher.test(part)) {\n            params[name] = part;\n            if (isLast) {\n              handlerSets.push(...this.#getHandlerSets(child, method, params, node.#params));\n              if (child.#children[\"*\"]) {\n                handlerSets.push(\n                  ...this.#getHandlerSets(child.#children[\"*\"], method, params, node.#params)\n                );\n              }\n            } else {\n              child.#params = params;\n              tempNodes.push(child);\n            }\n          }\n        }\n      }\n      curNodes = tempNodes.concat(curNodesQueue.shift() ?? []);\n    }\n    if (handlerSets.length > 1) {\n      handlerSets.sort((a, b) => {\n        return a.score - b.score;\n      });\n    }\n    return [handlerSets.map(({ handler, params }) => [handler, params])];\n  }\n};\nexport {\n  Node\n};\n", "// src/middleware/cors/index.ts\nvar cors = (options) => {\n  const defaults = {\n    origin: \"*\",\n    allowMethods: [\"GET\", \"HEAD\", \"PUT\", \"POST\", \"DELETE\", \"PATCH\"],\n    allowHeaders: [],\n    exposeHeaders: []\n  };\n  const opts = {\n    ...defaults,\n    ...options\n  };\n  const findAllowOrigin = ((optsOrigin) => {\n    if (typeof optsOrigin === \"string\") {\n      if (optsOrigin === \"*\") {\n        return () => optsOrigin;\n      } else {\n        return (origin) => optsOrigin === origin ? origin : null;\n      }\n    } else if (typeof optsOrigin === \"function\") {\n      return optsOrigin;\n    } else {\n      return (origin) => optsOrigin.includes(origin) ? origin : null;\n    }\n  })(opts.origin);\n  const findAllowMethods = ((optsAllowMethods) => {\n    if (typeof optsAllowMethods === \"function\") {\n      return optsAllowMethods;\n    } else if (Array.isArray(optsAllowMethods)) {\n      return () => optsAllowMethods;\n    } else {\n      return () => [];\n    }\n  })(opts.allowMethods);\n  return async function cors2(c, next) {\n    function set(key, value) {\n      c.res.headers.set(key, value);\n    }\n    const allowOrigin = await findAllowOrigin(c.req.header(\"origin\") || \"\", c);\n    if (allowOrigin) {\n      set(\"Access-Control-Allow-Origin\", allowOrigin);\n    }\n    if (opts.credentials) {\n      set(\"Access-Control-Allow-Credentials\", \"true\");\n    }\n    if (opts.exposeHeaders?.length) {\n      set(\"Access-Control-Expose-Headers\", opts.exposeHeaders.join(\",\"));\n    }\n    if (c.req.method === \"OPTIONS\") {\n      if (opts.origin !== \"*\") {\n        set(\"Vary\", \"Origin\");\n      }\n      if (opts.maxAge != null) {\n        set(\"Access-Control-Max-Age\", opts.maxAge.toString());\n      }\n      const allowMethods = await findAllowMethods(c.req.header(\"origin\") || \"\", c);\n      if (allowMethods.length) {\n        set(\"Access-Control-Allow-Methods\", allowMethods.join(\",\"));\n      }\n      let headers = opts.allowHeaders;\n      if (!headers?.length) {\n        const requestHeaders = c.req.header(\"Access-Control-Request-Headers\");\n        if (requestHeaders) {\n          headers = requestHeaders.split(/\\s*,\\s*/);\n        }\n      }\n      if (headers?.length) {\n        set(\"Access-Control-Allow-Headers\", headers.join(\",\"));\n        c.res.headers.append(\"Vary\", \"Access-Control-Request-Headers\");\n      }\n      c.res.headers.delete(\"Content-Length\");\n      c.res.headers.delete(\"Content-Type\");\n      return new Response(null, {\n        headers: c.res.headers,\n        status: 204,\n        statusText: \"No Content\"\n      });\n    }\n    await next();\n    if (opts.origin !== \"*\") {\n      c.header(\"Vary\", \"Origin\", { append: true });\n    }\n  };\n};\nexport {\n  cors\n};\n", "// src/middleware/secure-headers/index.ts\nimport { NONCE, secureHeaders } from \"./secure-headers.js\";\nexport {\n  NONCE,\n  secureHeaders\n};\n", "// src/middleware/secure-headers/secure-headers.ts\nimport { encodeBase64 } from \"../../utils/encode.js\";\nvar HEADERS_MAP = {\n  crossOriginEmbedderPolicy: [\"Cross-Origin-Embedder-Policy\", \"require-corp\"],\n  crossOriginResourcePolicy: [\"Cross-Origin-Resource-Policy\", \"same-origin\"],\n  crossOriginOpenerPolicy: [\"Cross-Origin-Opener-Policy\", \"same-origin\"],\n  originAgentCluster: [\"Origin-Agent-Cluster\", \"?1\"],\n  referrerPolicy: [\"Referrer-Policy\", \"no-referrer\"],\n  strictTransportSecurity: [\"Strict-Transport-Security\", \"max-age=15552000; includeSubDomains\"],\n  xContentTypeOptions: [\"X-Content-Type-Options\", \"nosniff\"],\n  xDnsPrefetchControl: [\"X-DNS-Prefetch-Control\", \"off\"],\n  xDownloadOptions: [\"X-Download-Options\", \"noopen\"],\n  xFrameOptions: [\"X-Frame-Options\", \"SAMEORIGIN\"],\n  xPermittedCrossDomainPolicies: [\"X-Permitted-Cross-Domain-Policies\", \"none\"],\n  xXssProtection: [\"X-XSS-Protection\", \"0\"]\n};\nvar DEFAULT_OPTIONS = {\n  crossOriginEmbedderPolicy: false,\n  crossOriginResourcePolicy: true,\n  crossOriginOpenerPolicy: true,\n  originAgentCluster: true,\n  referrerPolicy: true,\n  strictTransportSecurity: true,\n  xContentTypeOptions: true,\n  xDnsPrefetchControl: true,\n  xDownloadOptions: true,\n  xFrameOptions: true,\n  xPermittedCrossDomainPolicies: true,\n  xXssProtection: true,\n  removePoweredBy: true,\n  permissionsPolicy: {}\n};\nvar generateNonce = () => {\n  const arrayBuffer = new Uint8Array(16);\n  crypto.getRandomValues(arrayBuffer);\n  return encodeBase64(arrayBuffer.buffer);\n};\nvar NONCE = (ctx) => {\n  const key = \"secureHeadersNonce\";\n  const init = ctx.get(key);\n  const nonce = init || generateNonce();\n  if (init == null) {\n    ctx.set(key, nonce);\n  }\n  return `'nonce-${nonce}'`;\n};\nvar secureHeaders = (customOptions) => {\n  const options = { ...DEFAULT_OPTIONS, ...customOptions };\n  const headersToSet = getFilteredHeaders(options);\n  const callbacks = [];\n  if (options.contentSecurityPolicy) {\n    const [callback, value] = getCSPDirectives(options.contentSecurityPolicy);\n    if (callback) {\n      callbacks.push(callback);\n    }\n    headersToSet.push([\"Content-Security-Policy\", value]);\n  }\n  if (options.contentSecurityPolicyReportOnly) {\n    const [callback, value] = getCSPDirectives(options.contentSecurityPolicyReportOnly);\n    if (callback) {\n      callbacks.push(callback);\n    }\n    headersToSet.push([\"Content-Security-Policy-Report-Only\", value]);\n  }\n  if (options.permissionsPolicy && Object.keys(options.permissionsPolicy).length > 0) {\n    headersToSet.push([\n      \"Permissions-Policy\",\n      getPermissionsPolicyDirectives(options.permissionsPolicy)\n    ]);\n  }\n  if (options.reportingEndpoints) {\n    headersToSet.push([\"Reporting-Endpoints\", getReportingEndpoints(options.reportingEndpoints)]);\n  }\n  if (options.reportTo) {\n    headersToSet.push([\"Report-To\", getReportToOptions(options.reportTo)]);\n  }\n  return async function secureHeaders2(ctx, next) {\n    const headersToSetForReq = callbacks.length === 0 ? headersToSet : callbacks.reduce((acc, cb) => cb(ctx, acc), headersToSet);\n    await next();\n    setHeaders(ctx, headersToSetForReq);\n    if (options?.removePoweredBy) {\n      ctx.res.headers.delete(\"X-Powered-By\");\n    }\n  };\n};\nfunction getFilteredHeaders(options) {\n  return Object.entries(HEADERS_MAP).filter(([key]) => options[key]).map(([key, defaultValue]) => {\n    const overrideValue = options[key];\n    return typeof overrideValue === \"string\" ? [defaultValue[0], overrideValue] : defaultValue;\n  });\n}\nfunction getCSPDirectives(contentSecurityPolicy) {\n  const callbacks = [];\n  const resultValues = [];\n  for (const [directive, value] of Object.entries(contentSecurityPolicy)) {\n    const valueArray = Array.isArray(value) ? value : [value];\n    valueArray.forEach((value2, i) => {\n      if (typeof value2 === \"function\") {\n        const index = i * 2 + 2 + resultValues.length;\n        callbacks.push((ctx, values) => {\n          values[index] = value2(ctx, directive);\n        });\n      }\n    });\n    resultValues.push(\n      directive.replace(\n        /[A-Z]+(?![a-z])|[A-Z]/g,\n        (match, offset) => offset ? \"-\" + match.toLowerCase() : match.toLowerCase()\n      ),\n      ...valueArray.flatMap((value2) => [\" \", value2]),\n      \"; \"\n    );\n  }\n  resultValues.pop();\n  return callbacks.length === 0 ? [void 0, resultValues.join(\"\")] : [\n    (ctx, headersToSet) => headersToSet.map((values) => {\n      if (values[0] === \"Content-Security-Policy\" || values[0] === \"Content-Security-Policy-Report-Only\") {\n        const clone = values[1].slice();\n        callbacks.forEach((cb) => {\n          cb(ctx, clone);\n        });\n        return [values[0], clone.join(\"\")];\n      } else {\n        return values;\n      }\n    }),\n    resultValues\n  ];\n}\nfunction getPermissionsPolicyDirectives(policy) {\n  return Object.entries(policy).map(([directive, value]) => {\n    const kebabDirective = camelToKebab(directive);\n    if (typeof value === \"boolean\") {\n      return `${kebabDirective}=${value ? \"*\" : \"none\"}`;\n    }\n    if (Array.isArray(value)) {\n      if (value.length === 0) {\n        return `${kebabDirective}=()`;\n      }\n      if (value.length === 1 && (value[0] === \"*\" || value[0] === \"none\")) {\n        return `${kebabDirective}=${value[0]}`;\n      }\n      const allowlist = value.map((item) => [\"self\", \"src\"].includes(item) ? item : `\"${item}\"`);\n      return `${kebabDirective}=(${allowlist.join(\" \")})`;\n    }\n    return \"\";\n  }).filter(Boolean).join(\", \");\n}\nfunction camelToKebab(str) {\n  return str.replace(/([a-z\\d])([A-Z])/g, \"$1-$2\").toLowerCase();\n}\nfunction getReportingEndpoints(reportingEndpoints = []) {\n  return reportingEndpoints.map((endpoint) => `${endpoint.name}=\"${endpoint.url}\"`).join(\", \");\n}\nfunction getReportToOptions(reportTo = []) {\n  return reportTo.map((option) => JSON.stringify(option)).join(\", \");\n}\nfunction setHeaders(ctx, headersToSet) {\n  headersToSet.forEach(([header, value]) => {\n    ctx.res.headers.set(header, value);\n  });\n}\nexport {\n  NONCE,\n  secureHeaders\n};\n", "// src/utils/encode.ts\nvar decodeBase64Url = (str) => {\n  return decodeBase64(str.replace(/_|-/g, (m) => ({ _: \"/\", \"-\": \"+\" })[m] ?? m));\n};\nvar encodeBase64Url = (buf) => encodeBase64(buf).replace(/\\/|\\+/g, (m) => ({ \"/\": \"_\", \"+\": \"-\" })[m] ?? m);\nvar encodeBase64 = (buf) => {\n  let binary = \"\";\n  const bytes = new Uint8Array(buf);\n  for (let i = 0, len = bytes.length; i < len; i++) {\n    binary += String.fromCharCode(bytes[i]);\n  }\n  return btoa(binary);\n};\nvar decodeBase64 = (str) => {\n  const binary = atob(str);\n  const bytes = new Uint8Array(new ArrayBuffer(binary.length));\n  const half = binary.length / 2;\n  for (let i = 0, j = binary.length - 1; i <= half; i++, j--) {\n    bytes[i] = binary.charCodeAt(i);\n    bytes[j] = binary.charCodeAt(j);\n  }\n  return bytes;\n};\nexport {\n  decodeBase64,\n  decodeBase64Url,\n  encodeBase64,\n  encodeBase64Url\n};\n", "// src/middleware/logger/index.ts\nimport { getColorEnabledAsync } from \"../../utils/color.js\";\nvar humanize = (times) => {\n  const [delimiter, separator] = [\",\", \".\"];\n  const orderTimes = times.map((v) => v.replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, \"$1\" + delimiter));\n  return orderTimes.join(separator);\n};\nvar time = (start) => {\n  const delta = Date.now() - start;\n  return humanize([delta < 1e3 ? delta + \"ms\" : Math.round(delta / 1e3) + \"s\"]);\n};\nvar colorStatus = async (status) => {\n  const colorEnabled = await getColorEnabledAsync();\n  if (colorEnabled) {\n    switch (status / 100 | 0) {\n      case 5:\n        return `\\x1B[31m${status}\\x1B[0m`;\n      case 4:\n        return `\\x1B[33m${status}\\x1B[0m`;\n      case 3:\n        return `\\x1B[36m${status}\\x1B[0m`;\n      case 2:\n        return `\\x1B[32m${status}\\x1B[0m`;\n    }\n  }\n  return `${status}`;\n};\nasync function log(fn, prefix, method, path, status = 0, elapsed) {\n  const out = prefix === \"<--\" /* Incoming */ ? `${prefix} ${method} ${path}` : `${prefix} ${method} ${path} ${await colorStatus(status)} ${elapsed}`;\n  fn(out);\n}\nvar logger = (fn = console.log) => {\n  return async function logger2(c, next) {\n    const { method, url } = c.req;\n    const path = url.slice(url.indexOf(\"/\", 8));\n    await log(fn, \"<--\" /* Incoming */, method, path);\n    const start = Date.now();\n    await next();\n    await log(fn, \"-->\" /* Outgoing */, method, path, c.res.status, time(start));\n  };\n};\nexport {\n  logger\n};\n", "// src/utils/color.ts\nfunction getColorEnabled() {\n  const { process, Deno } = globalThis;\n  const isNoColor = typeof Deno?.noColor === \"boolean\" ? Deno.noColor : process !== void 0 ? (\n    // eslint-disable-next-line no-unsafe-optional-chaining\n    \"NO_COLOR\" in process?.env\n  ) : false;\n  return !isNoColor;\n}\nasync function getColorEnabledAsync() {\n  const { navigator } = globalThis;\n  const cfWorkers = \"cloudflare:workers\";\n  const isNoColor = navigator !== void 0 && navigator.userAgent === \"Cloudflare-Workers\" ? await (async () => {\n    try {\n      return \"NO_COLOR\" in ((await import(cfWorkers)).env ?? {});\n    } catch {\n      return false;\n    }\n  })() : !getColorEnabled();\n  return !isNoColor;\n}\nexport {\n  getColorEnabled,\n  getColorEnabledAsync\n};\n", "// AuthForge - Core Authentication Routes\r\n\r\nimport { Hono } from 'hono';\r\nimport { Env, User } from '../types';\r\nimport { \r\n  generateId, \r\n  generateToken,\r\n  hashPassword, \r\n  verifyPassword, \r\n  sha256,\r\n  createSession,\r\n  logAudit,\r\n  isValidEmail,\r\n  validatePassword\r\n} from '../lib/utils';\r\nimport { requireAuth, rateLimit } from '../lib/middleware';\r\nimport { TOTP, Secret } from 'otpauth';\r\nimport QRCode from 'qrcode';\r\n\r\nconst auth = new Hono<{ Bindings: Env }>();\r\n\r\n// Register with email/password\r\nauth.post('/register', rateLimit(5, 3600), async (c) => {\r\n  const body = await c.req.json<{ email: string; password: string; name?: string }>();\r\n  const { email, password, name } = body;\r\n\r\n  if (!email || !password) {\r\n    return c.json({ error: 'Email and password are required' }, 400);\r\n  }\r\n\r\n  if (!isValidEmail(email)) {\r\n    return c.json({ error: 'Invalid email address' }, 400);\r\n  }\r\n\r\n  const passwordCheck = validatePassword(password);\r\n  if (!passwordCheck.valid) {\r\n    return c.json({ error: 'Password too weak', details: passwordCheck.errors }, 400);\r\n  }\r\n\r\n  // Check if user exists\r\n  const existing = await c.env.DB.prepare('SELECT id FROM users WHERE email = ?')\r\n    .bind(email.toLowerCase())\r\n    .first();\r\n\r\n  if (existing) {\r\n    return c.json({ error: 'An account with this email already exists' }, 409);\r\n  }\r\n\r\n  // Create user\r\n  const userId = generateId();\r\n  const passwordHash = await hashPassword(password);\r\n\r\n  await c.env.DB.prepare(`\r\n    INSERT INTO users (id, email, name, password_hash)\r\n    VALUES (?, ?, ?, ?)\r\n  `).bind(userId, email.toLowerCase(), name || null, passwordHash).run();\r\n\r\n  // Create session\r\n  const user: User = {\r\n    id: userId,\r\n    email: email.toLowerCase(),\r\n    email_verified: 0,\r\n    name: name || null,\r\n    avatar_url: null,\r\n    password_hash: passwordHash,\r\n    totp_secret: null,\r\n    totp_enabled: 0,\r\n    backup_codes: null,\r\n    vault_key: null,\r\n    status: 'active',\r\n    created_at: new Date().toISOString(),\r\n    updated_at: new Date().toISOString()\r\n  };\r\n\r\n  const { session, token } = await createSession(c.env.DB, c.env.SESSIONS, user, c.req.raw);\r\n\r\n  await logAudit(c.env.DB, 'user.register', userId, c.req.raw);\r\n\r\n  // Set cookie\r\n  c.header('Set-Cookie', `authforge_token=${token}; HttpOnly; Secure; SameSite=Lax; Path=/; Max-Age=${7 * 24 * 60 * 60}`);\r\n\r\n  return c.json({\r\n    success: true,\r\n    message: 'Account created successfully',\r\n    user: {\r\n      id: user.id,\r\n      email: user.email,\r\n      name: user.name,\r\n      emailVerified: false\r\n    },\r\n    token\r\n  }, 201);\r\n});\r\n\r\n// Login with email/password\r\nauth.post('/login', rateLimit(10, 300), async (c) => {\r\n  const body = await c.req.json<{ email: string; password: string }>();\r\n  const { email, password } = body;\r\n\r\n  if (!email || !password) {\r\n    return c.json({ error: 'Email and password are required' }, 400);\r\n  }\r\n\r\n  const user = await c.env.DB.prepare('SELECT * FROM users WHERE email = ?')\r\n    .bind(email.toLowerCase())\r\n    .first<User>();\r\n\r\n  if (!user || !user.password_hash) {\r\n    await logAudit(c.env.DB, 'user.login.failed', null, c.req.raw, { email, reason: 'not_found' });\r\n    return c.json({ error: 'Invalid email or password' }, 401);\r\n  }\r\n\r\n  if (user.status !== 'active') {\r\n    return c.json({ error: 'Account is suspended or deleted' }, 403);\r\n  }\r\n\r\n  const validPassword = await verifyPassword(password, user.password_hash);\r\n  if (!validPassword) {\r\n    await logAudit(c.env.DB, 'user.login.failed', user.id, c.req.raw, { reason: 'invalid_password' });\r\n    return c.json({ error: 'Invalid email or password' }, 401);\r\n  }\r\n\r\n  // Check if 2FA is enabled\r\n  if (user.totp_enabled) {\r\n    // Return a temporary token for 2FA verification\r\n    const tempToken = generateToken();\r\n    await c.env.SESSIONS.put(`2fa_pending:${tempToken}`, user.id, { expirationTtl: 300 });\r\n    \r\n    return c.json({\r\n      success: true,\r\n      requires2FA: true,\r\n      tempToken,\r\n      message: 'Please enter your 2FA code'\r\n    });\r\n  }\r\n\r\n  // Create session\r\n  const { session, token } = await createSession(c.env.DB, c.env.SESSIONS, user, c.req.raw);\r\n\r\n  await logAudit(c.env.DB, 'user.login', user.id, c.req.raw);\r\n\r\n  c.header('Set-Cookie', `authforge_token=${token}; HttpOnly; Secure; SameSite=Lax; Path=/; Max-Age=${7 * 24 * 60 * 60}`);\r\n\r\n  return c.json({\r\n    success: true,\r\n    user: {\r\n      id: user.id,\r\n      email: user.email,\r\n      name: user.name,\r\n      emailVerified: user.email_verified === 1,\r\n      has2FA: user.totp_enabled === 1\r\n    },\r\n    token\r\n  });\r\n});\r\n\r\n// Verify 2FA code during login\r\nauth.post('/login/2fa', rateLimit(5, 300), async (c) => {\r\n  const body = await c.req.json<{ tempToken: string; code: string }>();\r\n  const { tempToken, code } = body;\r\n\r\n  if (!tempToken || !code) {\r\n    return c.json({ error: 'Temp token and code are required' }, 400);\r\n  }\r\n\r\n  const userId = await c.env.SESSIONS.get(`2fa_pending:${tempToken}`);\r\n  if (!userId) {\r\n    return c.json({ error: 'Invalid or expired temp token' }, 401);\r\n  }\r\n\r\n  const user = await c.env.DB.prepare('SELECT * FROM users WHERE id = ?')\r\n    .bind(userId)\r\n    .first<User>();\r\n\r\n  if (!user || !user.totp_secret) {\r\n    return c.json({ error: 'User not found' }, 404);\r\n  }\r\n\r\n  // Verify TOTP\r\n  const totp = new TOTP({ secret: Secret.fromBase32(user.totp_secret) });\r\n  const isValid = totp.validate({ token: code, window: 1 }) !== null;\r\n\r\n  if (!isValid) {\r\n    // Check backup codes\r\n    if (user.backup_codes) {\r\n      const codes = JSON.parse(user.backup_codes) as string[];\r\n      const codeHash = await sha256(code);\r\n      const codeIndex = codes.indexOf(codeHash);\r\n      \r\n      if (codeIndex !== -1) {\r\n        // Remove used backup code\r\n        codes.splice(codeIndex, 1);\r\n        await c.env.DB.prepare('UPDATE users SET backup_codes = ? WHERE id = ?')\r\n          .bind(JSON.stringify(codes), user.id)\r\n          .run();\r\n      } else {\r\n        await logAudit(c.env.DB, 'user.2fa.failed', user.id, c.req.raw);\r\n        return c.json({ error: 'Invalid 2FA code' }, 401);\r\n      }\r\n    } else {\r\n      await logAudit(c.env.DB, 'user.2fa.failed', user.id, c.req.raw);\r\n      return c.json({ error: 'Invalid 2FA code' }, 401);\r\n    }\r\n  }\r\n\r\n  // Delete temp token\r\n  await c.env.SESSIONS.delete(`2fa_pending:${tempToken}`);\r\n\r\n  // Create session\r\n  const { session, token } = await createSession(c.env.DB, c.env.SESSIONS, user, c.req.raw);\r\n  \r\n  // Mark 2FA as verified for this session\r\n  await c.env.SESSIONS.put(`2fa:${session.id}`, '1', { expirationTtl: 7 * 24 * 60 * 60 });\r\n\r\n  await logAudit(c.env.DB, 'user.login.2fa', user.id, c.req.raw);\r\n\r\n  c.header('Set-Cookie', `authforge_token=${token}; HttpOnly; Secure; SameSite=Lax; Path=/; Max-Age=${7 * 24 * 60 * 60}`);\r\n\r\n  return c.json({\r\n    success: true,\r\n    user: {\r\n      id: user.id,\r\n      email: user.email,\r\n      name: user.name,\r\n      emailVerified: user.email_verified === 1,\r\n      has2FA: true\r\n    },\r\n    token\r\n  });\r\n});\r\n\r\n// Request magic link\r\nauth.post('/magic-link', rateLimit(3, 300), async (c) => {\r\n  const body = await c.req.json<{ email: string }>();\r\n  const { email } = body;\r\n\r\n  if (!email || !isValidEmail(email)) {\r\n    return c.json({ error: 'Valid email is required' }, 400);\r\n  }\r\n\r\n  // Always return success to prevent email enumeration\r\n  const response = { success: true, message: 'If an account exists, a magic link has been sent' };\r\n\r\n  const user = await c.env.DB.prepare('SELECT id FROM users WHERE email = ?')\r\n    .bind(email.toLowerCase())\r\n    .first<{ id: string }>();\r\n\r\n  if (!user) {\r\n    return c.json(response);\r\n  }\r\n\r\n  // Create magic link token\r\n  const token = generateToken();\r\n  const tokenHash = await sha256(token);\r\n  const expiresAt = new Date(Date.now() + 15 * 60 * 1000).toISOString(); // 15 minutes\r\n\r\n  await c.env.DB.prepare(`\r\n    INSERT INTO magic_links (id, email, token_hash, expires_at)\r\n    VALUES (?, ?, ?, ?)\r\n  `).bind(generateId(), email.toLowerCase(), tokenHash, expiresAt).run();\r\n\r\n  // TODO: Send email with magic link\r\n  // For now, log it (in production, integrate with email service)\r\n  console.log(`Magic link for ${email}: /auth/magic-link/verify?token=${token}`);\r\n\r\n  await logAudit(c.env.DB, 'user.magic_link.request', user.id, c.req.raw);\r\n\r\n  return c.json(response);\r\n});\r\n\r\n// Verify magic link\r\nauth.get('/magic-link/verify', async (c) => {\r\n  const token = c.req.query('token');\r\n\r\n  if (!token) {\r\n    return c.json({ error: 'Token is required' }, 400);\r\n  }\r\n\r\n  const tokenHash = await sha256(token);\r\n\r\n  const magicLink = await c.env.DB.prepare(`\r\n    SELECT * FROM magic_links \r\n    WHERE token_hash = ? AND used = 0 AND expires_at > datetime('now')\r\n  `).bind(tokenHash).first<{ id: string; email: string }>();\r\n\r\n  if (!magicLink) {\r\n    return c.json({ error: 'Invalid or expired magic link' }, 401);\r\n  }\r\n\r\n  // Mark as used\r\n  await c.env.DB.prepare('UPDATE magic_links SET used = 1 WHERE id = ?')\r\n    .bind(magicLink.id)\r\n    .run();\r\n\r\n  // Get or create user\r\n  let user = await c.env.DB.prepare('SELECT * FROM users WHERE email = ?')\r\n    .bind(magicLink.email)\r\n    .first<User>();\r\n\r\n  if (!user) {\r\n    const userId = generateId();\r\n    await c.env.DB.prepare(`\r\n      INSERT INTO users (id, email, email_verified)\r\n      VALUES (?, ?, 1)\r\n    `).bind(userId, magicLink.email).run();\r\n\r\n    user = await c.env.DB.prepare('SELECT * FROM users WHERE id = ?')\r\n      .bind(userId)\r\n      .first<User>();\r\n  } else {\r\n    // Mark email as verified\r\n    await c.env.DB.prepare('UPDATE users SET email_verified = 1 WHERE id = ?')\r\n      .bind(user.id)\r\n      .run();\r\n    user.email_verified = 1;\r\n  }\r\n\r\n  if (!user) {\r\n    return c.json({ error: 'Failed to create user' }, 500);\r\n  }\r\n\r\n  // Create session\r\n  const { session, token: sessionToken } = await createSession(c.env.DB, c.env.SESSIONS, user, c.req.raw);\r\n\r\n  await logAudit(c.env.DB, 'user.magic_link.verify', user.id, c.req.raw);\r\n\r\n  c.header('Set-Cookie', `authforge_token=${sessionToken}; HttpOnly; Secure; SameSite=Lax; Path=/; Max-Age=${7 * 24 * 60 * 60}`);\r\n\r\n  return c.json({\r\n    success: true,\r\n    user: {\r\n      id: user.id,\r\n      email: user.email,\r\n      name: user.name,\r\n      emailVerified: true\r\n    },\r\n    token: sessionToken\r\n  });\r\n});\r\n\r\n// Logout\r\nauth.post('/logout', requireAuth, async (c) => {\r\n  const session = c.get('session');\r\n  const user = c.get('user');\r\n\r\n  // Delete session from DB\r\n  await c.env.DB.prepare('DELETE FROM sessions WHERE id = ?')\r\n    .bind(session.id)\r\n    .run();\r\n\r\n  // Delete from KV\r\n  await c.env.SESSIONS.delete(`session:${session.token_hash}`);\r\n  await c.env.SESSIONS.delete(`2fa:${session.id}`);\r\n\r\n  await logAudit(c.env.DB, 'user.logout', user.id, c.req.raw);\r\n\r\n  c.header('Set-Cookie', 'authforge_token=; HttpOnly; Secure; SameSite=Lax; Path=/; Max-Age=0');\r\n\r\n  return c.json({ success: true, message: 'Logged out successfully' });\r\n});\r\n\r\n// Setup 2FA\r\nauth.post('/2fa/setup', requireAuth, async (c) => {\r\n  const user = c.get('user');\r\n\r\n  if (user.totp_enabled) {\r\n    return c.json({ error: '2FA is already enabled' }, 400);\r\n  }\r\n\r\n  // Generate secret\r\n  const secret = new Secret({ size: 20 });\r\n  const totp = new TOTP({\r\n    issuer: c.env.WEBAUTHN_RP_NAME || 'AuthForge',\r\n    label: user.email,\r\n    secret\r\n  });\r\n\r\n  // Store secret temporarily (not enabled yet)\r\n  await c.env.SESSIONS.put(`2fa_setup:${user.id}`, secret.base32, { expirationTtl: 600 });\r\n\r\n  // Generate QR code as SVG (compatible with Cloudflare Workers - no canvas needed)\r\n  const otpauthUrl = totp.toString();\r\n  const qrCodeSvg = await QRCode.toString(otpauthUrl, { type: 'svg' });\r\n  // Convert SVG to data URL for frontend compatibility\r\n  const qrCode = `data:image/svg+xml;base64,${btoa(qrCodeSvg)}`;\r\n\r\n  return c.json({\r\n    success: true,\r\n    secret: secret.base32,\r\n    qrCode,\r\n    otpauthUrl\r\n  });\r\n});\r\n\r\n// Verify and enable 2FA\r\nauth.post('/2fa/verify', requireAuth, async (c) => {\r\n  const user = c.get('user');\r\n  const body = await c.req.json<{ code: string }>();\r\n  const { code } = body;\r\n\r\n  if (!code) {\r\n    return c.json({ error: 'Code is required' }, 400);\r\n  }\r\n\r\n  // Get pending secret\r\n  const secret = await c.env.SESSIONS.get(`2fa_setup:${user.id}`);\r\n  if (!secret) {\r\n    return c.json({ error: 'No 2FA setup in progress. Start with /auth/2fa/setup' }, 400);\r\n  }\r\n\r\n  // Verify code\r\n  const totp = new TOTP({ secret: Secret.fromBase32(secret) });\r\n  const isValid = totp.validate({ token: code, window: 1 }) !== null;\r\n\r\n  if (!isValid) {\r\n    return c.json({ error: 'Invalid code' }, 401);\r\n  }\r\n\r\n  // Generate backup codes\r\n  const backupCodes: string[] = [];\r\n  const backupCodeHashes: string[] = [];\r\n  for (let i = 0; i < 10; i++) {\r\n    const code = generateToken().substring(0, 8).toUpperCase();\r\n    backupCodes.push(code);\r\n    backupCodeHashes.push(await sha256(code));\r\n  }\r\n\r\n  // Enable 2FA\r\n  await c.env.DB.prepare(`\r\n    UPDATE users SET totp_secret = ?, totp_enabled = 1, backup_codes = ?, updated_at = datetime('now')\r\n    WHERE id = ?\r\n  `).bind(secret, JSON.stringify(backupCodeHashes), user.id).run();\r\n\r\n  // Clean up\r\n  await c.env.SESSIONS.delete(`2fa_setup:${user.id}`);\r\n\r\n  await logAudit(c.env.DB, 'user.2fa.enabled', user.id, c.req.raw);\r\n\r\n  return c.json({\r\n    success: true,\r\n    message: '2FA enabled successfully',\r\n    backupCodes // Show these once only!\r\n  });\r\n});\r\n\r\n// Disable 2FA\r\nauth.post('/2fa/disable', requireAuth, async (c) => {\r\n  const user = c.get('user');\r\n  const body = await c.req.json<{ code: string }>();\r\n  const { code } = body;\r\n\r\n  if (!user.totp_enabled || !user.totp_secret) {\r\n    return c.json({ error: '2FA is not enabled' }, 400);\r\n  }\r\n\r\n  // Verify code\r\n  const totp = new TOTP({ secret: Secret.fromBase32(user.totp_secret) });\r\n  const isValid = totp.validate({ token: code, window: 1 }) !== null;\r\n\r\n  if (!isValid) {\r\n    return c.json({ error: 'Invalid code' }, 401);\r\n  }\r\n\r\n  // Disable 2FA\r\n  await c.env.DB.prepare(`\r\n    UPDATE users SET totp_secret = NULL, totp_enabled = 0, backup_codes = NULL, updated_at = datetime('now')\r\n    WHERE id = ?\r\n  `).bind(user.id).run();\r\n\r\n  await logAudit(c.env.DB, 'user.2fa.disabled', user.id, c.req.raw);\r\n\r\n  return c.json({ success: true, message: '2FA disabled successfully' });\r\n});\r\n\r\nexport { auth as authRoutes };\r\n", "// AuthForge - Utility Functions\r\n\r\nimport { nanoid } from 'nanoid';\r\nimport * as jose from 'jose';\r\nimport { Env, JWTPayload, User, Session } from '../types';\r\n\r\n// Generate unique IDs\r\nexport const generateId = () => nanoid(21);\r\nexport const generateToken = () => nanoid(32);\r\n\r\n// Hash functions using Web Crypto API\r\nexport async function hashPassword(password: string): Promise<string> {\r\n  const encoder = new TextEncoder();\r\n  const salt = crypto.getRandomValues(new Uint8Array(16));\r\n  \r\n  const keyMaterial = await crypto.subtle.importKey(\r\n    'raw',\r\n    encoder.encode(password),\r\n    'PBKDF2',\r\n    false,\r\n    ['deriveBits']\r\n  );\r\n\r\n  const hash = await crypto.subtle.deriveBits(\r\n    {\r\n      name: 'PBKDF2',\r\n      salt,\r\n      iterations: 100000,\r\n      hash: 'SHA-256'\r\n    },\r\n    keyMaterial,\r\n    256\r\n  );\r\n\r\n  const hashArray = new Uint8Array(hash);\r\n  const combined = new Uint8Array(salt.length + hashArray.length);\r\n  combined.set(salt);\r\n  combined.set(hashArray, salt.length);\r\n\r\n  return btoa(String.fromCharCode(...combined));\r\n}\r\n\r\nexport async function verifyPassword(password: string, storedHash: string): Promise<boolean> {\r\n  try {\r\n    const combined = Uint8Array.from(atob(storedHash), c => c.charCodeAt(0));\r\n    const salt = combined.slice(0, 16);\r\n    const storedHashBytes = combined.slice(16);\r\n\r\n    const encoder = new TextEncoder();\r\n    const keyMaterial = await crypto.subtle.importKey(\r\n      'raw',\r\n      encoder.encode(password),\r\n      'PBKDF2',\r\n      false,\r\n      ['deriveBits']\r\n    );\r\n\r\n    const hash = await crypto.subtle.deriveBits(\r\n      {\r\n        name: 'PBKDF2',\r\n        salt,\r\n        iterations: 100000,\r\n        hash: 'SHA-256'\r\n      },\r\n      keyMaterial,\r\n      256\r\n    );\r\n\r\n    const hashArray = new Uint8Array(hash);\r\n    \r\n    if (hashArray.length !== storedHashBytes.length) return false;\r\n    \r\n    let match = true;\r\n    for (let i = 0; i < hashArray.length; i++) {\r\n      if (hashArray[i] !== storedHashBytes[i]) match = false;\r\n    }\r\n    return match;\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\n// Simple SHA-256 hash for tokens\r\nexport async function sha256(data: string): Promise<string> {\r\n  const encoder = new TextEncoder();\r\n  const hashBuffer = await crypto.subtle.digest('SHA-256', encoder.encode(data));\r\n  const hashArray = new Uint8Array(hashBuffer);\r\n  return btoa(String.fromCharCode(...hashArray));\r\n}\r\n\r\n// JWT functions\r\nexport async function createJWT(payload: Omit<JWTPayload, 'iat' | 'exp' | 'jti'>, secret: string, expiresIn = '8h'): Promise<string> {\r\n  const secretKey = new TextEncoder().encode(secret);\r\n  \r\n  const jwt = await new jose.SignJWT({\r\n    ...payload,\r\n    jti: generateId()\r\n  })\r\n    .setProtectedHeader({ alg: 'HS256' })\r\n    .setIssuedAt()\r\n    .setExpirationTime(expiresIn)\r\n    .sign(secretKey);\r\n\r\n  return jwt;\r\n}\r\n\r\nexport async function verifyJWT(token: string, secret: string): Promise<JWTPayload | null> {\r\n  try {\r\n    const secretKey = new TextEncoder().encode(secret);\r\n    const { payload } = await jose.jwtVerify(token, secretKey);\r\n    return payload as JWTPayload;\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\n// Session management\r\nexport async function createSession(\r\n  db: D1Database,\r\n  kv: KVNamespace,\r\n  user: User,\r\n  request: Request\r\n): Promise<{ session: Session; token: string }> {\r\n  const token = generateToken();\r\n  const tokenHash = await sha256(token);\r\n  const sessionId = generateId();\r\n  \r\n  const userAgent = request.headers.get('User-Agent') || null;\r\n  const ip = request.headers.get('CF-Connecting-IP') || null;\r\n  \r\n  // Parse device name from user agent\r\n  let deviceName = 'Unknown Device';\r\n  if (userAgent) {\r\n    if (userAgent.includes('Mobile')) deviceName = 'Mobile Device';\r\n    else if (userAgent.includes('Windows')) deviceName = 'Windows PC';\r\n    else if (userAgent.includes('Mac')) deviceName = 'Mac';\r\n    else if (userAgent.includes('Linux')) deviceName = 'Linux';\r\n  }\r\n\r\n  const expiresAt = new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(); // 7 days\r\n\r\n  const session: Session = {\r\n    id: sessionId,\r\n    user_id: user.id,\r\n    token_hash: tokenHash,\r\n    ip_address: ip,\r\n    user_agent: userAgent,\r\n    device_name: deviceName,\r\n    location: null,\r\n    expires_at: expiresAt,\r\n    created_at: new Date().toISOString(),\r\n    last_active_at: new Date().toISOString()\r\n  };\r\n\r\n  // Store in D1\r\n  await db.prepare(`\r\n    INSERT INTO sessions (id, user_id, token_hash, ip_address, user_agent, device_name, expires_at)\r\n    VALUES (?, ?, ?, ?, ?, ?, ?)\r\n  `).bind(\r\n    session.id,\r\n    session.user_id,\r\n    session.token_hash,\r\n    session.ip_address,\r\n    session.user_agent,\r\n    session.device_name,\r\n    session.expires_at\r\n  ).run();\r\n\r\n  // Also cache in KV for fast lookups\r\n  await kv.put(`session:${tokenHash}`, JSON.stringify(session), {\r\n    expirationTtl: 7 * 24 * 60 * 60 // 7 days\r\n  });\r\n\r\n  return { session, token };\r\n}\r\n\r\nexport async function getSessionByToken(\r\n  db: D1Database,\r\n  kv: KVNamespace,\r\n  token: string\r\n): Promise<{ session: Session; user: User } | null> {\r\n  const tokenHash = await sha256(token);\r\n\r\n  // Check KV cache first\r\n  const cached = await kv.get(`session:${tokenHash}`);\r\n  if (cached) {\r\n    const session = JSON.parse(cached) as Session;\r\n    if (new Date(session.expires_at) < new Date()) {\r\n      await kv.delete(`session:${tokenHash}`);\r\n      return null;\r\n    }\r\n\r\n    const user = await db.prepare('SELECT * FROM users WHERE id = ?')\r\n      .bind(session.user_id)\r\n      .first<User>();\r\n\r\n    if (!user || user.status !== 'active') return null;\r\n\r\n    return { session, user };\r\n  }\r\n\r\n  // Fall back to D1\r\n  const session = await db.prepare('SELECT * FROM sessions WHERE token_hash = ?')\r\n    .bind(tokenHash)\r\n    .first<Session>();\r\n\r\n  if (!session || new Date(session.expires_at) < new Date()) {\r\n    return null;\r\n  }\r\n\r\n  const user = await db.prepare('SELECT * FROM users WHERE id = ?')\r\n    .bind(session.user_id)\r\n    .first<User>();\r\n\r\n  if (!user || user.status !== 'active') return null;\r\n\r\n  // Cache for future lookups\r\n  await kv.put(`session:${tokenHash}`, JSON.stringify(session), {\r\n    expirationTtl: 7 * 24 * 60 * 60\r\n  });\r\n\r\n  return { session, user };\r\n}\r\n\r\n// Rate limiting\r\nexport async function checkRateLimit(\r\n  kv: KVNamespace,\r\n  key: string,\r\n  limit: number,\r\n  windowSeconds: number\r\n): Promise<{ allowed: boolean; remaining: number; resetAt: number }> {\r\n  const now = Math.floor(Date.now() / 1000);\r\n  const windowStart = now - (now % windowSeconds);\r\n  const rateLimitKey = `rate:${key}:${windowStart}`;\r\n\r\n  const current = await kv.get(rateLimitKey);\r\n  const count = current ? parseInt(current, 10) : 0;\r\n\r\n  if (count >= limit) {\r\n    return {\r\n      allowed: false,\r\n      remaining: 0,\r\n      resetAt: windowStart + windowSeconds\r\n    };\r\n  }\r\n\r\n  await kv.put(rateLimitKey, String(count + 1), {\r\n    expirationTtl: windowSeconds\r\n  });\r\n\r\n  return {\r\n    allowed: true,\r\n    remaining: limit - count - 1,\r\n    resetAt: windowStart + windowSeconds\r\n  };\r\n}\r\n\r\n// Audit logging\r\nexport async function logAudit(\r\n  db: D1Database,\r\n  action: string,\r\n  userId: string | null,\r\n  request: Request,\r\n  details?: Record<string, unknown>\r\n): Promise<void> {\r\n  await db.prepare(`\r\n    INSERT INTO audit_logs (id, user_id, action, ip_address, user_agent, details)\r\n    VALUES (?, ?, ?, ?, ?, ?)\r\n  `).bind(\r\n    generateId(),\r\n    userId,\r\n    action,\r\n    request.headers.get('CF-Connecting-IP'),\r\n    request.headers.get('User-Agent'),\r\n    details ? JSON.stringify(details) : null\r\n  ).run();\r\n}\r\n\r\n// Email validation\r\nexport function isValidEmail(email: string): boolean {\r\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n  return emailRegex.test(email);\r\n}\r\n\r\n// Password strength validation\r\nexport function validatePassword(password: string): { valid: boolean; errors: string[] } {\r\n  const errors: string[] = [];\r\n  \r\n  if (password.length < 8) errors.push('Password must be at least 8 characters');\r\n  if (!/[A-Z]/.test(password)) errors.push('Password must contain an uppercase letter');\r\n  if (!/[a-z]/.test(password)) errors.push('Password must contain a lowercase letter');\r\n  if (!/[0-9]/.test(password)) errors.push('Password must contain a number');\r\n  if (!/[^A-Za-z0-9]/.test(password)) errors.push('Password must contain a special character');\r\n\r\n  return { valid: errors.length === 0, errors };\r\n}\r\n", "/* @ts-self-types=\"./index.d.ts\" */\nimport { urlAlphabet as scopedUrlAlphabet } from './url-alphabet/index.js'\nexport { urlAlphabet } from './url-alphabet/index.js'\nexport let random = bytes => crypto.getRandomValues(new Uint8Array(bytes))\nexport let customRandom = (alphabet, defaultSize, getRandom) => {\n  let mask = (2 << Math.log2(alphabet.length - 1)) - 1\n  let step = -~((1.6 * mask * defaultSize) / alphabet.length)\n  return (size = defaultSize) => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      let j = step | 0\n      while (j--) {\n        id += alphabet[bytes[j] & mask] || ''\n        if (id.length >= size) return id\n      }\n    }\n  }\n}\nexport let customAlphabet = (alphabet, size = 21) =>\n  customRandom(alphabet, size | 0, random)\nexport let nanoid = (size = 21) => {\n  let id = ''\n  let bytes = crypto.getRandomValues(new Uint8Array((size |= 0)))\n  while (size--) {\n    id += scopedUrlAlphabet[bytes[size] & 63]\n  }\n  return id\n}\n", "export const urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict'\n", "// AuthForge - Authentication Middleware\r\n\r\nimport { Context, Next } from 'hono';\r\nimport { Env, User, Session } from '../types';\r\nimport { getSessionByToken, checkRateLimit } from './utils';\r\n\r\n// Extend Hono context with auth data\r\ndeclare module 'hono' {\r\n  interface ContextVariableMap {\r\n    user: User;\r\n    session: Session;\r\n  }\r\n}\r\n\r\n// Require authentication\r\nexport async function requireAuth(c: Context<{ Bindings: Env }>, next: Next) {\r\n  const authHeader = c.req.header('Authorization');\r\n  \r\n  let token: string | null = null;\r\n  \r\n  // Check Authorization header\r\n  if (authHeader?.startsWith('Bearer ')) {\r\n    token = authHeader.slice(7);\r\n  }\r\n  \r\n  // Check cookie\r\n  if (!token) {\r\n    const cookie = c.req.header('Cookie');\r\n    if (cookie) {\r\n      const match = cookie.match(/authforge_token=([^;]+)/);\r\n      if (match) token = match[1];\r\n    }\r\n  }\r\n\r\n  if (!token) {\r\n    return c.json({ error: 'Unauthorized', message: 'Authentication required' }, 401);\r\n  }\r\n\r\n  const result = await getSessionByToken(c.env.DB, c.env.SESSIONS, token);\r\n  \r\n  if (!result) {\r\n    return c.json({ error: 'Unauthorized', message: 'Invalid or expired session' }, 401);\r\n  }\r\n\r\n  // Update last active\r\n  await c.env.SESSIONS.put(`session:${result.session.token_hash}`, JSON.stringify({\r\n    ...result.session,\r\n    last_active_at: new Date().toISOString()\r\n  }), { expirationTtl: 7 * 24 * 60 * 60 });\r\n\r\n  c.set('user', result.user);\r\n  c.set('session', result.session);\r\n\r\n  await next();\r\n}\r\n\r\n// Optional auth - sets user if authenticated but doesn't require it\r\nexport async function optionalAuth(c: Context<{ Bindings: Env }>, next: Next) {\r\n  const authHeader = c.req.header('Authorization');\r\n  \r\n  let token: string | null = null;\r\n  \r\n  if (authHeader?.startsWith('Bearer ')) {\r\n    token = authHeader.slice(7);\r\n  }\r\n  \r\n  if (!token) {\r\n    const cookie = c.req.header('Cookie');\r\n    if (cookie) {\r\n      const match = cookie.match(/authforge_token=([^;]+)/);\r\n      if (match) token = match[1];\r\n    }\r\n  }\r\n\r\n  if (token) {\r\n    const result = await getSessionByToken(c.env.DB, c.env.SESSIONS, token);\r\n    if (result) {\r\n      c.set('user', result.user);\r\n      c.set('session', result.session);\r\n    }\r\n  }\r\n\r\n  await next();\r\n}\r\n\r\n// Rate limiting middleware factory\r\nexport function rateLimit(limit: number, windowSeconds: number, keyFn?: (c: Context) => string) {\r\n  return async (c: Context<{ Bindings: Env }>, next: Next) => {\r\n    const key = keyFn ? keyFn(c) : (c.req.header('CF-Connecting-IP') || 'anonymous');\r\n    const endpoint = new URL(c.req.url).pathname;\r\n    \r\n    const result = await checkRateLimit(\r\n      c.env.RATE_LIMIT,\r\n      `${endpoint}:${key}`,\r\n      limit,\r\n      windowSeconds\r\n    );\r\n\r\n    c.header('X-RateLimit-Limit', String(limit));\r\n    c.header('X-RateLimit-Remaining', String(result.remaining));\r\n    c.header('X-RateLimit-Reset', String(result.resetAt));\r\n\r\n    if (!result.allowed) {\r\n      return c.json({\r\n        error: 'Too Many Requests',\r\n        message: 'Rate limit exceeded. Please try again later.',\r\n        retryAfter: result.resetAt - Math.floor(Date.now() / 1000)\r\n      }, 429);\r\n    }\r\n\r\n    await next();\r\n  };\r\n}\r\n\r\n// Require email verification\r\nexport async function requireVerified(c: Context<{ Bindings: Env }>, next: Next) {\r\n  const user = c.get('user');\r\n  \r\n  if (!user.email_verified) {\r\n    return c.json({ \r\n      error: 'Email Not Verified', \r\n      message: 'Please verify your email address to continue' \r\n    }, 403);\r\n  }\r\n\r\n  await next();\r\n}\r\n\r\n// Require 2FA if enabled\r\nexport async function require2FA(c: Context<{ Bindings: Env }>, next: Next) {\r\n  const user = c.get('user');\r\n  const session = c.get('session');\r\n  \r\n  if (user.totp_enabled) {\r\n    // Check if 2FA was verified for this session\r\n    const verified2FA = await c.env.SESSIONS.get(`2fa:${session.id}`);\r\n    \r\n    if (!verified2FA) {\r\n      return c.json({ \r\n        error: '2FA Required', \r\n        message: 'Two-factor authentication required',\r\n        requires2FA: true\r\n      }, 403);\r\n    }\r\n  }\r\n\r\n  await next();\r\n}\r\n", "//! otpauth 9.4.1 | (c) H\u00E9ctor Molinero Fern\u00E1ndez | MIT | https://github.com/hectorm/otpauth\n//! noble-hashes 1.8.0 | (c) Paul Miller | MIT | https://github.com/paulmillr/noble-hashes\n/// <reference types=\"./otpauth.d.ts\" />\n// @ts-nocheck\n/**\n * Converts an integer to an Uint8Array.\n * @param {number} num Integer.\n * @returns {Uint8Array} Uint8Array.\n */ const uintDecode = (num)=>{\n    const buf = new ArrayBuffer(8);\n    const arr = new Uint8Array(buf);\n    let acc = num;\n    for(let i = 7; i >= 0; i--){\n        if (acc === 0) break;\n        arr[i] = acc & 255;\n        acc -= arr[i];\n        acc /= 256;\n    }\n    return arr;\n};\n\n/**\n * Utilities for hex, bytes, CSPRNG.\n * @module\n */ /*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */ // We use WebCrypto aka globalThis.crypto, which exists in browsers and node.js 16+.\n// node.js versions earlier than v19 don't declare it in global scope.\n// For node.js, package.json#exports field mapping rewrites import\n// from `crypto` to `cryptoNode`, which imports native module.\n// Makes the utils un-importable in browsers without a bundler.\n// Once node.js 18 is deprecated (2025-04-30), we can just drop the import.\n/** Checks if something is Uint8Array. Be careful: nodejs Buffer will return true. */ function isBytes(a) {\n    return a instanceof Uint8Array || ArrayBuffer.isView(a) && a.constructor.name === 'Uint8Array';\n}\n/** Asserts something is positive integer. */ function anumber(n) {\n    if (!Number.isSafeInteger(n) || n < 0) throw new Error('positive integer expected, got ' + n);\n}\n/** Asserts something is Uint8Array. */ function abytes(b, ...lengths) {\n    if (!isBytes(b)) throw new Error('Uint8Array expected');\n    if (lengths.length > 0 && !lengths.includes(b.length)) throw new Error('Uint8Array expected of length ' + lengths + ', got length=' + b.length);\n}\n/** Asserts something is hash */ function ahash(h) {\n    if (typeof h !== 'function' || typeof h.create !== 'function') throw new Error('Hash should be wrapped by utils.createHasher');\n    anumber(h.outputLen);\n    anumber(h.blockLen);\n}\n/** Asserts a hash instance has not been destroyed / finished */ function aexists(instance, checkFinished = true) {\n    if (instance.destroyed) throw new Error('Hash instance has been destroyed');\n    if (checkFinished && instance.finished) throw new Error('Hash#digest() has already been called');\n}\n/** Asserts output is properly-sized byte array */ function aoutput(out, instance) {\n    abytes(out);\n    const min = instance.outputLen;\n    if (out.length < min) {\n        throw new Error('digestInto() expects output buffer of length at least ' + min);\n    }\n}\n/** Cast u8 / u16 / u32 to u32. */ function u32(arr) {\n    return new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\n}\n/** Zeroize a byte array. Warning: JS provides no guarantees. */ function clean(...arrays) {\n    for(let i = 0; i < arrays.length; i++){\n        arrays[i].fill(0);\n    }\n}\n/** Create DataView of an array for easy byte-level manipulation. */ function createView(arr) {\n    return new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\n}\n/** The rotate right (circular right shift) operation for uint32 */ function rotr(word, shift) {\n    return word << 32 - shift | word >>> shift;\n}\n/** The rotate left (circular left shift) operation for uint32 */ function rotl(word, shift) {\n    return word << shift | word >>> 32 - shift >>> 0;\n}\n/** Is current platform little-endian? Most are. Big-Endian platform: IBM */ const isLE = /* @__PURE__ */ (()=>new Uint8Array(new Uint32Array([\n        0x11223344\n    ]).buffer)[0] === 0x44)();\n/** The byte swap operation for uint32 */ function byteSwap(word) {\n    return word << 24 & 0xff000000 | word << 8 & 0xff0000 | word >>> 8 & 0xff00 | word >>> 24 & 0xff;\n}\n/** In place byte swap for Uint32Array */ function byteSwap32(arr) {\n    for(let i = 0; i < arr.length; i++){\n        arr[i] = byteSwap(arr[i]);\n    }\n    return arr;\n}\nconst swap32IfBE = isLE ? (u)=>u : byteSwap32;\n/**\n * Converts string to bytes using UTF8 encoding.\n * @example utf8ToBytes('abc') // Uint8Array.from([97, 98, 99])\n */ function utf8ToBytes(str) {\n    if (typeof str !== 'string') throw new Error('string expected');\n    return new Uint8Array(new TextEncoder().encode(str)); // https://bugzil.la/1681809\n}\n/**\n * Normalizes (non-hex) string or Uint8Array to Uint8Array.\n * Warning: when Uint8Array is passed, it would NOT get copied.\n * Keep in mind for future mutable operations.\n */ function toBytes(data) {\n    if (typeof data === 'string') data = utf8ToBytes(data);\n    abytes(data);\n    return data;\n}\n/** For runtime check if class implements interface */ class Hash {\n}\n/** Wraps hash function, creating an interface on top of it */ function createHasher(hashCons) {\n    const hashC = (msg)=>hashCons().update(toBytes(msg)).digest();\n    const tmp = hashCons();\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = ()=>hashCons();\n    return hashC;\n}\n\nclass HMAC extends Hash {\n    update(buf) {\n        aexists(this);\n        this.iHash.update(buf);\n        return this;\n    }\n    digestInto(out) {\n        aexists(this);\n        abytes(out, this.outputLen);\n        this.finished = true;\n        this.iHash.digestInto(out);\n        this.oHash.update(out);\n        this.oHash.digestInto(out);\n        this.destroy();\n    }\n    digest() {\n        const out = new Uint8Array(this.oHash.outputLen);\n        this.digestInto(out);\n        return out;\n    }\n    _cloneInto(to) {\n        // Create new instance without calling constructor since key already in state and we don't know it.\n        to || (to = Object.create(Object.getPrototypeOf(this), {}));\n        const { oHash, iHash, finished, destroyed, blockLen, outputLen } = this;\n        to = to;\n        to.finished = finished;\n        to.destroyed = destroyed;\n        to.blockLen = blockLen;\n        to.outputLen = outputLen;\n        to.oHash = oHash._cloneInto(to.oHash);\n        to.iHash = iHash._cloneInto(to.iHash);\n        return to;\n    }\n    clone() {\n        return this._cloneInto();\n    }\n    destroy() {\n        this.destroyed = true;\n        this.oHash.destroy();\n        this.iHash.destroy();\n    }\n    constructor(hash, _key){\n        super();\n        this.finished = false;\n        this.destroyed = false;\n        ahash(hash);\n        const key = toBytes(_key);\n        this.iHash = hash.create();\n        if (typeof this.iHash.update !== 'function') throw new Error('Expected instance of class which extends utils.Hash');\n        this.blockLen = this.iHash.blockLen;\n        this.outputLen = this.iHash.outputLen;\n        const blockLen = this.blockLen;\n        const pad = new Uint8Array(blockLen);\n        // blockLen can be bigger than outputLen\n        pad.set(key.length > blockLen ? hash.create().update(key).digest() : key);\n        for(let i = 0; i < pad.length; i++)pad[i] ^= 0x36;\n        this.iHash.update(pad);\n        // By doing update (processing of first block) of outer hash here we can re-use it between multiple calls via clone\n        this.oHash = hash.create();\n        // Undo internal XOR && apply outer XOR\n        for(let i = 0; i < pad.length; i++)pad[i] ^= 0x36 ^ 0x5c;\n        this.oHash.update(pad);\n        clean(pad);\n    }\n}\n/**\n * HMAC: RFC2104 message authentication code.\n * @param hash - function that would be used e.g. sha256\n * @param key - message key\n * @param message - message data\n * @example\n * import { hmac } from '@noble/hashes/hmac';\n * import { sha256 } from '@noble/hashes/sha2';\n * const mac1 = hmac(sha256, 'key', 'message');\n */ const hmac = (hash, key, message)=>new HMAC(hash, key).update(message).digest();\nhmac.create = (hash, key)=>new HMAC(hash, key);\n\n/** Polyfill for Safari 14. https://caniuse.com/mdn-javascript_builtins_dataview_setbiguint64 */ function setBigUint64(view, byteOffset, value, isLE) {\n    if (typeof view.setBigUint64 === 'function') return view.setBigUint64(byteOffset, value, isLE);\n    const _32n = BigInt(32);\n    const _u32_max = BigInt(0xffffffff);\n    const wh = Number(value >> _32n & _u32_max);\n    const wl = Number(value & _u32_max);\n    const h = isLE ? 4 : 0;\n    const l = isLE ? 0 : 4;\n    view.setUint32(byteOffset + h, wh, isLE);\n    view.setUint32(byteOffset + l, wl, isLE);\n}\n/** Choice: a ? b : c */ function Chi(a, b, c) {\n    return a & b ^ ~a & c;\n}\n/** Majority function, true if any two inputs is true. */ function Maj(a, b, c) {\n    return a & b ^ a & c ^ b & c;\n}\n/**\n * Merkle-Damgard hash construction base class.\n * Could be used to create MD5, RIPEMD, SHA1, SHA2.\n */ class HashMD extends Hash {\n    update(data) {\n        aexists(this);\n        data = toBytes(data);\n        abytes(data);\n        const { view, buffer, blockLen } = this;\n        const len = data.length;\n        for(let pos = 0; pos < len;){\n            const take = Math.min(blockLen - this.pos, len - pos);\n            // Fast path: we have at least one block in input, cast it to view and process\n            if (take === blockLen) {\n                const dataView = createView(data);\n                for(; blockLen <= len - pos; pos += blockLen)this.process(dataView, pos);\n                continue;\n            }\n            buffer.set(data.subarray(pos, pos + take), this.pos);\n            this.pos += take;\n            pos += take;\n            if (this.pos === blockLen) {\n                this.process(view, 0);\n                this.pos = 0;\n            }\n        }\n        this.length += data.length;\n        this.roundClean();\n        return this;\n    }\n    digestInto(out) {\n        aexists(this);\n        aoutput(out, this);\n        this.finished = true;\n        // Padding\n        // We can avoid allocation of buffer for padding completely if it\n        // was previously not allocated here. But it won't change performance.\n        const { buffer, view, blockLen, isLE } = this;\n        let { pos } = this;\n        // append the bit '1' to the message\n        buffer[pos++] = 0b10000000;\n        clean(this.buffer.subarray(pos));\n        // we have less than padOffset left in buffer, so we cannot put length in\n        // current block, need process it and pad again\n        if (this.padOffset > blockLen - pos) {\n            this.process(view, 0);\n            pos = 0;\n        }\n        // Pad until full block byte with zeros\n        for(let i = pos; i < blockLen; i++)buffer[i] = 0;\n        // Note: sha512 requires length to be 128bit integer, but length in JS will overflow before that\n        // You need to write around 2 exabytes (u64_max / 8 / (1024**6)) for this to happen.\n        // So we just write lowest 64 bits of that value.\n        setBigUint64(view, blockLen - 8, BigInt(this.length * 8), isLE);\n        this.process(view, 0);\n        const oview = createView(out);\n        const len = this.outputLen;\n        // NOTE: we do division by 4 later, which should be fused in single op with modulo by JIT\n        if (len % 4) throw new Error('_sha2: outputLen should be aligned to 32bit');\n        const outLen = len / 4;\n        const state = this.get();\n        if (outLen > state.length) throw new Error('_sha2: outputLen bigger than state');\n        for(let i = 0; i < outLen; i++)oview.setUint32(4 * i, state[i], isLE);\n    }\n    digest() {\n        const { buffer, outputLen } = this;\n        this.digestInto(buffer);\n        const res = buffer.slice(0, outputLen);\n        this.destroy();\n        return res;\n    }\n    _cloneInto(to) {\n        to || (to = new this.constructor());\n        to.set(...this.get());\n        const { blockLen, buffer, length, finished, destroyed, pos } = this;\n        to.destroyed = destroyed;\n        to.finished = finished;\n        to.length = length;\n        to.pos = pos;\n        if (length % blockLen) to.buffer.set(buffer);\n        return to;\n    }\n    clone() {\n        return this._cloneInto();\n    }\n    constructor(blockLen, outputLen, padOffset, isLE){\n        super();\n        this.finished = false;\n        this.length = 0;\n        this.pos = 0;\n        this.destroyed = false;\n        this.blockLen = blockLen;\n        this.outputLen = outputLen;\n        this.padOffset = padOffset;\n        this.isLE = isLE;\n        this.buffer = new Uint8Array(blockLen);\n        this.view = createView(this.buffer);\n    }\n}\n/**\n * Initial SHA-2 state: fractional parts of square roots of first 16 primes 2..53.\n * Check out `test/misc/sha2-gen-iv.js` for recomputation guide.\n */ /** Initial SHA256 state. Bits 0..32 of frac part of sqrt of primes 2..19 */ const SHA256_IV = /* @__PURE__ */ Uint32Array.from([\n    0x6a09e667,\n    0xbb67ae85,\n    0x3c6ef372,\n    0xa54ff53a,\n    0x510e527f,\n    0x9b05688c,\n    0x1f83d9ab,\n    0x5be0cd19\n]);\n/** Initial SHA224 state. Bits 32..64 of frac part of sqrt of primes 23..53 */ const SHA224_IV = /* @__PURE__ */ Uint32Array.from([\n    0xc1059ed8,\n    0x367cd507,\n    0x3070dd17,\n    0xf70e5939,\n    0xffc00b31,\n    0x68581511,\n    0x64f98fa7,\n    0xbefa4fa4\n]);\n/** Initial SHA384 state. Bits 0..64 of frac part of sqrt of primes 23..53 */ const SHA384_IV = /* @__PURE__ */ Uint32Array.from([\n    0xcbbb9d5d,\n    0xc1059ed8,\n    0x629a292a,\n    0x367cd507,\n    0x9159015a,\n    0x3070dd17,\n    0x152fecd8,\n    0xf70e5939,\n    0x67332667,\n    0xffc00b31,\n    0x8eb44a87,\n    0x68581511,\n    0xdb0c2e0d,\n    0x64f98fa7,\n    0x47b5481d,\n    0xbefa4fa4\n]);\n/** Initial SHA512 state. Bits 0..64 of frac part of sqrt of primes 2..19 */ const SHA512_IV = /* @__PURE__ */ Uint32Array.from([\n    0x6a09e667,\n    0xf3bcc908,\n    0xbb67ae85,\n    0x84caa73b,\n    0x3c6ef372,\n    0xfe94f82b,\n    0xa54ff53a,\n    0x5f1d36f1,\n    0x510e527f,\n    0xade682d1,\n    0x9b05688c,\n    0x2b3e6c1f,\n    0x1f83d9ab,\n    0xfb41bd6b,\n    0x5be0cd19,\n    0x137e2179\n]);\n\n/** Initial SHA1 state */ const SHA1_IV = /* @__PURE__ */ Uint32Array.from([\n    0x67452301,\n    0xefcdab89,\n    0x98badcfe,\n    0x10325476,\n    0xc3d2e1f0\n]);\n// Reusable temporary buffer\nconst SHA1_W = /* @__PURE__ */ new Uint32Array(80);\n/** SHA1 legacy hash class. */ class SHA1 extends HashMD {\n    get() {\n        const { A, B, C, D, E } = this;\n        return [\n            A,\n            B,\n            C,\n            D,\n            E\n        ];\n    }\n    set(A, B, C, D, E) {\n        this.A = A | 0;\n        this.B = B | 0;\n        this.C = C | 0;\n        this.D = D | 0;\n        this.E = E | 0;\n    }\n    process(view, offset) {\n        for(let i = 0; i < 16; i++, offset += 4)SHA1_W[i] = view.getUint32(offset, false);\n        for(let i = 16; i < 80; i++)SHA1_W[i] = rotl(SHA1_W[i - 3] ^ SHA1_W[i - 8] ^ SHA1_W[i - 14] ^ SHA1_W[i - 16], 1);\n        // Compression function main loop, 80 rounds\n        let { A, B, C, D, E } = this;\n        for(let i = 0; i < 80; i++){\n            let F, K;\n            if (i < 20) {\n                F = Chi(B, C, D);\n                K = 0x5a827999;\n            } else if (i < 40) {\n                F = B ^ C ^ D;\n                K = 0x6ed9eba1;\n            } else if (i < 60) {\n                F = Maj(B, C, D);\n                K = 0x8f1bbcdc;\n            } else {\n                F = B ^ C ^ D;\n                K = 0xca62c1d6;\n            }\n            const T = rotl(A, 5) + F + E + K + SHA1_W[i] | 0;\n            E = D;\n            D = C;\n            C = rotl(B, 30);\n            B = A;\n            A = T;\n        }\n        // Add the compressed chunk to the current hash value\n        A = A + this.A | 0;\n        B = B + this.B | 0;\n        C = C + this.C | 0;\n        D = D + this.D | 0;\n        E = E + this.E | 0;\n        this.set(A, B, C, D, E);\n    }\n    roundClean() {\n        clean(SHA1_W);\n    }\n    destroy() {\n        this.set(0, 0, 0, 0, 0);\n        clean(this.buffer);\n    }\n    constructor(){\n        super(64, 20, 8, false);\n        this.A = SHA1_IV[0] | 0;\n        this.B = SHA1_IV[1] | 0;\n        this.C = SHA1_IV[2] | 0;\n        this.D = SHA1_IV[3] | 0;\n        this.E = SHA1_IV[4] | 0;\n    }\n}\n/** SHA1 (RFC 3174) legacy hash function. It was cryptographically broken. */ const sha1 = /* @__PURE__ */ createHasher(()=>new SHA1());\n\n/**\n * Internal helpers for u64. BigUint64Array is too slow as per 2025, so we implement it using Uint32Array.\n * @todo re-check https://issues.chromium.org/issues/42212588\n * @module\n */ const U32_MASK64 = /* @__PURE__ */ BigInt(2 ** 32 - 1);\nconst _32n = /* @__PURE__ */ BigInt(32);\nfunction fromBig(n, le = false) {\n    if (le) return {\n        h: Number(n & U32_MASK64),\n        l: Number(n >> _32n & U32_MASK64)\n    };\n    return {\n        h: Number(n >> _32n & U32_MASK64) | 0,\n        l: Number(n & U32_MASK64) | 0\n    };\n}\nfunction split(lst, le = false) {\n    const len = lst.length;\n    let Ah = new Uint32Array(len);\n    let Al = new Uint32Array(len);\n    for(let i = 0; i < len; i++){\n        const { h, l } = fromBig(lst[i], le);\n        [Ah[i], Al[i]] = [\n            h,\n            l\n        ];\n    }\n    return [\n        Ah,\n        Al\n    ];\n}\n// for Shift in [0, 32)\nconst shrSH = (h, _l, s)=>h >>> s;\nconst shrSL = (h, l, s)=>h << 32 - s | l >>> s;\n// Right rotate for Shift in [1, 32)\nconst rotrSH = (h, l, s)=>h >>> s | l << 32 - s;\nconst rotrSL = (h, l, s)=>h << 32 - s | l >>> s;\n// Right rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotrBH = (h, l, s)=>h << 64 - s | l >>> s - 32;\nconst rotrBL = (h, l, s)=>h >>> s - 32 | l << 64 - s;\n// Left rotate for Shift in [1, 32)\nconst rotlSH = (h, l, s)=>h << s | l >>> 32 - s;\nconst rotlSL = (h, l, s)=>l << s | h >>> 32 - s;\n// Left rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotlBH = (h, l, s)=>l << s - 32 | h >>> 64 - s;\nconst rotlBL = (h, l, s)=>h << s - 32 | l >>> 64 - s;\n// JS uses 32-bit signed integers for bitwise operations which means we cannot\n// simple take carry out of low bit sum by shift, we need to use division.\nfunction add(Ah, Al, Bh, Bl) {\n    const l = (Al >>> 0) + (Bl >>> 0);\n    return {\n        h: Ah + Bh + (l / 2 ** 32 | 0) | 0,\n        l: l | 0\n    };\n}\n// Addition with more than 2 elements\nconst add3L = (Al, Bl, Cl)=>(Al >>> 0) + (Bl >>> 0) + (Cl >>> 0);\nconst add3H = (low, Ah, Bh, Ch)=>Ah + Bh + Ch + (low / 2 ** 32 | 0) | 0;\nconst add4L = (Al, Bl, Cl, Dl)=>(Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0);\nconst add4H = (low, Ah, Bh, Ch, Dh)=>Ah + Bh + Ch + Dh + (low / 2 ** 32 | 0) | 0;\nconst add5L = (Al, Bl, Cl, Dl, El)=>(Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0) + (El >>> 0);\nconst add5H = (low, Ah, Bh, Ch, Dh, Eh)=>Ah + Bh + Ch + Dh + Eh + (low / 2 ** 32 | 0) | 0;\n\n/**\n * Round constants:\n * First 32 bits of fractional parts of the cube roots of the first 64 primes 2..311)\n */ // prettier-ignore\nconst SHA256_K = /* @__PURE__ */ Uint32Array.from([\n    0x428a2f98,\n    0x71374491,\n    0xb5c0fbcf,\n    0xe9b5dba5,\n    0x3956c25b,\n    0x59f111f1,\n    0x923f82a4,\n    0xab1c5ed5,\n    0xd807aa98,\n    0x12835b01,\n    0x243185be,\n    0x550c7dc3,\n    0x72be5d74,\n    0x80deb1fe,\n    0x9bdc06a7,\n    0xc19bf174,\n    0xe49b69c1,\n    0xefbe4786,\n    0x0fc19dc6,\n    0x240ca1cc,\n    0x2de92c6f,\n    0x4a7484aa,\n    0x5cb0a9dc,\n    0x76f988da,\n    0x983e5152,\n    0xa831c66d,\n    0xb00327c8,\n    0xbf597fc7,\n    0xc6e00bf3,\n    0xd5a79147,\n    0x06ca6351,\n    0x14292967,\n    0x27b70a85,\n    0x2e1b2138,\n    0x4d2c6dfc,\n    0x53380d13,\n    0x650a7354,\n    0x766a0abb,\n    0x81c2c92e,\n    0x92722c85,\n    0xa2bfe8a1,\n    0xa81a664b,\n    0xc24b8b70,\n    0xc76c51a3,\n    0xd192e819,\n    0xd6990624,\n    0xf40e3585,\n    0x106aa070,\n    0x19a4c116,\n    0x1e376c08,\n    0x2748774c,\n    0x34b0bcb5,\n    0x391c0cb3,\n    0x4ed8aa4a,\n    0x5b9cca4f,\n    0x682e6ff3,\n    0x748f82ee,\n    0x78a5636f,\n    0x84c87814,\n    0x8cc70208,\n    0x90befffa,\n    0xa4506ceb,\n    0xbef9a3f7,\n    0xc67178f2\n]);\n/** Reusable temporary buffer. \"W\" comes straight from spec. */ const SHA256_W = /* @__PURE__ */ new Uint32Array(64);\nclass SHA256 extends HashMD {\n    get() {\n        const { A, B, C, D, E, F, G, H } = this;\n        return [\n            A,\n            B,\n            C,\n            D,\n            E,\n            F,\n            G,\n            H\n        ];\n    }\n    // prettier-ignore\n    set(A, B, C, D, E, F, G, H) {\n        this.A = A | 0;\n        this.B = B | 0;\n        this.C = C | 0;\n        this.D = D | 0;\n        this.E = E | 0;\n        this.F = F | 0;\n        this.G = G | 0;\n        this.H = H | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 48 words w[16..63] of the message schedule array\n        for(let i = 0; i < 16; i++, offset += 4)SHA256_W[i] = view.getUint32(offset, false);\n        for(let i = 16; i < 64; i++){\n            const W15 = SHA256_W[i - 15];\n            const W2 = SHA256_W[i - 2];\n            const s0 = rotr(W15, 7) ^ rotr(W15, 18) ^ W15 >>> 3;\n            const s1 = rotr(W2, 17) ^ rotr(W2, 19) ^ W2 >>> 10;\n            SHA256_W[i] = s1 + SHA256_W[i - 7] + s0 + SHA256_W[i - 16] | 0;\n        }\n        // Compression function main loop, 64 rounds\n        let { A, B, C, D, E, F, G, H } = this;\n        for(let i = 0; i < 64; i++){\n            const sigma1 = rotr(E, 6) ^ rotr(E, 11) ^ rotr(E, 25);\n            const T1 = H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i] | 0;\n            const sigma0 = rotr(A, 2) ^ rotr(A, 13) ^ rotr(A, 22);\n            const T2 = sigma0 + Maj(A, B, C) | 0;\n            H = G;\n            G = F;\n            F = E;\n            E = D + T1 | 0;\n            D = C;\n            C = B;\n            B = A;\n            A = T1 + T2 | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        A = A + this.A | 0;\n        B = B + this.B | 0;\n        C = C + this.C | 0;\n        D = D + this.D | 0;\n        E = E + this.E | 0;\n        F = F + this.F | 0;\n        G = G + this.G | 0;\n        H = H + this.H | 0;\n        this.set(A, B, C, D, E, F, G, H);\n    }\n    roundClean() {\n        clean(SHA256_W);\n    }\n    destroy() {\n        this.set(0, 0, 0, 0, 0, 0, 0, 0);\n        clean(this.buffer);\n    }\n    constructor(outputLen = 32){\n        super(64, outputLen, 8, false);\n        // We cannot use array here since array allows indexing by variable\n        // which means optimizer/compiler cannot use registers.\n        this.A = SHA256_IV[0] | 0;\n        this.B = SHA256_IV[1] | 0;\n        this.C = SHA256_IV[2] | 0;\n        this.D = SHA256_IV[3] | 0;\n        this.E = SHA256_IV[4] | 0;\n        this.F = SHA256_IV[5] | 0;\n        this.G = SHA256_IV[6] | 0;\n        this.H = SHA256_IV[7] | 0;\n    }\n}\nclass SHA224 extends SHA256 {\n    constructor(){\n        super(28);\n        this.A = SHA224_IV[0] | 0;\n        this.B = SHA224_IV[1] | 0;\n        this.C = SHA224_IV[2] | 0;\n        this.D = SHA224_IV[3] | 0;\n        this.E = SHA224_IV[4] | 0;\n        this.F = SHA224_IV[5] | 0;\n        this.G = SHA224_IV[6] | 0;\n        this.H = SHA224_IV[7] | 0;\n    }\n}\n// SHA2-512 is slower than sha256 in js because u64 operations are slow.\n// Round contants\n// First 32 bits of the fractional parts of the cube roots of the first 80 primes 2..409\n// prettier-ignore\nconst K512 = /* @__PURE__ */ (()=>split([\n        '0x428a2f98d728ae22',\n        '0x7137449123ef65cd',\n        '0xb5c0fbcfec4d3b2f',\n        '0xe9b5dba58189dbbc',\n        '0x3956c25bf348b538',\n        '0x59f111f1b605d019',\n        '0x923f82a4af194f9b',\n        '0xab1c5ed5da6d8118',\n        '0xd807aa98a3030242',\n        '0x12835b0145706fbe',\n        '0x243185be4ee4b28c',\n        '0x550c7dc3d5ffb4e2',\n        '0x72be5d74f27b896f',\n        '0x80deb1fe3b1696b1',\n        '0x9bdc06a725c71235',\n        '0xc19bf174cf692694',\n        '0xe49b69c19ef14ad2',\n        '0xefbe4786384f25e3',\n        '0x0fc19dc68b8cd5b5',\n        '0x240ca1cc77ac9c65',\n        '0x2de92c6f592b0275',\n        '0x4a7484aa6ea6e483',\n        '0x5cb0a9dcbd41fbd4',\n        '0x76f988da831153b5',\n        '0x983e5152ee66dfab',\n        '0xa831c66d2db43210',\n        '0xb00327c898fb213f',\n        '0xbf597fc7beef0ee4',\n        '0xc6e00bf33da88fc2',\n        '0xd5a79147930aa725',\n        '0x06ca6351e003826f',\n        '0x142929670a0e6e70',\n        '0x27b70a8546d22ffc',\n        '0x2e1b21385c26c926',\n        '0x4d2c6dfc5ac42aed',\n        '0x53380d139d95b3df',\n        '0x650a73548baf63de',\n        '0x766a0abb3c77b2a8',\n        '0x81c2c92e47edaee6',\n        '0x92722c851482353b',\n        '0xa2bfe8a14cf10364',\n        '0xa81a664bbc423001',\n        '0xc24b8b70d0f89791',\n        '0xc76c51a30654be30',\n        '0xd192e819d6ef5218',\n        '0xd69906245565a910',\n        '0xf40e35855771202a',\n        '0x106aa07032bbd1b8',\n        '0x19a4c116b8d2d0c8',\n        '0x1e376c085141ab53',\n        '0x2748774cdf8eeb99',\n        '0x34b0bcb5e19b48a8',\n        '0x391c0cb3c5c95a63',\n        '0x4ed8aa4ae3418acb',\n        '0x5b9cca4f7763e373',\n        '0x682e6ff3d6b2b8a3',\n        '0x748f82ee5defb2fc',\n        '0x78a5636f43172f60',\n        '0x84c87814a1f0ab72',\n        '0x8cc702081a6439ec',\n        '0x90befffa23631e28',\n        '0xa4506cebde82bde9',\n        '0xbef9a3f7b2c67915',\n        '0xc67178f2e372532b',\n        '0xca273eceea26619c',\n        '0xd186b8c721c0c207',\n        '0xeada7dd6cde0eb1e',\n        '0xf57d4f7fee6ed178',\n        '0x06f067aa72176fba',\n        '0x0a637dc5a2c898a6',\n        '0x113f9804bef90dae',\n        '0x1b710b35131c471b',\n        '0x28db77f523047d84',\n        '0x32caab7b40c72493',\n        '0x3c9ebe0a15c9bebc',\n        '0x431d67c49c100d4c',\n        '0x4cc5d4becb3e42b6',\n        '0x597f299cfc657e2a',\n        '0x5fcb6fab3ad6faec',\n        '0x6c44198c4a475817'\n    ].map((n)=>BigInt(n))))();\nconst SHA512_Kh = /* @__PURE__ */ (()=>K512[0])();\nconst SHA512_Kl = /* @__PURE__ */ (()=>K512[1])();\n// Reusable temporary buffers\nconst SHA512_W_H = /* @__PURE__ */ new Uint32Array(80);\nconst SHA512_W_L = /* @__PURE__ */ new Uint32Array(80);\nclass SHA512 extends HashMD {\n    // prettier-ignore\n    get() {\n        const { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n        return [\n            Ah,\n            Al,\n            Bh,\n            Bl,\n            Ch,\n            Cl,\n            Dh,\n            Dl,\n            Eh,\n            El,\n            Fh,\n            Fl,\n            Gh,\n            Gl,\n            Hh,\n            Hl\n        ];\n    }\n    // prettier-ignore\n    set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl) {\n        this.Ah = Ah | 0;\n        this.Al = Al | 0;\n        this.Bh = Bh | 0;\n        this.Bl = Bl | 0;\n        this.Ch = Ch | 0;\n        this.Cl = Cl | 0;\n        this.Dh = Dh | 0;\n        this.Dl = Dl | 0;\n        this.Eh = Eh | 0;\n        this.El = El | 0;\n        this.Fh = Fh | 0;\n        this.Fl = Fl | 0;\n        this.Gh = Gh | 0;\n        this.Gl = Gl | 0;\n        this.Hh = Hh | 0;\n        this.Hl = Hl | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 64 words w[16..79] of the message schedule array\n        for(let i = 0; i < 16; i++, offset += 4){\n            SHA512_W_H[i] = view.getUint32(offset);\n            SHA512_W_L[i] = view.getUint32(offset += 4);\n        }\n        for(let i = 16; i < 80; i++){\n            // s0 := (w[i-15] rightrotate 1) xor (w[i-15] rightrotate 8) xor (w[i-15] rightshift 7)\n            const W15h = SHA512_W_H[i - 15] | 0;\n            const W15l = SHA512_W_L[i - 15] | 0;\n            const s0h = rotrSH(W15h, W15l, 1) ^ rotrSH(W15h, W15l, 8) ^ shrSH(W15h, W15l, 7);\n            const s0l = rotrSL(W15h, W15l, 1) ^ rotrSL(W15h, W15l, 8) ^ shrSL(W15h, W15l, 7);\n            // s1 := (w[i-2] rightrotate 19) xor (w[i-2] rightrotate 61) xor (w[i-2] rightshift 6)\n            const W2h = SHA512_W_H[i - 2] | 0;\n            const W2l = SHA512_W_L[i - 2] | 0;\n            const s1h = rotrSH(W2h, W2l, 19) ^ rotrBH(W2h, W2l, 61) ^ shrSH(W2h, W2l, 6);\n            const s1l = rotrSL(W2h, W2l, 19) ^ rotrBL(W2h, W2l, 61) ^ shrSL(W2h, W2l, 6);\n            // SHA256_W[i] = s0 + s1 + SHA256_W[i - 7] + SHA256_W[i - 16];\n            const SUMl = add4L(s0l, s1l, SHA512_W_L[i - 7], SHA512_W_L[i - 16]);\n            const SUMh = add4H(SUMl, s0h, s1h, SHA512_W_H[i - 7], SHA512_W_H[i - 16]);\n            SHA512_W_H[i] = SUMh | 0;\n            SHA512_W_L[i] = SUMl | 0;\n        }\n        let { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n        // Compression function main loop, 80 rounds\n        for(let i = 0; i < 80; i++){\n            // S1 := (e rightrotate 14) xor (e rightrotate 18) xor (e rightrotate 41)\n            const sigma1h = rotrSH(Eh, El, 14) ^ rotrSH(Eh, El, 18) ^ rotrBH(Eh, El, 41);\n            const sigma1l = rotrSL(Eh, El, 14) ^ rotrSL(Eh, El, 18) ^ rotrBL(Eh, El, 41);\n            //const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const CHIh = Eh & Fh ^ ~Eh & Gh;\n            const CHIl = El & Fl ^ ~El & Gl;\n            // T1 = H + sigma1 + Chi(E, F, G) + SHA512_K[i] + SHA512_W[i]\n            // prettier-ignore\n            const T1ll = add5L(Hl, sigma1l, CHIl, SHA512_Kl[i], SHA512_W_L[i]);\n            const T1h = add5H(T1ll, Hh, sigma1h, CHIh, SHA512_Kh[i], SHA512_W_H[i]);\n            const T1l = T1ll | 0;\n            // S0 := (a rightrotate 28) xor (a rightrotate 34) xor (a rightrotate 39)\n            const sigma0h = rotrSH(Ah, Al, 28) ^ rotrBH(Ah, Al, 34) ^ rotrBH(Ah, Al, 39);\n            const sigma0l = rotrSL(Ah, Al, 28) ^ rotrBL(Ah, Al, 34) ^ rotrBL(Ah, Al, 39);\n            const MAJh = Ah & Bh ^ Ah & Ch ^ Bh & Ch;\n            const MAJl = Al & Bl ^ Al & Cl ^ Bl & Cl;\n            Hh = Gh | 0;\n            Hl = Gl | 0;\n            Gh = Fh | 0;\n            Gl = Fl | 0;\n            Fh = Eh | 0;\n            Fl = El | 0;\n            ({ h: Eh, l: El } = add(Dh | 0, Dl | 0, T1h | 0, T1l | 0));\n            Dh = Ch | 0;\n            Dl = Cl | 0;\n            Ch = Bh | 0;\n            Cl = Bl | 0;\n            Bh = Ah | 0;\n            Bl = Al | 0;\n            const All = add3L(T1l, sigma0l, MAJl);\n            Ah = add3H(All, T1h, sigma0h, MAJh);\n            Al = All | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        ({ h: Ah, l: Al } = add(this.Ah | 0, this.Al | 0, Ah | 0, Al | 0));\n        ({ h: Bh, l: Bl } = add(this.Bh | 0, this.Bl | 0, Bh | 0, Bl | 0));\n        ({ h: Ch, l: Cl } = add(this.Ch | 0, this.Cl | 0, Ch | 0, Cl | 0));\n        ({ h: Dh, l: Dl } = add(this.Dh | 0, this.Dl | 0, Dh | 0, Dl | 0));\n        ({ h: Eh, l: El } = add(this.Eh | 0, this.El | 0, Eh | 0, El | 0));\n        ({ h: Fh, l: Fl } = add(this.Fh | 0, this.Fl | 0, Fh | 0, Fl | 0));\n        ({ h: Gh, l: Gl } = add(this.Gh | 0, this.Gl | 0, Gh | 0, Gl | 0));\n        ({ h: Hh, l: Hl } = add(this.Hh | 0, this.Hl | 0, Hh | 0, Hl | 0));\n        this.set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl);\n    }\n    roundClean() {\n        clean(SHA512_W_H, SHA512_W_L);\n    }\n    destroy() {\n        clean(this.buffer);\n        this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n    }\n    constructor(outputLen = 64){\n        super(128, outputLen, 16, false);\n        // We cannot use array here since array allows indexing by variable\n        // which means optimizer/compiler cannot use registers.\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = SHA512_IV[0] | 0;\n        this.Al = SHA512_IV[1] | 0;\n        this.Bh = SHA512_IV[2] | 0;\n        this.Bl = SHA512_IV[3] | 0;\n        this.Ch = SHA512_IV[4] | 0;\n        this.Cl = SHA512_IV[5] | 0;\n        this.Dh = SHA512_IV[6] | 0;\n        this.Dl = SHA512_IV[7] | 0;\n        this.Eh = SHA512_IV[8] | 0;\n        this.El = SHA512_IV[9] | 0;\n        this.Fh = SHA512_IV[10] | 0;\n        this.Fl = SHA512_IV[11] | 0;\n        this.Gh = SHA512_IV[12] | 0;\n        this.Gl = SHA512_IV[13] | 0;\n        this.Hh = SHA512_IV[14] | 0;\n        this.Hl = SHA512_IV[15] | 0;\n    }\n}\nclass SHA384 extends SHA512 {\n    constructor(){\n        super(48);\n        this.Ah = SHA384_IV[0] | 0;\n        this.Al = SHA384_IV[1] | 0;\n        this.Bh = SHA384_IV[2] | 0;\n        this.Bl = SHA384_IV[3] | 0;\n        this.Ch = SHA384_IV[4] | 0;\n        this.Cl = SHA384_IV[5] | 0;\n        this.Dh = SHA384_IV[6] | 0;\n        this.Dl = SHA384_IV[7] | 0;\n        this.Eh = SHA384_IV[8] | 0;\n        this.El = SHA384_IV[9] | 0;\n        this.Fh = SHA384_IV[10] | 0;\n        this.Fl = SHA384_IV[11] | 0;\n        this.Gh = SHA384_IV[12] | 0;\n        this.Gl = SHA384_IV[13] | 0;\n        this.Hh = SHA384_IV[14] | 0;\n        this.Hl = SHA384_IV[15] | 0;\n    }\n}\n/**\n * SHA2-256 hash function from RFC 4634.\n *\n * It is the fastest JS hash, even faster than Blake3.\n * To break sha256 using birthday attack, attackers need to try 2^128 hashes.\n * BTC network is doing 2^70 hashes/sec (2^95 hashes/year) as per 2025.\n */ const sha256 = /* @__PURE__ */ createHasher(()=>new SHA256());\n/** SHA2-224 hash function from RFC 4634 */ const sha224 = /* @__PURE__ */ createHasher(()=>new SHA224());\n/** SHA2-512 hash function from RFC 4634. */ const sha512 = /* @__PURE__ */ createHasher(()=>new SHA512());\n/** SHA2-384 hash function from RFC 4634. */ const sha384 = /* @__PURE__ */ createHasher(()=>new SHA384());\n\n// No __PURE__ annotations in sha3 header:\n// EVERYTHING is in fact used on every export.\n// Various per round constants calculations\nconst _0n = BigInt(0);\nconst _1n = BigInt(1);\nconst _2n = BigInt(2);\nconst _7n = BigInt(7);\nconst _256n = BigInt(256);\nconst _0x71n = BigInt(0x71);\nconst SHA3_PI = [];\nconst SHA3_ROTL = [];\nconst _SHA3_IOTA = [];\nfor(let round = 0, R = _1n, x = 1, y = 0; round < 24; round++){\n    // Pi\n    [x, y] = [\n        y,\n        (2 * x + 3 * y) % 5\n    ];\n    SHA3_PI.push(2 * (5 * y + x));\n    // Rotational\n    SHA3_ROTL.push((round + 1) * (round + 2) / 2 % 64);\n    // Iota\n    let t = _0n;\n    for(let j = 0; j < 7; j++){\n        R = (R << _1n ^ (R >> _7n) * _0x71n) % _256n;\n        if (R & _2n) t ^= _1n << (_1n << /* @__PURE__ */ BigInt(j)) - _1n;\n    }\n    _SHA3_IOTA.push(t);\n}\nconst IOTAS = split(_SHA3_IOTA, true);\nconst SHA3_IOTA_H = IOTAS[0];\nconst SHA3_IOTA_L = IOTAS[1];\n// Left rotation (without 0, 32, 64)\nconst rotlH = (h, l, s)=>s > 32 ? rotlBH(h, l, s) : rotlSH(h, l, s);\nconst rotlL = (h, l, s)=>s > 32 ? rotlBL(h, l, s) : rotlSL(h, l, s);\n/** `keccakf1600` internal function, additionally allows to adjust round count. */ function keccakP(s, rounds = 24) {\n    const B = new Uint32Array(5 * 2);\n    // NOTE: all indices are x2 since we store state as u32 instead of u64 (bigints to slow in js)\n    for(let round = 24 - rounds; round < 24; round++){\n        // Theta \u03B8\n        for(let x = 0; x < 10; x++)B[x] = s[x] ^ s[x + 10] ^ s[x + 20] ^ s[x + 30] ^ s[x + 40];\n        for(let x = 0; x < 10; x += 2){\n            const idx1 = (x + 8) % 10;\n            const idx0 = (x + 2) % 10;\n            const B0 = B[idx0];\n            const B1 = B[idx0 + 1];\n            const Th = rotlH(B0, B1, 1) ^ B[idx1];\n            const Tl = rotlL(B0, B1, 1) ^ B[idx1 + 1];\n            for(let y = 0; y < 50; y += 10){\n                s[x + y] ^= Th;\n                s[x + y + 1] ^= Tl;\n            }\n        }\n        // Rho (\u03C1) and Pi (\u03C0)\n        let curH = s[2];\n        let curL = s[3];\n        for(let t = 0; t < 24; t++){\n            const shift = SHA3_ROTL[t];\n            const Th = rotlH(curH, curL, shift);\n            const Tl = rotlL(curH, curL, shift);\n            const PI = SHA3_PI[t];\n            curH = s[PI];\n            curL = s[PI + 1];\n            s[PI] = Th;\n            s[PI + 1] = Tl;\n        }\n        // Chi (\u03C7)\n        for(let y = 0; y < 50; y += 10){\n            for(let x = 0; x < 10; x++)B[x] = s[y + x];\n            for(let x = 0; x < 10; x++)s[y + x] ^= ~B[(x + 2) % 10] & B[(x + 4) % 10];\n        }\n        // Iota (\u03B9)\n        s[0] ^= SHA3_IOTA_H[round];\n        s[1] ^= SHA3_IOTA_L[round];\n    }\n    clean(B);\n}\n/** Keccak sponge function. */ class Keccak extends Hash {\n    clone() {\n        return this._cloneInto();\n    }\n    keccak() {\n        swap32IfBE(this.state32);\n        keccakP(this.state32, this.rounds);\n        swap32IfBE(this.state32);\n        this.posOut = 0;\n        this.pos = 0;\n    }\n    update(data) {\n        aexists(this);\n        data = toBytes(data);\n        abytes(data);\n        const { blockLen, state } = this;\n        const len = data.length;\n        for(let pos = 0; pos < len;){\n            const take = Math.min(blockLen - this.pos, len - pos);\n            for(let i = 0; i < take; i++)state[this.pos++] ^= data[pos++];\n            if (this.pos === blockLen) this.keccak();\n        }\n        return this;\n    }\n    finish() {\n        if (this.finished) return;\n        this.finished = true;\n        const { state, suffix, pos, blockLen } = this;\n        // Do the padding\n        state[pos] ^= suffix;\n        if ((suffix & 0x80) !== 0 && pos === blockLen - 1) this.keccak();\n        state[blockLen - 1] ^= 0x80;\n        this.keccak();\n    }\n    writeInto(out) {\n        aexists(this, false);\n        abytes(out);\n        this.finish();\n        const bufferOut = this.state;\n        const { blockLen } = this;\n        for(let pos = 0, len = out.length; pos < len;){\n            if (this.posOut >= blockLen) this.keccak();\n            const take = Math.min(blockLen - this.posOut, len - pos);\n            out.set(bufferOut.subarray(this.posOut, this.posOut + take), pos);\n            this.posOut += take;\n            pos += take;\n        }\n        return out;\n    }\n    xofInto(out) {\n        // Sha3/Keccak usage with XOF is probably mistake, only SHAKE instances can do XOF\n        if (!this.enableXOF) throw new Error('XOF is not possible for this instance');\n        return this.writeInto(out);\n    }\n    xof(bytes) {\n        anumber(bytes);\n        return this.xofInto(new Uint8Array(bytes));\n    }\n    digestInto(out) {\n        aoutput(out, this);\n        if (this.finished) throw new Error('digest() was already called');\n        this.writeInto(out);\n        this.destroy();\n        return out;\n    }\n    digest() {\n        return this.digestInto(new Uint8Array(this.outputLen));\n    }\n    destroy() {\n        this.destroyed = true;\n        clean(this.state);\n    }\n    _cloneInto(to) {\n        const { blockLen, suffix, outputLen, rounds, enableXOF } = this;\n        to || (to = new Keccak(blockLen, suffix, outputLen, enableXOF, rounds));\n        to.state32.set(this.state32);\n        to.pos = this.pos;\n        to.posOut = this.posOut;\n        to.finished = this.finished;\n        to.rounds = rounds;\n        // Suffix can change in cSHAKE\n        to.suffix = suffix;\n        to.outputLen = outputLen;\n        to.enableXOF = enableXOF;\n        to.destroyed = this.destroyed;\n        return to;\n    }\n    // NOTE: we accept arguments in bytes instead of bits here.\n    constructor(blockLen, suffix, outputLen, enableXOF = false, rounds = 24){\n        super();\n        this.pos = 0;\n        this.posOut = 0;\n        this.finished = false;\n        this.destroyed = false;\n        this.enableXOF = false;\n        this.blockLen = blockLen;\n        this.suffix = suffix;\n        this.outputLen = outputLen;\n        this.enableXOF = enableXOF;\n        this.rounds = rounds;\n        // Can be passed from user as dkLen\n        anumber(outputLen);\n        // 1600 = 5x5 matrix of 64bit.  1600 bits === 200 bytes\n        // 0 < blockLen < 200\n        if (!(0 < blockLen && blockLen < 200)) throw new Error('only keccak-f1600 function is supported');\n        this.state = new Uint8Array(200);\n        this.state32 = u32(this.state);\n    }\n}\nconst gen = (suffix, blockLen, outputLen)=>createHasher(()=>new Keccak(blockLen, suffix, outputLen));\n/** SHA3-224 hash function. */ const sha3_224 = /* @__PURE__ */ (()=>gen(0x06, 144, 224 / 8))();\n/** SHA3-256 hash function. Different from keccak-256. */ const sha3_256 = /* @__PURE__ */ (()=>gen(0x06, 136, 256 / 8))();\n/** SHA3-384 hash function. */ const sha3_384 = /* @__PURE__ */ (()=>gen(0x06, 104, 384 / 8))();\n/** SHA3-512 hash function. */ const sha3_512 = /* @__PURE__ */ (()=>gen(0x06, 72, 512 / 8))();\n\n/**\n * \"globalThis\" ponyfill.\n * @see [A horrifying globalThis polyfill in universal JavaScript](https://mathiasbynens.be/notes/globalthis)\n * @type {Object.<string, *>}\n */ const globalScope = (()=>{\n    if (typeof globalThis === \"object\") return globalThis;\n    else {\n        Object.defineProperty(Object.prototype, \"__GLOBALTHIS__\", {\n            get () {\n                return this;\n            },\n            configurable: true\n        });\n        try {\n            // @ts-expect-error\n            // eslint-disable-next-line no-undef\n            if (typeof __GLOBALTHIS__ !== \"undefined\") return __GLOBALTHIS__;\n        } finally{\n            // @ts-expect-error\n            delete Object.prototype.__GLOBALTHIS__;\n        }\n    }\n    // Still unable to determine \"globalThis\", fall back to a naive method.\n    if (typeof self !== \"undefined\") return self;\n    else if (typeof window !== \"undefined\") return window;\n    else if (typeof global !== \"undefined\") return global;\n    return undefined;\n})();\n\n/**\n * @noble/hashes hash functions.\n * @type {Object.<string, sha1|sha224|sha256|sha384|sha512|sha3_224|sha3_256|sha3_384|sha3_512>}\n */ const nobleHashes = {\n    SHA1: sha1,\n    SHA224: sha224,\n    SHA256: sha256,\n    SHA384: sha384,\n    SHA512: sha512,\n    \"SHA3-224\": sha3_224,\n    \"SHA3-256\": sha3_256,\n    \"SHA3-384\": sha3_384,\n    \"SHA3-512\": sha3_512\n};\n/**\n * Canonicalizes a hash algorithm name.\n * @param {string} algorithm Hash algorithm name.\n * @returns {\"SHA1\"|\"SHA224\"|\"SHA256\"|\"SHA384\"|\"SHA512\"|\"SHA3-224\"|\"SHA3-256\"|\"SHA3-384\"|\"SHA3-512\"} Canonicalized hash algorithm name.\n */ const canonicalizeAlgorithm = (algorithm)=>{\n    switch(true){\n        case /^(?:SHA-?1|SSL3-SHA1)$/i.test(algorithm):\n            return \"SHA1\";\n        case /^SHA(?:2?-)?224$/i.test(algorithm):\n            return \"SHA224\";\n        case /^SHA(?:2?-)?256$/i.test(algorithm):\n            return \"SHA256\";\n        case /^SHA(?:2?-)?384$/i.test(algorithm):\n            return \"SHA384\";\n        case /^SHA(?:2?-)?512$/i.test(algorithm):\n            return \"SHA512\";\n        case /^SHA3-224$/i.test(algorithm):\n            return \"SHA3-224\";\n        case /^SHA3-256$/i.test(algorithm):\n            return \"SHA3-256\";\n        case /^SHA3-384$/i.test(algorithm):\n            return \"SHA3-384\";\n        case /^SHA3-512$/i.test(algorithm):\n            return \"SHA3-512\";\n        default:\n            throw new TypeError(`Unknown hash algorithm: ${algorithm}`);\n    }\n};\n/**\n * Calculates an HMAC digest.\n * @param {string} algorithm Algorithm.\n * @param {Uint8Array} key Key.\n * @param {Uint8Array} message Message.\n * @returns {Uint8Array} Digest.\n */ const hmacDigest = (algorithm, key, message)=>{\n    if (hmac) {\n        const hash = nobleHashes[algorithm] ?? nobleHashes[canonicalizeAlgorithm(algorithm)];\n        return hmac(hash, key, message);\n    } else {\n        throw new Error(\"Missing HMAC function\");\n    }\n};\n\n/**\n * RFC 4648 base32 alphabet without pad.\n * @type {string}\n */ const ALPHABET = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567\";\n/**\n * Converts a base32 string to an Uint8Array (RFC 4648).\n * @see [LinusU/base32-decode](https://github.com/LinusU/base32-decode)\n * @param {string} str Base32 string.\n * @returns {Uint8Array} Uint8Array.\n */ const base32Decode = (str)=>{\n    // Remove spaces (although they are not allowed by the spec, some issuers add them for readability).\n    str = str.replace(/ /g, \"\");\n    // Canonicalize to all upper case and remove padding if it exists.\n    let end = str.length;\n    while(str[end - 1] === \"=\")--end;\n    str = (end < str.length ? str.substring(0, end) : str).toUpperCase();\n    const buf = new ArrayBuffer(str.length * 5 / 8 | 0);\n    const arr = new Uint8Array(buf);\n    let bits = 0;\n    let value = 0;\n    let index = 0;\n    for(let i = 0; i < str.length; i++){\n        const idx = ALPHABET.indexOf(str[i]);\n        if (idx === -1) throw new TypeError(`Invalid character found: ${str[i]}`);\n        value = value << 5 | idx;\n        bits += 5;\n        if (bits >= 8) {\n            bits -= 8;\n            arr[index++] = value >>> bits;\n        }\n    }\n    return arr;\n};\n/**\n * Converts an Uint8Array to a base32 string (RFC 4648).\n * @see [LinusU/base32-encode](https://github.com/LinusU/base32-encode)\n * @param {Uint8Array} arr Uint8Array.\n * @returns {string} Base32 string.\n */ const base32Encode = (arr)=>{\n    let bits = 0;\n    let value = 0;\n    let str = \"\";\n    for(let i = 0; i < arr.length; i++){\n        value = value << 8 | arr[i];\n        bits += 8;\n        while(bits >= 5){\n            str += ALPHABET[value >>> bits - 5 & 31];\n            bits -= 5;\n        }\n    }\n    if (bits > 0) {\n        str += ALPHABET[value << 5 - bits & 31];\n    }\n    return str;\n};\n\n/**\n * Converts a hexadecimal string to an Uint8Array.\n * @param {string} str Hexadecimal string.\n * @returns {Uint8Array} Uint8Array.\n */ const hexDecode = (str)=>{\n    // Remove spaces (although they are not allowed by the spec, some issuers add them for readability).\n    str = str.replace(/ /g, \"\");\n    const buf = new ArrayBuffer(str.length / 2);\n    const arr = new Uint8Array(buf);\n    for(let i = 0; i < str.length; i += 2){\n        arr[i / 2] = parseInt(str.substring(i, i + 2), 16);\n    }\n    return arr;\n};\n/**\n * Converts an Uint8Array to a hexadecimal string.\n * @param {Uint8Array} arr Uint8Array.\n * @returns {string} Hexadecimal string.\n */ const hexEncode = (arr)=>{\n    let str = \"\";\n    for(let i = 0; i < arr.length; i++){\n        const hex = arr[i].toString(16);\n        if (hex.length === 1) str += \"0\";\n        str += hex;\n    }\n    return str.toUpperCase();\n};\n\n/**\n * Converts a Latin-1 string to an Uint8Array.\n * @param {string} str Latin-1 string.\n * @returns {Uint8Array} Uint8Array.\n */ const latin1Decode = (str)=>{\n    const buf = new ArrayBuffer(str.length);\n    const arr = new Uint8Array(buf);\n    for(let i = 0; i < str.length; i++){\n        arr[i] = str.charCodeAt(i) & 0xff;\n    }\n    return arr;\n};\n/**\n * Converts an Uint8Array to a Latin-1 string.\n * @param {Uint8Array} arr Uint8Array.\n * @returns {string} Latin-1 string.\n */ const latin1Encode = (arr)=>{\n    let str = \"\";\n    for(let i = 0; i < arr.length; i++){\n        str += String.fromCharCode(arr[i]);\n    }\n    return str;\n};\n\n/**\n * TextEncoder instance.\n * @type {TextEncoder|null}\n */ const ENCODER = globalScope.TextEncoder ? new globalScope.TextEncoder() : null;\n/**\n * TextDecoder instance.\n * @type {TextDecoder|null}\n */ const DECODER = globalScope.TextDecoder ? new globalScope.TextDecoder() : null;\n/**\n * Converts an UTF-8 string to an Uint8Array.\n * @param {string} str String.\n * @returns {Uint8Array} Uint8Array.\n */ const utf8Decode = (str)=>{\n    if (!ENCODER) {\n        throw new Error(\"Encoding API not available\");\n    }\n    return ENCODER.encode(str);\n};\n/**\n * Converts an Uint8Array to an UTF-8 string.\n * @param {Uint8Array} arr Uint8Array.\n * @returns {string} String.\n */ const utf8Encode = (arr)=>{\n    if (!DECODER) {\n        throw new Error(\"Encoding API not available\");\n    }\n    return DECODER.decode(arr);\n};\n\n/**\n * Returns random bytes.\n * @param {number} size Size.\n * @returns {Uint8Array} Random bytes.\n */ const randomBytes = (size)=>{\n    if (globalScope.crypto?.getRandomValues) {\n        return globalScope.crypto.getRandomValues(new Uint8Array(size));\n    } else {\n        throw new Error(\"Cryptography API not available\");\n    }\n};\n\n/**\n * OTP secret key.\n */ class Secret {\n    /**\n   * Converts a Latin-1 string to a Secret object.\n   * @param {string} str Latin-1 string.\n   * @returns {Secret} Secret object.\n   */ static fromLatin1(str) {\n        return new Secret({\n            buffer: latin1Decode(str).buffer\n        });\n    }\n    /**\n   * Converts an UTF-8 string to a Secret object.\n   * @param {string} str UTF-8 string.\n   * @returns {Secret} Secret object.\n   */ static fromUTF8(str) {\n        return new Secret({\n            buffer: utf8Decode(str).buffer\n        });\n    }\n    /**\n   * Converts a base32 string to a Secret object.\n   * @param {string} str Base32 string.\n   * @returns {Secret} Secret object.\n   */ static fromBase32(str) {\n        return new Secret({\n            buffer: base32Decode(str).buffer\n        });\n    }\n    /**\n   * Converts a hexadecimal string to a Secret object.\n   * @param {string} str Hexadecimal string.\n   * @returns {Secret} Secret object.\n   */ static fromHex(str) {\n        return new Secret({\n            buffer: hexDecode(str).buffer\n        });\n    }\n    /**\n   * Secret key buffer.\n   * @deprecated For backward compatibility, the \"bytes\" property should be used instead.\n   * @type {ArrayBufferLike}\n   */ get buffer() {\n        return this.bytes.buffer;\n    }\n    /**\n   * Latin-1 string representation of secret key.\n   * @type {string}\n   */ get latin1() {\n        Object.defineProperty(this, \"latin1\", {\n            enumerable: true,\n            writable: false,\n            configurable: false,\n            value: latin1Encode(this.bytes)\n        });\n        return this.latin1;\n    }\n    /**\n   * UTF-8 string representation of secret key.\n   * @type {string}\n   */ get utf8() {\n        Object.defineProperty(this, \"utf8\", {\n            enumerable: true,\n            writable: false,\n            configurable: false,\n            value: utf8Encode(this.bytes)\n        });\n        return this.utf8;\n    }\n    /**\n   * Base32 string representation of secret key.\n   * @type {string}\n   */ get base32() {\n        Object.defineProperty(this, \"base32\", {\n            enumerable: true,\n            writable: false,\n            configurable: false,\n            value: base32Encode(this.bytes)\n        });\n        return this.base32;\n    }\n    /**\n   * Hexadecimal string representation of secret key.\n   * @type {string}\n   */ get hex() {\n        Object.defineProperty(this, \"hex\", {\n            enumerable: true,\n            writable: false,\n            configurable: false,\n            value: hexEncode(this.bytes)\n        });\n        return this.hex;\n    }\n    /**\n   * Creates a secret key object.\n   * @param {Object} [config] Configuration options.\n   * @param {ArrayBufferLike} [config.buffer] Secret key buffer.\n   * @param {number} [config.size=20] Number of random bytes to generate, ignored if 'buffer' is provided.\n   */ constructor({ buffer, size = 20 } = {}){\n        /**\n     * Secret key.\n     * @type {Uint8Array}\n     * @readonly\n     */ this.bytes = typeof buffer === \"undefined\" ? randomBytes(size) : new Uint8Array(buffer);\n        // Prevent the \"bytes\" property from being modified.\n        Object.defineProperty(this, \"bytes\", {\n            enumerable: true,\n            writable: false,\n            configurable: false,\n            value: this.bytes\n        });\n    }\n}\n\n/**\n * Returns true if a is equal to b, without leaking timing information that would allow an attacker to guess one of the values.\n * @param {string} a String a.\n * @param {string} b String b.\n * @returns {boolean} Equality result.\n */ const timingSafeEqual = (a, b)=>{\n    {\n        if (a.length !== b.length) {\n            throw new TypeError(\"Input strings must have the same length\");\n        }\n        let i = -1;\n        let out = 0;\n        while(++i < a.length){\n            out |= a.charCodeAt(i) ^ b.charCodeAt(i);\n        }\n        return out === 0;\n    }\n};\n\n/**\n * HOTP: An HMAC-based One-time Password Algorithm.\n * @see [RFC 4226](https://datatracker.ietf.org/doc/html/rfc4226)\n */ class HOTP {\n    /**\n   * Default configuration.\n   * @type {{\n   *   issuer: string,\n   *   label: string,\n   *   issuerInLabel: boolean,\n   *   algorithm: string,\n   *   digits: number,\n   *   counter: number\n   *   window: number\n   * }}\n   */ static get defaults() {\n        return {\n            issuer: \"\",\n            label: \"OTPAuth\",\n            issuerInLabel: true,\n            algorithm: \"SHA1\",\n            digits: 6,\n            counter: 0,\n            window: 1\n        };\n    }\n    /**\n   * Generates an HOTP token.\n   * @param {Object} config Configuration options.\n   * @param {Secret} config.secret Secret key.\n   * @param {string} [config.algorithm='SHA1'] HMAC hashing algorithm.\n   * @param {number} [config.digits=6] Token length.\n   * @param {number} [config.counter=0] Counter value.\n   * @returns {string} Token.\n   */ static generate({ secret, algorithm = HOTP.defaults.algorithm, digits = HOTP.defaults.digits, counter = HOTP.defaults.counter }) {\n        const digest = hmacDigest(algorithm, secret.bytes, uintDecode(counter));\n        const offset = digest[digest.byteLength - 1] & 15;\n        const otp = ((digest[offset] & 127) << 24 | (digest[offset + 1] & 255) << 16 | (digest[offset + 2] & 255) << 8 | digest[offset + 3] & 255) % 10 ** digits;\n        return otp.toString().padStart(digits, \"0\");\n    }\n    /**\n   * Generates an HOTP token.\n   * @param {Object} [config] Configuration options.\n   * @param {number} [config.counter=this.counter++] Counter value.\n   * @returns {string} Token.\n   */ generate({ counter = this.counter++ } = {}) {\n        return HOTP.generate({\n            secret: this.secret,\n            algorithm: this.algorithm,\n            digits: this.digits,\n            counter\n        });\n    }\n    /**\n   * Validates an HOTP token.\n   * @param {Object} config Configuration options.\n   * @param {string} config.token Token value.\n   * @param {Secret} config.secret Secret key.\n   * @param {string} [config.algorithm='SHA1'] HMAC hashing algorithm.\n   * @param {number} [config.digits=6] Token length.\n   * @param {number} [config.counter=0] Counter value.\n   * @param {number} [config.window=1] Window of counter values to test.\n   * @returns {number|null} Token delta or null if it is not found in the search window, in which case it should be considered invalid.\n   */ static validate({ token, secret, algorithm, digits = HOTP.defaults.digits, counter = HOTP.defaults.counter, window = HOTP.defaults.window }) {\n        // Return early if the token length does not match the digit number.\n        if (token.length !== digits) return null;\n        let delta = null;\n        const check = (/** @type {number} */ i)=>{\n            const generatedToken = HOTP.generate({\n                secret,\n                algorithm,\n                digits,\n                counter: i\n            });\n            if (timingSafeEqual(token, generatedToken)) {\n                delta = i - counter;\n            }\n        };\n        check(counter);\n        for(let i = 1; i <= window && delta === null; ++i){\n            check(counter - i);\n            if (delta !== null) break;\n            check(counter + i);\n            if (delta !== null) break;\n        }\n        return delta;\n    }\n    /**\n   * Validates an HOTP token.\n   * @param {Object} config Configuration options.\n   * @param {string} config.token Token value.\n   * @param {number} [config.counter=this.counter] Counter value.\n   * @param {number} [config.window=1] Window of counter values to test.\n   * @returns {number|null} Token delta or null if it is not found in the search window, in which case it should be considered invalid.\n   */ validate({ token, counter = this.counter, window }) {\n        return HOTP.validate({\n            token,\n            secret: this.secret,\n            algorithm: this.algorithm,\n            digits: this.digits,\n            counter,\n            window\n        });\n    }\n    /**\n   * Returns a Google Authenticator key URI.\n   * @returns {string} URI.\n   */ toString() {\n        const e = encodeURIComponent;\n        return \"otpauth://hotp/\" + `${this.issuer.length > 0 ? this.issuerInLabel ? `${e(this.issuer)}:${e(this.label)}?issuer=${e(this.issuer)}&` : `${e(this.label)}?issuer=${e(this.issuer)}&` : `${e(this.label)}?`}` + `secret=${e(this.secret.base32)}&` + `algorithm=${e(this.algorithm)}&` + `digits=${e(this.digits)}&` + `counter=${e(this.counter)}`;\n    }\n    /**\n   * Creates an HOTP object.\n   * @param {Object} [config] Configuration options.\n   * @param {string} [config.issuer=''] Account provider.\n   * @param {string} [config.label='OTPAuth'] Account label.\n   * @param {boolean} [config.issuerInLabel=true] Include issuer prefix in label.\n   * @param {Secret|string} [config.secret=Secret] Secret key.\n   * @param {string} [config.algorithm='SHA1'] HMAC hashing algorithm.\n   * @param {number} [config.digits=6] Token length.\n   * @param {number} [config.counter=0] Initial counter value.\n   */ constructor({ issuer = HOTP.defaults.issuer, label = HOTP.defaults.label, issuerInLabel = HOTP.defaults.issuerInLabel, secret = new Secret(), algorithm = HOTP.defaults.algorithm, digits = HOTP.defaults.digits, counter = HOTP.defaults.counter } = {}){\n        /**\n     * Account provider.\n     * @type {string}\n     */ this.issuer = issuer;\n        /**\n     * Account label.\n     * @type {string}\n     */ this.label = label;\n        /**\n     * Include issuer prefix in label.\n     * @type {boolean}\n     */ this.issuerInLabel = issuerInLabel;\n        /**\n     * Secret key.\n     * @type {Secret}\n     */ this.secret = typeof secret === \"string\" ? Secret.fromBase32(secret) : secret;\n        /**\n     * HMAC hashing algorithm.\n     * @type {string}\n     */ this.algorithm = canonicalizeAlgorithm(algorithm);\n        /**\n     * Token length.\n     * @type {number}\n     */ this.digits = digits;\n        /**\n     * Initial counter value.\n     * @type {number}\n     */ this.counter = counter;\n    }\n}\n\n/**\n * TOTP: Time-Based One-Time Password Algorithm.\n * @see [RFC 6238](https://datatracker.ietf.org/doc/html/rfc6238)\n */ class TOTP {\n    /**\n   * Default configuration.\n   * @type {{\n   *   issuer: string,\n   *   label: string,\n   *   issuerInLabel: boolean,\n   *   algorithm: string,\n   *   digits: number,\n   *   period: number\n   *   window: number\n   * }}\n   */ static get defaults() {\n        return {\n            issuer: \"\",\n            label: \"OTPAuth\",\n            issuerInLabel: true,\n            algorithm: \"SHA1\",\n            digits: 6,\n            period: 30,\n            window: 1\n        };\n    }\n    /**\n   * Calculates the counter. i.e. the number of periods since timestamp 0.\n   * @param {Object} [config] Configuration options.\n   * @param {number} [config.period=30] Token time-step duration.\n   * @param {number} [config.timestamp=Date.now] Timestamp value in milliseconds.\n   * @returns {number} Counter.\n   */ static counter({ period = TOTP.defaults.period, timestamp = Date.now() } = {}) {\n        return Math.floor(timestamp / 1000 / period);\n    }\n    /**\n   * Calculates the counter. i.e. the number of periods since timestamp 0.\n   * @param {Object} [config] Configuration options.\n   * @param {number} [config.timestamp=Date.now] Timestamp value in milliseconds.\n   * @returns {number} Counter.\n   */ counter({ timestamp = Date.now() } = {}) {\n        return TOTP.counter({\n            period: this.period,\n            timestamp\n        });\n    }\n    /**\n   * Calculates the remaining time in milliseconds until the next token is generated.\n   * @param {Object} [config] Configuration options.\n   * @param {number} [config.period=30] Token time-step duration.\n   * @param {number} [config.timestamp=Date.now] Timestamp value in milliseconds.\n   * @returns {number} counter.\n   */ static remaining({ period = TOTP.defaults.period, timestamp = Date.now() } = {}) {\n        return period * 1000 - timestamp % (period * 1000);\n    }\n    /**\n   * Calculates the remaining time in milliseconds until the next token is generated.\n   * @param {Object} [config] Configuration options.\n   * @param {number} [config.timestamp=Date.now] Timestamp value in milliseconds.\n   * @returns {number} counter.\n   */ remaining({ timestamp = Date.now() } = {}) {\n        return TOTP.remaining({\n            period: this.period,\n            timestamp\n        });\n    }\n    /**\n   * Generates a TOTP token.\n   * @param {Object} config Configuration options.\n   * @param {Secret} config.secret Secret key.\n   * @param {string} [config.algorithm='SHA1'] HMAC hashing algorithm.\n   * @param {number} [config.digits=6] Token length.\n   * @param {number} [config.period=30] Token time-step duration.\n   * @param {number} [config.timestamp=Date.now] Timestamp value in milliseconds.\n   * @returns {string} Token.\n   */ static generate({ secret, algorithm, digits, period = TOTP.defaults.period, timestamp = Date.now() }) {\n        return HOTP.generate({\n            secret,\n            algorithm,\n            digits,\n            counter: TOTP.counter({\n                period,\n                timestamp\n            })\n        });\n    }\n    /**\n   * Generates a TOTP token.\n   * @param {Object} [config] Configuration options.\n   * @param {number} [config.timestamp=Date.now] Timestamp value in milliseconds.\n   * @returns {string} Token.\n   */ generate({ timestamp = Date.now() } = {}) {\n        return TOTP.generate({\n            secret: this.secret,\n            algorithm: this.algorithm,\n            digits: this.digits,\n            period: this.period,\n            timestamp\n        });\n    }\n    /**\n   * Validates a TOTP token.\n   * @param {Object} config Configuration options.\n   * @param {string} config.token Token value.\n   * @param {Secret} config.secret Secret key.\n   * @param {string} [config.algorithm='SHA1'] HMAC hashing algorithm.\n   * @param {number} [config.digits=6] Token length.\n   * @param {number} [config.period=30] Token time-step duration.\n   * @param {number} [config.timestamp=Date.now] Timestamp value in milliseconds.\n   * @param {number} [config.window=1] Window of counter values to test.\n   * @returns {number|null} Token delta or null if it is not found in the search window, in which case it should be considered invalid.\n   */ static validate({ token, secret, algorithm, digits, period = TOTP.defaults.period, timestamp = Date.now(), window }) {\n        return HOTP.validate({\n            token,\n            secret,\n            algorithm,\n            digits,\n            counter: TOTP.counter({\n                period,\n                timestamp\n            }),\n            window\n        });\n    }\n    /**\n   * Validates a TOTP token.\n   * @param {Object} config Configuration options.\n   * @param {string} config.token Token value.\n   * @param {number} [config.timestamp=Date.now] Timestamp value in milliseconds.\n   * @param {number} [config.window=1] Window of counter values to test.\n   * @returns {number|null} Token delta or null if it is not found in the search window, in which case it should be considered invalid.\n   */ validate({ token, timestamp, window }) {\n        return TOTP.validate({\n            token,\n            secret: this.secret,\n            algorithm: this.algorithm,\n            digits: this.digits,\n            period: this.period,\n            timestamp,\n            window\n        });\n    }\n    /**\n   * Returns a Google Authenticator key URI.\n   * @returns {string} URI.\n   */ toString() {\n        const e = encodeURIComponent;\n        return \"otpauth://totp/\" + `${this.issuer.length > 0 ? this.issuerInLabel ? `${e(this.issuer)}:${e(this.label)}?issuer=${e(this.issuer)}&` : `${e(this.label)}?issuer=${e(this.issuer)}&` : `${e(this.label)}?`}` + `secret=${e(this.secret.base32)}&` + `algorithm=${e(this.algorithm)}&` + `digits=${e(this.digits)}&` + `period=${e(this.period)}`;\n    }\n    /**\n   * Creates a TOTP object.\n   * @param {Object} [config] Configuration options.\n   * @param {string} [config.issuer=''] Account provider.\n   * @param {string} [config.label='OTPAuth'] Account label.\n   * @param {boolean} [config.issuerInLabel=true] Include issuer prefix in label.\n   * @param {Secret|string} [config.secret=Secret] Secret key.\n   * @param {string} [config.algorithm='SHA1'] HMAC hashing algorithm.\n   * @param {number} [config.digits=6] Token length.\n   * @param {number} [config.period=30] Token time-step duration.\n   */ constructor({ issuer = TOTP.defaults.issuer, label = TOTP.defaults.label, issuerInLabel = TOTP.defaults.issuerInLabel, secret = new Secret(), algorithm = TOTP.defaults.algorithm, digits = TOTP.defaults.digits, period = TOTP.defaults.period } = {}){\n        /**\n     * Account provider.\n     * @type {string}\n     */ this.issuer = issuer;\n        /**\n     * Account label.\n     * @type {string}\n     */ this.label = label;\n        /**\n     * Include issuer prefix in label.\n     * @type {boolean}\n     */ this.issuerInLabel = issuerInLabel;\n        /**\n     * Secret key.\n     * @type {Secret}\n     */ this.secret = typeof secret === \"string\" ? Secret.fromBase32(secret) : secret;\n        /**\n     * HMAC hashing algorithm.\n     * @type {string}\n     */ this.algorithm = canonicalizeAlgorithm(algorithm);\n        /**\n     * Token length.\n     * @type {number}\n     */ this.digits = digits;\n        /**\n     * Token time-step duration.\n     * @type {number}\n     */ this.period = period;\n    }\n}\n\n/**\n * Key URI regex (otpauth://TYPE/[ISSUER:]LABEL?PARAMETERS).\n * @type {RegExp}\n */ const OTPURI_REGEX = /^otpauth:\\/\\/([ht]otp)\\/(.+)\\?([A-Z0-9.~_-]+=[^?&]*(?:&[A-Z0-9.~_-]+=[^?&]*)*)$/i;\n/**\n * RFC 4648 base32 alphabet with pad.\n * @type {RegExp}\n */ const SECRET_REGEX = /^[2-7A-Z]+=*$/i;\n/**\n * Regex for supported algorithms.\n * @type {RegExp}\n */ const ALGORITHM_REGEX = /^SHA(?:1|224|256|384|512|3-224|3-256|3-384|3-512)$/i;\n/**\n * Integer regex.\n * @type {RegExp}\n */ const INTEGER_REGEX = /^[+-]?\\d+$/;\n/**\n * Positive integer regex.\n * @type {RegExp}\n */ const POSITIVE_INTEGER_REGEX = /^\\+?[1-9]\\d*$/;\n/**\n * HOTP/TOTP object/string conversion.\n * @see [Key URI Format](https://github.com/google/google-authenticator/wiki/Key-Uri-Format)\n */ class URI {\n    /**\n   * Parses a Google Authenticator key URI and returns an HOTP/TOTP object.\n   * @param {string} uri Google Authenticator Key URI.\n   * @returns {HOTP|TOTP} HOTP/TOTP object.\n   */ static parse(uri) {\n        let uriGroups;\n        try {\n            uriGroups = uri.match(OTPURI_REGEX);\n        // eslint-disable-next-line no-unused-vars\n        } catch (_) {\n        /* Handled below */ }\n        if (!Array.isArray(uriGroups)) {\n            throw new URIError(\"Invalid URI format\");\n        }\n        // Extract URI groups.\n        const uriType = uriGroups[1].toLowerCase();\n        const uriLabel = uriGroups[2].split(/(?::|%3A) *(.+)/i, 2).map(decodeURIComponent);\n        /** @type {Object.<string, string>} */ const uriParams = uriGroups[3].split(\"&\").reduce((acc, cur)=>{\n            const pairArr = cur.split(/=(.*)/, 2).map(decodeURIComponent);\n            const pairKey = pairArr[0].toLowerCase();\n            const pairVal = pairArr[1];\n            /** @type {Object.<string, string>} */ const pairAcc = acc;\n            pairAcc[pairKey] = pairVal;\n            return pairAcc;\n        }, {});\n        // 'OTP' will be instantiated with 'config' argument.\n        let OTP;\n        const config = {};\n        if (uriType === \"hotp\") {\n            OTP = HOTP;\n            // Counter: required\n            if (typeof uriParams.counter !== \"undefined\" && INTEGER_REGEX.test(uriParams.counter)) {\n                config.counter = parseInt(uriParams.counter, 10);\n            } else {\n                throw new TypeError(\"Missing or invalid 'counter' parameter\");\n            }\n        } else if (uriType === \"totp\") {\n            OTP = TOTP;\n            // Period: optional\n            if (typeof uriParams.period !== \"undefined\") {\n                if (POSITIVE_INTEGER_REGEX.test(uriParams.period)) {\n                    config.period = parseInt(uriParams.period, 10);\n                } else {\n                    throw new TypeError(\"Invalid 'period' parameter\");\n                }\n            }\n        } else {\n            throw new TypeError(\"Unknown OTP type\");\n        }\n        // Label: required\n        // Issuer: optional\n        if (typeof uriParams.issuer !== \"undefined\") {\n            config.issuer = uriParams.issuer;\n        }\n        if (uriLabel.length === 2) {\n            config.label = uriLabel[1];\n            if (typeof config.issuer === \"undefined\" || config.issuer === \"\") {\n                config.issuer = uriLabel[0];\n            } else if (uriLabel[0] === \"\") {\n                config.issuerInLabel = false;\n            }\n        } else {\n            config.label = uriLabel[0];\n            if (typeof config.issuer !== \"undefined\" && config.issuer !== \"\") {\n                config.issuerInLabel = false;\n            }\n        }\n        // Secret: required\n        if (typeof uriParams.secret !== \"undefined\" && SECRET_REGEX.test(uriParams.secret)) {\n            config.secret = uriParams.secret;\n        } else {\n            throw new TypeError(\"Missing or invalid 'secret' parameter\");\n        }\n        // Algorithm: optional\n        if (typeof uriParams.algorithm !== \"undefined\") {\n            if (ALGORITHM_REGEX.test(uriParams.algorithm)) {\n                config.algorithm = uriParams.algorithm;\n            } else {\n                throw new TypeError(\"Invalid 'algorithm' parameter\");\n            }\n        }\n        // Digits: optional\n        if (typeof uriParams.digits !== \"undefined\") {\n            if (POSITIVE_INTEGER_REGEX.test(uriParams.digits)) {\n                config.digits = parseInt(uriParams.digits, 10);\n            } else {\n                throw new TypeError(\"Invalid 'digits' parameter\");\n            }\n        }\n        return new OTP(config);\n    }\n    /**\n   * Converts an HOTP/TOTP object to a Google Authenticator key URI.\n   * @param {HOTP|TOTP} otp HOTP/TOTP object.\n   * @returns {string} Google Authenticator Key URI.\n   */ static stringify(otp) {\n        if (otp instanceof HOTP || otp instanceof TOTP) {\n            return otp.toString();\n        }\n        throw new TypeError(\"Invalid 'HOTP/TOTP' object\");\n    }\n}\n\n/**\n * Library version.\n * @type {string}\n */ const version = \"9.4.1\";\n\nexport { HOTP, Secret, TOTP, URI, version };\n", "// AuthForge - Passkey (WebAuthn) Routes\r\n\r\nimport { Hono } from 'hono';\r\nimport { Env, Passkey, User } from '../types';\r\nimport { \r\n  generateId, \r\n  generateToken,\r\n  sha256,\r\n  createSession,\r\n  logAudit \r\n} from '../lib/utils';\r\nimport { requireAuth, rateLimit } from '../lib/middleware';\r\nimport {\r\n  generateRegistrationOptions,\r\n  verifyRegistrationResponse,\r\n  generateAuthenticationOptions,\r\n  verifyAuthenticationResponse,\r\n  VerifiedRegistrationResponse,\r\n  VerifiedAuthenticationResponse\r\n} from '@simplewebauthn/server';\r\nimport type {\r\n  RegistrationResponseJSON,\r\n  AuthenticationResponseJSON\r\n} from '@simplewebauthn/types';\r\n\r\nconst passkeys = new Hono<{ Bindings: Env }>();\r\n\r\n// Get RP config - origin must match where the frontend runs\r\nconst getRP = (env: Env, requestOrigin?: string) => {\r\n  // Use the request origin for verification (frontend origin), or fall back to config\r\n  const origin = requestOrigin || env.WEBAUTHN_ORIGIN || 'http://localhost:3004';\r\n  return {\r\n    rpID: env.WEBAUTHN_RP_ID || 'localhost',\r\n    rpName: env.WEBAUTHN_RP_NAME || 'AuthForge',\r\n    origin\r\n  };\r\n};\r\n\r\n// Start passkey registration (authenticated users)\r\npasskeys.post('/register/start', requireAuth, async (c) => {\r\n  const user = c.get('user');\r\n  const requestOrigin = c.req.header('origin');\r\n  const rp = getRP(c.env, requestOrigin);\r\n\r\n  // Get existing passkeys\r\n  const existingPasskeys = await c.env.DB.prepare(\r\n    'SELECT credential_id FROM passkeys WHERE user_id = ?'\r\n  ).bind(user.id).all<{ credential_id: string }>();\r\n\r\n  const excludeCredentials = existingPasskeys.results.map(pk => ({\r\n    id: pk.credential_id,\r\n    type: 'public-key' as const\r\n  }));\r\n\r\n  const options = await generateRegistrationOptions({\r\n    rpName: rp.rpName,\r\n    rpID: rp.rpID,\r\n    userID: new TextEncoder().encode(user.id),\r\n    userName: user.email,\r\n    userDisplayName: user.name || user.email,\r\n    attestationType: 'none',\r\n    excludeCredentials,\r\n    authenticatorSelection: {\r\n      residentKey: 'preferred',\r\n      userVerification: 'preferred',\r\n      authenticatorAttachment: 'platform'\r\n    }\r\n  });\r\n\r\n  // Store challenge\r\n  const challengeId = generateId();\r\n  await c.env.DB.prepare(`\r\n    INSERT INTO webauthn_challenges (id, user_id, challenge, type, expires_at)\r\n    VALUES (?, ?, ?, 'register', datetime('now', '+5 minutes'))\r\n  `).bind(challengeId, user.id, options.challenge).run();\r\n\r\n  return c.json({\r\n    success: true,\r\n    challengeId,\r\n    options\r\n  });\r\n});\r\n\r\n// Complete passkey registration\r\npasskeys.post('/register/complete', requireAuth, async (c) => {\r\n  const user = c.get('user');\r\n  const requestOrigin = c.req.header('origin');\r\n  const rp = getRP(c.env, requestOrigin);\r\n  \r\n  const body = await c.req.json<{\r\n    challengeId: string;\r\n    credential: RegistrationResponseJSON;\r\n    name?: string;\r\n  }>();\r\n  const { challengeId, credential, name } = body;\r\n\r\n  if (!challengeId || !credential) {\r\n    return c.json({ error: 'Challenge ID and credential are required' }, 400);\r\n  }\r\n\r\n  // Get and validate challenge\r\n  const challenge = await c.env.DB.prepare(`\r\n    SELECT * FROM webauthn_challenges \r\n    WHERE id = ? AND user_id = ? AND type = 'register' AND expires_at > datetime('now')\r\n  `).bind(challengeId, user.id).first<{ challenge: string }>();\r\n\r\n  if (!challenge) {\r\n    return c.json({ error: 'Invalid or expired challenge' }, 401);\r\n  }\r\n\r\n  // Verify registration\r\n  let verification: VerifiedRegistrationResponse;\r\n  try {\r\n    console.log('Verifying with:', { expectedOrigin: rp.origin, expectedRPID: rp.rpID, challenge: challenge.challenge.substring(0, 20) + '...' });\r\n    verification = await verifyRegistrationResponse({\r\n      response: credential,\r\n      expectedChallenge: challenge.challenge,\r\n      expectedOrigin: rp.origin,\r\n      expectedRPID: rp.rpID\r\n    });\r\n  } catch (error) {\r\n    console.error('Passkey verification error:', error);\r\n    await logAudit(c.env.DB, 'passkey.register.failed', user.id, c.req.raw, { error: String(error) });\r\n    return c.json({ error: `Failed to verify passkey: ${String(error)}` }, 400);\r\n  }\r\n\r\n  if (!verification.verified || !verification.registrationInfo) {\r\n    return c.json({ error: 'Passkey verification failed' }, 400);\r\n  }\r\n\r\n  // Log the structure to debug\r\n  console.log('Registration info keys:', Object.keys(verification.registrationInfo));\r\n  console.log('Registration info:', JSON.stringify(verification.registrationInfo, (key, value) => \r\n    value instanceof Uint8Array ? `Uint8Array(${value.length})` : value\r\n  , 2));\r\n\r\n  const { registrationInfo } = verification;\r\n  \r\n  // In v10+, the credential is directly in registrationInfo\r\n  const credentialId = registrationInfo.credential?.id || registrationInfo.credentialID;\r\n  const credentialPublicKey = registrationInfo.credential?.publicKey || registrationInfo.credentialPublicKey;\r\n  const counter = registrationInfo.credential?.counter ?? registrationInfo.counter ?? 0;\r\n  const credentialDeviceType = registrationInfo.credentialDeviceType;\r\n  const credentialBackedUp = registrationInfo.credentialBackedUp;\r\n\r\n  if (!credentialId || !credentialPublicKey) {\r\n    console.error('Missing credential data:', { credentialId, credentialPublicKey });\r\n    return c.json({ error: 'Invalid credential data from authenticator' }, 400);\r\n  }\r\n\r\n  // Check if credential already exists\r\n  const credentialIdBase64 = typeof credentialId === 'string' \r\n    ? credentialId \r\n    : Buffer.from(credentialId).toString('base64url');\r\n    \r\n  const existing = await c.env.DB.prepare(\r\n    'SELECT id FROM passkeys WHERE credential_id = ?'\r\n  ).bind(credentialIdBase64).first();\r\n\r\n  if (existing) {\r\n    return c.json({ error: 'This passkey is already registered' }, 409);\r\n  }\r\n\r\n  // Store passkey\r\n  const passkeyId = generateId();\r\n  const publicKeyBase64 = credentialPublicKey instanceof Uint8Array\r\n    ? Buffer.from(credentialPublicKey).toString('base64')\r\n    : Buffer.from(credentialPublicKey).toString('base64');\r\n    \r\n  await c.env.DB.prepare(`\r\n    INSERT INTO passkeys (id, user_id, credential_id, public_key, counter, device_type, backed_up, transports, name)\r\n    VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)\r\n  `).bind(\r\n    passkeyId,\r\n    user.id,\r\n    credentialIdBase64,\r\n    publicKeyBase64,\r\n    counter,\r\n    credentialDeviceType,\r\n    credentialBackedUp ? 1 : 0,\r\n    credential.response.transports?.join(',') || null,\r\n    name || `Passkey ${new Date().toLocaleDateString()}`\r\n  ).run();\r\n\r\n  // Delete challenge\r\n  await c.env.DB.prepare('DELETE FROM webauthn_challenges WHERE id = ?')\r\n    .bind(challengeId)\r\n    .run();\r\n\r\n  await logAudit(c.env.DB, 'passkey.registered', user.id, c.req.raw, { passkeyId });\r\n\r\n  return c.json({\r\n    success: true,\r\n    message: 'Passkey registered successfully',\r\n    passkey: {\r\n      id: passkeyId,\r\n      name: name || `Passkey ${new Date().toLocaleDateString()}`,\r\n      deviceType: credentialDeviceType,\r\n      backedUp: credentialBackedUp\r\n    }\r\n  });\r\n});\r\n\r\n// Start passkey authentication (unauthenticated - for login)\r\npasskeys.post('/authenticate/start', rateLimit(10, 300), async (c) => {\r\n  const requestOrigin = c.req.header('origin');\r\n  const rp = getRP(c.env, requestOrigin);\r\n  const body = await c.req.json<{ email?: string }>();\r\n\r\n  let allowCredentials: { id: string; type: 'public-key' }[] = [];\r\n  let userId: string | null = null;\r\n\r\n  // If email provided, get credentials for that user\r\n  if (body.email) {\r\n    const user = await c.env.DB.prepare('SELECT id FROM users WHERE email = ?')\r\n      .bind(body.email.toLowerCase())\r\n      .first<{ id: string }>();\r\n\r\n    if (user) {\r\n      userId = user.id;\r\n      const userPasskeys = await c.env.DB.prepare(\r\n        'SELECT credential_id, transports FROM passkeys WHERE user_id = ?'\r\n      ).bind(user.id).all<{ credential_id: string; transports: string | null }>();\r\n\r\n      allowCredentials = userPasskeys.results.map(pk => ({\r\n        id: pk.credential_id,\r\n        type: 'public-key' as const\r\n      }));\r\n    }\r\n  }\r\n\r\n  const options = await generateAuthenticationOptions({\r\n    rpID: rp.rpID,\r\n    allowCredentials: allowCredentials.length > 0 ? allowCredentials : undefined,\r\n    userVerification: 'preferred'\r\n  });\r\n\r\n  // Store challenge\r\n  const challengeId = generateId();\r\n  await c.env.DB.prepare(`\r\n    INSERT INTO webauthn_challenges (id, user_id, challenge, type, expires_at)\r\n    VALUES (?, ?, ?, 'authenticate', datetime('now', '+5 minutes'))\r\n  `).bind(challengeId, userId, options.challenge).run();\r\n\r\n  return c.json({\r\n    success: true,\r\n    challengeId,\r\n    options\r\n  });\r\n});\r\n\r\n// Complete passkey authentication\r\npasskeys.post('/authenticate/complete', rateLimit(10, 300), async (c) => {\r\n  const requestOrigin = c.req.header('origin');\r\n  const rp = getRP(c.env, requestOrigin);\r\n  \r\n  const body = await c.req.json<{\r\n    challengeId: string;\r\n    credential: AuthenticationResponseJSON;\r\n  }>();\r\n  const { challengeId, credential } = body;\r\n\r\n  console.log('Auth complete - credential received:', JSON.stringify(credential, null, 2));\r\n\r\n  if (!challengeId || !credential) {\r\n    return c.json({ error: 'Challenge ID and credential are required' }, 400);\r\n  }\r\n\r\n  if (!credential.id) {\r\n    return c.json({ error: 'Credential ID is missing' }, 400);\r\n  }\r\n\r\n  // Get challenge\r\n  const challenge = await c.env.DB.prepare(`\r\n    SELECT * FROM webauthn_challenges \r\n    WHERE id = ? AND type = 'authenticate' AND expires_at > datetime('now')\r\n  `).bind(challengeId).first<{ id: string; user_id: string | null; challenge: string }>();\r\n\r\n  if (!challenge) {\r\n    return c.json({ error: 'Invalid or expired challenge' }, 401);\r\n  }\r\n\r\n  // Find passkey by credential ID\r\n  const credentialIdB64 = credential.id;\r\n  console.log('Looking up passkey with credential_id:', credentialIdB64);\r\n  \r\n  const passkey = await c.env.DB.prepare(\r\n    'SELECT * FROM passkeys WHERE credential_id = ?'\r\n  ).bind(credentialIdB64).first<Passkey>();\r\n\r\n  console.log('Found passkey:', passkey ? 'yes' : 'no');\r\n\r\n  if (!passkey) {\r\n    await logAudit(c.env.DB, 'passkey.auth.failed', null, c.req.raw, { reason: 'not_found', credentialId: credentialIdB64 });\r\n    return c.json({ error: 'Passkey not found' }, 401);\r\n  }\r\n\r\n  // Get user\r\n  const user = await c.env.DB.prepare('SELECT * FROM users WHERE id = ?')\r\n    .bind(passkey.user_id)\r\n    .first<User>();\r\n\r\n  if (!user || user.status !== 'active') {\r\n    return c.json({ error: 'User not found or inactive' }, 401);\r\n  }\r\n\r\n  // Verify authentication - convert base64 public key to Uint8Array\r\n  let verification: VerifiedAuthenticationResponse;\r\n  try {\r\n    // Decode base64 public key to Uint8Array\r\n    const publicKeyBytes = Uint8Array.from(atob(passkey.public_key), c => c.charCodeAt(0));\r\n    \r\n    console.log('Verifying with:', {\r\n      expectedOrigin: rp.origin,\r\n      expectedRPID: rp.rpID,\r\n      credentialId: passkey.credential_id,\r\n      counter: passkey.counter\r\n    });\r\n\r\n    // v10 API uses 'authenticator' not 'credential'\r\n    verification = await verifyAuthenticationResponse({\r\n      response: credential,\r\n      expectedChallenge: challenge.challenge,\r\n      expectedOrigin: rp.origin,\r\n      expectedRPID: rp.rpID,\r\n      authenticator: {\r\n        credentialID: passkey.credential_id,\r\n        credentialPublicKey: publicKeyBytes,\r\n        counter: passkey.counter\r\n      }\r\n    });\r\n  } catch (error) {\r\n    console.error('Auth verification error:', error);\r\n    await logAudit(c.env.DB, 'passkey.auth.failed', user.id, c.req.raw, { error: String(error) });\r\n    return c.json({ error: 'Failed to verify passkey authentication' }, 400);\r\n  }\r\n\r\n  if (!verification.verified) {\r\n    return c.json({ error: 'Passkey verification failed' }, 401);\r\n  }\r\n\r\n  // Update counter\r\n  await c.env.DB.prepare(`\r\n    UPDATE passkeys SET counter = ?, last_used_at = datetime('now') WHERE id = ?\r\n  `).bind(verification.authenticationInfo.newCounter, passkey.id).run();\r\n\r\n  // Delete challenge\r\n  await c.env.DB.prepare('DELETE FROM webauthn_challenges WHERE id = ?')\r\n    .bind(challengeId)\r\n    .run();\r\n\r\n  // Create session\r\n  const { session, token } = await createSession(c.env.DB, c.env.SESSIONS, user, c.req.raw);\r\n\r\n  // Mark 2FA as verified (passkeys are 2FA)\r\n  if (user.totp_enabled) {\r\n    await c.env.SESSIONS.put(`2fa:${session.id}`, '1', { expirationTtl: 7 * 24 * 60 * 60 });\r\n  }\r\n\r\n  await logAudit(c.env.DB, 'passkey.authenticated', user.id, c.req.raw, { passkeyId: passkey.id });\r\n\r\n  c.header('Set-Cookie', `authforge_token=${token}; HttpOnly; Secure; SameSite=Lax; Path=/; Max-Age=${7 * 24 * 60 * 60}`);\r\n\r\n  return c.json({\r\n    success: true,\r\n    user: {\r\n      id: user.id,\r\n      email: user.email,\r\n      name: user.name,\r\n      emailVerified: user.email_verified === 1,\r\n      has2FA: user.totp_enabled === 1\r\n    },\r\n    token\r\n  });\r\n});\r\n\r\n// List user's passkeys\r\npasskeys.get('/', requireAuth, async (c) => {\r\n  const user = c.get('user');\r\n\r\n  const result = await c.env.DB.prepare(`\r\n    SELECT id, name, device_type, backed_up, last_used_at, created_at\r\n    FROM passkeys WHERE user_id = ?\r\n    ORDER BY created_at DESC\r\n  `).bind(user.id).all<Passkey>();\r\n\r\n  return c.json({\r\n    success: true,\r\n    passkeys: result.results.map(pk => ({\r\n      id: pk.id,\r\n      name: pk.name,\r\n      deviceType: pk.device_type,\r\n      backedUp: pk.backed_up === 1,\r\n      lastUsedAt: pk.last_used_at,\r\n      createdAt: pk.created_at\r\n    }))\r\n  });\r\n});\r\n\r\n// Rename passkey\r\npasskeys.patch('/:id', requireAuth, async (c) => {\r\n  const user = c.get('user');\r\n  const passkeyId = c.req.param('id');\r\n  const body = await c.req.json<{ name: string }>();\r\n\r\n  if (!body.name) {\r\n    return c.json({ error: 'Name is required' }, 400);\r\n  }\r\n\r\n  const result = await c.env.DB.prepare(`\r\n    UPDATE passkeys SET name = ? WHERE id = ? AND user_id = ?\r\n  `).bind(body.name, passkeyId, user.id).run();\r\n\r\n  if (!result.meta.changes) {\r\n    return c.json({ error: 'Passkey not found' }, 404);\r\n  }\r\n\r\n  return c.json({ success: true, message: 'Passkey renamed' });\r\n});\r\n\r\n// Delete passkey\r\npasskeys.delete('/:id', requireAuth, async (c) => {\r\n  const user = c.get('user');\r\n  const passkeyId = c.req.param('id');\r\n\r\n  // Check if user has other auth methods\r\n  const passkeysCount = await c.env.DB.prepare(\r\n    'SELECT COUNT(*) as count FROM passkeys WHERE user_id = ?'\r\n  ).bind(user.id).first<{ count: number }>();\r\n\r\n  const hasPassword = user.password_hash !== null;\r\n\r\n  if ((passkeysCount?.count || 0) <= 1 && !hasPassword) {\r\n    return c.json({ \r\n      error: 'Cannot delete your only passkey without a password set' \r\n    }, 400);\r\n  }\r\n\r\n  const result = await c.env.DB.prepare(\r\n    'DELETE FROM passkeys WHERE id = ? AND user_id = ?'\r\n  ).bind(passkeyId, user.id).run();\r\n\r\n  if (!result.meta.changes) {\r\n    return c.json({ error: 'Passkey not found' }, 404);\r\n  }\r\n\r\n  await logAudit(c.env.DB, 'passkey.deleted', user.id, c.req.raw, { passkeyId });\r\n\r\n  return c.json({ success: true, message: 'Passkey deleted' });\r\n});\r\n\r\nexport { passkeys as passkeysRoutes };\r\n", "/**\n * @packageDocumentation\n * @module @simplewebauthn/server\n */\nimport { generateRegistrationOptions } from './registration/generateRegistrationOptions.js';\nimport { verifyRegistrationResponse } from './registration/verifyRegistrationResponse.js';\nimport { generateAuthenticationOptions } from './authentication/generateAuthenticationOptions.js';\nimport { verifyAuthenticationResponse } from './authentication/verifyAuthenticationResponse.js';\nimport { MetadataService } from './services/metadataService.js';\nimport { SettingsService } from './services/settingsService.js';\nexport { generateAuthenticationOptions, generateRegistrationOptions, MetadataService, SettingsService, verifyAuthenticationResponse, verifyRegistrationResponse, };\n", "import { generateChallenge } from '../helpers/generateChallenge.js';\nimport { generateUserID } from '../helpers/generateUserID.js';\nimport { isoBase64URL, isoUint8Array } from '../helpers/iso/index.js';\n/**\n * Supported crypto algo identifiers\n * See https://w3c.github.io/webauthn/#sctn-alg-identifier\n * and https://www.iana.org/assignments/cose/cose.xhtml#algorithms\n */\nexport const supportedCOSEAlgorithmIdentifiers = [\n    // EdDSA (In first position to encourage authenticators to use this over ES256)\n    -8,\n    // ECDSA w/ SHA-256\n    -7,\n    // ECDSA w/ SHA-512\n    -36,\n    // RSASSA-PSS w/ SHA-256\n    -37,\n    // RSASSA-PSS w/ SHA-384\n    -38,\n    // RSASSA-PSS w/ SHA-512\n    -39,\n    // RSASSA-PKCS1-v1_5 w/ SHA-256\n    -257,\n    // RSASSA-PKCS1-v1_5 w/ SHA-384\n    -258,\n    // RSASSA-PKCS1-v1_5 w/ SHA-512\n    -259,\n    // RSASSA-PKCS1-v1_5 w/ SHA-1 (Deprecated; here for legacy support)\n    -65535,\n];\n/**\n * Set up some default authenticator selection options as per the latest spec:\n * https://www.w3.org/TR/webauthn-2/#dictdef-authenticatorselectioncriteria\n *\n * Helps with some older platforms (e.g. Android 7.0 Nougat) that may not be aware of these\n * defaults.\n */\nconst defaultAuthenticatorSelection = {\n    residentKey: 'preferred',\n    userVerification: 'preferred',\n};\n/**\n * Use the most commonly-supported algorithms\n * See the following:\n *   - https://www.iana.org/assignments/cose/cose.xhtml#algorithms\n *   - https://w3c.github.io/webauthn/#dom-publickeycredentialcreationoptions-pubkeycredparams\n */\nconst defaultSupportedAlgorithmIDs = [-8, -7, -257];\n/**\n * Prepare a value to pass into navigator.credentials.create(...) for authenticator registration\n *\n * **Options:**\n *\n * @param rpName - User-visible, \"friendly\" website/service name\n * @param rpID - Valid domain name (after `https://`)\n * @param userName - User's website-specific username (email, etc...)\n * @param userID **(Optional)** - User's website-specific unique ID. Defaults to generating a random identifier\n * @param challenge **(Optional)** - Random value the authenticator needs to sign and pass back. Defaults to generating a random value\n * @param userDisplayName **(Optional)** - User's actual name. Defaults to `\"\"`\n * @param timeout **(Optional)** - How long (in ms) the user can take to complete attestation. Defaults to `60000`\n * @param attestationType **(Optional)** - Specific attestation statement. Defaults to `\"none\"`\n * @param excludeCredentials **(Optional)** - Authenticators registered by the user so the user can't register the same credential multiple times. Defaults to `[]`\n * @param authenticatorSelection **(Optional)** - Advanced criteria for restricting the types of authenticators that may be used. Defaults to `{ residentKey: 'preferred', userVerification: 'preferred' }`\n * @param extensions **(Optional)** - Additional plugins the authenticator or browser should use during attestation\n * @param supportedAlgorithmIDs **(Optional)** - Array of numeric COSE algorithm identifiers supported for attestation by this RP. See https://www.iana.org/assignments/cose/cose.xhtml#algorithms. Defaults to `[-8, -7, -257]`\n */\nexport async function generateRegistrationOptions(options) {\n    const { rpName, rpID, userName, userID, challenge = await generateChallenge(), userDisplayName = '', timeout = 60000, attestationType = 'none', excludeCredentials = [], authenticatorSelection = defaultAuthenticatorSelection, extensions, supportedAlgorithmIDs = defaultSupportedAlgorithmIDs, } = options;\n    /**\n     * Prepare pubKeyCredParams from the array of algorithm ID's\n     */\n    const pubKeyCredParams = supportedAlgorithmIDs.map((id) => ({\n        alg: id,\n        type: 'public-key',\n    }));\n    /**\n     * Capture some of the nuances of how `residentKey` and `requireResidentKey` how either is set\n     * depending on when either is defined in the options\n     */\n    if (authenticatorSelection.residentKey === undefined) {\n        /**\n         * `residentKey`: \"If no value is given then the effective value is `required` if\n         * requireResidentKey is true or `discouraged` if it is false or absent.\"\n         *\n         * See https://www.w3.org/TR/webauthn-2/#dom-authenticatorselectioncriteria-residentkey\n         */\n        if (authenticatorSelection.requireResidentKey) {\n            authenticatorSelection.residentKey = 'required';\n        }\n        else {\n            /**\n             * FIDO Conformance v1.7.2 fails the first test if we do this, even though this is\n             * technically compatible with the WebAuthn L2 spec...\n             */\n            // authenticatorSelection.residentKey = 'discouraged';\n        }\n    }\n    else {\n        /**\n         * `requireResidentKey`: \"Relying Parties SHOULD set it to true if, and only if, residentKey is\n         * set to \"required\"\"\n         *\n         * Spec says this property defaults to `false` so we should still be okay to assign `false` too\n         *\n         * See https://www.w3.org/TR/webauthn-2/#dom-authenticatorselectioncriteria-requireresidentkey\n         */\n        authenticatorSelection.requireResidentKey = authenticatorSelection.residentKey === 'required';\n    }\n    /**\n     * Preserve ability to specify `string` values for challenges\n     */\n    let _challenge = challenge;\n    if (typeof _challenge === 'string') {\n        _challenge = isoUint8Array.fromUTF8String(_challenge);\n    }\n    /**\n     * Explicitly disallow use of strings for userID anymore because `isoBase64URL.fromBuffer()` below\n     * will return an empty string if one gets through!\n     */\n    if (typeof userID === 'string') {\n        throw new Error(`String values for \\`userID\\` are no longer supported. See https://simplewebauthn.dev/docs/advanced/server/custom-user-ids`);\n    }\n    /**\n     * Generate a user ID if one is not provided\n     */\n    let _userID = userID;\n    if (!_userID) {\n        _userID = await generateUserID();\n    }\n    return {\n        challenge: isoBase64URL.fromBuffer(_challenge),\n        rp: {\n            name: rpName,\n            id: rpID,\n        },\n        user: {\n            id: isoBase64URL.fromBuffer(_userID),\n            name: userName,\n            displayName: userDisplayName,\n        },\n        pubKeyCredParams,\n        timeout,\n        attestation: attestationType,\n        excludeCredentials: excludeCredentials.map((cred) => {\n            if (!isoBase64URL.isBase64URL(cred.id)) {\n                throw new Error(`excludeCredential id \"${cred.id}\" is not a valid base64url string`);\n            }\n            return {\n                ...cred,\n                id: isoBase64URL.trimPadding(cred.id),\n                type: 'public-key',\n            };\n        }),\n        authenticatorSelection,\n        extensions: {\n            ...extensions,\n            credProps: true,\n        },\n    };\n}\n", "import { isoCrypto } from './iso/index.js';\n/**\n * Generate a suitably random value to be used as an attestation or assertion challenge\n */\nexport async function generateChallenge() {\n    /**\n     * WebAuthn spec says that 16 bytes is a good minimum:\n     *\n     * \"In order to prevent replay attacks, the challenges MUST contain enough entropy to make\n     * guessing them infeasible. Challenges SHOULD therefore be at least 16 bytes long.\"\n     *\n     * Just in case, let's double it\n     */\n    const challenge = new Uint8Array(32);\n    await isoCrypto.getRandomValues(challenge);\n    return _generateChallengeInternals.stubThis(challenge);\n}\n// Make it possible to stub the return value during testing\nexport const _generateChallengeInternals = {\n    stubThis: (value) => value,\n};\n", "/**\n * A collection of methods for isomorphic manipulation of trickier data types\n *\n * The goal with these is to make it easier to replace dependencies later that might not play well\n * with specific server-like runtimes that expose global Web APIs (CloudFlare Workers, Deno, Bun,\n * etc...), while also supporting execution in Node.\n */\nexport * as isoBase64URL from './isoBase64URL.js';\nexport * as isoCBOR from './isoCBOR.js';\nexport * as isoCrypto from './isoCrypto/index.js';\nexport * as isoUint8Array from './isoUint8Array.js';\n", "import { base64 } from '../../deps.js';\n/**\n * Decode from a Base64URL-encoded string to an ArrayBuffer. Best used when converting a\n * credential ID from a JSON string to an ArrayBuffer, like in allowCredentials or\n * excludeCredentials.\n *\n * @param buffer Value to decode from base64\n * @param to (optional) The decoding to use, in case it's desirable to decode from base64 instead\n */\nexport function toBuffer(base64urlString, from = 'base64url') {\n    const _buffer = base64.toArrayBuffer(base64urlString, from === 'base64url');\n    return new Uint8Array(_buffer);\n}\n/**\n * Encode the given array buffer into a Base64URL-encoded string. Ideal for converting various\n * credential response ArrayBuffers to string for sending back to the server as JSON.\n *\n * @param buffer Value to encode to base64\n * @param to (optional) The encoding to use, in case it's desirable to encode to base64 instead\n */\nexport function fromBuffer(buffer, to = 'base64url') {\n    return base64.fromArrayBuffer(buffer, to === 'base64url');\n}\n/**\n * Convert a base64url string into base64\n */\nexport function toBase64(base64urlString) {\n    const fromBase64Url = base64.toArrayBuffer(base64urlString, true);\n    const toBase64 = base64.fromArrayBuffer(fromBase64Url);\n    return toBase64;\n}\n/**\n * Encode a UTF-8 string to base64url\n */\nexport function fromUTF8String(utf8String) {\n    return base64.fromString(utf8String, true);\n}\n/**\n * Decode a base64url string into its original UTF-8 string\n */\nexport function toUTF8String(base64urlString) {\n    return base64.toString(base64urlString, true);\n}\n/**\n * Confirm that the string is encoded into base64\n */\nexport function isBase64(input) {\n    return base64.validate(input, false);\n}\n/**\n * Confirm that the string is encoded into base64url, with support for optional padding\n */\nexport function isBase64URL(input) {\n    // Trim padding characters from the string if present\n    input = trimPadding(input);\n    return base64.validate(input, true);\n}\n/**\n * Remove optional padding from a base64url-encoded string\n */\nexport function trimPadding(input) {\n    return input.replace(/=/g, '');\n}\n", "// tiny_cbor (a.k.a. tiny-cbor in Node land)\nexport * as tinyCbor from '@levischuck/tiny-cbor';\n// b64 (a.k.a. @hexagon/base64 in Node land)\nexport { default as base64 } from '@hexagon/base64';\n// cross-fetch\nexport { fetch as crossFetch } from 'cross-fetch';\n// @peculiar libraries\nexport { AsnParser, AsnSerializer } from '@peculiar/asn1-schema';\nexport { AuthorityKeyIdentifier, BasicConstraints, Certificate, CertificateList, CRLDistributionPoints, ExtendedKeyUsage, id_ce_authorityKeyIdentifier, id_ce_basicConstraints, id_ce_cRLDistributionPoints, id_ce_extKeyUsage, id_ce_subjectAltName, id_ce_subjectKeyIdentifier, Name, SubjectAlternativeName, SubjectKeyIdentifier, } from '@peculiar/asn1-x509';\nexport { ECDSASigValue, ECParameters, id_ecPublicKey, id_secp256r1, id_secp384r1, } from '@peculiar/asn1-ecc';\nexport { RSAPublicKey } from '@peculiar/asn1-rsa';\nexport { id_ce_keyDescription, KeyDescription } from '@peculiar/asn1-android';\n", "export { CBORTag, decodeCBOR, decodePartialCBOR, encodeCBOR, } from \"./cbor/cbor.js\";\n", "import { decodeLength, encodeLength, MAJOR_TYPE_ARRAY, MAJOR_TYPE_BYTE_STRING, MAJOR_TYPE_MAP, MAJOR_TYPE_NEGATIVE_INTEGER, MAJOR_TYPE_SIMPLE_OR_FLOAT, MAJOR_TYPE_TAG, MAJOR_TYPE_TEXT_STRING, MAJOR_TYPE_UNSIGNED_INTEGER, } from \"./cbor_internal.js\";\n/**\n * A value which is wrapped with a CBOR Tag.\n * Several tags are registered with defined meanings like 0 for a date string.\n * These meanings are **not interpreted** when decoded or encoded.\n *\n * This class is an immutable record.\n * If the tag number or value needs to change, then construct a new tag\n */\nexport class CBORTag {\n    /**\n     * Wrap a value with a tag number.\n     * When encoded, this tag will be attached to the value.\n     *\n     * @param tag Tag number\n     * @param value Wrapped value\n     */\n    constructor(tag, value) {\n        Object.defineProperty(this, \"tagId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"tagValue\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.tagId = tag;\n        this.tagValue = value;\n    }\n    /**\n     * Read the tag number\n     */\n    get tag() {\n        return this.tagId;\n    }\n    /**\n     * Read the value\n     */\n    get value() {\n        return this.tagValue;\n    }\n}\nfunction decodeUnsignedInteger(data, argument, index) {\n    return decodeLength(data, argument, index);\n}\nfunction decodeNegativeInteger(data, argument, index) {\n    const [value, length] = decodeUnsignedInteger(data, argument, index);\n    return [-value - 1, length];\n}\nfunction decodeByteString(data, argument, index) {\n    const [lengthValue, lengthConsumed] = decodeLength(data, argument, index);\n    const dataStartIndex = index + lengthConsumed;\n    return [\n        new Uint8Array(data.buffer.slice(dataStartIndex, dataStartIndex + lengthValue)),\n        lengthConsumed + lengthValue,\n    ];\n}\nconst TEXT_DECODER = new TextDecoder();\nfunction decodeString(data, argument, index) {\n    const [value, length] = decodeByteString(data, argument, index);\n    return [TEXT_DECODER.decode(value), length];\n}\nfunction decodeArray(data, argument, index) {\n    if (argument === 0) {\n        return [[], 1];\n    }\n    const [length, lengthConsumed] = decodeLength(data, argument, index);\n    let consumedLength = lengthConsumed;\n    const value = [];\n    for (let i = 0; i < length; i++) {\n        const remainingDataLength = data.byteLength - index - consumedLength;\n        if (remainingDataLength <= 0) {\n            throw new Error(\"array is not supported or well formed\");\n        }\n        const [decodedValue, consumed] = decodeNext(data, index + consumedLength);\n        value.push(decodedValue);\n        consumedLength += consumed;\n    }\n    return [value, consumedLength];\n}\nconst MAP_ERROR = \"Map is not supported or well formed\";\nfunction decodeMap(data, argument, index) {\n    if (argument === 0) {\n        return [new Map(), 1];\n    }\n    const [length, lengthConsumed] = decodeLength(data, argument, index);\n    let consumedLength = lengthConsumed;\n    const result = new Map();\n    for (let i = 0; i < length; i++) {\n        let remainingDataLength = data.byteLength - index - consumedLength;\n        if (remainingDataLength <= 0) {\n            throw new Error(MAP_ERROR);\n        }\n        // Load key\n        const [key, keyConsumed] = decodeNext(data, index + consumedLength);\n        consumedLength += keyConsumed;\n        remainingDataLength -= keyConsumed;\n        // Check that there's enough to have a value\n        if (remainingDataLength <= 0) {\n            throw new Error(MAP_ERROR);\n        }\n        // Technically CBOR maps can have any type as the key, and so can JS Maps\n        // However, JS Maps can only reference such keys as references which would\n        // require key iteration and pattern matching.\n        // For simplicity, since such keys are not in use with WebAuthn, this\n        // capability is not implemented and the types are restricted to strings\n        // and numbers.\n        if (typeof key !== \"string\" && typeof key !== \"number\") {\n            throw new Error(MAP_ERROR);\n        }\n        // CBOR Maps are not well formed if there are duplicate keys\n        if (result.has(key)) {\n            throw new Error(MAP_ERROR);\n        }\n        // Load value\n        const [value, valueConsumed] = decodeNext(data, index + consumedLength);\n        consumedLength += valueConsumed;\n        result.set(key, value);\n    }\n    return [result, consumedLength];\n}\nfunction decodeFloat16(data, index) {\n    if (index + 3 > data.byteLength) {\n        throw new Error(\"CBOR stream ended before end of Float 16\");\n    }\n    // Skip the first byte\n    const result = data.getUint16(index + 1, false);\n    // A minimal selection of supported values\n    if (result == 0x7c00) {\n        return [Infinity, 3];\n    }\n    else if (result == 0x7e00) {\n        return [NaN, 3];\n    }\n    else if (result == 0xfc00) {\n        return [-Infinity, 3];\n    }\n    throw new Error(\"Float16 data is unsupported\");\n}\nfunction decodeFloat32(data, index) {\n    if (index + 5 > data.byteLength) {\n        throw new Error(\"CBOR stream ended before end of Float 32\");\n    }\n    // Skip the first byte\n    const result = data.getFloat32(index + 1, false);\n    // First byte + 4 byte float\n    return [result, 5];\n}\nfunction decodeFloat64(data, index) {\n    if (index + 9 > data.byteLength) {\n        throw new Error(\"CBOR stream ended before end of Float 64\");\n    }\n    // Skip the first byte\n    const result = data.getFloat64(index + 1, false);\n    // First byte + 8 byte float\n    return [result, 9];\n}\nfunction decodeTag(data, argument, index) {\n    const [tag, tagBytes] = decodeLength(data, argument, index);\n    const [value, valueBytes] = decodeNext(data, index + tagBytes);\n    return [new CBORTag(tag, value), tagBytes + valueBytes];\n}\nfunction decodeNext(data, index) {\n    if (index >= data.byteLength) {\n        throw new Error(\"CBOR stream ended before tag value\");\n    }\n    const byte = data.getUint8(index);\n    const majorType = byte >> 5;\n    const argument = byte & 0x1f;\n    switch (majorType) {\n        case MAJOR_TYPE_UNSIGNED_INTEGER: {\n            return decodeUnsignedInteger(data, argument, index);\n        }\n        case MAJOR_TYPE_NEGATIVE_INTEGER: {\n            return decodeNegativeInteger(data, argument, index);\n        }\n        case MAJOR_TYPE_BYTE_STRING: {\n            return decodeByteString(data, argument, index);\n        }\n        case MAJOR_TYPE_TEXT_STRING: {\n            return decodeString(data, argument, index);\n        }\n        case MAJOR_TYPE_ARRAY: {\n            return decodeArray(data, argument, index);\n        }\n        case MAJOR_TYPE_MAP: {\n            return decodeMap(data, argument, index);\n        }\n        case MAJOR_TYPE_TAG: {\n            return decodeTag(data, argument, index);\n        }\n        case MAJOR_TYPE_SIMPLE_OR_FLOAT: {\n            switch (argument) {\n                case 20:\n                    return [false, 1];\n                case 21:\n                    return [true, 1];\n                case 22:\n                    return [null, 1];\n                case 23:\n                    return [undefined, 1];\n                // 24: Simple value (value 32..255 in following byte)\n                case 25: // IEEE 754 Half-Precision Float (16 bits follow)\n                    return decodeFloat16(data, index);\n                case 26: // IEEE 754 Single-Precision Float (32 bits follow)\n                    return decodeFloat32(data, index);\n                case 27: // IEEE 754 Double-Precision Float (64 bits follow)\n                    return decodeFloat64(data, index);\n                // 28-30: Reserved, not well-formed in the present document\n                // 31: \"break\" stop code for indefinite-length items\n            }\n        }\n    }\n    throw new Error(`Unsupported or not well formed at ${index}`);\n}\nfunction encodeSimple(data) {\n    if (data === true) {\n        return 0xf5;\n    }\n    else if (data === false) {\n        return 0xf4;\n    }\n    else if (data === null) {\n        return 0xf6;\n    }\n    // Else undefined\n    return 0xf7;\n}\nfunction encodeFloat(data) {\n    if (Math.fround(data) == data || !Number.isFinite(data) || Number.isNaN(data)) {\n        // Float32\n        const output = new Uint8Array(5);\n        output[0] = 0xfa;\n        const view = new DataView(output.buffer);\n        view.setFloat32(1, data, false);\n        return output;\n    }\n    else {\n        // Float64\n        const output = new Uint8Array(9);\n        output[0] = 0xfb;\n        const view = new DataView(output.buffer);\n        view.setFloat64(1, data, false);\n        return output;\n    }\n}\nfunction encodeNumber(data) {\n    if (typeof data == \"number\") {\n        if (Number.isSafeInteger(data)) {\n            // Encode integer\n            if (data < 0) {\n                return encodeLength(MAJOR_TYPE_NEGATIVE_INTEGER, Math.abs(data));\n            }\n            else {\n                return encodeLength(MAJOR_TYPE_UNSIGNED_INTEGER, data);\n            }\n        }\n        return [encodeFloat(data)];\n    }\n    else {\n        if (data < 0n) {\n            return encodeLength(MAJOR_TYPE_NEGATIVE_INTEGER, data * -1n);\n        }\n        else {\n            return encodeLength(MAJOR_TYPE_UNSIGNED_INTEGER, data);\n        }\n    }\n}\nconst ENCODER = new TextEncoder();\nfunction encodeString(data, output) {\n    output.push(...encodeLength(MAJOR_TYPE_TEXT_STRING, data.length));\n    output.push(ENCODER.encode(data));\n}\nfunction encodeBytes(data, output) {\n    output.push(...encodeLength(MAJOR_TYPE_BYTE_STRING, data.length));\n    output.push(data);\n}\nfunction encodeArray(data, output) {\n    output.push(...encodeLength(MAJOR_TYPE_ARRAY, data.length));\n    for (const element of data) {\n        encodePartialCBOR(element, output);\n    }\n}\nfunction encodeMap(data, output) {\n    output.push(new Uint8Array(encodeLength(MAJOR_TYPE_MAP, data.size)));\n    for (const [key, value] of data.entries()) {\n        encodePartialCBOR(key, output);\n        encodePartialCBOR(value, output);\n    }\n}\nfunction encodeTag(tag, output) {\n    output.push(...encodeLength(MAJOR_TYPE_TAG, tag.tag));\n    encodePartialCBOR(tag.value, output);\n}\nfunction encodePartialCBOR(data, output) {\n    if (typeof data == \"boolean\" || data === null || data == undefined) {\n        output.push(encodeSimple(data));\n        return;\n    }\n    if (typeof data == \"number\" || typeof data == \"bigint\") {\n        output.push(...encodeNumber(data));\n        return;\n    }\n    if (typeof data == \"string\") {\n        encodeString(data, output);\n        return;\n    }\n    if (data instanceof Uint8Array) {\n        encodeBytes(data, output);\n        return;\n    }\n    if (Array.isArray(data)) {\n        encodeArray(data, output);\n        return;\n    }\n    if (data instanceof Map) {\n        encodeMap(data, output);\n        return;\n    }\n    if (data instanceof CBORTag) {\n        encodeTag(data, output);\n        return;\n    }\n    throw new Error(\"Not implemented\");\n}\n/**\n * Like {decodeCBOR}, but the length of the data is unknown and there is likely\n * more -- possibly unrelated non-CBOR -- data afterwards.\n *\n * Examples:\n *\n * ```ts\n * import {decodePartialCBOR} from './cbor.ts'\n * decodePartialCBOR(new Uint8Array([1, 2, 245, 3, 4]), 2)\n * // returns [true, 1]\n * // It did not decode the leading [1, 2] or trailing [3, 4]\n * ```\n *\n * @param data a data stream to read data from\n * @param index where to start reading in the data stream\n * @returns a tuple of the value followed by bytes read.\n * @throws {Error}\n *   When the data stream ends early or the CBOR data is not well formed\n */\nexport function decodePartialCBOR(data, index) {\n    if (data.byteLength === 0 || data.byteLength <= index || index < 0) {\n        throw new Error(\"No data\");\n    }\n    if (data instanceof Uint8Array) {\n        return decodeNext(new DataView(data.buffer), index);\n    }\n    else if (data instanceof ArrayBuffer) {\n        return decodeNext(new DataView(data), index);\n    }\n    // otherwise, it is a data view\n    return decodeNext(data, index);\n}\n/**\n * Decode CBOR data from a binary stream\n *\n * The entire data stream from [0, length) will be consumed.\n * If you require a partial decoding, see {decodePartialCBOR}.\n *\n * Examples:\n *\n * ```ts\n * import {decodeCBOR, CBORTag, CBORType} from './cbor.ts'\n * decodeCBOR(new Uint8Array([162, 99, 107, 101, 121, 101, 118, 97, 108, 117, 101, 1, 109, 97, 110, 111, 116, 104, 101, 114, 32, 118, 97, 108, 117, 101]));\n * // returns new Map<string | number, CBORType>([\n * //   [\"key\", \"value\"],\n * //   [1, \"another value\"]\n * // ]);\n *\n * const taggedItem = new Uint8Array([217, 4, 210, 101, 104, 101, 108, 108, 111]);\n * decodeCBOR(new DataView(taggedItem.buffer))\n * // returns new CBORTag(1234, \"hello\")\n * ```\n *\n * @param data a data stream, multiple types are supported\n * @returns\n */\nexport function decodeCBOR(data) {\n    const [value, length] = decodePartialCBOR(data, 0);\n    if (length !== data.byteLength) {\n        throw new Error(`Data was decoded, but the whole stream was not processed ${length} != ${data.byteLength}`);\n    }\n    return value;\n}\n/**\n * Encode a supported structure to a CBOR byte string.\n *\n * Example:\n *\n * ```ts\n * import {encodeCBOR, CBORType, CBORTag} from './cbor.ts'\n * encodeCBOR(new Map<string | number, CBORType>([\n *   [\"key\", \"value\"],\n *   [1, \"another value\"]\n * ]));\n * // returns new Uint8Array([162, 99, 107, 101, 121, 101, 118, 97, 108, 117, 101, 1, 109, 97, 110, 111, 116, 104, 101, 114, 32 118, 97, 108, 117, 101])\n *\n * encodeCBOR(new CBORTag(1234, \"hello\"))\n * // returns new UInt8Array([217, 4, 210, 101, 104, 101, 108, 108, 111])\n * ```\n *\n * @param data Data to encode\n * @returns A byte string as a Uint8Array\n * @throws Error\n *   if unsupported data is found during encoding\n */\nexport function encodeCBOR(data) {\n    const results = [];\n    encodePartialCBOR(data, results);\n    let length = 0;\n    for (const result of results) {\n        if (typeof result == \"number\") {\n            length += 1;\n        }\n        else {\n            length += result.length;\n        }\n    }\n    const output = new Uint8Array(length);\n    let index = 0;\n    for (const result of results) {\n        if (typeof result == \"number\") {\n            output[index] = result;\n            index += 1;\n        }\n        else {\n            output.set(result, index);\n            index += result.length;\n        }\n    }\n    return output;\n}\n", "export function decodeLength(data, argument, index) {\n    if (argument < 24) {\n        return [argument, 1];\n    }\n    const remainingDataLength = data.byteLength - index - 1;\n    const view = new DataView(data.buffer, index + 1);\n    let output;\n    let bytes = 0;\n    switch (argument) {\n        case 24: {\n            if (remainingDataLength > 0) {\n                output = view.getUint8(0);\n                bytes = 2;\n            }\n            break;\n        }\n        case 25: {\n            if (remainingDataLength > 1) {\n                output = view.getUint16(0, false);\n                bytes = 3;\n            }\n            break;\n        }\n        case 26: {\n            if (remainingDataLength > 3) {\n                output = view.getUint32(0, false);\n                bytes = 5;\n            }\n            break;\n        }\n        case 27: {\n            if (remainingDataLength > 7) {\n                const bigOutput = view.getBigUint64(0, false);\n                // Bound it to [24, MAX_SAFE_INTEGER], where it is safe\n                // to encode as a javascript number\n                if (bigOutput >= 24n && bigOutput <= Number.MAX_SAFE_INTEGER) {\n                    return [Number(bigOutput), 9];\n                }\n            }\n            break;\n        }\n    }\n    if (output && output >= 24) {\n        return [output, bytes];\n    }\n    throw new Error(\"Length not supported or not well formed\");\n}\nexport const MAJOR_TYPE_UNSIGNED_INTEGER = 0;\nexport const MAJOR_TYPE_NEGATIVE_INTEGER = 1;\nexport const MAJOR_TYPE_BYTE_STRING = 2;\nexport const MAJOR_TYPE_TEXT_STRING = 3;\nexport const MAJOR_TYPE_ARRAY = 4;\nexport const MAJOR_TYPE_MAP = 5;\nexport const MAJOR_TYPE_TAG = 6;\nexport const MAJOR_TYPE_SIMPLE_OR_FLOAT = 7;\nexport function encodeLength(major, argument) {\n    const majorEncoded = major << 5;\n    if (argument < 0) {\n        throw new Error(\"CBOR Data Item argument must not be negative\");\n    }\n    // Convert to bigint first.\n    // Encode integers around and above 32 bits in big endian / network byte order\n    // is unreliable in javascript.\n    // https://tc39.es/ecma262/#sec-bitwise-shift-operators\n    // Bit shifting operations result in 32 bit signed numbers\n    let bigintArgument;\n    if (typeof argument == \"number\") {\n        if (!Number.isInteger(argument)) {\n            throw new Error(\"CBOR Data Item argument must be an integer\");\n        }\n        bigintArgument = BigInt(argument);\n    }\n    else {\n        bigintArgument = argument;\n    }\n    // Negative 0 is not a thing\n    if (major == MAJOR_TYPE_NEGATIVE_INTEGER) {\n        if (bigintArgument == 0n) {\n            throw new Error(\"CBOR Data Item argument cannot be zero when negative\");\n        }\n        bigintArgument = bigintArgument - 1n;\n    }\n    if (bigintArgument > 18446744073709551615n) {\n        throw new Error(\"CBOR number out of range\");\n    }\n    // Encode into 64 bits and extract the tail\n    const buffer = new Uint8Array(8);\n    const view = new DataView(buffer.buffer);\n    view.setBigUint64(0, bigintArgument, false);\n    if (bigintArgument <= 23) {\n        return [majorEncoded | buffer[7]];\n    }\n    else if (bigintArgument <= 255) {\n        return [majorEncoded | 24, buffer[7]];\n    }\n    else if (bigintArgument <= 65535) {\n        return [majorEncoded | 25, ...buffer.slice(6)];\n    }\n    else if (bigintArgument <= 4294967295) {\n        return [\n            majorEncoded | 26,\n            ...buffer.slice(4),\n        ];\n    }\n    else {\n        return [\n            majorEncoded | 27,\n            ...buffer,\n        ];\n    }\n}\n", "/* ------------------------------------------------------------------------------------\n\n  base64 - MIT License - Hexagon <hexagon@56k.guru>\n\n  ------------------------------------------------------------------------------------\n\n  License:\n\n\tCopyright (c) 2021 Hexagon <hexagon@56k.guru>\n\n\tPermission is hereby granted, free of charge, to any person obtaining a copy\n\tof this software and associated documentation files (the \"Software\"), to deal\n\tin the Software without restriction, including without limitation the rights\n\tto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n\tcopies of the Software, and to permit persons to whom the Software is\n\tfurnished to do so, subject to the following conditions:\n\tThe above copyright notice and this permission notice shall be included in\n\tall copies or substantial portions of the Software.\n\tTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n\tIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n\tFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE\n\tAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n\tLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n\tOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n\tTHE SOFTWARE.\n\n  ------------------------------------------------------------------------------------  */\n\nconst \n\t// Regular base64 characters\n\tchars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",\n\n\t// Base64url characters\n\tcharsUrl = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\",\n\n\tgenLookup = (target) => {\n\t\tconst lookupTemp = typeof Uint8Array === \"undefined\" ? [] : new Uint8Array(256);\n\t\tconst len = chars.length;\n\t\tfor (let i = 0; i < len; i++) {\n\t\t\tlookupTemp[target.charCodeAt(i)] = i;\n\t\t}\n\t\treturn lookupTemp;\n\t},\n  \n\t// Use a lookup table to find the index.\n\tlookup = genLookup(chars),\n\tlookupUrl = genLookup(charsUrl); \n\n/**\n * Pre-calculated regexes for validating base64 and base64url\n */\nconst base64UrlPattern = /^[-A-Za-z0-9\\-_]*$/;\nconst base64Pattern = /^[-A-Za-z0-9+/]*={0,3}$/;\n\n/**\n * @namespace base64\n */\nconst base64 = {};\n\n/**\n * Convenience function for converting a base64 encoded string to an ArrayBuffer instance\n * @public\n * \n * @param {string} data - Base64 representation of data\n * @param {boolean} [urlMode] - If set to true, URL mode string will be expected\n * @returns {ArrayBuffer} - Decoded data\n */\nbase64.toArrayBuffer = (data, urlMode) => {\n\tconst \n\t\tlen = data.length;\n\tlet bufferLength = data.length * 0.75,\n\t\ti,\n\t\tp = 0,\n\t\tencoded1,\n\t\tencoded2,\n\t\tencoded3,\n\t\tencoded4;\n\n\tif (data[data.length - 1] === \"=\") {\n\t\tbufferLength--;\n\t\tif (data[data.length - 2] === \"=\") {\n\t\t\tbufferLength--;\n\t\t}\n\t}\n\n\tconst \n\t\tarraybuffer = new ArrayBuffer(bufferLength),\n\t\tbytes = new Uint8Array(arraybuffer),\n\t\ttarget = urlMode ? lookupUrl : lookup;\n\n\tfor (i = 0; i < len; i += 4) {\n\t\tencoded1 = target[data.charCodeAt(i)];\n\t\tencoded2 = target[data.charCodeAt(i + 1)];\n\t\tencoded3 = target[data.charCodeAt(i + 2)];\n\t\tencoded4 = target[data.charCodeAt(i + 3)];\n\n\t\tbytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n\t\tbytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n\t\tbytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n\t}\n\n\treturn arraybuffer;\n\n};\n\n/**\n * Convenience function for creating a base64 encoded string from an ArrayBuffer instance\n * @public\n * \n * @param {ArrayBuffer} arrBuf - ArrayBuffer to be encoded\n * @param {boolean} [urlMode] - If set to true, URL mode string will be returned\n * @returns {string} - Base64 representation of data\n */\nbase64.fromArrayBuffer = (arrBuf, urlMode) => {\n\tconst bytes = new Uint8Array(arrBuf);\n\tlet\n\t\ti,\n\t\tresult = \"\";\n\n\tconst\n\t\tlen = bytes.length,\n\t\ttarget = urlMode ? charsUrl : chars;\n\n\tfor (i = 0; i < len; i += 3) {\n\t\tresult += target[bytes[i] >> 2];\n\t\tresult += target[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n\t\tresult += target[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n\t\tresult += target[bytes[i + 2] & 63];\n\t}\n\n\tconst remainder = len % 3;\n\tif (remainder === 2) {\n\t\tresult = result.substring(0, result.length - 1) + (urlMode ? \"\" : \"=\");\n\t} else if (remainder === 1) {\n\t\tresult = result.substring(0, result.length - 2) + (urlMode ? \"\" : \"==\");\n\t}\n\n\treturn result;\n\n};\n\n/**\n * Convenience function for converting base64 to string\n * @public\n * \n * @param {string} str - Base64 encoded string to be decoded\n * @param {boolean} [urlMode] - If set to true, URL mode string will be expected\n * @returns {string} - Decoded string\n */\nbase64.toString = (str, urlMode) => {\n\treturn new TextDecoder().decode(base64.toArrayBuffer(str, urlMode));\n};\n\n/**\n * Convenience function for converting a javascript string to base64\n * @public\n * \n * @param {string} str - String to be converted to base64\n * @param {boolean} [urlMode] - If set to true, URL mode string will be returned\n * @returns {string} - Base64 encoded string\n */\nbase64.fromString = (str, urlMode) => {\n\treturn base64.fromArrayBuffer(new TextEncoder().encode(str), urlMode);\n};\n\n/**\n * Function to validate base64\n * @public\n * @param {string} encoded - Base64 or Base64url encoded data\n * @param {boolean} [urlMode] - If set to true, base64url will be expected\n * @returns {boolean} - Valid base64/base64url?\n */\nbase64.validate = (encoded, urlMode) => {\n\n\t// Bail out if not string\n\tif (!(typeof encoded === \"string\" || encoded instanceof String)) {\n\t\treturn false;\n\t}\n\n\t// Go on validate\n\ttry {\n\t\treturn urlMode ? base64UrlPattern.test(encoded) : base64Pattern.test(encoded);\n\t} catch (_e) {\n\t\treturn false;\n\t}\n};\n\nbase64.base64 = base64;\nexport default base64;\nexport { base64 };", "export const fetch = (...args) => globalThis.fetch(...args);\nexport default fetch;\nexport const Headers = globalThis.Headers;\nexport const Request = globalThis.Request;\nexport const Response = globalThis.Response;\n", "export * from \"./converters\";\nexport * from \"./types/index\";\nexport { AsnProp, AsnType, AsnChoiceType, AsnSequenceType, AsnSetType } from \"./decorators\";\nexport { AsnTypeTypes, AsnPropTypes } from \"./enums\";\nexport { AsnParser } from \"./parser\";\nexport { AsnSerializer } from \"./serializer\";\nexport * from \"./errors\";\nexport * from \"./objects\";\nexport * from \"./convert\";\n", "import * as asn1js from \"asn1js\";\nimport { AsnPropTypes } from \"./enums\";\nimport { OctetString } from \"./types/index\";\nexport const AsnAnyConverter = {\n    fromASN: (value) => value instanceof asn1js.Null ? null : value.valueBeforeDecodeView,\n    toASN: (value) => {\n        if (value === null) {\n            return new asn1js.Null();\n        }\n        const schema = asn1js.fromBER(value);\n        if (schema.result.error) {\n            throw new Error(schema.result.error);\n        }\n        return schema.result;\n    },\n};\nexport const AsnIntegerConverter = {\n    fromASN: (value) => value.valueBlock.valueHexView.byteLength >= 4\n        ? value.valueBlock.toString()\n        : value.valueBlock.valueDec,\n    toASN: (value) => new asn1js.Integer({ value: +value }),\n};\nexport const AsnEnumeratedConverter = {\n    fromASN: (value) => value.valueBlock.valueDec,\n    toASN: (value) => new asn1js.Enumerated({ value }),\n};\nexport const AsnIntegerArrayBufferConverter = {\n    fromASN: (value) => value.valueBlock.valueHexView,\n    toASN: (value) => new asn1js.Integer({ valueHex: value }),\n};\nexport const AsnIntegerBigIntConverter = {\n    fromASN: (value) => value.toBigInt(),\n    toASN: (value) => asn1js.Integer.fromBigInt(value),\n};\nexport const AsnBitStringConverter = {\n    fromASN: (value) => value.valueBlock.valueHexView,\n    toASN: (value) => new asn1js.BitString({ valueHex: value }),\n};\nexport const AsnObjectIdentifierConverter = {\n    fromASN: (value) => value.valueBlock.toString(),\n    toASN: (value) => new asn1js.ObjectIdentifier({ value }),\n};\nexport const AsnBooleanConverter = {\n    fromASN: (value) => value.valueBlock.value,\n    toASN: (value) => new asn1js.Boolean({ value }),\n};\nexport const AsnOctetStringConverter = {\n    fromASN: (value) => value.valueBlock.valueHexView,\n    toASN: (value) => new asn1js.OctetString({ valueHex: value }),\n};\nexport const AsnConstructedOctetStringConverter = {\n    fromASN: (value) => new OctetString(value.getValue()),\n    toASN: (value) => value.toASN(),\n};\nfunction createStringConverter(Asn1Type) {\n    return {\n        fromASN: (value) => value.valueBlock.value,\n        toASN: (value) => new Asn1Type({ value }),\n    };\n}\nexport const AsnUtf8StringConverter = createStringConverter(asn1js.Utf8String);\nexport const AsnBmpStringConverter = createStringConverter(asn1js.BmpString);\nexport const AsnUniversalStringConverter = createStringConverter(asn1js.UniversalString);\nexport const AsnNumericStringConverter = createStringConverter(asn1js.NumericString);\nexport const AsnPrintableStringConverter = createStringConverter(asn1js.PrintableString);\nexport const AsnTeletexStringConverter = createStringConverter(asn1js.TeletexString);\nexport const AsnVideotexStringConverter = createStringConverter(asn1js.VideotexString);\nexport const AsnIA5StringConverter = createStringConverter(asn1js.IA5String);\nexport const AsnGraphicStringConverter = createStringConverter(asn1js.GraphicString);\nexport const AsnVisibleStringConverter = createStringConverter(asn1js.VisibleString);\nexport const AsnGeneralStringConverter = createStringConverter(asn1js.GeneralString);\nexport const AsnCharacterStringConverter = createStringConverter(asn1js.CharacterString);\nexport const AsnUTCTimeConverter = {\n    fromASN: (value) => value.toDate(),\n    toASN: (value) => new asn1js.UTCTime({ valueDate: value }),\n};\nexport const AsnGeneralizedTimeConverter = {\n    fromASN: (value) => value.toDate(),\n    toASN: (value) => new asn1js.GeneralizedTime({ valueDate: value }),\n};\nexport const AsnNullConverter = {\n    fromASN: () => null,\n    toASN: () => {\n        return new asn1js.Null();\n    },\n};\nexport function defaultConverter(type) {\n    switch (type) {\n        case AsnPropTypes.Any:\n            return AsnAnyConverter;\n        case AsnPropTypes.BitString:\n            return AsnBitStringConverter;\n        case AsnPropTypes.BmpString:\n            return AsnBmpStringConverter;\n        case AsnPropTypes.Boolean:\n            return AsnBooleanConverter;\n        case AsnPropTypes.CharacterString:\n            return AsnCharacterStringConverter;\n        case AsnPropTypes.Enumerated:\n            return AsnEnumeratedConverter;\n        case AsnPropTypes.GeneralString:\n            return AsnGeneralStringConverter;\n        case AsnPropTypes.GeneralizedTime:\n            return AsnGeneralizedTimeConverter;\n        case AsnPropTypes.GraphicString:\n            return AsnGraphicStringConverter;\n        case AsnPropTypes.IA5String:\n            return AsnIA5StringConverter;\n        case AsnPropTypes.Integer:\n            return AsnIntegerConverter;\n        case AsnPropTypes.Null:\n            return AsnNullConverter;\n        case AsnPropTypes.NumericString:\n            return AsnNumericStringConverter;\n        case AsnPropTypes.ObjectIdentifier:\n            return AsnObjectIdentifierConverter;\n        case AsnPropTypes.OctetString:\n            return AsnOctetStringConverter;\n        case AsnPropTypes.PrintableString:\n            return AsnPrintableStringConverter;\n        case AsnPropTypes.TeletexString:\n            return AsnTeletexStringConverter;\n        case AsnPropTypes.UTCTime:\n            return AsnUTCTimeConverter;\n        case AsnPropTypes.UniversalString:\n            return AsnUniversalStringConverter;\n        case AsnPropTypes.Utf8String:\n            return AsnUtf8StringConverter;\n        case AsnPropTypes.VideotexString:\n            return AsnVideotexStringConverter;\n        case AsnPropTypes.VisibleString:\n            return AsnVisibleStringConverter;\n        default:\n            return null;\n    }\n}\n", "/*!\n * Copyright (c) 2014, GMO GlobalSign\n * Copyright (c) 2015-2022, Peculiar Ventures\n * All rights reserved.\n * \n * Author 2014-2019, Yury Strozhevsky\n * \n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n * \n * * Redistributions of source code must retain the above copyright notice, this\n *   list of conditions and the following disclaimer.\n * \n * * Redistributions in binary form must reproduce the above copyright notice, this\n *   list of conditions and the following disclaimer in the documentation and/or\n *   other materials provided with the distribution.\n * \n * * Neither the name of the copyright holder nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n * \n */\n\nimport * as pvtsutils from 'pvtsutils';\nimport * as pvutils from 'pvutils';\n\nfunction assertBigInt() {\n    if (typeof BigInt === \"undefined\") {\n        throw new Error(\"BigInt is not defined. Your environment doesn't implement BigInt.\");\n    }\n}\nfunction concat(buffers) {\n    let outputLength = 0;\n    let prevLength = 0;\n    for (let i = 0; i < buffers.length; i++) {\n        const buffer = buffers[i];\n        outputLength += buffer.byteLength;\n    }\n    const retView = new Uint8Array(outputLength);\n    for (let i = 0; i < buffers.length; i++) {\n        const buffer = buffers[i];\n        retView.set(new Uint8Array(buffer), prevLength);\n        prevLength += buffer.byteLength;\n    }\n    return retView.buffer;\n}\nfunction checkBufferParams(baseBlock, inputBuffer, inputOffset, inputLength) {\n    if (!(inputBuffer instanceof Uint8Array)) {\n        baseBlock.error = \"Wrong parameter: inputBuffer must be 'Uint8Array'\";\n        return false;\n    }\n    if (!inputBuffer.byteLength) {\n        baseBlock.error = \"Wrong parameter: inputBuffer has zero length\";\n        return false;\n    }\n    if (inputOffset < 0) {\n        baseBlock.error = \"Wrong parameter: inputOffset less than zero\";\n        return false;\n    }\n    if (inputLength < 0) {\n        baseBlock.error = \"Wrong parameter: inputLength less than zero\";\n        return false;\n    }\n    if ((inputBuffer.byteLength - inputOffset - inputLength) < 0) {\n        baseBlock.error = \"End of input reached before message was fully decoded (inconsistent offset and length values)\";\n        return false;\n    }\n    return true;\n}\n\nclass ViewWriter {\n    constructor() {\n        this.items = [];\n    }\n    write(buf) {\n        this.items.push(buf);\n    }\n    final() {\n        return concat(this.items);\n    }\n}\n\nconst powers2 = [new Uint8Array([1])];\nconst digitsString = \"0123456789\";\nconst NAME = \"name\";\nconst VALUE_HEX_VIEW = \"valueHexView\";\nconst IS_HEX_ONLY = \"isHexOnly\";\nconst ID_BLOCK = \"idBlock\";\nconst TAG_CLASS = \"tagClass\";\nconst TAG_NUMBER = \"tagNumber\";\nconst IS_CONSTRUCTED = \"isConstructed\";\nconst FROM_BER = \"fromBER\";\nconst TO_BER = \"toBER\";\nconst LOCAL = \"local\";\nconst EMPTY_STRING = \"\";\nconst EMPTY_BUFFER = new ArrayBuffer(0);\nconst EMPTY_VIEW = new Uint8Array(0);\nconst END_OF_CONTENT_NAME = \"EndOfContent\";\nconst OCTET_STRING_NAME = \"OCTET STRING\";\nconst BIT_STRING_NAME = \"BIT STRING\";\n\nfunction HexBlock(BaseClass) {\n    var _a;\n    return _a = class Some extends BaseClass {\n            get valueHex() {\n                return this.valueHexView.slice().buffer;\n            }\n            set valueHex(value) {\n                this.valueHexView = new Uint8Array(value);\n            }\n            constructor(...args) {\n                var _b;\n                super(...args);\n                const params = args[0] || {};\n                this.isHexOnly = (_b = params.isHexOnly) !== null && _b !== void 0 ? _b : false;\n                this.valueHexView = params.valueHex ? pvtsutils.BufferSourceConverter.toUint8Array(params.valueHex) : EMPTY_VIEW;\n            }\n            fromBER(inputBuffer, inputOffset, inputLength) {\n                const view = inputBuffer instanceof ArrayBuffer ? new Uint8Array(inputBuffer) : inputBuffer;\n                if (!checkBufferParams(this, view, inputOffset, inputLength)) {\n                    return -1;\n                }\n                const endLength = inputOffset + inputLength;\n                this.valueHexView = view.subarray(inputOffset, endLength);\n                if (!this.valueHexView.length) {\n                    this.warnings.push(\"Zero buffer length\");\n                    return inputOffset;\n                }\n                this.blockLength = inputLength;\n                return endLength;\n            }\n            toBER(sizeOnly = false) {\n                if (!this.isHexOnly) {\n                    this.error = \"Flag 'isHexOnly' is not set, abort\";\n                    return EMPTY_BUFFER;\n                }\n                if (sizeOnly) {\n                    return new ArrayBuffer(this.valueHexView.byteLength);\n                }\n                return (this.valueHexView.byteLength === this.valueHexView.buffer.byteLength)\n                    ? this.valueHexView.buffer\n                    : this.valueHexView.slice().buffer;\n            }\n            toJSON() {\n                return {\n                    ...super.toJSON(),\n                    isHexOnly: this.isHexOnly,\n                    valueHex: pvtsutils.Convert.ToHex(this.valueHexView),\n                };\n            }\n        },\n        _a.NAME = \"hexBlock\",\n        _a;\n}\n\nclass LocalBaseBlock {\n    static blockName() {\n        return this.NAME;\n    }\n    get valueBeforeDecode() {\n        return this.valueBeforeDecodeView.slice().buffer;\n    }\n    set valueBeforeDecode(value) {\n        this.valueBeforeDecodeView = new Uint8Array(value);\n    }\n    constructor({ blockLength = 0, error = EMPTY_STRING, warnings = [], valueBeforeDecode = EMPTY_VIEW, } = {}) {\n        this.blockLength = blockLength;\n        this.error = error;\n        this.warnings = warnings;\n        this.valueBeforeDecodeView = pvtsutils.BufferSourceConverter.toUint8Array(valueBeforeDecode);\n    }\n    toJSON() {\n        return {\n            blockName: this.constructor.NAME,\n            blockLength: this.blockLength,\n            error: this.error,\n            warnings: this.warnings,\n            valueBeforeDecode: pvtsutils.Convert.ToHex(this.valueBeforeDecodeView),\n        };\n    }\n}\nLocalBaseBlock.NAME = \"baseBlock\";\n\nclass ValueBlock extends LocalBaseBlock {\n    fromBER(_inputBuffer, _inputOffset, _inputLength) {\n        throw TypeError(\"User need to make a specific function in a class which extends 'ValueBlock'\");\n    }\n    toBER(_sizeOnly, _writer) {\n        throw TypeError(\"User need to make a specific function in a class which extends 'ValueBlock'\");\n    }\n}\nValueBlock.NAME = \"valueBlock\";\n\nclass LocalIdentificationBlock extends HexBlock(LocalBaseBlock) {\n    constructor({ idBlock = {} } = {}) {\n        var _a, _b, _c, _d;\n        super();\n        if (idBlock) {\n            this.isHexOnly = (_a = idBlock.isHexOnly) !== null && _a !== void 0 ? _a : false;\n            this.valueHexView = idBlock.valueHex\n                ? pvtsutils.BufferSourceConverter.toUint8Array(idBlock.valueHex)\n                : EMPTY_VIEW;\n            this.tagClass = (_b = idBlock.tagClass) !== null && _b !== void 0 ? _b : -1;\n            this.tagNumber = (_c = idBlock.tagNumber) !== null && _c !== void 0 ? _c : -1;\n            this.isConstructed = (_d = idBlock.isConstructed) !== null && _d !== void 0 ? _d : false;\n        }\n        else {\n            this.tagClass = -1;\n            this.tagNumber = -1;\n            this.isConstructed = false;\n        }\n    }\n    toBER(sizeOnly = false) {\n        let firstOctet = 0;\n        switch (this.tagClass) {\n            case 1:\n                firstOctet |= 0x00;\n                break;\n            case 2:\n                firstOctet |= 0x40;\n                break;\n            case 3:\n                firstOctet |= 0x80;\n                break;\n            case 4:\n                firstOctet |= 0xC0;\n                break;\n            default:\n                this.error = \"Unknown tag class\";\n                return EMPTY_BUFFER;\n        }\n        if (this.isConstructed)\n            firstOctet |= 0x20;\n        if (this.tagNumber < 31 && !this.isHexOnly) {\n            const retView = new Uint8Array(1);\n            if (!sizeOnly) {\n                let number = this.tagNumber;\n                number &= 0x1F;\n                firstOctet |= number;\n                retView[0] = firstOctet;\n            }\n            return retView.buffer;\n        }\n        if (!this.isHexOnly) {\n            const encodedBuf = pvutils.utilToBase(this.tagNumber, 7);\n            const encodedView = new Uint8Array(encodedBuf);\n            const size = encodedBuf.byteLength;\n            const retView = new Uint8Array(size + 1);\n            retView[0] = (firstOctet | 0x1F);\n            if (!sizeOnly) {\n                for (let i = 0; i < (size - 1); i++)\n                    retView[i + 1] = encodedView[i] | 0x80;\n                retView[size] = encodedView[size - 1];\n            }\n            return retView.buffer;\n        }\n        const retView = new Uint8Array(this.valueHexView.byteLength + 1);\n        retView[0] = (firstOctet | 0x1F);\n        if (!sizeOnly) {\n            const curView = this.valueHexView;\n            for (let i = 0; i < (curView.length - 1); i++)\n                retView[i + 1] = curView[i] | 0x80;\n            retView[this.valueHexView.byteLength] = curView[curView.length - 1];\n        }\n        return retView.buffer;\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        const inputView = pvtsutils.BufferSourceConverter.toUint8Array(inputBuffer);\n        if (!checkBufferParams(this, inputView, inputOffset, inputLength)) {\n            return -1;\n        }\n        const intBuffer = inputView.subarray(inputOffset, inputOffset + inputLength);\n        if (intBuffer.length === 0) {\n            this.error = \"Zero buffer length\";\n            return -1;\n        }\n        const tagClassMask = intBuffer[0] & 0xC0;\n        switch (tagClassMask) {\n            case 0x00:\n                this.tagClass = (1);\n                break;\n            case 0x40:\n                this.tagClass = (2);\n                break;\n            case 0x80:\n                this.tagClass = (3);\n                break;\n            case 0xC0:\n                this.tagClass = (4);\n                break;\n            default:\n                this.error = \"Unknown tag class\";\n                return -1;\n        }\n        this.isConstructed = (intBuffer[0] & 0x20) === 0x20;\n        this.isHexOnly = false;\n        const tagNumberMask = intBuffer[0] & 0x1F;\n        if (tagNumberMask !== 0x1F) {\n            this.tagNumber = (tagNumberMask);\n            this.blockLength = 1;\n        }\n        else {\n            let count = 1;\n            let intTagNumberBuffer = this.valueHexView = new Uint8Array(255);\n            let tagNumberBufferMaxLength = 255;\n            while (intBuffer[count] & 0x80) {\n                intTagNumberBuffer[count - 1] = intBuffer[count] & 0x7F;\n                count++;\n                if (count >= intBuffer.length) {\n                    this.error = \"End of input reached before message was fully decoded\";\n                    return -1;\n                }\n                if (count === tagNumberBufferMaxLength) {\n                    tagNumberBufferMaxLength += 255;\n                    const tempBufferView = new Uint8Array(tagNumberBufferMaxLength);\n                    for (let i = 0; i < intTagNumberBuffer.length; i++)\n                        tempBufferView[i] = intTagNumberBuffer[i];\n                    intTagNumberBuffer = this.valueHexView = new Uint8Array(tagNumberBufferMaxLength);\n                }\n            }\n            this.blockLength = (count + 1);\n            intTagNumberBuffer[count - 1] = intBuffer[count] & 0x7F;\n            const tempBufferView = new Uint8Array(count);\n            for (let i = 0; i < count; i++)\n                tempBufferView[i] = intTagNumberBuffer[i];\n            intTagNumberBuffer = this.valueHexView = new Uint8Array(count);\n            intTagNumberBuffer.set(tempBufferView);\n            if (this.blockLength <= 9)\n                this.tagNumber = pvutils.utilFromBase(intTagNumberBuffer, 7);\n            else {\n                this.isHexOnly = true;\n                this.warnings.push(\"Tag too long, represented as hex-coded\");\n            }\n        }\n        if (((this.tagClass === 1))\n            && (this.isConstructed)) {\n            switch (this.tagNumber) {\n                case 1:\n                case 2:\n                case 5:\n                case 6:\n                case 9:\n                case 13:\n                case 14:\n                case 23:\n                case 24:\n                case 31:\n                case 32:\n                case 33:\n                case 34:\n                    this.error = \"Constructed encoding used for primitive type\";\n                    return -1;\n            }\n        }\n        return (inputOffset + this.blockLength);\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            tagClass: this.tagClass,\n            tagNumber: this.tagNumber,\n            isConstructed: this.isConstructed,\n        };\n    }\n}\nLocalIdentificationBlock.NAME = \"identificationBlock\";\n\nclass LocalLengthBlock extends LocalBaseBlock {\n    constructor({ lenBlock = {} } = {}) {\n        var _a, _b, _c;\n        super();\n        this.isIndefiniteForm = (_a = lenBlock.isIndefiniteForm) !== null && _a !== void 0 ? _a : false;\n        this.longFormUsed = (_b = lenBlock.longFormUsed) !== null && _b !== void 0 ? _b : false;\n        this.length = (_c = lenBlock.length) !== null && _c !== void 0 ? _c : 0;\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        const view = pvtsutils.BufferSourceConverter.toUint8Array(inputBuffer);\n        if (!checkBufferParams(this, view, inputOffset, inputLength)) {\n            return -1;\n        }\n        const intBuffer = view.subarray(inputOffset, inputOffset + inputLength);\n        if (intBuffer.length === 0) {\n            this.error = \"Zero buffer length\";\n            return -1;\n        }\n        if (intBuffer[0] === 0xFF) {\n            this.error = \"Length block 0xFF is reserved by standard\";\n            return -1;\n        }\n        this.isIndefiniteForm = intBuffer[0] === 0x80;\n        if (this.isIndefiniteForm) {\n            this.blockLength = 1;\n            return (inputOffset + this.blockLength);\n        }\n        this.longFormUsed = !!(intBuffer[0] & 0x80);\n        if (this.longFormUsed === false) {\n            this.length = (intBuffer[0]);\n            this.blockLength = 1;\n            return (inputOffset + this.blockLength);\n        }\n        const count = intBuffer[0] & 0x7F;\n        if (count > 8) {\n            this.error = \"Too big integer\";\n            return -1;\n        }\n        if ((count + 1) > intBuffer.length) {\n            this.error = \"End of input reached before message was fully decoded\";\n            return -1;\n        }\n        const lenOffset = inputOffset + 1;\n        const lengthBufferView = view.subarray(lenOffset, lenOffset + count);\n        if (lengthBufferView[count - 1] === 0x00)\n            this.warnings.push(\"Needlessly long encoded length\");\n        this.length = pvutils.utilFromBase(lengthBufferView, 8);\n        if (this.longFormUsed && (this.length <= 127))\n            this.warnings.push(\"Unnecessary usage of long length form\");\n        this.blockLength = count + 1;\n        return (inputOffset + this.blockLength);\n    }\n    toBER(sizeOnly = false) {\n        let retBuf;\n        let retView;\n        if (this.length > 127)\n            this.longFormUsed = true;\n        if (this.isIndefiniteForm) {\n            retBuf = new ArrayBuffer(1);\n            if (sizeOnly === false) {\n                retView = new Uint8Array(retBuf);\n                retView[0] = 0x80;\n            }\n            return retBuf;\n        }\n        if (this.longFormUsed) {\n            const encodedBuf = pvutils.utilToBase(this.length, 8);\n            if (encodedBuf.byteLength > 127) {\n                this.error = \"Too big length\";\n                return (EMPTY_BUFFER);\n            }\n            retBuf = new ArrayBuffer(encodedBuf.byteLength + 1);\n            if (sizeOnly)\n                return retBuf;\n            const encodedView = new Uint8Array(encodedBuf);\n            retView = new Uint8Array(retBuf);\n            retView[0] = encodedBuf.byteLength | 0x80;\n            for (let i = 0; i < encodedBuf.byteLength; i++)\n                retView[i + 1] = encodedView[i];\n            return retBuf;\n        }\n        retBuf = new ArrayBuffer(1);\n        if (sizeOnly === false) {\n            retView = new Uint8Array(retBuf);\n            retView[0] = this.length;\n        }\n        return retBuf;\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            isIndefiniteForm: this.isIndefiniteForm,\n            longFormUsed: this.longFormUsed,\n            length: this.length,\n        };\n    }\n}\nLocalLengthBlock.NAME = \"lengthBlock\";\n\nconst typeStore = {};\n\nclass BaseBlock extends LocalBaseBlock {\n    constructor({ name = EMPTY_STRING, optional = false, primitiveSchema, ...parameters } = {}, valueBlockType) {\n        super(parameters);\n        this.name = name;\n        this.optional = optional;\n        if (primitiveSchema) {\n            this.primitiveSchema = primitiveSchema;\n        }\n        this.idBlock = new LocalIdentificationBlock(parameters);\n        this.lenBlock = new LocalLengthBlock(parameters);\n        this.valueBlock = valueBlockType ? new valueBlockType(parameters) : new ValueBlock(parameters);\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        const resultOffset = this.valueBlock.fromBER(inputBuffer, inputOffset, (this.lenBlock.isIndefiniteForm)\n            ? inputLength\n            : this.lenBlock.length);\n        if (resultOffset === -1) {\n            this.error = this.valueBlock.error;\n            return resultOffset;\n        }\n        if (!this.idBlock.error.length)\n            this.blockLength += this.idBlock.blockLength;\n        if (!this.lenBlock.error.length)\n            this.blockLength += this.lenBlock.blockLength;\n        if (!this.valueBlock.error.length)\n            this.blockLength += this.valueBlock.blockLength;\n        return resultOffset;\n    }\n    toBER(sizeOnly, writer) {\n        const _writer = writer || new ViewWriter();\n        if (!writer) {\n            prepareIndefiniteForm(this);\n        }\n        const idBlockBuf = this.idBlock.toBER(sizeOnly);\n        _writer.write(idBlockBuf);\n        if (this.lenBlock.isIndefiniteForm) {\n            _writer.write(new Uint8Array([0x80]).buffer);\n            this.valueBlock.toBER(sizeOnly, _writer);\n            _writer.write(new ArrayBuffer(2));\n        }\n        else {\n            const valueBlockBuf = this.valueBlock.toBER(sizeOnly);\n            this.lenBlock.length = valueBlockBuf.byteLength;\n            const lenBlockBuf = this.lenBlock.toBER(sizeOnly);\n            _writer.write(lenBlockBuf);\n            _writer.write(valueBlockBuf);\n        }\n        if (!writer) {\n            return _writer.final();\n        }\n        return EMPTY_BUFFER;\n    }\n    toJSON() {\n        const object = {\n            ...super.toJSON(),\n            idBlock: this.idBlock.toJSON(),\n            lenBlock: this.lenBlock.toJSON(),\n            valueBlock: this.valueBlock.toJSON(),\n            name: this.name,\n            optional: this.optional,\n        };\n        if (this.primitiveSchema)\n            object.primitiveSchema = this.primitiveSchema.toJSON();\n        return object;\n    }\n    toString(encoding = \"ascii\") {\n        if (encoding === \"ascii\") {\n            return this.onAsciiEncoding();\n        }\n        return pvtsutils.Convert.ToHex(this.toBER());\n    }\n    onAsciiEncoding() {\n        const name = this.constructor.NAME;\n        const value = pvtsutils.Convert.ToHex(this.valueBlock.valueBeforeDecodeView);\n        return `${name} : ${value}`;\n    }\n    isEqual(other) {\n        if (this === other) {\n            return true;\n        }\n        if (!(other instanceof this.constructor)) {\n            return false;\n        }\n        const thisRaw = this.toBER();\n        const otherRaw = other.toBER();\n        return pvutils.isEqualBuffer(thisRaw, otherRaw);\n    }\n}\nBaseBlock.NAME = \"BaseBlock\";\nfunction prepareIndefiniteForm(baseBlock) {\n    var _a;\n    if (baseBlock instanceof typeStore.Constructed) {\n        for (const value of baseBlock.valueBlock.value) {\n            if (prepareIndefiniteForm(value)) {\n                baseBlock.lenBlock.isIndefiniteForm = true;\n            }\n        }\n    }\n    return !!((_a = baseBlock.lenBlock) === null || _a === void 0 ? void 0 : _a.isIndefiniteForm);\n}\n\nclass BaseStringBlock extends BaseBlock {\n    getValue() {\n        return this.valueBlock.value;\n    }\n    setValue(value) {\n        this.valueBlock.value = value;\n    }\n    constructor({ value = EMPTY_STRING, ...parameters } = {}, stringValueBlockType) {\n        super(parameters, stringValueBlockType);\n        if (value) {\n            this.fromString(value);\n        }\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        const resultOffset = this.valueBlock.fromBER(inputBuffer, inputOffset, (this.lenBlock.isIndefiniteForm)\n            ? inputLength\n            : this.lenBlock.length);\n        if (resultOffset === -1) {\n            this.error = this.valueBlock.error;\n            return resultOffset;\n        }\n        this.fromBuffer(this.valueBlock.valueHexView);\n        if (!this.idBlock.error.length)\n            this.blockLength += this.idBlock.blockLength;\n        if (!this.lenBlock.error.length)\n            this.blockLength += this.lenBlock.blockLength;\n        if (!this.valueBlock.error.length)\n            this.blockLength += this.valueBlock.blockLength;\n        return resultOffset;\n    }\n    onAsciiEncoding() {\n        return `${this.constructor.NAME} : '${this.valueBlock.value}'`;\n    }\n}\nBaseStringBlock.NAME = \"BaseStringBlock\";\n\nclass LocalPrimitiveValueBlock extends HexBlock(ValueBlock) {\n    constructor({ isHexOnly = true, ...parameters } = {}) {\n        super(parameters);\n        this.isHexOnly = isHexOnly;\n    }\n}\nLocalPrimitiveValueBlock.NAME = \"PrimitiveValueBlock\";\n\nvar _a$w;\nclass Primitive extends BaseBlock {\n    constructor(parameters = {}) {\n        super(parameters, LocalPrimitiveValueBlock);\n        this.idBlock.isConstructed = false;\n    }\n}\n_a$w = Primitive;\n(() => {\n    typeStore.Primitive = _a$w;\n})();\nPrimitive.NAME = \"PRIMITIVE\";\n\nfunction localChangeType(inputObject, newType) {\n    if (inputObject instanceof newType) {\n        return inputObject;\n    }\n    const newObject = new newType();\n    newObject.idBlock = inputObject.idBlock;\n    newObject.lenBlock = inputObject.lenBlock;\n    newObject.warnings = inputObject.warnings;\n    newObject.valueBeforeDecodeView = inputObject.valueBeforeDecodeView;\n    return newObject;\n}\nfunction localFromBER(inputBuffer, inputOffset = 0, inputLength = inputBuffer.length) {\n    const incomingOffset = inputOffset;\n    let returnObject = new BaseBlock({}, ValueBlock);\n    const baseBlock = new LocalBaseBlock();\n    if (!checkBufferParams(baseBlock, inputBuffer, inputOffset, inputLength)) {\n        returnObject.error = baseBlock.error;\n        return {\n            offset: -1,\n            result: returnObject,\n        };\n    }\n    const intBuffer = inputBuffer.subarray(inputOffset, inputOffset + inputLength);\n    if (!intBuffer.length) {\n        returnObject.error = \"Zero buffer length\";\n        return {\n            offset: -1,\n            result: returnObject,\n        };\n    }\n    let resultOffset = returnObject.idBlock.fromBER(inputBuffer, inputOffset, inputLength);\n    if (returnObject.idBlock.warnings.length) {\n        returnObject.warnings.concat(returnObject.idBlock.warnings);\n    }\n    if (resultOffset === -1) {\n        returnObject.error = returnObject.idBlock.error;\n        return {\n            offset: -1,\n            result: returnObject,\n        };\n    }\n    inputOffset = resultOffset;\n    inputLength -= returnObject.idBlock.blockLength;\n    resultOffset = returnObject.lenBlock.fromBER(inputBuffer, inputOffset, inputLength);\n    if (returnObject.lenBlock.warnings.length) {\n        returnObject.warnings.concat(returnObject.lenBlock.warnings);\n    }\n    if (resultOffset === -1) {\n        returnObject.error = returnObject.lenBlock.error;\n        return {\n            offset: -1,\n            result: returnObject,\n        };\n    }\n    inputOffset = resultOffset;\n    inputLength -= returnObject.lenBlock.blockLength;\n    if (!returnObject.idBlock.isConstructed\n        && returnObject.lenBlock.isIndefiniteForm) {\n        returnObject.error = \"Indefinite length form used for primitive encoding form\";\n        return {\n            offset: -1,\n            result: returnObject,\n        };\n    }\n    let newASN1Type = BaseBlock;\n    switch (returnObject.idBlock.tagClass) {\n        case 1:\n            if ((returnObject.idBlock.tagNumber >= 37)\n                && (returnObject.idBlock.isHexOnly === false)) {\n                returnObject.error = \"UNIVERSAL 37 and upper tags are reserved by ASN.1 standard\";\n                return {\n                    offset: -1,\n                    result: returnObject,\n                };\n            }\n            switch (returnObject.idBlock.tagNumber) {\n                case 0:\n                    if ((returnObject.idBlock.isConstructed)\n                        && (returnObject.lenBlock.length > 0)) {\n                        returnObject.error = \"Type [UNIVERSAL 0] is reserved\";\n                        return {\n                            offset: -1,\n                            result: returnObject,\n                        };\n                    }\n                    newASN1Type = typeStore.EndOfContent;\n                    break;\n                case 1:\n                    newASN1Type = typeStore.Boolean;\n                    break;\n                case 2:\n                    newASN1Type = typeStore.Integer;\n                    break;\n                case 3:\n                    newASN1Type = typeStore.BitString;\n                    break;\n                case 4:\n                    newASN1Type = typeStore.OctetString;\n                    break;\n                case 5:\n                    newASN1Type = typeStore.Null;\n                    break;\n                case 6:\n                    newASN1Type = typeStore.ObjectIdentifier;\n                    break;\n                case 10:\n                    newASN1Type = typeStore.Enumerated;\n                    break;\n                case 12:\n                    newASN1Type = typeStore.Utf8String;\n                    break;\n                case 13:\n                    newASN1Type = typeStore.RelativeObjectIdentifier;\n                    break;\n                case 14:\n                    newASN1Type = typeStore.TIME;\n                    break;\n                case 15:\n                    returnObject.error = \"[UNIVERSAL 15] is reserved by ASN.1 standard\";\n                    return {\n                        offset: -1,\n                        result: returnObject,\n                    };\n                case 16:\n                    newASN1Type = typeStore.Sequence;\n                    break;\n                case 17:\n                    newASN1Type = typeStore.Set;\n                    break;\n                case 18:\n                    newASN1Type = typeStore.NumericString;\n                    break;\n                case 19:\n                    newASN1Type = typeStore.PrintableString;\n                    break;\n                case 20:\n                    newASN1Type = typeStore.TeletexString;\n                    break;\n                case 21:\n                    newASN1Type = typeStore.VideotexString;\n                    break;\n                case 22:\n                    newASN1Type = typeStore.IA5String;\n                    break;\n                case 23:\n                    newASN1Type = typeStore.UTCTime;\n                    break;\n                case 24:\n                    newASN1Type = typeStore.GeneralizedTime;\n                    break;\n                case 25:\n                    newASN1Type = typeStore.GraphicString;\n                    break;\n                case 26:\n                    newASN1Type = typeStore.VisibleString;\n                    break;\n                case 27:\n                    newASN1Type = typeStore.GeneralString;\n                    break;\n                case 28:\n                    newASN1Type = typeStore.UniversalString;\n                    break;\n                case 29:\n                    newASN1Type = typeStore.CharacterString;\n                    break;\n                case 30:\n                    newASN1Type = typeStore.BmpString;\n                    break;\n                case 31:\n                    newASN1Type = typeStore.DATE;\n                    break;\n                case 32:\n                    newASN1Type = typeStore.TimeOfDay;\n                    break;\n                case 33:\n                    newASN1Type = typeStore.DateTime;\n                    break;\n                case 34:\n                    newASN1Type = typeStore.Duration;\n                    break;\n                default: {\n                    const newObject = returnObject.idBlock.isConstructed\n                        ? new typeStore.Constructed()\n                        : new typeStore.Primitive();\n                    newObject.idBlock = returnObject.idBlock;\n                    newObject.lenBlock = returnObject.lenBlock;\n                    newObject.warnings = returnObject.warnings;\n                    returnObject = newObject;\n                }\n            }\n            break;\n        case 2:\n        case 3:\n        case 4:\n        default: {\n            newASN1Type = returnObject.idBlock.isConstructed\n                ? typeStore.Constructed\n                : typeStore.Primitive;\n        }\n    }\n    returnObject = localChangeType(returnObject, newASN1Type);\n    resultOffset = returnObject.fromBER(inputBuffer, inputOffset, returnObject.lenBlock.isIndefiniteForm ? inputLength : returnObject.lenBlock.length);\n    returnObject.valueBeforeDecodeView = inputBuffer.subarray(incomingOffset, incomingOffset + returnObject.blockLength);\n    return {\n        offset: resultOffset,\n        result: returnObject,\n    };\n}\nfunction fromBER(inputBuffer) {\n    if (!inputBuffer.byteLength) {\n        const result = new BaseBlock({}, ValueBlock);\n        result.error = \"Input buffer has zero length\";\n        return {\n            offset: -1,\n            result,\n        };\n    }\n    return localFromBER(pvtsutils.BufferSourceConverter.toUint8Array(inputBuffer).slice(), 0, inputBuffer.byteLength);\n}\n\nfunction checkLen(indefiniteLength, length) {\n    if (indefiniteLength) {\n        return 1;\n    }\n    return length;\n}\nclass LocalConstructedValueBlock extends ValueBlock {\n    constructor({ value = [], isIndefiniteForm = false, ...parameters } = {}) {\n        super(parameters);\n        this.value = value;\n        this.isIndefiniteForm = isIndefiniteForm;\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        const view = pvtsutils.BufferSourceConverter.toUint8Array(inputBuffer);\n        if (!checkBufferParams(this, view, inputOffset, inputLength)) {\n            return -1;\n        }\n        this.valueBeforeDecodeView = view.subarray(inputOffset, inputOffset + inputLength);\n        if (this.valueBeforeDecodeView.length === 0) {\n            this.warnings.push(\"Zero buffer length\");\n            return inputOffset;\n        }\n        let currentOffset = inputOffset;\n        while (checkLen(this.isIndefiniteForm, inputLength) > 0) {\n            const returnObject = localFromBER(view, currentOffset, inputLength);\n            if (returnObject.offset === -1) {\n                this.error = returnObject.result.error;\n                this.warnings.concat(returnObject.result.warnings);\n                return -1;\n            }\n            currentOffset = returnObject.offset;\n            this.blockLength += returnObject.result.blockLength;\n            inputLength -= returnObject.result.blockLength;\n            this.value.push(returnObject.result);\n            if (this.isIndefiniteForm && returnObject.result.constructor.NAME === END_OF_CONTENT_NAME) {\n                break;\n            }\n        }\n        if (this.isIndefiniteForm) {\n            if (this.value[this.value.length - 1].constructor.NAME === END_OF_CONTENT_NAME) {\n                this.value.pop();\n            }\n            else {\n                this.warnings.push(\"No EndOfContent block encoded\");\n            }\n        }\n        return currentOffset;\n    }\n    toBER(sizeOnly, writer) {\n        const _writer = writer || new ViewWriter();\n        for (let i = 0; i < this.value.length; i++) {\n            this.value[i].toBER(sizeOnly, _writer);\n        }\n        if (!writer) {\n            return _writer.final();\n        }\n        return EMPTY_BUFFER;\n    }\n    toJSON() {\n        const object = {\n            ...super.toJSON(),\n            isIndefiniteForm: this.isIndefiniteForm,\n            value: [],\n        };\n        for (const value of this.value) {\n            object.value.push(value.toJSON());\n        }\n        return object;\n    }\n}\nLocalConstructedValueBlock.NAME = \"ConstructedValueBlock\";\n\nvar _a$v;\nclass Constructed extends BaseBlock {\n    constructor(parameters = {}) {\n        super(parameters, LocalConstructedValueBlock);\n        this.idBlock.isConstructed = true;\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        this.valueBlock.isIndefiniteForm = this.lenBlock.isIndefiniteForm;\n        const resultOffset = this.valueBlock.fromBER(inputBuffer, inputOffset, (this.lenBlock.isIndefiniteForm) ? inputLength : this.lenBlock.length);\n        if (resultOffset === -1) {\n            this.error = this.valueBlock.error;\n            return resultOffset;\n        }\n        if (!this.idBlock.error.length)\n            this.blockLength += this.idBlock.blockLength;\n        if (!this.lenBlock.error.length)\n            this.blockLength += this.lenBlock.blockLength;\n        if (!this.valueBlock.error.length)\n            this.blockLength += this.valueBlock.blockLength;\n        return resultOffset;\n    }\n    onAsciiEncoding() {\n        const values = [];\n        for (const value of this.valueBlock.value) {\n            values.push(value.toString(\"ascii\").split(\"\\n\").map((o) => `  ${o}`).join(\"\\n\"));\n        }\n        const blockName = this.idBlock.tagClass === 3\n            ? `[${this.idBlock.tagNumber}]`\n            : this.constructor.NAME;\n        return values.length\n            ? `${blockName} :\\n${values.join(\"\\n\")}`\n            : `${blockName} :`;\n    }\n}\n_a$v = Constructed;\n(() => {\n    typeStore.Constructed = _a$v;\n})();\nConstructed.NAME = \"CONSTRUCTED\";\n\nclass LocalEndOfContentValueBlock extends ValueBlock {\n    fromBER(inputBuffer, inputOffset, _inputLength) {\n        return inputOffset;\n    }\n    toBER(_sizeOnly) {\n        return EMPTY_BUFFER;\n    }\n}\nLocalEndOfContentValueBlock.override = \"EndOfContentValueBlock\";\n\nvar _a$u;\nclass EndOfContent extends BaseBlock {\n    constructor(parameters = {}) {\n        super(parameters, LocalEndOfContentValueBlock);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 0;\n    }\n}\n_a$u = EndOfContent;\n(() => {\n    typeStore.EndOfContent = _a$u;\n})();\nEndOfContent.NAME = END_OF_CONTENT_NAME;\n\nvar _a$t;\nclass Null extends BaseBlock {\n    constructor(parameters = {}) {\n        super(parameters, ValueBlock);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 5;\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        if (this.lenBlock.length > 0)\n            this.warnings.push(\"Non-zero length of value block for Null type\");\n        if (!this.idBlock.error.length)\n            this.blockLength += this.idBlock.blockLength;\n        if (!this.lenBlock.error.length)\n            this.blockLength += this.lenBlock.blockLength;\n        this.blockLength += inputLength;\n        if ((inputOffset + inputLength) > inputBuffer.byteLength) {\n            this.error = \"End of input reached before message was fully decoded (inconsistent offset and length values)\";\n            return -1;\n        }\n        return (inputOffset + inputLength);\n    }\n    toBER(sizeOnly, writer) {\n        const retBuf = new ArrayBuffer(2);\n        if (!sizeOnly) {\n            const retView = new Uint8Array(retBuf);\n            retView[0] = 0x05;\n            retView[1] = 0x00;\n        }\n        if (writer) {\n            writer.write(retBuf);\n        }\n        return retBuf;\n    }\n    onAsciiEncoding() {\n        return `${this.constructor.NAME}`;\n    }\n}\n_a$t = Null;\n(() => {\n    typeStore.Null = _a$t;\n})();\nNull.NAME = \"NULL\";\n\nclass LocalBooleanValueBlock extends HexBlock(ValueBlock) {\n    get value() {\n        for (const octet of this.valueHexView) {\n            if (octet > 0) {\n                return true;\n            }\n        }\n        return false;\n    }\n    set value(value) {\n        this.valueHexView[0] = value ? 0xFF : 0x00;\n    }\n    constructor({ value, ...parameters } = {}) {\n        super(parameters);\n        if (parameters.valueHex) {\n            this.valueHexView = pvtsutils.BufferSourceConverter.toUint8Array(parameters.valueHex);\n        }\n        else {\n            this.valueHexView = new Uint8Array(1);\n        }\n        if (value) {\n            this.value = value;\n        }\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        const inputView = pvtsutils.BufferSourceConverter.toUint8Array(inputBuffer);\n        if (!checkBufferParams(this, inputView, inputOffset, inputLength)) {\n            return -1;\n        }\n        this.valueHexView = inputView.subarray(inputOffset, inputOffset + inputLength);\n        if (inputLength > 1)\n            this.warnings.push(\"Boolean value encoded in more then 1 octet\");\n        this.isHexOnly = true;\n        pvutils.utilDecodeTC.call(this);\n        this.blockLength = inputLength;\n        return (inputOffset + inputLength);\n    }\n    toBER() {\n        return this.valueHexView.slice();\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            value: this.value,\n        };\n    }\n}\nLocalBooleanValueBlock.NAME = \"BooleanValueBlock\";\n\nvar _a$s;\nclass Boolean extends BaseBlock {\n    getValue() {\n        return this.valueBlock.value;\n    }\n    setValue(value) {\n        this.valueBlock.value = value;\n    }\n    constructor(parameters = {}) {\n        super(parameters, LocalBooleanValueBlock);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 1;\n    }\n    onAsciiEncoding() {\n        return `${this.constructor.NAME} : ${this.getValue}`;\n    }\n}\n_a$s = Boolean;\n(() => {\n    typeStore.Boolean = _a$s;\n})();\nBoolean.NAME = \"BOOLEAN\";\n\nclass LocalOctetStringValueBlock extends HexBlock(LocalConstructedValueBlock) {\n    constructor({ isConstructed = false, ...parameters } = {}) {\n        super(parameters);\n        this.isConstructed = isConstructed;\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        let resultOffset = 0;\n        if (this.isConstructed) {\n            this.isHexOnly = false;\n            resultOffset = LocalConstructedValueBlock.prototype.fromBER.call(this, inputBuffer, inputOffset, inputLength);\n            if (resultOffset === -1)\n                return resultOffset;\n            for (let i = 0; i < this.value.length; i++) {\n                const currentBlockName = this.value[i].constructor.NAME;\n                if (currentBlockName === END_OF_CONTENT_NAME) {\n                    if (this.isIndefiniteForm)\n                        break;\n                    else {\n                        this.error = \"EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only\";\n                        return -1;\n                    }\n                }\n                if (currentBlockName !== OCTET_STRING_NAME) {\n                    this.error = \"OCTET STRING may consists of OCTET STRINGs only\";\n                    return -1;\n                }\n            }\n        }\n        else {\n            this.isHexOnly = true;\n            resultOffset = super.fromBER(inputBuffer, inputOffset, inputLength);\n            this.blockLength = inputLength;\n        }\n        return resultOffset;\n    }\n    toBER(sizeOnly, writer) {\n        if (this.isConstructed)\n            return LocalConstructedValueBlock.prototype.toBER.call(this, sizeOnly, writer);\n        return sizeOnly\n            ? new ArrayBuffer(this.valueHexView.byteLength)\n            : this.valueHexView.slice().buffer;\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            isConstructed: this.isConstructed,\n        };\n    }\n}\nLocalOctetStringValueBlock.NAME = \"OctetStringValueBlock\";\n\nvar _a$r;\nclass OctetString extends BaseBlock {\n    constructor({ idBlock = {}, lenBlock = {}, ...parameters } = {}) {\n        var _b, _c;\n        (_b = parameters.isConstructed) !== null && _b !== void 0 ? _b : (parameters.isConstructed = !!((_c = parameters.value) === null || _c === void 0 ? void 0 : _c.length));\n        super({\n            idBlock: {\n                isConstructed: parameters.isConstructed,\n                ...idBlock,\n            },\n            lenBlock: {\n                ...lenBlock,\n                isIndefiniteForm: !!parameters.isIndefiniteForm,\n            },\n            ...parameters,\n        }, LocalOctetStringValueBlock);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 4;\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        this.valueBlock.isConstructed = this.idBlock.isConstructed;\n        this.valueBlock.isIndefiniteForm = this.lenBlock.isIndefiniteForm;\n        if (inputLength === 0) {\n            if (this.idBlock.error.length === 0)\n                this.blockLength += this.idBlock.blockLength;\n            if (this.lenBlock.error.length === 0)\n                this.blockLength += this.lenBlock.blockLength;\n            return inputOffset;\n        }\n        if (!this.valueBlock.isConstructed) {\n            const view = inputBuffer instanceof ArrayBuffer ? new Uint8Array(inputBuffer) : inputBuffer;\n            const buf = view.subarray(inputOffset, inputOffset + inputLength);\n            try {\n                if (buf.byteLength) {\n                    const asn = localFromBER(buf, 0, buf.byteLength);\n                    if (asn.offset !== -1 && asn.offset === inputLength) {\n                        this.valueBlock.value = [asn.result];\n                    }\n                }\n            }\n            catch {\n            }\n        }\n        return super.fromBER(inputBuffer, inputOffset, inputLength);\n    }\n    onAsciiEncoding() {\n        if (this.valueBlock.isConstructed || (this.valueBlock.value && this.valueBlock.value.length)) {\n            return Constructed.prototype.onAsciiEncoding.call(this);\n        }\n        const name = this.constructor.NAME;\n        const value = pvtsutils.Convert.ToHex(this.valueBlock.valueHexView);\n        return `${name} : ${value}`;\n    }\n    getValue() {\n        if (!this.idBlock.isConstructed) {\n            return this.valueBlock.valueHexView.slice().buffer;\n        }\n        const array = [];\n        for (const content of this.valueBlock.value) {\n            if (content instanceof _a$r) {\n                array.push(content.valueBlock.valueHexView);\n            }\n        }\n        return pvtsutils.BufferSourceConverter.concat(array);\n    }\n}\n_a$r = OctetString;\n(() => {\n    typeStore.OctetString = _a$r;\n})();\nOctetString.NAME = OCTET_STRING_NAME;\n\nclass LocalBitStringValueBlock extends HexBlock(LocalConstructedValueBlock) {\n    constructor({ unusedBits = 0, isConstructed = false, ...parameters } = {}) {\n        super(parameters);\n        this.unusedBits = unusedBits;\n        this.isConstructed = isConstructed;\n        this.blockLength = this.valueHexView.byteLength;\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        if (!inputLength) {\n            return inputOffset;\n        }\n        let resultOffset = -1;\n        if (this.isConstructed) {\n            resultOffset = LocalConstructedValueBlock.prototype.fromBER.call(this, inputBuffer, inputOffset, inputLength);\n            if (resultOffset === -1)\n                return resultOffset;\n            for (const value of this.value) {\n                const currentBlockName = value.constructor.NAME;\n                if (currentBlockName === END_OF_CONTENT_NAME) {\n                    if (this.isIndefiniteForm)\n                        break;\n                    else {\n                        this.error = \"EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only\";\n                        return -1;\n                    }\n                }\n                if (currentBlockName !== BIT_STRING_NAME) {\n                    this.error = \"BIT STRING may consists of BIT STRINGs only\";\n                    return -1;\n                }\n                const valueBlock = value.valueBlock;\n                if ((this.unusedBits > 0) && (valueBlock.unusedBits > 0)) {\n                    this.error = \"Using of \\\"unused bits\\\" inside constructive BIT STRING allowed for least one only\";\n                    return -1;\n                }\n                this.unusedBits = valueBlock.unusedBits;\n            }\n            return resultOffset;\n        }\n        const inputView = pvtsutils.BufferSourceConverter.toUint8Array(inputBuffer);\n        if (!checkBufferParams(this, inputView, inputOffset, inputLength)) {\n            return -1;\n        }\n        const intBuffer = inputView.subarray(inputOffset, inputOffset + inputLength);\n        this.unusedBits = intBuffer[0];\n        if (this.unusedBits > 7) {\n            this.error = \"Unused bits for BitString must be in range 0-7\";\n            return -1;\n        }\n        if (!this.unusedBits) {\n            const buf = intBuffer.subarray(1);\n            try {\n                if (buf.byteLength) {\n                    const asn = localFromBER(buf, 0, buf.byteLength);\n                    if (asn.offset !== -1 && asn.offset === (inputLength - 1)) {\n                        this.value = [asn.result];\n                    }\n                }\n            }\n            catch {\n            }\n        }\n        this.valueHexView = intBuffer.subarray(1);\n        this.blockLength = intBuffer.length;\n        return (inputOffset + inputLength);\n    }\n    toBER(sizeOnly, writer) {\n        if (this.isConstructed) {\n            return LocalConstructedValueBlock.prototype.toBER.call(this, sizeOnly, writer);\n        }\n        if (sizeOnly) {\n            return new ArrayBuffer(this.valueHexView.byteLength + 1);\n        }\n        if (!this.valueHexView.byteLength) {\n            const empty = new Uint8Array(1);\n            empty[0] = 0;\n            return empty.buffer;\n        }\n        const retView = new Uint8Array(this.valueHexView.length + 1);\n        retView[0] = this.unusedBits;\n        retView.set(this.valueHexView, 1);\n        return retView.buffer;\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            unusedBits: this.unusedBits,\n            isConstructed: this.isConstructed,\n        };\n    }\n}\nLocalBitStringValueBlock.NAME = \"BitStringValueBlock\";\n\nvar _a$q;\nclass BitString extends BaseBlock {\n    constructor({ idBlock = {}, lenBlock = {}, ...parameters } = {}) {\n        var _b, _c;\n        (_b = parameters.isConstructed) !== null && _b !== void 0 ? _b : (parameters.isConstructed = !!((_c = parameters.value) === null || _c === void 0 ? void 0 : _c.length));\n        super({\n            idBlock: {\n                isConstructed: parameters.isConstructed,\n                ...idBlock,\n            },\n            lenBlock: {\n                ...lenBlock,\n                isIndefiniteForm: !!parameters.isIndefiniteForm,\n            },\n            ...parameters,\n        }, LocalBitStringValueBlock);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 3;\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        this.valueBlock.isConstructed = this.idBlock.isConstructed;\n        this.valueBlock.isIndefiniteForm = this.lenBlock.isIndefiniteForm;\n        return super.fromBER(inputBuffer, inputOffset, inputLength);\n    }\n    onAsciiEncoding() {\n        if (this.valueBlock.isConstructed || (this.valueBlock.value && this.valueBlock.value.length)) {\n            return Constructed.prototype.onAsciiEncoding.call(this);\n        }\n        else {\n            const bits = [];\n            const valueHex = this.valueBlock.valueHexView;\n            for (const byte of valueHex) {\n                bits.push(byte.toString(2).padStart(8, \"0\"));\n            }\n            const bitsStr = bits.join(\"\");\n            const name = this.constructor.NAME;\n            const value = bitsStr.substring(0, bitsStr.length - this.valueBlock.unusedBits);\n            return `${name} : ${value}`;\n        }\n    }\n}\n_a$q = BitString;\n(() => {\n    typeStore.BitString = _a$q;\n})();\nBitString.NAME = BIT_STRING_NAME;\n\nvar _a$p;\nfunction viewAdd(first, second) {\n    const c = new Uint8Array([0]);\n    const firstView = new Uint8Array(first);\n    const secondView = new Uint8Array(second);\n    let firstViewCopy = firstView.slice(0);\n    const firstViewCopyLength = firstViewCopy.length - 1;\n    const secondViewCopy = secondView.slice(0);\n    const secondViewCopyLength = secondViewCopy.length - 1;\n    let value = 0;\n    const max = (secondViewCopyLength < firstViewCopyLength) ? firstViewCopyLength : secondViewCopyLength;\n    let counter = 0;\n    for (let i = max; i >= 0; i--, counter++) {\n        switch (true) {\n            case (counter < secondViewCopy.length):\n                value = firstViewCopy[firstViewCopyLength - counter] + secondViewCopy[secondViewCopyLength - counter] + c[0];\n                break;\n            default:\n                value = firstViewCopy[firstViewCopyLength - counter] + c[0];\n        }\n        c[0] = value / 10;\n        switch (true) {\n            case (counter >= firstViewCopy.length):\n                firstViewCopy = pvutils.utilConcatView(new Uint8Array([value % 10]), firstViewCopy);\n                break;\n            default:\n                firstViewCopy[firstViewCopyLength - counter] = value % 10;\n        }\n    }\n    if (c[0] > 0)\n        firstViewCopy = pvutils.utilConcatView(c, firstViewCopy);\n    return firstViewCopy;\n}\nfunction power2(n) {\n    if (n >= powers2.length) {\n        for (let p = powers2.length; p <= n; p++) {\n            const c = new Uint8Array([0]);\n            let digits = (powers2[p - 1]).slice(0);\n            for (let i = (digits.length - 1); i >= 0; i--) {\n                const newValue = new Uint8Array([(digits[i] << 1) + c[0]]);\n                c[0] = newValue[0] / 10;\n                digits[i] = newValue[0] % 10;\n            }\n            if (c[0] > 0)\n                digits = pvutils.utilConcatView(c, digits);\n            powers2.push(digits);\n        }\n    }\n    return powers2[n];\n}\nfunction viewSub(first, second) {\n    let b = 0;\n    const firstView = new Uint8Array(first);\n    const secondView = new Uint8Array(second);\n    const firstViewCopy = firstView.slice(0);\n    const firstViewCopyLength = firstViewCopy.length - 1;\n    const secondViewCopy = secondView.slice(0);\n    const secondViewCopyLength = secondViewCopy.length - 1;\n    let value;\n    let counter = 0;\n    for (let i = secondViewCopyLength; i >= 0; i--, counter++) {\n        value = firstViewCopy[firstViewCopyLength - counter] - secondViewCopy[secondViewCopyLength - counter] - b;\n        switch (true) {\n            case (value < 0):\n                b = 1;\n                firstViewCopy[firstViewCopyLength - counter] = value + 10;\n                break;\n            default:\n                b = 0;\n                firstViewCopy[firstViewCopyLength - counter] = value;\n        }\n    }\n    if (b > 0) {\n        for (let i = (firstViewCopyLength - secondViewCopyLength + 1); i >= 0; i--, counter++) {\n            value = firstViewCopy[firstViewCopyLength - counter] - b;\n            if (value < 0) {\n                b = 1;\n                firstViewCopy[firstViewCopyLength - counter] = value + 10;\n            }\n            else {\n                b = 0;\n                firstViewCopy[firstViewCopyLength - counter] = value;\n                break;\n            }\n        }\n    }\n    return firstViewCopy.slice();\n}\nclass LocalIntegerValueBlock extends HexBlock(ValueBlock) {\n    setValueHex() {\n        if (this.valueHexView.length >= 4) {\n            this.warnings.push(\"Too big Integer for decoding, hex only\");\n            this.isHexOnly = true;\n            this._valueDec = 0;\n        }\n        else {\n            this.isHexOnly = false;\n            if (this.valueHexView.length > 0) {\n                this._valueDec = pvutils.utilDecodeTC.call(this);\n            }\n        }\n    }\n    constructor({ value, ...parameters } = {}) {\n        super(parameters);\n        this._valueDec = 0;\n        if (parameters.valueHex) {\n            this.setValueHex();\n        }\n        if (value !== undefined) {\n            this.valueDec = value;\n        }\n    }\n    set valueDec(v) {\n        this._valueDec = v;\n        this.isHexOnly = false;\n        this.valueHexView = new Uint8Array(pvutils.utilEncodeTC(v));\n    }\n    get valueDec() {\n        return this._valueDec;\n    }\n    fromDER(inputBuffer, inputOffset, inputLength, expectedLength = 0) {\n        const offset = this.fromBER(inputBuffer, inputOffset, inputLength);\n        if (offset === -1)\n            return offset;\n        const view = this.valueHexView;\n        if ((view[0] === 0x00) && ((view[1] & 0x80) !== 0)) {\n            this.valueHexView = view.subarray(1);\n        }\n        else {\n            if (expectedLength !== 0) {\n                if (view.length < expectedLength) {\n                    if ((expectedLength - view.length) > 1)\n                        expectedLength = view.length + 1;\n                    this.valueHexView = view.subarray(expectedLength - view.length);\n                }\n            }\n        }\n        return offset;\n    }\n    toDER(sizeOnly = false) {\n        const view = this.valueHexView;\n        switch (true) {\n            case ((view[0] & 0x80) !== 0):\n                {\n                    const updatedView = new Uint8Array(this.valueHexView.length + 1);\n                    updatedView[0] = 0x00;\n                    updatedView.set(view, 1);\n                    this.valueHexView = updatedView;\n                }\n                break;\n            case ((view[0] === 0x00) && ((view[1] & 0x80) === 0)):\n                {\n                    this.valueHexView = this.valueHexView.subarray(1);\n                }\n                break;\n        }\n        return this.toBER(sizeOnly);\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        const resultOffset = super.fromBER(inputBuffer, inputOffset, inputLength);\n        if (resultOffset === -1) {\n            return resultOffset;\n        }\n        this.setValueHex();\n        return resultOffset;\n    }\n    toBER(sizeOnly) {\n        return sizeOnly\n            ? new ArrayBuffer(this.valueHexView.length)\n            : this.valueHexView.slice().buffer;\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            valueDec: this.valueDec,\n        };\n    }\n    toString() {\n        const firstBit = (this.valueHexView.length * 8) - 1;\n        let digits = new Uint8Array((this.valueHexView.length * 8) / 3);\n        let bitNumber = 0;\n        let currentByte;\n        const asn1View = this.valueHexView;\n        let result = \"\";\n        let flag = false;\n        for (let byteNumber = (asn1View.byteLength - 1); byteNumber >= 0; byteNumber--) {\n            currentByte = asn1View[byteNumber];\n            for (let i = 0; i < 8; i++) {\n                if ((currentByte & 1) === 1) {\n                    switch (bitNumber) {\n                        case firstBit:\n                            digits = viewSub(power2(bitNumber), digits);\n                            result = \"-\";\n                            break;\n                        default:\n                            digits = viewAdd(digits, power2(bitNumber));\n                    }\n                }\n                bitNumber++;\n                currentByte >>= 1;\n            }\n        }\n        for (let i = 0; i < digits.length; i++) {\n            if (digits[i])\n                flag = true;\n            if (flag)\n                result += digitsString.charAt(digits[i]);\n        }\n        if (flag === false)\n            result += digitsString.charAt(0);\n        return result;\n    }\n}\n_a$p = LocalIntegerValueBlock;\nLocalIntegerValueBlock.NAME = \"IntegerValueBlock\";\n(() => {\n    Object.defineProperty(_a$p.prototype, \"valueHex\", {\n        set: function (v) {\n            this.valueHexView = new Uint8Array(v);\n            this.setValueHex();\n        },\n        get: function () {\n            return this.valueHexView.slice().buffer;\n        },\n    });\n})();\n\nvar _a$o;\nclass Integer extends BaseBlock {\n    constructor(parameters = {}) {\n        super(parameters, LocalIntegerValueBlock);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 2;\n    }\n    toBigInt() {\n        assertBigInt();\n        return BigInt(this.valueBlock.toString());\n    }\n    static fromBigInt(value) {\n        assertBigInt();\n        const bigIntValue = BigInt(value);\n        const writer = new ViewWriter();\n        const hex = bigIntValue.toString(16).replace(/^-/, \"\");\n        const view = new Uint8Array(pvtsutils.Convert.FromHex(hex));\n        if (bigIntValue < 0) {\n            const first = new Uint8Array(view.length + (view[0] & 0x80 ? 1 : 0));\n            first[0] |= 0x80;\n            const firstInt = BigInt(`0x${pvtsutils.Convert.ToHex(first)}`);\n            const secondInt = firstInt + bigIntValue;\n            const second = pvtsutils.BufferSourceConverter.toUint8Array(pvtsutils.Convert.FromHex(secondInt.toString(16)));\n            second[0] |= 0x80;\n            writer.write(second);\n        }\n        else {\n            if (view[0] & 0x80) {\n                writer.write(new Uint8Array([0]));\n            }\n            writer.write(view);\n        }\n        const res = new _a$o({ valueHex: writer.final() });\n        return res;\n    }\n    convertToDER() {\n        const integer = new _a$o({ valueHex: this.valueBlock.valueHexView });\n        integer.valueBlock.toDER();\n        return integer;\n    }\n    convertFromDER() {\n        return new _a$o({\n            valueHex: this.valueBlock.valueHexView[0] === 0\n                ? this.valueBlock.valueHexView.subarray(1)\n                : this.valueBlock.valueHexView,\n        });\n    }\n    onAsciiEncoding() {\n        return `${this.constructor.NAME} : ${this.valueBlock.toString()}`;\n    }\n}\n_a$o = Integer;\n(() => {\n    typeStore.Integer = _a$o;\n})();\nInteger.NAME = \"INTEGER\";\n\nvar _a$n;\nclass Enumerated extends Integer {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 10;\n    }\n}\n_a$n = Enumerated;\n(() => {\n    typeStore.Enumerated = _a$n;\n})();\nEnumerated.NAME = \"ENUMERATED\";\n\nclass LocalSidValueBlock extends HexBlock(ValueBlock) {\n    constructor({ valueDec = -1, isFirstSid = false, ...parameters } = {}) {\n        super(parameters);\n        this.valueDec = valueDec;\n        this.isFirstSid = isFirstSid;\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        if (!inputLength) {\n            return inputOffset;\n        }\n        const inputView = pvtsutils.BufferSourceConverter.toUint8Array(inputBuffer);\n        if (!checkBufferParams(this, inputView, inputOffset, inputLength)) {\n            return -1;\n        }\n        const intBuffer = inputView.subarray(inputOffset, inputOffset + inputLength);\n        this.valueHexView = new Uint8Array(inputLength);\n        for (let i = 0; i < inputLength; i++) {\n            this.valueHexView[i] = intBuffer[i] & 0x7F;\n            this.blockLength++;\n            if ((intBuffer[i] & 0x80) === 0x00)\n                break;\n        }\n        const tempView = new Uint8Array(this.blockLength);\n        for (let i = 0; i < this.blockLength; i++) {\n            tempView[i] = this.valueHexView[i];\n        }\n        this.valueHexView = tempView;\n        if ((intBuffer[this.blockLength - 1] & 0x80) !== 0x00) {\n            this.error = \"End of input reached before message was fully decoded\";\n            return -1;\n        }\n        if (this.valueHexView[0] === 0x00)\n            this.warnings.push(\"Needlessly long format of SID encoding\");\n        if (this.blockLength <= 8)\n            this.valueDec = pvutils.utilFromBase(this.valueHexView, 7);\n        else {\n            this.isHexOnly = true;\n            this.warnings.push(\"Too big SID for decoding, hex only\");\n        }\n        return (inputOffset + this.blockLength);\n    }\n    set valueBigInt(value) {\n        assertBigInt();\n        let bits = BigInt(value).toString(2);\n        while (bits.length % 7) {\n            bits = \"0\" + bits;\n        }\n        const bytes = new Uint8Array(bits.length / 7);\n        for (let i = 0; i < bytes.length; i++) {\n            bytes[i] = parseInt(bits.slice(i * 7, i * 7 + 7), 2) + (i + 1 < bytes.length ? 0x80 : 0);\n        }\n        this.fromBER(bytes.buffer, 0, bytes.length);\n    }\n    toBER(sizeOnly) {\n        if (this.isHexOnly) {\n            if (sizeOnly)\n                return (new ArrayBuffer(this.valueHexView.byteLength));\n            const curView = this.valueHexView;\n            const retView = new Uint8Array(this.blockLength);\n            for (let i = 0; i < (this.blockLength - 1); i++)\n                retView[i] = curView[i] | 0x80;\n            retView[this.blockLength - 1] = curView[this.blockLength - 1];\n            return retView.buffer;\n        }\n        const encodedBuf = pvutils.utilToBase(this.valueDec, 7);\n        if (encodedBuf.byteLength === 0) {\n            this.error = \"Error during encoding SID value\";\n            return EMPTY_BUFFER;\n        }\n        const retView = new Uint8Array(encodedBuf.byteLength);\n        if (!sizeOnly) {\n            const encodedView = new Uint8Array(encodedBuf);\n            const len = encodedBuf.byteLength - 1;\n            for (let i = 0; i < len; i++)\n                retView[i] = encodedView[i] | 0x80;\n            retView[len] = encodedView[len];\n        }\n        return retView;\n    }\n    toString() {\n        let result = \"\";\n        if (this.isHexOnly)\n            result = pvtsutils.Convert.ToHex(this.valueHexView);\n        else {\n            if (this.isFirstSid) {\n                let sidValue = this.valueDec;\n                if (this.valueDec <= 39)\n                    result = \"0.\";\n                else {\n                    if (this.valueDec <= 79) {\n                        result = \"1.\";\n                        sidValue -= 40;\n                    }\n                    else {\n                        result = \"2.\";\n                        sidValue -= 80;\n                    }\n                }\n                result += sidValue.toString();\n            }\n            else\n                result = this.valueDec.toString();\n        }\n        return result;\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            valueDec: this.valueDec,\n            isFirstSid: this.isFirstSid,\n        };\n    }\n}\nLocalSidValueBlock.NAME = \"sidBlock\";\n\nclass LocalObjectIdentifierValueBlock extends ValueBlock {\n    constructor({ value = EMPTY_STRING, ...parameters } = {}) {\n        super(parameters);\n        this.value = [];\n        if (value) {\n            this.fromString(value);\n        }\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        let resultOffset = inputOffset;\n        while (inputLength > 0) {\n            const sidBlock = new LocalSidValueBlock();\n            resultOffset = sidBlock.fromBER(inputBuffer, resultOffset, inputLength);\n            if (resultOffset === -1) {\n                this.blockLength = 0;\n                this.error = sidBlock.error;\n                return resultOffset;\n            }\n            if (this.value.length === 0)\n                sidBlock.isFirstSid = true;\n            this.blockLength += sidBlock.blockLength;\n            inputLength -= sidBlock.blockLength;\n            this.value.push(sidBlock);\n        }\n        return resultOffset;\n    }\n    toBER(sizeOnly) {\n        const retBuffers = [];\n        for (let i = 0; i < this.value.length; i++) {\n            const valueBuf = this.value[i].toBER(sizeOnly);\n            if (valueBuf.byteLength === 0) {\n                this.error = this.value[i].error;\n                return EMPTY_BUFFER;\n            }\n            retBuffers.push(valueBuf);\n        }\n        return concat(retBuffers);\n    }\n    fromString(string) {\n        this.value = [];\n        let pos1 = 0;\n        let pos2 = 0;\n        let sid = \"\";\n        let flag = false;\n        do {\n            pos2 = string.indexOf(\".\", pos1);\n            if (pos2 === -1)\n                sid = string.substring(pos1);\n            else\n                sid = string.substring(pos1, pos2);\n            pos1 = pos2 + 1;\n            if (flag) {\n                const sidBlock = this.value[0];\n                let plus = 0;\n                switch (sidBlock.valueDec) {\n                    case 0:\n                        break;\n                    case 1:\n                        plus = 40;\n                        break;\n                    case 2:\n                        plus = 80;\n                        break;\n                    default:\n                        this.value = [];\n                        return;\n                }\n                const parsedSID = parseInt(sid, 10);\n                if (isNaN(parsedSID))\n                    return;\n                sidBlock.valueDec = parsedSID + plus;\n                flag = false;\n            }\n            else {\n                const sidBlock = new LocalSidValueBlock();\n                if (sid > Number.MAX_SAFE_INTEGER) {\n                    assertBigInt();\n                    const sidValue = BigInt(sid);\n                    sidBlock.valueBigInt = sidValue;\n                }\n                else {\n                    sidBlock.valueDec = parseInt(sid, 10);\n                    if (isNaN(sidBlock.valueDec))\n                        return;\n                }\n                if (!this.value.length) {\n                    sidBlock.isFirstSid = true;\n                    flag = true;\n                }\n                this.value.push(sidBlock);\n            }\n        } while (pos2 !== -1);\n    }\n    toString() {\n        let result = \"\";\n        let isHexOnly = false;\n        for (let i = 0; i < this.value.length; i++) {\n            isHexOnly = this.value[i].isHexOnly;\n            let sidStr = this.value[i].toString();\n            if (i !== 0)\n                result = `${result}.`;\n            if (isHexOnly) {\n                sidStr = `{${sidStr}}`;\n                if (this.value[i].isFirstSid)\n                    result = `2.{${sidStr} - 80}`;\n                else\n                    result += sidStr;\n            }\n            else\n                result += sidStr;\n        }\n        return result;\n    }\n    toJSON() {\n        const object = {\n            ...super.toJSON(),\n            value: this.toString(),\n            sidArray: [],\n        };\n        for (let i = 0; i < this.value.length; i++) {\n            object.sidArray.push(this.value[i].toJSON());\n        }\n        return object;\n    }\n}\nLocalObjectIdentifierValueBlock.NAME = \"ObjectIdentifierValueBlock\";\n\nvar _a$m;\nclass ObjectIdentifier extends BaseBlock {\n    getValue() {\n        return this.valueBlock.toString();\n    }\n    setValue(value) {\n        this.valueBlock.fromString(value);\n    }\n    constructor(parameters = {}) {\n        super(parameters, LocalObjectIdentifierValueBlock);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 6;\n    }\n    onAsciiEncoding() {\n        return `${this.constructor.NAME} : ${this.valueBlock.toString() || \"empty\"}`;\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            value: this.getValue(),\n        };\n    }\n}\n_a$m = ObjectIdentifier;\n(() => {\n    typeStore.ObjectIdentifier = _a$m;\n})();\nObjectIdentifier.NAME = \"OBJECT IDENTIFIER\";\n\nclass LocalRelativeSidValueBlock extends HexBlock(LocalBaseBlock) {\n    constructor({ valueDec = 0, ...parameters } = {}) {\n        super(parameters);\n        this.valueDec = valueDec;\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        if (inputLength === 0)\n            return inputOffset;\n        const inputView = pvtsutils.BufferSourceConverter.toUint8Array(inputBuffer);\n        if (!checkBufferParams(this, inputView, inputOffset, inputLength))\n            return -1;\n        const intBuffer = inputView.subarray(inputOffset, inputOffset + inputLength);\n        this.valueHexView = new Uint8Array(inputLength);\n        for (let i = 0; i < inputLength; i++) {\n            this.valueHexView[i] = intBuffer[i] & 0x7F;\n            this.blockLength++;\n            if ((intBuffer[i] & 0x80) === 0x00)\n                break;\n        }\n        const tempView = new Uint8Array(this.blockLength);\n        for (let i = 0; i < this.blockLength; i++)\n            tempView[i] = this.valueHexView[i];\n        this.valueHexView = tempView;\n        if ((intBuffer[this.blockLength - 1] & 0x80) !== 0x00) {\n            this.error = \"End of input reached before message was fully decoded\";\n            return -1;\n        }\n        if (this.valueHexView[0] === 0x00)\n            this.warnings.push(\"Needlessly long format of SID encoding\");\n        if (this.blockLength <= 8)\n            this.valueDec = pvutils.utilFromBase(this.valueHexView, 7);\n        else {\n            this.isHexOnly = true;\n            this.warnings.push(\"Too big SID for decoding, hex only\");\n        }\n        return (inputOffset + this.blockLength);\n    }\n    toBER(sizeOnly) {\n        if (this.isHexOnly) {\n            if (sizeOnly)\n                return (new ArrayBuffer(this.valueHexView.byteLength));\n            const curView = this.valueHexView;\n            const retView = new Uint8Array(this.blockLength);\n            for (let i = 0; i < (this.blockLength - 1); i++)\n                retView[i] = curView[i] | 0x80;\n            retView[this.blockLength - 1] = curView[this.blockLength - 1];\n            return retView.buffer;\n        }\n        const encodedBuf = pvutils.utilToBase(this.valueDec, 7);\n        if (encodedBuf.byteLength === 0) {\n            this.error = \"Error during encoding SID value\";\n            return EMPTY_BUFFER;\n        }\n        const retView = new Uint8Array(encodedBuf.byteLength);\n        if (!sizeOnly) {\n            const encodedView = new Uint8Array(encodedBuf);\n            const len = encodedBuf.byteLength - 1;\n            for (let i = 0; i < len; i++)\n                retView[i] = encodedView[i] | 0x80;\n            retView[len] = encodedView[len];\n        }\n        return retView.buffer;\n    }\n    toString() {\n        let result = \"\";\n        if (this.isHexOnly)\n            result = pvtsutils.Convert.ToHex(this.valueHexView);\n        else {\n            result = this.valueDec.toString();\n        }\n        return result;\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            valueDec: this.valueDec,\n        };\n    }\n}\nLocalRelativeSidValueBlock.NAME = \"relativeSidBlock\";\n\nclass LocalRelativeObjectIdentifierValueBlock extends ValueBlock {\n    constructor({ value = EMPTY_STRING, ...parameters } = {}) {\n        super(parameters);\n        this.value = [];\n        if (value) {\n            this.fromString(value);\n        }\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        let resultOffset = inputOffset;\n        while (inputLength > 0) {\n            const sidBlock = new LocalRelativeSidValueBlock();\n            resultOffset = sidBlock.fromBER(inputBuffer, resultOffset, inputLength);\n            if (resultOffset === -1) {\n                this.blockLength = 0;\n                this.error = sidBlock.error;\n                return resultOffset;\n            }\n            this.blockLength += sidBlock.blockLength;\n            inputLength -= sidBlock.blockLength;\n            this.value.push(sidBlock);\n        }\n        return resultOffset;\n    }\n    toBER(sizeOnly, _writer) {\n        const retBuffers = [];\n        for (let i = 0; i < this.value.length; i++) {\n            const valueBuf = this.value[i].toBER(sizeOnly);\n            if (valueBuf.byteLength === 0) {\n                this.error = this.value[i].error;\n                return EMPTY_BUFFER;\n            }\n            retBuffers.push(valueBuf);\n        }\n        return concat(retBuffers);\n    }\n    fromString(string) {\n        this.value = [];\n        let pos1 = 0;\n        let pos2 = 0;\n        let sid = \"\";\n        do {\n            pos2 = string.indexOf(\".\", pos1);\n            if (pos2 === -1)\n                sid = string.substring(pos1);\n            else\n                sid = string.substring(pos1, pos2);\n            pos1 = pos2 + 1;\n            const sidBlock = new LocalRelativeSidValueBlock();\n            sidBlock.valueDec = parseInt(sid, 10);\n            if (isNaN(sidBlock.valueDec))\n                return true;\n            this.value.push(sidBlock);\n        } while (pos2 !== -1);\n        return true;\n    }\n    toString() {\n        let result = \"\";\n        let isHexOnly = false;\n        for (let i = 0; i < this.value.length; i++) {\n            isHexOnly = this.value[i].isHexOnly;\n            let sidStr = this.value[i].toString();\n            if (i !== 0)\n                result = `${result}.`;\n            if (isHexOnly) {\n                sidStr = `{${sidStr}}`;\n                result += sidStr;\n            }\n            else\n                result += sidStr;\n        }\n        return result;\n    }\n    toJSON() {\n        const object = {\n            ...super.toJSON(),\n            value: this.toString(),\n            sidArray: [],\n        };\n        for (let i = 0; i < this.value.length; i++)\n            object.sidArray.push(this.value[i].toJSON());\n        return object;\n    }\n}\nLocalRelativeObjectIdentifierValueBlock.NAME = \"RelativeObjectIdentifierValueBlock\";\n\nvar _a$l;\nclass RelativeObjectIdentifier extends BaseBlock {\n    getValue() {\n        return this.valueBlock.toString();\n    }\n    setValue(value) {\n        this.valueBlock.fromString(value);\n    }\n    constructor(parameters = {}) {\n        super(parameters, LocalRelativeObjectIdentifierValueBlock);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 13;\n    }\n    onAsciiEncoding() {\n        return `${this.constructor.NAME} : ${this.valueBlock.toString() || \"empty\"}`;\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            value: this.getValue(),\n        };\n    }\n}\n_a$l = RelativeObjectIdentifier;\n(() => {\n    typeStore.RelativeObjectIdentifier = _a$l;\n})();\nRelativeObjectIdentifier.NAME = \"RelativeObjectIdentifier\";\n\nvar _a$k;\nclass Sequence extends Constructed {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 16;\n    }\n}\n_a$k = Sequence;\n(() => {\n    typeStore.Sequence = _a$k;\n})();\nSequence.NAME = \"SEQUENCE\";\n\nvar _a$j;\nclass Set extends Constructed {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 17;\n    }\n}\n_a$j = Set;\n(() => {\n    typeStore.Set = _a$j;\n})();\nSet.NAME = \"SET\";\n\nclass LocalStringValueBlock extends HexBlock(ValueBlock) {\n    constructor({ ...parameters } = {}) {\n        super(parameters);\n        this.isHexOnly = true;\n        this.value = EMPTY_STRING;\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            value: this.value,\n        };\n    }\n}\nLocalStringValueBlock.NAME = \"StringValueBlock\";\n\nclass LocalSimpleStringValueBlock extends LocalStringValueBlock {\n}\nLocalSimpleStringValueBlock.NAME = \"SimpleStringValueBlock\";\n\nclass LocalSimpleStringBlock extends BaseStringBlock {\n    constructor({ ...parameters } = {}) {\n        super(parameters, LocalSimpleStringValueBlock);\n    }\n    fromBuffer(inputBuffer) {\n        this.valueBlock.value = String.fromCharCode.apply(null, pvtsutils.BufferSourceConverter.toUint8Array(inputBuffer));\n    }\n    fromString(inputString) {\n        const strLen = inputString.length;\n        const view = this.valueBlock.valueHexView = new Uint8Array(strLen);\n        for (let i = 0; i < strLen; i++)\n            view[i] = inputString.charCodeAt(i);\n        this.valueBlock.value = inputString;\n    }\n}\nLocalSimpleStringBlock.NAME = \"SIMPLE STRING\";\n\nclass LocalUtf8StringValueBlock extends LocalSimpleStringBlock {\n    fromBuffer(inputBuffer) {\n        this.valueBlock.valueHexView = pvtsutils.BufferSourceConverter.toUint8Array(inputBuffer);\n        try {\n            this.valueBlock.value = pvtsutils.Convert.ToUtf8String(inputBuffer);\n        }\n        catch (ex) {\n            this.warnings.push(`Error during \"decodeURIComponent\": ${ex}, using raw string`);\n            this.valueBlock.value = pvtsutils.Convert.ToBinary(inputBuffer);\n        }\n    }\n    fromString(inputString) {\n        this.valueBlock.valueHexView = new Uint8Array(pvtsutils.Convert.FromUtf8String(inputString));\n        this.valueBlock.value = inputString;\n    }\n}\nLocalUtf8StringValueBlock.NAME = \"Utf8StringValueBlock\";\n\nvar _a$i;\nclass Utf8String extends LocalUtf8StringValueBlock {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 12;\n    }\n}\n_a$i = Utf8String;\n(() => {\n    typeStore.Utf8String = _a$i;\n})();\nUtf8String.NAME = \"UTF8String\";\n\nclass LocalBmpStringValueBlock extends LocalSimpleStringBlock {\n    fromBuffer(inputBuffer) {\n        this.valueBlock.value = pvtsutils.Convert.ToUtf16String(inputBuffer);\n        this.valueBlock.valueHexView = pvtsutils.BufferSourceConverter.toUint8Array(inputBuffer);\n    }\n    fromString(inputString) {\n        this.valueBlock.value = inputString;\n        this.valueBlock.valueHexView = new Uint8Array(pvtsutils.Convert.FromUtf16String(inputString));\n    }\n}\nLocalBmpStringValueBlock.NAME = \"BmpStringValueBlock\";\n\nvar _a$h;\nclass BmpString extends LocalBmpStringValueBlock {\n    constructor({ ...parameters } = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 30;\n    }\n}\n_a$h = BmpString;\n(() => {\n    typeStore.BmpString = _a$h;\n})();\nBmpString.NAME = \"BMPString\";\n\nclass LocalUniversalStringValueBlock extends LocalSimpleStringBlock {\n    fromBuffer(inputBuffer) {\n        const copyBuffer = ArrayBuffer.isView(inputBuffer) ? inputBuffer.slice().buffer : inputBuffer.slice(0);\n        const valueView = new Uint8Array(copyBuffer);\n        for (let i = 0; i < valueView.length; i += 4) {\n            valueView[i] = valueView[i + 3];\n            valueView[i + 1] = valueView[i + 2];\n            valueView[i + 2] = 0x00;\n            valueView[i + 3] = 0x00;\n        }\n        this.valueBlock.value = String.fromCharCode.apply(null, new Uint32Array(copyBuffer));\n    }\n    fromString(inputString) {\n        const strLength = inputString.length;\n        const valueHexView = this.valueBlock.valueHexView = new Uint8Array(strLength * 4);\n        for (let i = 0; i < strLength; i++) {\n            const codeBuf = pvutils.utilToBase(inputString.charCodeAt(i), 8);\n            const codeView = new Uint8Array(codeBuf);\n            if (codeView.length > 4)\n                continue;\n            const dif = 4 - codeView.length;\n            for (let j = (codeView.length - 1); j >= 0; j--)\n                valueHexView[i * 4 + j + dif] = codeView[j];\n        }\n        this.valueBlock.value = inputString;\n    }\n}\nLocalUniversalStringValueBlock.NAME = \"UniversalStringValueBlock\";\n\nvar _a$g;\nclass UniversalString extends LocalUniversalStringValueBlock {\n    constructor({ ...parameters } = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 28;\n    }\n}\n_a$g = UniversalString;\n(() => {\n    typeStore.UniversalString = _a$g;\n})();\nUniversalString.NAME = \"UniversalString\";\n\nvar _a$f;\nclass NumericString extends LocalSimpleStringBlock {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 18;\n    }\n}\n_a$f = NumericString;\n(() => {\n    typeStore.NumericString = _a$f;\n})();\nNumericString.NAME = \"NumericString\";\n\nvar _a$e;\nclass PrintableString extends LocalSimpleStringBlock {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 19;\n    }\n}\n_a$e = PrintableString;\n(() => {\n    typeStore.PrintableString = _a$e;\n})();\nPrintableString.NAME = \"PrintableString\";\n\nvar _a$d;\nclass TeletexString extends LocalSimpleStringBlock {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 20;\n    }\n}\n_a$d = TeletexString;\n(() => {\n    typeStore.TeletexString = _a$d;\n})();\nTeletexString.NAME = \"TeletexString\";\n\nvar _a$c;\nclass VideotexString extends LocalSimpleStringBlock {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 21;\n    }\n}\n_a$c = VideotexString;\n(() => {\n    typeStore.VideotexString = _a$c;\n})();\nVideotexString.NAME = \"VideotexString\";\n\nvar _a$b;\nclass IA5String extends LocalSimpleStringBlock {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 22;\n    }\n}\n_a$b = IA5String;\n(() => {\n    typeStore.IA5String = _a$b;\n})();\nIA5String.NAME = \"IA5String\";\n\nvar _a$a;\nclass GraphicString extends LocalSimpleStringBlock {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 25;\n    }\n}\n_a$a = GraphicString;\n(() => {\n    typeStore.GraphicString = _a$a;\n})();\nGraphicString.NAME = \"GraphicString\";\n\nvar _a$9;\nclass VisibleString extends LocalSimpleStringBlock {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 26;\n    }\n}\n_a$9 = VisibleString;\n(() => {\n    typeStore.VisibleString = _a$9;\n})();\nVisibleString.NAME = \"VisibleString\";\n\nvar _a$8;\nclass GeneralString extends LocalSimpleStringBlock {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 27;\n    }\n}\n_a$8 = GeneralString;\n(() => {\n    typeStore.GeneralString = _a$8;\n})();\nGeneralString.NAME = \"GeneralString\";\n\nvar _a$7;\nclass CharacterString extends LocalSimpleStringBlock {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 29;\n    }\n}\n_a$7 = CharacterString;\n(() => {\n    typeStore.CharacterString = _a$7;\n})();\nCharacterString.NAME = \"CharacterString\";\n\nvar _a$6;\nclass UTCTime extends VisibleString {\n    constructor({ value, valueDate, ...parameters } = {}) {\n        super(parameters);\n        this.year = 0;\n        this.month = 0;\n        this.day = 0;\n        this.hour = 0;\n        this.minute = 0;\n        this.second = 0;\n        if (value) {\n            this.fromString(value);\n            this.valueBlock.valueHexView = new Uint8Array(value.length);\n            for (let i = 0; i < value.length; i++)\n                this.valueBlock.valueHexView[i] = value.charCodeAt(i);\n        }\n        if (valueDate) {\n            this.fromDate(valueDate);\n            this.valueBlock.valueHexView = new Uint8Array(this.toBuffer());\n        }\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 23;\n    }\n    fromBuffer(inputBuffer) {\n        this.fromString(String.fromCharCode.apply(null, pvtsutils.BufferSourceConverter.toUint8Array(inputBuffer)));\n    }\n    toBuffer() {\n        const str = this.toString();\n        const buffer = new ArrayBuffer(str.length);\n        const view = new Uint8Array(buffer);\n        for (let i = 0; i < str.length; i++)\n            view[i] = str.charCodeAt(i);\n        return buffer;\n    }\n    fromDate(inputDate) {\n        this.year = inputDate.getUTCFullYear();\n        this.month = inputDate.getUTCMonth() + 1;\n        this.day = inputDate.getUTCDate();\n        this.hour = inputDate.getUTCHours();\n        this.minute = inputDate.getUTCMinutes();\n        this.second = inputDate.getUTCSeconds();\n    }\n    toDate() {\n        return (new Date(Date.UTC(this.year, this.month - 1, this.day, this.hour, this.minute, this.second)));\n    }\n    fromString(inputString) {\n        const parser = /(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{2})Z/ig;\n        const parserArray = parser.exec(inputString);\n        if (parserArray === null) {\n            this.error = \"Wrong input string for conversion\";\n            return;\n        }\n        const year = parseInt(parserArray[1], 10);\n        if (year >= 50)\n            this.year = 1900 + year;\n        else\n            this.year = 2000 + year;\n        this.month = parseInt(parserArray[2], 10);\n        this.day = parseInt(parserArray[3], 10);\n        this.hour = parseInt(parserArray[4], 10);\n        this.minute = parseInt(parserArray[5], 10);\n        this.second = parseInt(parserArray[6], 10);\n    }\n    toString(encoding = \"iso\") {\n        if (encoding === \"iso\") {\n            const outputArray = new Array(7);\n            outputArray[0] = pvutils.padNumber(((this.year < 2000) ? (this.year - 1900) : (this.year - 2000)), 2);\n            outputArray[1] = pvutils.padNumber(this.month, 2);\n            outputArray[2] = pvutils.padNumber(this.day, 2);\n            outputArray[3] = pvutils.padNumber(this.hour, 2);\n            outputArray[4] = pvutils.padNumber(this.minute, 2);\n            outputArray[5] = pvutils.padNumber(this.second, 2);\n            outputArray[6] = \"Z\";\n            return outputArray.join(\"\");\n        }\n        return super.toString(encoding);\n    }\n    onAsciiEncoding() {\n        return `${this.constructor.NAME} : ${this.toDate().toISOString()}`;\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            year: this.year,\n            month: this.month,\n            day: this.day,\n            hour: this.hour,\n            minute: this.minute,\n            second: this.second,\n        };\n    }\n}\n_a$6 = UTCTime;\n(() => {\n    typeStore.UTCTime = _a$6;\n})();\nUTCTime.NAME = \"UTCTime\";\n\nvar _a$5;\nclass GeneralizedTime extends UTCTime {\n    constructor(parameters = {}) {\n        var _b;\n        super(parameters);\n        (_b = this.millisecond) !== null && _b !== void 0 ? _b : (this.millisecond = 0);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 24;\n    }\n    fromDate(inputDate) {\n        super.fromDate(inputDate);\n        this.millisecond = inputDate.getUTCMilliseconds();\n    }\n    toDate() {\n        const utcDate = Date.UTC(this.year, this.month - 1, this.day, this.hour, this.minute, this.second, this.millisecond);\n        return (new Date(utcDate));\n    }\n    fromString(inputString) {\n        let isUTC = false;\n        let timeString = \"\";\n        let dateTimeString = \"\";\n        let fractionPart = 0;\n        let parser;\n        let hourDifference = 0;\n        let minuteDifference = 0;\n        if (inputString[inputString.length - 1] === \"Z\") {\n            timeString = inputString.substring(0, inputString.length - 1);\n            isUTC = true;\n        }\n        else {\n            const number = new Number(inputString[inputString.length - 1]);\n            if (isNaN(number.valueOf()))\n                throw new Error(\"Wrong input string for conversion\");\n            timeString = inputString;\n        }\n        if (isUTC) {\n            if (timeString.indexOf(\"+\") !== -1)\n                throw new Error(\"Wrong input string for conversion\");\n            if (timeString.indexOf(\"-\") !== -1)\n                throw new Error(\"Wrong input string for conversion\");\n        }\n        else {\n            let multiplier = 1;\n            let differencePosition = timeString.indexOf(\"+\");\n            let differenceString = \"\";\n            if (differencePosition === -1) {\n                differencePosition = timeString.indexOf(\"-\");\n                multiplier = -1;\n            }\n            if (differencePosition !== -1) {\n                differenceString = timeString.substring(differencePosition + 1);\n                timeString = timeString.substring(0, differencePosition);\n                if ((differenceString.length !== 2) && (differenceString.length !== 4))\n                    throw new Error(\"Wrong input string for conversion\");\n                let number = parseInt(differenceString.substring(0, 2), 10);\n                if (isNaN(number.valueOf()))\n                    throw new Error(\"Wrong input string for conversion\");\n                hourDifference = multiplier * number;\n                if (differenceString.length === 4) {\n                    number = parseInt(differenceString.substring(2, 4), 10);\n                    if (isNaN(number.valueOf()))\n                        throw new Error(\"Wrong input string for conversion\");\n                    minuteDifference = multiplier * number;\n                }\n            }\n        }\n        let fractionPointPosition = timeString.indexOf(\".\");\n        if (fractionPointPosition === -1)\n            fractionPointPosition = timeString.indexOf(\",\");\n        if (fractionPointPosition !== -1) {\n            const fractionPartCheck = new Number(`0${timeString.substring(fractionPointPosition)}`);\n            if (isNaN(fractionPartCheck.valueOf()))\n                throw new Error(\"Wrong input string for conversion\");\n            fractionPart = fractionPartCheck.valueOf();\n            dateTimeString = timeString.substring(0, fractionPointPosition);\n        }\n        else\n            dateTimeString = timeString;\n        switch (true) {\n            case (dateTimeString.length === 8):\n                parser = /(\\d{4})(\\d{2})(\\d{2})/ig;\n                if (fractionPointPosition !== -1)\n                    throw new Error(\"Wrong input string for conversion\");\n                break;\n            case (dateTimeString.length === 10):\n                parser = /(\\d{4})(\\d{2})(\\d{2})(\\d{2})/ig;\n                if (fractionPointPosition !== -1) {\n                    let fractionResult = 60 * fractionPart;\n                    this.minute = Math.floor(fractionResult);\n                    fractionResult = 60 * (fractionResult - this.minute);\n                    this.second = Math.floor(fractionResult);\n                    fractionResult = 1000 * (fractionResult - this.second);\n                    this.millisecond = Math.floor(fractionResult);\n                }\n                break;\n            case (dateTimeString.length === 12):\n                parser = /(\\d{4})(\\d{2})(\\d{2})(\\d{2})(\\d{2})/ig;\n                if (fractionPointPosition !== -1) {\n                    let fractionResult = 60 * fractionPart;\n                    this.second = Math.floor(fractionResult);\n                    fractionResult = 1000 * (fractionResult - this.second);\n                    this.millisecond = Math.floor(fractionResult);\n                }\n                break;\n            case (dateTimeString.length === 14):\n                parser = /(\\d{4})(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{2})/ig;\n                if (fractionPointPosition !== -1) {\n                    const fractionResult = 1000 * fractionPart;\n                    this.millisecond = Math.floor(fractionResult);\n                }\n                break;\n            default:\n                throw new Error(\"Wrong input string for conversion\");\n        }\n        const parserArray = parser.exec(dateTimeString);\n        if (parserArray === null)\n            throw new Error(\"Wrong input string for conversion\");\n        for (let j = 1; j < parserArray.length; j++) {\n            switch (j) {\n                case 1:\n                    this.year = parseInt(parserArray[j], 10);\n                    break;\n                case 2:\n                    this.month = parseInt(parserArray[j], 10);\n                    break;\n                case 3:\n                    this.day = parseInt(parserArray[j], 10);\n                    break;\n                case 4:\n                    this.hour = parseInt(parserArray[j], 10) + hourDifference;\n                    break;\n                case 5:\n                    this.minute = parseInt(parserArray[j], 10) + minuteDifference;\n                    break;\n                case 6:\n                    this.second = parseInt(parserArray[j], 10);\n                    break;\n                default:\n                    throw new Error(\"Wrong input string for conversion\");\n            }\n        }\n        if (isUTC === false) {\n            const tempDate = new Date(this.year, this.month, this.day, this.hour, this.minute, this.second, this.millisecond);\n            this.year = tempDate.getUTCFullYear();\n            this.month = tempDate.getUTCMonth();\n            this.day = tempDate.getUTCDay();\n            this.hour = tempDate.getUTCHours();\n            this.minute = tempDate.getUTCMinutes();\n            this.second = tempDate.getUTCSeconds();\n            this.millisecond = tempDate.getUTCMilliseconds();\n        }\n    }\n    toString(encoding = \"iso\") {\n        if (encoding === \"iso\") {\n            const outputArray = [];\n            outputArray.push(pvutils.padNumber(this.year, 4));\n            outputArray.push(pvutils.padNumber(this.month, 2));\n            outputArray.push(pvutils.padNumber(this.day, 2));\n            outputArray.push(pvutils.padNumber(this.hour, 2));\n            outputArray.push(pvutils.padNumber(this.minute, 2));\n            outputArray.push(pvutils.padNumber(this.second, 2));\n            if (this.millisecond !== 0) {\n                outputArray.push(\".\");\n                outputArray.push(pvutils.padNumber(this.millisecond, 3));\n            }\n            outputArray.push(\"Z\");\n            return outputArray.join(\"\");\n        }\n        return super.toString(encoding);\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            millisecond: this.millisecond,\n        };\n    }\n}\n_a$5 = GeneralizedTime;\n(() => {\n    typeStore.GeneralizedTime = _a$5;\n})();\nGeneralizedTime.NAME = \"GeneralizedTime\";\n\nvar _a$4;\nclass DATE extends Utf8String {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 31;\n    }\n}\n_a$4 = DATE;\n(() => {\n    typeStore.DATE = _a$4;\n})();\nDATE.NAME = \"DATE\";\n\nvar _a$3;\nclass TimeOfDay extends Utf8String {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 32;\n    }\n}\n_a$3 = TimeOfDay;\n(() => {\n    typeStore.TimeOfDay = _a$3;\n})();\nTimeOfDay.NAME = \"TimeOfDay\";\n\nvar _a$2;\nclass DateTime extends Utf8String {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 33;\n    }\n}\n_a$2 = DateTime;\n(() => {\n    typeStore.DateTime = _a$2;\n})();\nDateTime.NAME = \"DateTime\";\n\nvar _a$1;\nclass Duration extends Utf8String {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 34;\n    }\n}\n_a$1 = Duration;\n(() => {\n    typeStore.Duration = _a$1;\n})();\nDuration.NAME = \"Duration\";\n\nvar _a;\nclass TIME extends Utf8String {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 14;\n    }\n}\n_a = TIME;\n(() => {\n    typeStore.TIME = _a;\n})();\nTIME.NAME = \"TIME\";\n\nclass Any {\n    constructor({ name = EMPTY_STRING, optional = false } = {}) {\n        this.name = name;\n        this.optional = optional;\n    }\n}\n\nclass Choice extends Any {\n    constructor({ value = [], ...parameters } = {}) {\n        super(parameters);\n        this.value = value;\n    }\n}\n\nclass Repeated extends Any {\n    constructor({ value = new Any(), local = false, ...parameters } = {}) {\n        super(parameters);\n        this.value = value;\n        this.local = local;\n    }\n}\n\nclass RawData {\n    get data() {\n        return this.dataView.slice().buffer;\n    }\n    set data(value) {\n        this.dataView = pvtsutils.BufferSourceConverter.toUint8Array(value);\n    }\n    constructor({ data = EMPTY_VIEW } = {}) {\n        this.dataView = pvtsutils.BufferSourceConverter.toUint8Array(data);\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        const endLength = inputOffset + inputLength;\n        this.dataView = pvtsutils.BufferSourceConverter.toUint8Array(inputBuffer).subarray(inputOffset, endLength);\n        return endLength;\n    }\n    toBER(_sizeOnly) {\n        return this.dataView.slice().buffer;\n    }\n}\n\nfunction compareSchema(root, inputData, inputSchema) {\n    if (inputSchema instanceof Choice) {\n        for (const element of inputSchema.value) {\n            const result = compareSchema(root, inputData, element);\n            if (result.verified) {\n                return {\n                    verified: true,\n                    result: root,\n                };\n            }\n        }\n        {\n            const _result = {\n                verified: false,\n                result: { error: \"Wrong values for Choice type\" },\n            };\n            if (inputSchema.hasOwnProperty(NAME))\n                _result.name = inputSchema.name;\n            return _result;\n        }\n    }\n    if (inputSchema instanceof Any) {\n        if (inputSchema.hasOwnProperty(NAME))\n            root[inputSchema.name] = inputData;\n        return {\n            verified: true,\n            result: root,\n        };\n    }\n    if ((root instanceof Object) === false) {\n        return {\n            verified: false,\n            result: { error: \"Wrong root object\" },\n        };\n    }\n    if ((inputData instanceof Object) === false) {\n        return {\n            verified: false,\n            result: { error: \"Wrong ASN.1 data\" },\n        };\n    }\n    if ((inputSchema instanceof Object) === false) {\n        return {\n            verified: false,\n            result: { error: \"Wrong ASN.1 schema\" },\n        };\n    }\n    if ((ID_BLOCK in inputSchema) === false) {\n        return {\n            verified: false,\n            result: { error: \"Wrong ASN.1 schema\" },\n        };\n    }\n    if ((FROM_BER in inputSchema.idBlock) === false) {\n        return {\n            verified: false,\n            result: { error: \"Wrong ASN.1 schema\" },\n        };\n    }\n    if ((TO_BER in inputSchema.idBlock) === false) {\n        return {\n            verified: false,\n            result: { error: \"Wrong ASN.1 schema\" },\n        };\n    }\n    const encodedId = inputSchema.idBlock.toBER(false);\n    if (encodedId.byteLength === 0) {\n        return {\n            verified: false,\n            result: { error: \"Error encoding idBlock for ASN.1 schema\" },\n        };\n    }\n    const decodedOffset = inputSchema.idBlock.fromBER(encodedId, 0, encodedId.byteLength);\n    if (decodedOffset === -1) {\n        return {\n            verified: false,\n            result: { error: \"Error decoding idBlock for ASN.1 schema\" },\n        };\n    }\n    if (inputSchema.idBlock.hasOwnProperty(TAG_CLASS) === false) {\n        return {\n            verified: false,\n            result: { error: \"Wrong ASN.1 schema\" },\n        };\n    }\n    if (inputSchema.idBlock.tagClass !== inputData.idBlock.tagClass) {\n        return {\n            verified: false,\n            result: root,\n        };\n    }\n    if (inputSchema.idBlock.hasOwnProperty(TAG_NUMBER) === false) {\n        return {\n            verified: false,\n            result: { error: \"Wrong ASN.1 schema\" },\n        };\n    }\n    if (inputSchema.idBlock.tagNumber !== inputData.idBlock.tagNumber) {\n        return {\n            verified: false,\n            result: root,\n        };\n    }\n    if (inputSchema.idBlock.hasOwnProperty(IS_CONSTRUCTED) === false) {\n        return {\n            verified: false,\n            result: { error: \"Wrong ASN.1 schema\" },\n        };\n    }\n    if (inputSchema.idBlock.isConstructed !== inputData.idBlock.isConstructed) {\n        return {\n            verified: false,\n            result: root,\n        };\n    }\n    if (!(IS_HEX_ONLY in inputSchema.idBlock)) {\n        return {\n            verified: false,\n            result: { error: \"Wrong ASN.1 schema\" },\n        };\n    }\n    if (inputSchema.idBlock.isHexOnly !== inputData.idBlock.isHexOnly) {\n        return {\n            verified: false,\n            result: root,\n        };\n    }\n    if (inputSchema.idBlock.isHexOnly) {\n        if ((VALUE_HEX_VIEW in inputSchema.idBlock) === false) {\n            return {\n                verified: false,\n                result: { error: \"Wrong ASN.1 schema\" },\n            };\n        }\n        const schemaView = inputSchema.idBlock.valueHexView;\n        const asn1View = inputData.idBlock.valueHexView;\n        if (schemaView.length !== asn1View.length) {\n            return {\n                verified: false,\n                result: root,\n            };\n        }\n        for (let i = 0; i < schemaView.length; i++) {\n            if (schemaView[i] !== asn1View[1]) {\n                return {\n                    verified: false,\n                    result: root,\n                };\n            }\n        }\n    }\n    if (inputSchema.name) {\n        inputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, EMPTY_STRING);\n        if (inputSchema.name)\n            root[inputSchema.name] = inputData;\n    }\n    if (inputSchema instanceof typeStore.Constructed) {\n        let admission = 0;\n        let result = {\n            verified: false,\n            result: { error: \"Unknown error\" },\n        };\n        let maxLength = inputSchema.valueBlock.value.length;\n        if (maxLength > 0) {\n            if (inputSchema.valueBlock.value[0] instanceof Repeated) {\n                maxLength = inputData.valueBlock.value.length;\n            }\n        }\n        if (maxLength === 0) {\n            return {\n                verified: true,\n                result: root,\n            };\n        }\n        if ((inputData.valueBlock.value.length === 0)\n            && (inputSchema.valueBlock.value.length !== 0)) {\n            let _optional = true;\n            for (let i = 0; i < inputSchema.valueBlock.value.length; i++)\n                _optional = _optional && (inputSchema.valueBlock.value[i].optional || false);\n            if (_optional) {\n                return {\n                    verified: true,\n                    result: root,\n                };\n            }\n            if (inputSchema.name) {\n                inputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, EMPTY_STRING);\n                if (inputSchema.name)\n                    delete root[inputSchema.name];\n            }\n            root.error = \"Inconsistent object length\";\n            return {\n                verified: false,\n                result: root,\n            };\n        }\n        for (let i = 0; i < maxLength; i++) {\n            if ((i - admission) >= inputData.valueBlock.value.length) {\n                if (inputSchema.valueBlock.value[i].optional === false) {\n                    const _result = {\n                        verified: false,\n                        result: root,\n                    };\n                    root.error = \"Inconsistent length between ASN.1 data and schema\";\n                    if (inputSchema.name) {\n                        inputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, EMPTY_STRING);\n                        if (inputSchema.name) {\n                            delete root[inputSchema.name];\n                            _result.name = inputSchema.name;\n                        }\n                    }\n                    return _result;\n                }\n            }\n            else {\n                if (inputSchema.valueBlock.value[0] instanceof Repeated) {\n                    result = compareSchema(root, inputData.valueBlock.value[i], inputSchema.valueBlock.value[0].value);\n                    if (result.verified === false) {\n                        if (inputSchema.valueBlock.value[0].optional)\n                            admission++;\n                        else {\n                            if (inputSchema.name) {\n                                inputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, EMPTY_STRING);\n                                if (inputSchema.name)\n                                    delete root[inputSchema.name];\n                            }\n                            return result;\n                        }\n                    }\n                    if ((NAME in inputSchema.valueBlock.value[0]) && (inputSchema.valueBlock.value[0].name.length > 0)) {\n                        let arrayRoot = {};\n                        if ((LOCAL in inputSchema.valueBlock.value[0]) && (inputSchema.valueBlock.value[0].local))\n                            arrayRoot = inputData;\n                        else\n                            arrayRoot = root;\n                        if (typeof arrayRoot[inputSchema.valueBlock.value[0].name] === \"undefined\")\n                            arrayRoot[inputSchema.valueBlock.value[0].name] = [];\n                        arrayRoot[inputSchema.valueBlock.value[0].name].push(inputData.valueBlock.value[i]);\n                    }\n                }\n                else {\n                    result = compareSchema(root, inputData.valueBlock.value[i - admission], inputSchema.valueBlock.value[i]);\n                    if (result.verified === false) {\n                        if (inputSchema.valueBlock.value[i].optional)\n                            admission++;\n                        else {\n                            if (inputSchema.name) {\n                                inputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, EMPTY_STRING);\n                                if (inputSchema.name)\n                                    delete root[inputSchema.name];\n                            }\n                            return result;\n                        }\n                    }\n                }\n            }\n        }\n        if (result.verified === false) {\n            const _result = {\n                verified: false,\n                result: root,\n            };\n            if (inputSchema.name) {\n                inputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, EMPTY_STRING);\n                if (inputSchema.name) {\n                    delete root[inputSchema.name];\n                    _result.name = inputSchema.name;\n                }\n            }\n            return _result;\n        }\n        return {\n            verified: true,\n            result: root,\n        };\n    }\n    if (inputSchema.primitiveSchema\n        && (VALUE_HEX_VIEW in inputData.valueBlock)) {\n        const asn1 = localFromBER(inputData.valueBlock.valueHexView);\n        if (asn1.offset === -1) {\n            const _result = {\n                verified: false,\n                result: asn1.result,\n            };\n            if (inputSchema.name) {\n                inputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, EMPTY_STRING);\n                if (inputSchema.name) {\n                    delete root[inputSchema.name];\n                    _result.name = inputSchema.name;\n                }\n            }\n            return _result;\n        }\n        return compareSchema(root, asn1.result, inputSchema.primitiveSchema);\n    }\n    return {\n        verified: true,\n        result: root,\n    };\n}\nfunction verifySchema(inputBuffer, inputSchema) {\n    if ((inputSchema instanceof Object) === false) {\n        return {\n            verified: false,\n            result: { error: \"Wrong ASN.1 schema type\" },\n        };\n    }\n    const asn1 = localFromBER(pvtsutils.BufferSourceConverter.toUint8Array(inputBuffer));\n    if (asn1.offset === -1) {\n        return {\n            verified: false,\n            result: asn1.result,\n        };\n    }\n    return compareSchema(asn1.result, asn1.result, inputSchema);\n}\n\nexport { Any, BaseBlock, BaseStringBlock, BitString, BmpString, Boolean, CharacterString, Choice, Constructed, DATE, DateTime, Duration, EndOfContent, Enumerated, GeneralString, GeneralizedTime, GraphicString, HexBlock, IA5String, Integer, Null, NumericString, ObjectIdentifier, OctetString, Primitive, PrintableString, RawData, RelativeObjectIdentifier, Repeated, Sequence, Set, TIME, TeletexString, TimeOfDay, UTCTime, UniversalString, Utf8String, ValueBlock, VideotexString, ViewWriter, VisibleString, compareSchema, fromBER, verifySchema };\n", "/*!\n Copyright (c) Peculiar Ventures, LLC\n*/\n\nfunction getUTCDate(date) {\r\n    return new Date(date.getTime() + (date.getTimezoneOffset() * 60000));\r\n}\r\nfunction getParametersValue(parameters, name, defaultValue) {\r\n    var _a;\r\n    if ((parameters instanceof Object) === false) {\r\n        return defaultValue;\r\n    }\r\n    return (_a = parameters[name]) !== null && _a !== void 0 ? _a : defaultValue;\r\n}\r\nfunction bufferToHexCodes(inputBuffer, inputOffset = 0, inputLength = (inputBuffer.byteLength - inputOffset), insertSpace = false) {\r\n    let result = \"\";\r\n    for (const item of (new Uint8Array(inputBuffer, inputOffset, inputLength))) {\r\n        const str = item.toString(16).toUpperCase();\r\n        if (str.length === 1) {\r\n            result += \"0\";\r\n        }\r\n        result += str;\r\n        if (insertSpace) {\r\n            result += \" \";\r\n        }\r\n    }\r\n    return result.trim();\r\n}\r\nfunction checkBufferParams(baseBlock, inputBuffer, inputOffset, inputLength) {\r\n    if (!(inputBuffer instanceof ArrayBuffer)) {\r\n        baseBlock.error = \"Wrong parameter: inputBuffer must be \\\"ArrayBuffer\\\"\";\r\n        return false;\r\n    }\r\n    if (!inputBuffer.byteLength) {\r\n        baseBlock.error = \"Wrong parameter: inputBuffer has zero length\";\r\n        return false;\r\n    }\r\n    if (inputOffset < 0) {\r\n        baseBlock.error = \"Wrong parameter: inputOffset less than zero\";\r\n        return false;\r\n    }\r\n    if (inputLength < 0) {\r\n        baseBlock.error = \"Wrong parameter: inputLength less than zero\";\r\n        return false;\r\n    }\r\n    if ((inputBuffer.byteLength - inputOffset - inputLength) < 0) {\r\n        baseBlock.error = \"End of input reached before message was fully decoded (inconsistent offset and length values)\";\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\nfunction utilFromBase(inputBuffer, inputBase) {\r\n    let result = 0;\r\n    if (inputBuffer.length === 1) {\r\n        return inputBuffer[0];\r\n    }\r\n    for (let i = (inputBuffer.length - 1); i >= 0; i--) {\r\n        result += inputBuffer[(inputBuffer.length - 1) - i] * Math.pow(2, inputBase * i);\r\n    }\r\n    return result;\r\n}\r\nfunction utilToBase(value, base, reserved = (-1)) {\r\n    const internalReserved = reserved;\r\n    let internalValue = value;\r\n    let result = 0;\r\n    let biggest = Math.pow(2, base);\r\n    for (let i = 1; i < 8; i++) {\r\n        if (value < biggest) {\r\n            let retBuf;\r\n            if (internalReserved < 0) {\r\n                retBuf = new ArrayBuffer(i);\r\n                result = i;\r\n            }\r\n            else {\r\n                if (internalReserved < i) {\r\n                    return (new ArrayBuffer(0));\r\n                }\r\n                retBuf = new ArrayBuffer(internalReserved);\r\n                result = internalReserved;\r\n            }\r\n            const retView = new Uint8Array(retBuf);\r\n            for (let j = (i - 1); j >= 0; j--) {\r\n                const basis = Math.pow(2, j * base);\r\n                retView[result - j - 1] = Math.floor(internalValue / basis);\r\n                internalValue -= (retView[result - j - 1]) * basis;\r\n            }\r\n            return retBuf;\r\n        }\r\n        biggest *= Math.pow(2, base);\r\n    }\r\n    return new ArrayBuffer(0);\r\n}\r\nfunction utilConcatBuf(...buffers) {\r\n    let outputLength = 0;\r\n    let prevLength = 0;\r\n    for (const buffer of buffers) {\r\n        outputLength += buffer.byteLength;\r\n    }\r\n    const retBuf = new ArrayBuffer(outputLength);\r\n    const retView = new Uint8Array(retBuf);\r\n    for (const buffer of buffers) {\r\n        retView.set(new Uint8Array(buffer), prevLength);\r\n        prevLength += buffer.byteLength;\r\n    }\r\n    return retBuf;\r\n}\r\nfunction utilConcatView(...views) {\r\n    let outputLength = 0;\r\n    let prevLength = 0;\r\n    for (const view of views) {\r\n        outputLength += view.length;\r\n    }\r\n    const retBuf = new ArrayBuffer(outputLength);\r\n    const retView = new Uint8Array(retBuf);\r\n    for (const view of views) {\r\n        retView.set(view, prevLength);\r\n        prevLength += view.length;\r\n    }\r\n    return retView;\r\n}\r\nfunction utilDecodeTC() {\r\n    const buf = new Uint8Array(this.valueHex);\r\n    if (this.valueHex.byteLength >= 2) {\r\n        const condition1 = (buf[0] === 0xFF) && (buf[1] & 0x80);\r\n        const condition2 = (buf[0] === 0x00) && ((buf[1] & 0x80) === 0x00);\r\n        if (condition1 || condition2) {\r\n            this.warnings.push(\"Needlessly long format\");\r\n        }\r\n    }\r\n    const bigIntBuffer = new ArrayBuffer(this.valueHex.byteLength);\r\n    const bigIntView = new Uint8Array(bigIntBuffer);\r\n    for (let i = 0; i < this.valueHex.byteLength; i++) {\r\n        bigIntView[i] = 0;\r\n    }\r\n    bigIntView[0] = (buf[0] & 0x80);\r\n    const bigInt = utilFromBase(bigIntView, 8);\r\n    const smallIntBuffer = new ArrayBuffer(this.valueHex.byteLength);\r\n    const smallIntView = new Uint8Array(smallIntBuffer);\r\n    for (let j = 0; j < this.valueHex.byteLength; j++) {\r\n        smallIntView[j] = buf[j];\r\n    }\r\n    smallIntView[0] &= 0x7F;\r\n    const smallInt = utilFromBase(smallIntView, 8);\r\n    return (smallInt - bigInt);\r\n}\r\nfunction utilEncodeTC(value) {\r\n    const modValue = (value < 0) ? (value * (-1)) : value;\r\n    let bigInt = 128;\r\n    for (let i = 1; i < 8; i++) {\r\n        if (modValue <= bigInt) {\r\n            if (value < 0) {\r\n                const smallInt = bigInt - modValue;\r\n                const retBuf = utilToBase(smallInt, 8, i);\r\n                const retView = new Uint8Array(retBuf);\r\n                retView[0] |= 0x80;\r\n                return retBuf;\r\n            }\r\n            let retBuf = utilToBase(modValue, 8, i);\r\n            let retView = new Uint8Array(retBuf);\r\n            if (retView[0] & 0x80) {\r\n                const tempBuf = retBuf.slice(0);\r\n                const tempView = new Uint8Array(tempBuf);\r\n                retBuf = new ArrayBuffer(retBuf.byteLength + 1);\r\n                retView = new Uint8Array(retBuf);\r\n                for (let k = 0; k < tempBuf.byteLength; k++) {\r\n                    retView[k + 1] = tempView[k];\r\n                }\r\n                retView[0] = 0x00;\r\n            }\r\n            return retBuf;\r\n        }\r\n        bigInt *= Math.pow(2, 8);\r\n    }\r\n    return (new ArrayBuffer(0));\r\n}\r\nfunction isEqualBuffer(inputBuffer1, inputBuffer2) {\r\n    if (inputBuffer1.byteLength !== inputBuffer2.byteLength) {\r\n        return false;\r\n    }\r\n    const view1 = new Uint8Array(inputBuffer1);\r\n    const view2 = new Uint8Array(inputBuffer2);\r\n    for (let i = 0; i < view1.length; i++) {\r\n        if (view1[i] !== view2[i]) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction padNumber(inputNumber, fullLength) {\r\n    const str = inputNumber.toString(10);\r\n    if (fullLength < str.length) {\r\n        return \"\";\r\n    }\r\n    const dif = fullLength - str.length;\r\n    const padding = new Array(dif);\r\n    for (let i = 0; i < dif; i++) {\r\n        padding[i] = \"0\";\r\n    }\r\n    const paddingString = padding.join(\"\");\r\n    return paddingString.concat(str);\r\n}\r\nconst base64Template = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\r\nconst base64UrlTemplate = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=\";\r\nfunction toBase64(input, useUrlTemplate = false, skipPadding = false, skipLeadingZeros = false) {\r\n    let i = 0;\r\n    let flag1 = 0;\r\n    let flag2 = 0;\r\n    let output = \"\";\r\n    const template = (useUrlTemplate) ? base64UrlTemplate : base64Template;\r\n    if (skipLeadingZeros) {\r\n        let nonZeroPosition = 0;\r\n        for (let i = 0; i < input.length; i++) {\r\n            if (input.charCodeAt(i) !== 0) {\r\n                nonZeroPosition = i;\r\n                break;\r\n            }\r\n        }\r\n        input = input.slice(nonZeroPosition);\r\n    }\r\n    while (i < input.length) {\r\n        const chr1 = input.charCodeAt(i++);\r\n        if (i >= input.length) {\r\n            flag1 = 1;\r\n        }\r\n        const chr2 = input.charCodeAt(i++);\r\n        if (i >= input.length) {\r\n            flag2 = 1;\r\n        }\r\n        const chr3 = input.charCodeAt(i++);\r\n        const enc1 = chr1 >> 2;\r\n        const enc2 = ((chr1 & 0x03) << 4) | (chr2 >> 4);\r\n        let enc3 = ((chr2 & 0x0F) << 2) | (chr3 >> 6);\r\n        let enc4 = chr3 & 0x3F;\r\n        if (flag1 === 1) {\r\n            enc3 = enc4 = 64;\r\n        }\r\n        else {\r\n            if (flag2 === 1) {\r\n                enc4 = 64;\r\n            }\r\n        }\r\n        if (skipPadding) {\r\n            if (enc3 === 64) {\r\n                output += `${template.charAt(enc1)}${template.charAt(enc2)}`;\r\n            }\r\n            else {\r\n                if (enc4 === 64) {\r\n                    output += `${template.charAt(enc1)}${template.charAt(enc2)}${template.charAt(enc3)}`;\r\n                }\r\n                else {\r\n                    output += `${template.charAt(enc1)}${template.charAt(enc2)}${template.charAt(enc3)}${template.charAt(enc4)}`;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            output += `${template.charAt(enc1)}${template.charAt(enc2)}${template.charAt(enc3)}${template.charAt(enc4)}`;\r\n        }\r\n    }\r\n    return output;\r\n}\r\nfunction fromBase64(input, useUrlTemplate = false, cutTailZeros = false) {\r\n    const template = (useUrlTemplate) ? base64UrlTemplate : base64Template;\r\n    function indexOf(toSearch) {\r\n        for (let i = 0; i < 64; i++) {\r\n            if (template.charAt(i) === toSearch)\r\n                return i;\r\n        }\r\n        return 64;\r\n    }\r\n    function test(incoming) {\r\n        return ((incoming === 64) ? 0x00 : incoming);\r\n    }\r\n    let i = 0;\r\n    let output = \"\";\r\n    while (i < input.length) {\r\n        const enc1 = indexOf(input.charAt(i++));\r\n        const enc2 = (i >= input.length) ? 0x00 : indexOf(input.charAt(i++));\r\n        const enc3 = (i >= input.length) ? 0x00 : indexOf(input.charAt(i++));\r\n        const enc4 = (i >= input.length) ? 0x00 : indexOf(input.charAt(i++));\r\n        const chr1 = (test(enc1) << 2) | (test(enc2) >> 4);\r\n        const chr2 = ((test(enc2) & 0x0F) << 4) | (test(enc3) >> 2);\r\n        const chr3 = ((test(enc3) & 0x03) << 6) | test(enc4);\r\n        output += String.fromCharCode(chr1);\r\n        if (enc3 !== 64) {\r\n            output += String.fromCharCode(chr2);\r\n        }\r\n        if (enc4 !== 64) {\r\n            output += String.fromCharCode(chr3);\r\n        }\r\n    }\r\n    if (cutTailZeros) {\r\n        const outputLength = output.length;\r\n        let nonZeroStart = (-1);\r\n        for (let i = (outputLength - 1); i >= 0; i--) {\r\n            if (output.charCodeAt(i) !== 0) {\r\n                nonZeroStart = i;\r\n                break;\r\n            }\r\n        }\r\n        if (nonZeroStart !== (-1)) {\r\n            output = output.slice(0, nonZeroStart + 1);\r\n        }\r\n        else {\r\n            output = \"\";\r\n        }\r\n    }\r\n    return output;\r\n}\r\nfunction arrayBufferToString(buffer) {\r\n    let resultString = \"\";\r\n    const view = new Uint8Array(buffer);\r\n    for (const element of view) {\r\n        resultString += String.fromCharCode(element);\r\n    }\r\n    return resultString;\r\n}\r\nfunction stringToArrayBuffer(str) {\r\n    const stringLength = str.length;\r\n    const resultBuffer = new ArrayBuffer(stringLength);\r\n    const resultView = new Uint8Array(resultBuffer);\r\n    for (let i = 0; i < stringLength; i++) {\r\n        resultView[i] = str.charCodeAt(i);\r\n    }\r\n    return resultBuffer;\r\n}\r\nconst log2 = Math.log(2);\r\nfunction nearestPowerOf2(length) {\r\n    const base = (Math.log(length) / log2);\r\n    const floor = Math.floor(base);\r\n    const round = Math.round(base);\r\n    return ((floor === round) ? floor : round);\r\n}\r\nfunction clearProps(object, propsArray) {\r\n    for (const prop of propsArray) {\r\n        delete object[prop];\r\n    }\r\n}\n\nexport { arrayBufferToString, bufferToHexCodes, checkBufferParams, clearProps, fromBase64, getParametersValue, getUTCDate, isEqualBuffer, nearestPowerOf2, padNumber, stringToArrayBuffer, toBase64, utilConcatBuf, utilConcatView, utilDecodeTC, utilEncodeTC, utilFromBase, utilToBase };\n", "export var AsnTypeTypes;\n(function (AsnTypeTypes) {\n    AsnTypeTypes[AsnTypeTypes[\"Sequence\"] = 0] = \"Sequence\";\n    AsnTypeTypes[AsnTypeTypes[\"Set\"] = 1] = \"Set\";\n    AsnTypeTypes[AsnTypeTypes[\"Choice\"] = 2] = \"Choice\";\n})(AsnTypeTypes || (AsnTypeTypes = {}));\nexport var AsnPropTypes;\n(function (AsnPropTypes) {\n    AsnPropTypes[AsnPropTypes[\"Any\"] = 1] = \"Any\";\n    AsnPropTypes[AsnPropTypes[\"Boolean\"] = 2] = \"Boolean\";\n    AsnPropTypes[AsnPropTypes[\"OctetString\"] = 3] = \"OctetString\";\n    AsnPropTypes[AsnPropTypes[\"BitString\"] = 4] = \"BitString\";\n    AsnPropTypes[AsnPropTypes[\"Integer\"] = 5] = \"Integer\";\n    AsnPropTypes[AsnPropTypes[\"Enumerated\"] = 6] = \"Enumerated\";\n    AsnPropTypes[AsnPropTypes[\"ObjectIdentifier\"] = 7] = \"ObjectIdentifier\";\n    AsnPropTypes[AsnPropTypes[\"Utf8String\"] = 8] = \"Utf8String\";\n    AsnPropTypes[AsnPropTypes[\"BmpString\"] = 9] = \"BmpString\";\n    AsnPropTypes[AsnPropTypes[\"UniversalString\"] = 10] = \"UniversalString\";\n    AsnPropTypes[AsnPropTypes[\"NumericString\"] = 11] = \"NumericString\";\n    AsnPropTypes[AsnPropTypes[\"PrintableString\"] = 12] = \"PrintableString\";\n    AsnPropTypes[AsnPropTypes[\"TeletexString\"] = 13] = \"TeletexString\";\n    AsnPropTypes[AsnPropTypes[\"VideotexString\"] = 14] = \"VideotexString\";\n    AsnPropTypes[AsnPropTypes[\"IA5String\"] = 15] = \"IA5String\";\n    AsnPropTypes[AsnPropTypes[\"GraphicString\"] = 16] = \"GraphicString\";\n    AsnPropTypes[AsnPropTypes[\"VisibleString\"] = 17] = \"VisibleString\";\n    AsnPropTypes[AsnPropTypes[\"GeneralString\"] = 18] = \"GeneralString\";\n    AsnPropTypes[AsnPropTypes[\"CharacterString\"] = 19] = \"CharacterString\";\n    AsnPropTypes[AsnPropTypes[\"UTCTime\"] = 20] = \"UTCTime\";\n    AsnPropTypes[AsnPropTypes[\"GeneralizedTime\"] = 21] = \"GeneralizedTime\";\n    AsnPropTypes[AsnPropTypes[\"DATE\"] = 22] = \"DATE\";\n    AsnPropTypes[AsnPropTypes[\"TimeOfDay\"] = 23] = \"TimeOfDay\";\n    AsnPropTypes[AsnPropTypes[\"DateTime\"] = 24] = \"DateTime\";\n    AsnPropTypes[AsnPropTypes[\"Duration\"] = 25] = \"Duration\";\n    AsnPropTypes[AsnPropTypes[\"TIME\"] = 26] = \"TIME\";\n    AsnPropTypes[AsnPropTypes[\"Null\"] = 27] = \"Null\";\n})(AsnPropTypes || (AsnPropTypes = {}));\n", "export * from \"./bit_string\";\nexport * from \"./octet_string\";\n", "import * as asn1js from \"asn1js\";\nimport { BufferSourceConverter } from \"pvtsutils\";\nexport class BitString {\n    constructor(params, unusedBits = 0) {\n        this.unusedBits = 0;\n        this.value = new ArrayBuffer(0);\n        if (params) {\n            if (typeof params === \"number\") {\n                this.fromNumber(params);\n            }\n            else if (BufferSourceConverter.isBufferSource(params)) {\n                this.unusedBits = unusedBits;\n                this.value = BufferSourceConverter.toArrayBuffer(params);\n            }\n            else {\n                throw TypeError(\"Unsupported type of 'params' argument for BitString\");\n            }\n        }\n    }\n    fromASN(asn) {\n        if (!(asn instanceof asn1js.BitString)) {\n            throw new TypeError(\"Argument 'asn' is not instance of ASN.1 BitString\");\n        }\n        this.unusedBits = asn.valueBlock.unusedBits;\n        this.value = asn.valueBlock.valueHex;\n        return this;\n    }\n    toASN() {\n        return new asn1js.BitString({ unusedBits: this.unusedBits, valueHex: this.value });\n    }\n    toSchema(name) {\n        return new asn1js.BitString({ name });\n    }\n    toNumber() {\n        let res = \"\";\n        const uintArray = new Uint8Array(this.value);\n        for (const octet of uintArray) {\n            res += octet.toString(2).padStart(8, \"0\");\n        }\n        res = res.split(\"\").reverse().join(\"\");\n        if (this.unusedBits) {\n            res = res.slice(this.unusedBits).padStart(this.unusedBits, \"0\");\n        }\n        return parseInt(res, 2);\n    }\n    fromNumber(value) {\n        let bits = value.toString(2);\n        const octetSize = (bits.length + 7) >> 3;\n        this.unusedBits = (octetSize << 3) - bits.length;\n        const octets = new Uint8Array(octetSize);\n        bits = bits\n            .padStart(octetSize << 3, \"0\")\n            .split(\"\")\n            .reverse()\n            .join(\"\");\n        let index = 0;\n        while (index < octetSize) {\n            octets[index] = parseInt(bits.slice(index << 3, (index << 3) + 8), 2);\n            index++;\n        }\n        this.value = octets.buffer;\n    }\n}\n", "import * as asn1js from \"asn1js\";\nimport { BufferSourceConverter } from \"pvtsutils\";\nexport class OctetString {\n    get byteLength() {\n        return this.buffer.byteLength;\n    }\n    get byteOffset() {\n        return 0;\n    }\n    constructor(param) {\n        if (typeof param === \"number\") {\n            this.buffer = new ArrayBuffer(param);\n        }\n        else {\n            if (BufferSourceConverter.isBufferSource(param)) {\n                this.buffer = BufferSourceConverter.toArrayBuffer(param);\n            }\n            else if (Array.isArray(param)) {\n                this.buffer = new Uint8Array(param);\n            }\n            else {\n                this.buffer = new ArrayBuffer(0);\n            }\n        }\n    }\n    fromASN(asn) {\n        if (!(asn instanceof asn1js.OctetString)) {\n            throw new TypeError(\"Argument 'asn' is not instance of ASN.1 OctetString\");\n        }\n        this.buffer = asn.valueBlock.valueHex;\n        return this;\n    }\n    toASN() {\n        return new asn1js.OctetString({ valueHex: this.buffer });\n    }\n    toSchema(name) {\n        return new asn1js.OctetString({ name });\n    }\n}\n", "import * as converters from \"./converters\";\nimport { AsnTypeTypes } from \"./enums\";\nimport { schemaStorage } from \"./storage\";\nexport const AsnType = (options) => (target) => {\n    let schema;\n    if (!schemaStorage.has(target)) {\n        schema = schemaStorage.createDefault(target);\n        schemaStorage.set(target, schema);\n    }\n    else {\n        schema = schemaStorage.get(target);\n    }\n    Object.assign(schema, options);\n};\nexport const AsnChoiceType = () => AsnType({ type: AsnTypeTypes.Choice });\nexport const AsnSetType = (options) => AsnType({ type: AsnTypeTypes.Set, ...options });\nexport const AsnSequenceType = (options) => AsnType({ type: AsnTypeTypes.Sequence, ...options });\nexport const AsnProp = (options) => (target, propertyKey) => {\n    let schema;\n    if (!schemaStorage.has(target.constructor)) {\n        schema = schemaStorage.createDefault(target.constructor);\n        schemaStorage.set(target.constructor, schema);\n    }\n    else {\n        schema = schemaStorage.get(target.constructor);\n    }\n    const copyOptions = Object.assign({}, options);\n    if (typeof copyOptions.type === \"number\" && !copyOptions.converter) {\n        const defaultConverter = converters.defaultConverter(options.type);\n        if (!defaultConverter) {\n            throw new Error(`Cannot get default converter for property '${propertyKey}' of ${target.constructor.name}`);\n        }\n        copyOptions.converter = defaultConverter;\n    }\n    copyOptions.raw = options.raw;\n    schema.items[propertyKey] = copyOptions;\n};\n", "import { AsnSchemaStorage } from \"./schema\";\nexport const schemaStorage = new AsnSchemaStorage();\n", "import * as asn1js from \"asn1js\";\nimport { AsnPropTypes, AsnTypeTypes } from \"./enums\";\nimport { isConvertible } from \"./helper\";\nexport class AsnSchemaStorage {\n    constructor() {\n        this.items = new WeakMap();\n    }\n    has(target) {\n        return this.items.has(target);\n    }\n    get(target, checkSchema = false) {\n        const schema = this.items.get(target);\n        if (!schema) {\n            throw new Error(`Cannot get schema for '${target.prototype.constructor.name}' target`);\n        }\n        if (checkSchema && !schema.schema) {\n            throw new Error(`Schema '${target.prototype.constructor.name}' doesn't contain ASN.1 schema. Call 'AsnSchemaStorage.cache'.`);\n        }\n        return schema;\n    }\n    cache(target) {\n        const schema = this.get(target);\n        if (!schema.schema) {\n            schema.schema = this.create(target, true);\n        }\n    }\n    createDefault(target) {\n        const schema = { type: AsnTypeTypes.Sequence, items: {} };\n        const parentSchema = this.findParentSchema(target);\n        if (parentSchema) {\n            Object.assign(schema, parentSchema);\n            schema.items = Object.assign({}, schema.items, parentSchema.items);\n        }\n        return schema;\n    }\n    create(target, useNames) {\n        const schema = this.items.get(target) || this.createDefault(target);\n        const asn1Value = [];\n        for (const key in schema.items) {\n            const item = schema.items[key];\n            const name = useNames ? key : \"\";\n            let asn1Item;\n            if (typeof item.type === \"number\") {\n                const Asn1TypeName = AsnPropTypes[item.type];\n                const Asn1Type = asn1js[Asn1TypeName];\n                if (!Asn1Type) {\n                    throw new Error(`Cannot get ASN1 class by name '${Asn1TypeName}'`);\n                }\n                asn1Item = new Asn1Type({ name });\n            }\n            else if (isConvertible(item.type)) {\n                const instance = new item.type();\n                asn1Item = instance.toSchema(name);\n            }\n            else if (item.optional) {\n                const itemSchema = this.get(item.type);\n                if (itemSchema.type === AsnTypeTypes.Choice) {\n                    asn1Item = new asn1js.Any({ name });\n                }\n                else {\n                    asn1Item = this.create(item.type, false);\n                    asn1Item.name = name;\n                }\n            }\n            else {\n                asn1Item = new asn1js.Any({ name });\n            }\n            const optional = !!item.optional || item.defaultValue !== undefined;\n            if (item.repeated) {\n                asn1Item.name = \"\";\n                const Container = item.repeated === \"set\" ? asn1js.Set : asn1js.Sequence;\n                asn1Item = new Container({\n                    name: \"\",\n                    value: [new asn1js.Repeated({ name, value: asn1Item })],\n                });\n            }\n            if (item.context !== null && item.context !== undefined) {\n                if (item.implicit) {\n                    if (typeof item.type === \"number\" || isConvertible(item.type)) {\n                        const Container = item.repeated ? asn1js.Constructed : asn1js.Primitive;\n                        asn1Value.push(new Container({ name, optional, idBlock: { tagClass: 3, tagNumber: item.context } }));\n                    }\n                    else {\n                        this.cache(item.type);\n                        const isRepeated = !!item.repeated;\n                        let value = !isRepeated ? this.get(item.type, true).schema : asn1Item;\n                        value =\n                            \"valueBlock\" in value\n                                ? value.valueBlock.value\n                                :\n                                    value.value;\n                        asn1Value.push(new asn1js.Constructed({\n                            name: !isRepeated ? name : \"\",\n                            optional,\n                            idBlock: { tagClass: 3, tagNumber: item.context },\n                            value: value,\n                        }));\n                    }\n                }\n                else {\n                    asn1Value.push(new asn1js.Constructed({\n                        optional,\n                        idBlock: { tagClass: 3, tagNumber: item.context },\n                        value: [asn1Item],\n                    }));\n                }\n            }\n            else {\n                asn1Item.optional = optional;\n                asn1Value.push(asn1Item);\n            }\n        }\n        switch (schema.type) {\n            case AsnTypeTypes.Sequence:\n                return new asn1js.Sequence({ value: asn1Value, name: \"\" });\n            case AsnTypeTypes.Set:\n                return new asn1js.Set({ value: asn1Value, name: \"\" });\n            case AsnTypeTypes.Choice:\n                return new asn1js.Choice({ value: asn1Value, name: \"\" });\n            default:\n                throw new Error(`Unsupported ASN1 type in use`);\n        }\n    }\n    set(target, schema) {\n        this.items.set(target, schema);\n        return this;\n    }\n    findParentSchema(target) {\n        const parent = Object.getPrototypeOf(target);\n        if (parent) {\n            const schema = this.items.get(parent);\n            return schema || this.findParentSchema(parent);\n        }\n        return null;\n    }\n}\n", "export function isConvertible(target) {\n    if (typeof target === \"function\" && target.prototype) {\n        if (target.prototype.toASN && target.prototype.fromASN) {\n            return true;\n        }\n        else {\n            return isConvertible(target.prototype);\n        }\n    }\n    else {\n        return !!(target && typeof target === \"object\" && \"toASN\" in target && \"fromASN\" in target);\n    }\n}\nexport function isTypeOfArray(target) {\n    var _a;\n    if (target) {\n        const proto = Object.getPrototypeOf(target);\n        if (((_a = proto === null || proto === void 0 ? void 0 : proto.prototype) === null || _a === void 0 ? void 0 : _a.constructor) === Array) {\n            return true;\n        }\n        return isTypeOfArray(proto);\n    }\n    return false;\n}\nexport function isArrayEqual(bytes1, bytes2) {\n    if (!(bytes1 && bytes2)) {\n        return false;\n    }\n    if (bytes1.byteLength !== bytes2.byteLength) {\n        return false;\n    }\n    const b1 = new Uint8Array(bytes1);\n    const b2 = new Uint8Array(bytes2);\n    for (let i = 0; i < bytes1.byteLength; i++) {\n        if (b1[i] !== b2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n", "import * as asn1js from \"asn1js\";\nimport { AsnPropTypes, AsnTypeTypes } from \"./enums\";\nimport * as converters from \"./converters\";\nimport { AsnSchemaValidationError } from \"./errors\";\nimport { isConvertible, isTypeOfArray } from \"./helper\";\nimport { schemaStorage } from \"./storage\";\nexport class AsnParser {\n    static parse(data, target) {\n        const asn1Parsed = asn1js.fromBER(data);\n        if (asn1Parsed.result.error) {\n            throw new Error(asn1Parsed.result.error);\n        }\n        const res = this.fromASN(asn1Parsed.result, target);\n        return res;\n    }\n    static fromASN(asn1Schema, target) {\n        try {\n            if (isConvertible(target)) {\n                const value = new target();\n                return value.fromASN(asn1Schema);\n            }\n            const schema = schemaStorage.get(target);\n            schemaStorage.cache(target);\n            let targetSchema = schema.schema;\n            const choiceResult = this.handleChoiceTypes(asn1Schema, schema, target, targetSchema);\n            if (choiceResult === null || choiceResult === void 0 ? void 0 : choiceResult.result) {\n                return choiceResult.result;\n            }\n            if (choiceResult === null || choiceResult === void 0 ? void 0 : choiceResult.targetSchema) {\n                targetSchema = choiceResult.targetSchema;\n            }\n            const sequenceResult = this.handleSequenceTypes(asn1Schema, schema, target, targetSchema);\n            const res = new target();\n            if (isTypeOfArray(target)) {\n                return this.handleArrayTypes(asn1Schema, schema, target);\n            }\n            this.processSchemaItems(schema, sequenceResult, res);\n            return res;\n        }\n        catch (error) {\n            if (error instanceof AsnSchemaValidationError) {\n                error.schemas.push(target.name);\n            }\n            throw error;\n        }\n    }\n    static handleChoiceTypes(asn1Schema, schema, target, targetSchema) {\n        if (asn1Schema.constructor === asn1js.Constructed &&\n            schema.type === AsnTypeTypes.Choice &&\n            asn1Schema.idBlock.tagClass === 3) {\n            for (const key in schema.items) {\n                const schemaItem = schema.items[key];\n                if (schemaItem.context === asn1Schema.idBlock.tagNumber && schemaItem.implicit) {\n                    if (typeof schemaItem.type === \"function\" &&\n                        schemaStorage.has(schemaItem.type)) {\n                        const fieldSchema = schemaStorage.get(schemaItem.type);\n                        if (fieldSchema && fieldSchema.type === AsnTypeTypes.Sequence) {\n                            const newSeq = new asn1js.Sequence();\n                            if (\"value\" in asn1Schema.valueBlock &&\n                                Array.isArray(asn1Schema.valueBlock.value) &&\n                                \"value\" in newSeq.valueBlock) {\n                                newSeq.valueBlock.value = asn1Schema.valueBlock.value;\n                                const fieldValue = this.fromASN(newSeq, schemaItem.type);\n                                const res = new target();\n                                res[key] = fieldValue;\n                                return { result: res };\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        else if (asn1Schema.constructor === asn1js.Constructed &&\n            schema.type !== AsnTypeTypes.Choice) {\n            const newTargetSchema = new asn1js.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: asn1Schema.idBlock.tagNumber,\n                },\n                value: schema.schema.valueBlock.value,\n            });\n            for (const key in schema.items) {\n                delete asn1Schema[key];\n            }\n            return { targetSchema: newTargetSchema };\n        }\n        return null;\n    }\n    static handleSequenceTypes(asn1Schema, schema, target, targetSchema) {\n        if (schema.type === AsnTypeTypes.Sequence) {\n            const asn1ComparedSchema = asn1js.compareSchema({}, asn1Schema, targetSchema);\n            if (!asn1ComparedSchema.verified) {\n                throw new AsnSchemaValidationError(`Data does not match to ${target.name} ASN1 schema.${asn1ComparedSchema.result.error ? ` ${asn1ComparedSchema.result.error}` : \"\"}`);\n            }\n            return asn1ComparedSchema;\n        }\n        else {\n            const asn1ComparedSchema = asn1js.compareSchema({}, asn1Schema, targetSchema);\n            if (!asn1ComparedSchema.verified) {\n                throw new AsnSchemaValidationError(`Data does not match to ${target.name} ASN1 schema.${asn1ComparedSchema.result.error ? ` ${asn1ComparedSchema.result.error}` : \"\"}`);\n            }\n            return asn1ComparedSchema;\n        }\n    }\n    static processRepeatedField(asn1Elements, asn1Index, schemaItem) {\n        let elementsToProcess = asn1Elements.slice(asn1Index);\n        if (elementsToProcess.length === 1 && elementsToProcess[0].constructor.name === \"Sequence\") {\n            const seq = elementsToProcess[0];\n            if (seq.valueBlock && seq.valueBlock.value && Array.isArray(seq.valueBlock.value)) {\n                elementsToProcess = seq.valueBlock.value;\n            }\n        }\n        if (typeof schemaItem.type === \"number\") {\n            const converter = converters.defaultConverter(schemaItem.type);\n            if (!converter)\n                throw new Error(`No converter for ASN.1 type ${schemaItem.type}`);\n            return elementsToProcess\n                .filter((el) => el && el.valueBlock)\n                .map((el) => {\n                try {\n                    return converter.fromASN(el);\n                }\n                catch {\n                    return undefined;\n                }\n            })\n                .filter((v) => v !== undefined);\n        }\n        else {\n            return elementsToProcess\n                .filter((el) => el && el.valueBlock)\n                .map((el) => {\n                try {\n                    return this.fromASN(el, schemaItem.type);\n                }\n                catch {\n                    return undefined;\n                }\n            })\n                .filter((v) => v !== undefined);\n        }\n    }\n    static processPrimitiveField(asn1Element, schemaItem) {\n        const converter = converters.defaultConverter(schemaItem.type);\n        if (!converter)\n            throw new Error(`No converter for ASN.1 type ${schemaItem.type}`);\n        return converter.fromASN(asn1Element);\n    }\n    static isOptionalChoiceField(schemaItem) {\n        return (schemaItem.optional &&\n            typeof schemaItem.type === \"function\" &&\n            schemaStorage.has(schemaItem.type) &&\n            schemaStorage.get(schemaItem.type).type === AsnTypeTypes.Choice);\n    }\n    static processOptionalChoiceField(asn1Element, schemaItem) {\n        try {\n            const value = this.fromASN(asn1Element, schemaItem.type);\n            return { processed: true, value };\n        }\n        catch (err) {\n            if (err instanceof AsnSchemaValidationError &&\n                /Wrong values for Choice type/.test(err.message)) {\n                return { processed: false };\n            }\n            throw err;\n        }\n    }\n    static handleArrayTypes(asn1Schema, schema, target) {\n        if (!(\"value\" in asn1Schema.valueBlock && Array.isArray(asn1Schema.valueBlock.value))) {\n            throw new Error(`Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.`);\n        }\n        const itemType = schema.itemType;\n        if (typeof itemType === \"number\") {\n            const converter = converters.defaultConverter(itemType);\n            if (!converter) {\n                throw new Error(`Cannot get default converter for array item of ${target.name} ASN1 schema`);\n            }\n            return target.from(asn1Schema.valueBlock.value, (element) => converter.fromASN(element));\n        }\n        else {\n            return target.from(asn1Schema.valueBlock.value, (element) => this.fromASN(element, itemType));\n        }\n    }\n    static processSchemaItems(schema, asn1ComparedSchema, res) {\n        for (const key in schema.items) {\n            const asn1SchemaValue = asn1ComparedSchema.result[key];\n            if (!asn1SchemaValue) {\n                continue;\n            }\n            const schemaItem = schema.items[key];\n            const schemaItemType = schemaItem.type;\n            let parsedValue;\n            if (typeof schemaItemType === \"number\" || isConvertible(schemaItemType)) {\n                parsedValue = this.processPrimitiveSchemaItem(asn1SchemaValue, schemaItem, schemaItemType);\n            }\n            else {\n                parsedValue = this.processComplexSchemaItem(asn1SchemaValue, schemaItem, schemaItemType);\n            }\n            if (parsedValue &&\n                typeof parsedValue === \"object\" &&\n                \"value\" in parsedValue &&\n                \"raw\" in parsedValue) {\n                res[key] = parsedValue.value;\n                res[`${key}Raw`] = parsedValue.raw;\n            }\n            else {\n                res[key] = parsedValue;\n            }\n        }\n    }\n    static processPrimitiveSchemaItem(asn1SchemaValue, schemaItem, schemaItemType) {\n        var _a;\n        const converter = (_a = schemaItem.converter) !== null && _a !== void 0 ? _a : (isConvertible(schemaItemType)\n            ? new schemaItemType()\n            : null);\n        if (!converter) {\n            throw new Error(\"Converter is empty\");\n        }\n        if (schemaItem.repeated) {\n            return this.processRepeatedPrimitiveItem(asn1SchemaValue, schemaItem, converter);\n        }\n        else {\n            return this.processSinglePrimitiveItem(asn1SchemaValue, schemaItem, schemaItemType, converter);\n        }\n    }\n    static processRepeatedPrimitiveItem(asn1SchemaValue, schemaItem, converter) {\n        if (schemaItem.implicit) {\n            const Container = schemaItem.repeated === \"sequence\" ? asn1js.Sequence : asn1js.Set;\n            const newItem = new Container();\n            newItem.valueBlock = asn1SchemaValue.valueBlock;\n            const newItemAsn = asn1js.fromBER(newItem.toBER(false));\n            if (newItemAsn.offset === -1) {\n                throw new Error(`Cannot parse the child item. ${newItemAsn.result.error}`);\n            }\n            if (!(\"value\" in newItemAsn.result.valueBlock &&\n                Array.isArray(newItemAsn.result.valueBlock.value))) {\n                throw new Error(\"Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.\");\n            }\n            const value = newItemAsn.result.valueBlock.value;\n            return Array.from(value, (element) => converter.fromASN(element));\n        }\n        else {\n            return Array.from(asn1SchemaValue, (element) => converter.fromASN(element));\n        }\n    }\n    static processSinglePrimitiveItem(asn1SchemaValue, schemaItem, schemaItemType, converter) {\n        let value = asn1SchemaValue;\n        if (schemaItem.implicit) {\n            let newItem;\n            if (isConvertible(schemaItemType)) {\n                newItem = new schemaItemType().toSchema(\"\");\n            }\n            else {\n                const Asn1TypeName = AsnPropTypes[schemaItemType];\n                const Asn1Type = asn1js[Asn1TypeName];\n                if (!Asn1Type) {\n                    throw new Error(`Cannot get '${Asn1TypeName}' class from asn1js module`);\n                }\n                newItem = new Asn1Type();\n            }\n            newItem.valueBlock = value.valueBlock;\n            value = asn1js.fromBER(newItem.toBER(false)).result;\n        }\n        return converter.fromASN(value);\n    }\n    static processComplexSchemaItem(asn1SchemaValue, schemaItem, schemaItemType) {\n        if (schemaItem.repeated) {\n            if (!Array.isArray(asn1SchemaValue)) {\n                throw new Error(\"Cannot get list of items from the ASN.1 parsed value. ASN.1 value should be iterable.\");\n            }\n            return Array.from(asn1SchemaValue, (element) => this.fromASN(element, schemaItemType));\n        }\n        else {\n            const valueToProcess = this.handleImplicitTagging(asn1SchemaValue, schemaItem, schemaItemType);\n            if (this.isOptionalChoiceField(schemaItem)) {\n                try {\n                    return this.fromASN(valueToProcess, schemaItemType);\n                }\n                catch (err) {\n                    if (err instanceof AsnSchemaValidationError &&\n                        /Wrong values for Choice type/.test(err.message)) {\n                        return undefined;\n                    }\n                    throw err;\n                }\n            }\n            else {\n                const parsedValue = this.fromASN(valueToProcess, schemaItemType);\n                if (schemaItem.raw) {\n                    return {\n                        value: parsedValue,\n                        raw: asn1SchemaValue.valueBeforeDecodeView,\n                    };\n                }\n                return parsedValue;\n            }\n        }\n    }\n    static handleImplicitTagging(asn1SchemaValue, schemaItem, schemaItemType) {\n        if (schemaItem.implicit && typeof schemaItem.context === \"number\") {\n            const schema = schemaStorage.get(schemaItemType);\n            if (schema.type === AsnTypeTypes.Sequence) {\n                const newSeq = new asn1js.Sequence();\n                if (\"value\" in asn1SchemaValue.valueBlock &&\n                    Array.isArray(asn1SchemaValue.valueBlock.value) &&\n                    \"value\" in newSeq.valueBlock) {\n                    newSeq.valueBlock.value = asn1SchemaValue.valueBlock.value;\n                    return newSeq;\n                }\n            }\n            else if (schema.type === AsnTypeTypes.Set) {\n                const newSet = new asn1js.Set();\n                if (\"value\" in asn1SchemaValue.valueBlock &&\n                    Array.isArray(asn1SchemaValue.valueBlock.value) &&\n                    \"value\" in newSet.valueBlock) {\n                    newSet.valueBlock.value = asn1SchemaValue.valueBlock.value;\n                    return newSet;\n                }\n            }\n        }\n        return asn1SchemaValue;\n    }\n}\n", "export * from \"./schema_validation\";\n", "export class AsnSchemaValidationError extends Error {\n    constructor() {\n        super(...arguments);\n        this.schemas = [];\n    }\n}\n", "import * as asn1js from \"asn1js\";\nimport * as converters from \"./converters\";\nimport { AsnPropTypes, AsnTypeTypes } from \"./enums\";\nimport { isConvertible, isArrayEqual } from \"./helper\";\nimport { schemaStorage } from \"./storage\";\nexport class AsnSerializer {\n    static serialize(obj) {\n        if (obj instanceof asn1js.BaseBlock) {\n            return obj.toBER(false);\n        }\n        return this.toASN(obj).toBER(false);\n    }\n    static toASN(obj) {\n        if (obj && typeof obj === \"object\" && isConvertible(obj)) {\n            return obj.toASN();\n        }\n        if (!(obj && typeof obj === \"object\")) {\n            throw new TypeError(\"Parameter 1 should be type of Object.\");\n        }\n        const target = obj.constructor;\n        const schema = schemaStorage.get(target);\n        schemaStorage.cache(target);\n        let asn1Value = [];\n        if (schema.itemType) {\n            if (!Array.isArray(obj)) {\n                throw new TypeError(\"Parameter 1 should be type of Array.\");\n            }\n            if (typeof schema.itemType === \"number\") {\n                const converter = converters.defaultConverter(schema.itemType);\n                if (!converter) {\n                    throw new Error(`Cannot get default converter for array item of ${target.name} ASN1 schema`);\n                }\n                asn1Value = obj.map((o) => converter.toASN(o));\n            }\n            else {\n                asn1Value = obj.map((o) => this.toAsnItem({ type: schema.itemType }, \"[]\", target, o));\n            }\n        }\n        else {\n            for (const key in schema.items) {\n                const schemaItem = schema.items[key];\n                const objProp = obj[key];\n                if (objProp === undefined ||\n                    schemaItem.defaultValue === objProp ||\n                    (typeof schemaItem.defaultValue === \"object\" &&\n                        typeof objProp === \"object\" &&\n                        isArrayEqual(this.serialize(schemaItem.defaultValue), this.serialize(objProp)))) {\n                    continue;\n                }\n                const asn1Item = AsnSerializer.toAsnItem(schemaItem, key, target, objProp);\n                if (typeof schemaItem.context === \"number\") {\n                    if (schemaItem.implicit) {\n                        if (!schemaItem.repeated &&\n                            (typeof schemaItem.type === \"number\" || isConvertible(schemaItem.type))) {\n                            const value = {};\n                            value.valueHex =\n                                asn1Item instanceof asn1js.Null\n                                    ? asn1Item.valueBeforeDecodeView\n                                    : asn1Item.valueBlock.toBER();\n                            asn1Value.push(new asn1js.Primitive({\n                                optional: schemaItem.optional,\n                                idBlock: {\n                                    tagClass: 3,\n                                    tagNumber: schemaItem.context,\n                                },\n                                ...value,\n                            }));\n                        }\n                        else {\n                            asn1Value.push(new asn1js.Constructed({\n                                optional: schemaItem.optional,\n                                idBlock: {\n                                    tagClass: 3,\n                                    tagNumber: schemaItem.context,\n                                },\n                                value: asn1Item.valueBlock.value,\n                            }));\n                        }\n                    }\n                    else {\n                        asn1Value.push(new asn1js.Constructed({\n                            optional: schemaItem.optional,\n                            idBlock: {\n                                tagClass: 3,\n                                tagNumber: schemaItem.context,\n                            },\n                            value: [asn1Item],\n                        }));\n                    }\n                }\n                else if (schemaItem.repeated) {\n                    asn1Value = asn1Value.concat(asn1Item);\n                }\n                else {\n                    asn1Value.push(asn1Item);\n                }\n            }\n        }\n        let asnSchema;\n        switch (schema.type) {\n            case AsnTypeTypes.Sequence:\n                asnSchema = new asn1js.Sequence({ value: asn1Value });\n                break;\n            case AsnTypeTypes.Set:\n                asnSchema = new asn1js.Set({ value: asn1Value });\n                break;\n            case AsnTypeTypes.Choice:\n                if (!asn1Value[0]) {\n                    throw new Error(`Schema '${target.name}' has wrong data. Choice cannot be empty.`);\n                }\n                asnSchema = asn1Value[0];\n                break;\n        }\n        return asnSchema;\n    }\n    static toAsnItem(schemaItem, key, target, objProp) {\n        let asn1Item;\n        if (typeof schemaItem.type === \"number\") {\n            const converter = schemaItem.converter;\n            if (!converter) {\n                throw new Error(`Property '${key}' doesn't have converter for type ${AsnPropTypes[schemaItem.type]} in schema '${target.name}'`);\n            }\n            if (schemaItem.repeated) {\n                if (!Array.isArray(objProp)) {\n                    throw new TypeError(\"Parameter 'objProp' should be type of Array.\");\n                }\n                const items = Array.from(objProp, (element) => converter.toASN(element));\n                const Container = schemaItem.repeated === \"sequence\" ? asn1js.Sequence : asn1js.Set;\n                asn1Item = new Container({\n                    value: items,\n                });\n            }\n            else {\n                asn1Item = converter.toASN(objProp);\n            }\n        }\n        else {\n            if (schemaItem.repeated) {\n                if (!Array.isArray(objProp)) {\n                    throw new TypeError(\"Parameter 'objProp' should be type of Array.\");\n                }\n                const items = Array.from(objProp, (element) => this.toASN(element));\n                const Container = schemaItem.repeated === \"sequence\" ? asn1js.Sequence : asn1js.Set;\n                asn1Item = new Container({\n                    value: items,\n                });\n            }\n            else {\n                asn1Item = this.toASN(objProp);\n            }\n        }\n        return asn1Item;\n    }\n}\n", "export class AsnArray extends Array {\n    constructor(items = []) {\n        if (typeof items === \"number\") {\n            super(items);\n        }\n        else {\n            super();\n            for (const item of items) {\n                this.push(item);\n            }\n        }\n    }\n}\n", "import * as asn1js from \"asn1js\";\nimport { BufferSourceConverter } from \"pvtsutils\";\nimport { AsnParser } from \"./parser\";\nimport { AsnSerializer } from \"./serializer\";\nexport class AsnConvert {\n    static serialize(obj) {\n        return AsnSerializer.serialize(obj);\n    }\n    static parse(data, target) {\n        return AsnParser.parse(data, target);\n    }\n    static toString(data) {\n        const buf = BufferSourceConverter.isBufferSource(data)\n            ? BufferSourceConverter.toArrayBuffer(data)\n            : AsnConvert.serialize(data);\n        const asn = asn1js.fromBER(buf);\n        if (asn.offset === -1) {\n            throw new Error(`Cannot decode ASN.1 data. ${asn.result.error}`);\n        }\n        return asn.result.toString();\n    }\n}\n", "export * from \"./extensions\";\nexport * from \"./algorithm_identifier\";\nexport * from \"./attribute\";\nexport * from \"./certificate\";\nexport * from \"./certificate_list\";\nexport * from \"./extension\";\nexport * from \"./general_name\";\nexport * from \"./general_names\";\nexport * from \"./name\";\nexport * from \"./object_identifiers\";\nexport * from \"./subject_public_key_info\";\nexport * from \"./tbs_cert_list\";\nexport * from \"./tbs_certificate\";\nexport * from \"./time\";\nexport * from \"./types\";\nexport * from \"./validity\";\n", "export * from \"./authority_information_access\";\nexport * from \"./authority_key_identifier\";\nexport * from \"./basic_constraints\";\nexport * from \"./certificate_issuer\";\nexport * from \"./certificate_policies\";\nexport * from \"./crl_delta_indicator\";\nexport * from \"./crl_distribution_points\";\nexport * from \"./crl_freshest\";\nexport * from \"./crl_issuing_distribution_point\";\nexport * from \"./crl_number\";\nexport * from \"./crl_reason\";\nexport * from \"./extended_key_usage\";\nexport * from \"./inhibit_any_policy\";\nexport * from \"./invalidity_date\";\nexport * from \"./issuer_alternative_name\";\nexport * from \"./key_usage\";\nexport * from \"./name_constraints\";\nexport * from \"./policy_constraints\";\nexport * from \"./policy_mappings\";\nexport * from \"./subject_alternative_name\";\nexport * from \"./subject_directory_attributes\";\nexport * from \"./subject_key_identifier\";\nexport * from \"./private_key_usage_period\";\nexport * from \"./entrust_version_info\";\nexport * from \"./subject_info_access\";\n", "var AuthorityInfoAccessSyntax_1;\nimport { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnArray, AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { GeneralName } from \"../general_name\";\nimport { id_pe } from \"../object_identifiers\";\nexport const id_pe_authorityInfoAccess = `${id_pe}.1`;\nexport class AccessDescription {\n    constructor(params = {}) {\n        this.accessMethod = \"\";\n        this.accessLocation = new GeneralName();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], AccessDescription.prototype, \"accessMethod\", void 0);\n__decorate([\n    AsnProp({ type: GeneralName })\n], AccessDescription.prototype, \"accessLocation\", void 0);\nlet AuthorityInfoAccessSyntax = AuthorityInfoAccessSyntax_1 = class AuthorityInfoAccessSyntax extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, AuthorityInfoAccessSyntax_1.prototype);\n    }\n};\nAuthorityInfoAccessSyntax = AuthorityInfoAccessSyntax_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: AccessDescription })\n], AuthorityInfoAccessSyntax);\nexport { AuthorityInfoAccessSyntax };\n", "/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nvar ownKeys = function(o) {\n  ownKeys = Object.getOwnPropertyNames || function (o) {\n    var ar = [];\n    for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n    return ar;\n  };\n  return ownKeys(o);\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  var r, s = 0;\n  function next() {\n    while (r = env.stack.pop()) {\n      try {\n        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n        if (r.dispose) {\n          var result = r.dispose.call(r.value);\n          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n        }\n        else s |= 1;\n      }\n      catch (e) {\n        fail(e);\n      }\n    }\n    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\n  if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\n      return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\n          return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\n      });\n  }\n  return path;\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __esDecorate,\n  __runInitializers,\n  __propKey,\n  __setFunctionName,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n  __rewriteRelativeImportExtension,\n};\n", "import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnType, AsnTypeTypes, AsnOctetStringConverter, } from \"@peculiar/asn1-schema\";\nimport { IpConverter } from \"./ip_converter\";\nimport { DirectoryString, Name } from \"./name\";\nexport const AsnIpConverter = {\n    fromASN: (value) => IpConverter.toString(AsnOctetStringConverter.fromASN(value)),\n    toASN: (value) => AsnOctetStringConverter.toASN(IpConverter.fromString(value)),\n};\nexport class OtherName {\n    constructor(params = {}) {\n        this.typeId = \"\";\n        this.value = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], OtherName.prototype, \"typeId\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Any, context: 0 })\n], OtherName.prototype, \"value\", void 0);\nexport class EDIPartyName {\n    constructor(params = {}) {\n        this.partyName = new DirectoryString();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: DirectoryString, optional: true, context: 0, implicit: true })\n], EDIPartyName.prototype, \"nameAssigner\", void 0);\n__decorate([\n    AsnProp({ type: DirectoryString, context: 1, implicit: true })\n], EDIPartyName.prototype, \"partyName\", void 0);\nlet GeneralName = class GeneralName {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n};\n__decorate([\n    AsnProp({ type: OtherName, context: 0, implicit: true })\n], GeneralName.prototype, \"otherName\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.IA5String, context: 1, implicit: true })\n], GeneralName.prototype, \"rfc822Name\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.IA5String, context: 2, implicit: true })\n], GeneralName.prototype, \"dNSName\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Any, context: 3, implicit: true })\n], GeneralName.prototype, \"x400Address\", void 0);\n__decorate([\n    AsnProp({ type: Name, context: 4, implicit: false })\n], GeneralName.prototype, \"directoryName\", void 0);\n__decorate([\n    AsnProp({ type: EDIPartyName, context: 5 })\n], GeneralName.prototype, \"ediPartyName\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.IA5String, context: 6, implicit: true })\n], GeneralName.prototype, \"uniformResourceIdentifier\", void 0);\n__decorate([\n    AsnProp({\n        type: AsnPropTypes.OctetString,\n        context: 7,\n        implicit: true,\n        converter: AsnIpConverter,\n    })\n], GeneralName.prototype, \"iPAddress\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier, context: 8, implicit: true })\n], GeneralName.prototype, \"registeredID\", void 0);\nGeneralName = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], GeneralName);\nexport { GeneralName };\n", "import { Convert } from \"pvtsutils\";\nexport class IpConverter {\n    static isIPv4(ip) {\n        return /^(\\d{1,3}\\.){3}\\d{1,3}$/.test(ip);\n    }\n    static parseIPv4(ip) {\n        const parts = ip.split(\".\");\n        if (parts.length !== 4) {\n            throw new Error(\"Invalid IPv4 address\");\n        }\n        return parts.map((part) => {\n            const num = parseInt(part, 10);\n            if (isNaN(num) || num < 0 || num > 255) {\n                throw new Error(\"Invalid IPv4 address part\");\n            }\n            return num;\n        });\n    }\n    static parseIPv6(ip) {\n        const expandedIP = this.expandIPv6(ip);\n        const parts = expandedIP.split(\":\");\n        if (parts.length !== 8) {\n            throw new Error(\"Invalid IPv6 address\");\n        }\n        return parts.reduce((bytes, part) => {\n            const num = parseInt(part, 16);\n            if (isNaN(num) || num < 0 || num > 0xffff) {\n                throw new Error(\"Invalid IPv6 address part\");\n            }\n            bytes.push((num >> 8) & 0xff);\n            bytes.push(num & 0xff);\n            return bytes;\n        }, []);\n    }\n    static expandIPv6(ip) {\n        if (!ip.includes(\"::\")) {\n            return ip;\n        }\n        const parts = ip.split(\"::\");\n        if (parts.length > 2) {\n            throw new Error(\"Invalid IPv6 address\");\n        }\n        const left = parts[0] ? parts[0].split(\":\") : [];\n        const right = parts[1] ? parts[1].split(\":\") : [];\n        const missing = 8 - (left.length + right.length);\n        if (missing < 0) {\n            throw new Error(\"Invalid IPv6 address\");\n        }\n        return [...left, ...Array(missing).fill(\"0\"), ...right].join(\":\");\n    }\n    static formatIPv6(bytes) {\n        const parts = [];\n        for (let i = 0; i < 16; i += 2) {\n            parts.push(((bytes[i] << 8) | bytes[i + 1]).toString(16));\n        }\n        return this.compressIPv6(parts.join(\":\"));\n    }\n    static compressIPv6(ip) {\n        const parts = ip.split(\":\");\n        let longestZeroStart = -1;\n        let longestZeroLength = 0;\n        let currentZeroStart = -1;\n        let currentZeroLength = 0;\n        for (let i = 0; i < parts.length; i++) {\n            if (parts[i] === \"0\") {\n                if (currentZeroStart === -1) {\n                    currentZeroStart = i;\n                }\n                currentZeroLength++;\n            }\n            else {\n                if (currentZeroLength > longestZeroLength) {\n                    longestZeroStart = currentZeroStart;\n                    longestZeroLength = currentZeroLength;\n                }\n                currentZeroStart = -1;\n                currentZeroLength = 0;\n            }\n        }\n        if (currentZeroLength > longestZeroLength) {\n            longestZeroStart = currentZeroStart;\n            longestZeroLength = currentZeroLength;\n        }\n        if (longestZeroLength > 1) {\n            const before = parts.slice(0, longestZeroStart).join(\":\");\n            const after = parts.slice(longestZeroStart + longestZeroLength).join(\":\");\n            return `${before}::${after}`;\n        }\n        return ip;\n    }\n    static parseCIDR(text) {\n        const [addr, prefixStr] = text.split(\"/\");\n        const prefix = parseInt(prefixStr, 10);\n        if (this.isIPv4(addr)) {\n            if (prefix < 0 || prefix > 32) {\n                throw new Error(\"Invalid IPv4 prefix length\");\n            }\n            return [this.parseIPv4(addr), prefix];\n        }\n        else {\n            if (prefix < 0 || prefix > 128) {\n                throw new Error(\"Invalid IPv6 prefix length\");\n            }\n            return [this.parseIPv6(addr), prefix];\n        }\n    }\n    static decodeIP(value) {\n        if (value.length === 64 && parseInt(value, 16) === 0) {\n            return \"::/0\";\n        }\n        if (value.length !== 16) {\n            return value;\n        }\n        const mask = parseInt(value.slice(8), 16)\n            .toString(2)\n            .split(\"\")\n            .reduce((a, k) => a + +k, 0);\n        let ip = value.slice(0, 8).replace(/(.{2})/g, (match) => `${parseInt(match, 16)}.`);\n        ip = ip.slice(0, -1);\n        return `${ip}/${mask}`;\n    }\n    static toString(buf) {\n        const uint8 = new Uint8Array(buf);\n        if (uint8.length === 4) {\n            return Array.from(uint8).join(\".\");\n        }\n        if (uint8.length === 16) {\n            return this.formatIPv6(uint8);\n        }\n        if (uint8.length === 8 || uint8.length === 32) {\n            const half = uint8.length / 2;\n            const addrBytes = uint8.slice(0, half);\n            const maskBytes = uint8.slice(half);\n            const isAllZeros = uint8.every((byte) => byte === 0);\n            if (isAllZeros) {\n                return uint8.length === 8 ? \"0.0.0.0/0\" : \"::/0\";\n            }\n            const prefixLen = maskBytes.reduce((a, b) => a + (b.toString(2).match(/1/g) || []).length, 0);\n            if (uint8.length === 8) {\n                const addrStr = Array.from(addrBytes).join(\".\");\n                return `${addrStr}/${prefixLen}`;\n            }\n            else {\n                const addrStr = this.formatIPv6(addrBytes);\n                return `${addrStr}/${prefixLen}`;\n            }\n        }\n        return this.decodeIP(Convert.ToHex(buf));\n    }\n    static fromString(text) {\n        if (text.includes(\"/\")) {\n            const [addr, prefix] = this.parseCIDR(text);\n            const maskBytes = new Uint8Array(addr.length);\n            let bitsLeft = prefix;\n            for (let i = 0; i < maskBytes.length; i++) {\n                if (bitsLeft >= 8) {\n                    maskBytes[i] = 0xff;\n                    bitsLeft -= 8;\n                }\n                else if (bitsLeft > 0) {\n                    maskBytes[i] = 0xff << (8 - bitsLeft);\n                    bitsLeft = 0;\n                }\n            }\n            const out = new Uint8Array(addr.length * 2);\n            out.set(addr, 0);\n            out.set(maskBytes, addr.length);\n            return out.buffer;\n        }\n        const bytes = this.isIPv4(text) ? this.parseIPv4(text) : this.parseIPv6(text);\n        return new Uint8Array(bytes).buffer;\n    }\n}\n", "var RelativeDistinguishedName_1, RDNSequence_1, Name_1;\nimport { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnType, AsnTypeTypes, AsnArray } from \"@peculiar/asn1-schema\";\nimport { Convert } from \"pvtsutils\";\nlet DirectoryString = class DirectoryString {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n    toString() {\n        return (this.bmpString ||\n            this.printableString ||\n            this.teletexString ||\n            this.universalString ||\n            this.utf8String ||\n            \"\");\n    }\n};\n__decorate([\n    AsnProp({ type: AsnPropTypes.TeletexString })\n], DirectoryString.prototype, \"teletexString\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.PrintableString })\n], DirectoryString.prototype, \"printableString\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.UniversalString })\n], DirectoryString.prototype, \"universalString\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Utf8String })\n], DirectoryString.prototype, \"utf8String\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.BmpString })\n], DirectoryString.prototype, \"bmpString\", void 0);\nDirectoryString = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], DirectoryString);\nexport { DirectoryString };\nlet AttributeValue = class AttributeValue extends DirectoryString {\n    constructor(params = {}) {\n        super(params);\n        Object.assign(this, params);\n    }\n    toString() {\n        return this.ia5String || (this.anyValue ? Convert.ToHex(this.anyValue) : super.toString());\n    }\n};\n__decorate([\n    AsnProp({ type: AsnPropTypes.IA5String })\n], AttributeValue.prototype, \"ia5String\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Any })\n], AttributeValue.prototype, \"anyValue\", void 0);\nAttributeValue = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], AttributeValue);\nexport { AttributeValue };\nexport class AttributeTypeAndValue {\n    constructor(params = {}) {\n        this.type = \"\";\n        this.value = new AttributeValue();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], AttributeTypeAndValue.prototype, \"type\", void 0);\n__decorate([\n    AsnProp({ type: AttributeValue })\n], AttributeTypeAndValue.prototype, \"value\", void 0);\nlet RelativeDistinguishedName = RelativeDistinguishedName_1 = class RelativeDistinguishedName extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, RelativeDistinguishedName_1.prototype);\n    }\n};\nRelativeDistinguishedName = RelativeDistinguishedName_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Set, itemType: AttributeTypeAndValue })\n], RelativeDistinguishedName);\nexport { RelativeDistinguishedName };\nlet RDNSequence = RDNSequence_1 = class RDNSequence extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, RDNSequence_1.prototype);\n    }\n};\nRDNSequence = RDNSequence_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: RelativeDistinguishedName })\n], RDNSequence);\nexport { RDNSequence };\nlet Name = Name_1 = class Name extends RDNSequence {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, Name_1.prototype);\n    }\n};\nName = Name_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence })\n], Name);\nexport { Name };\n", "export const id_pkix = \"1.3.6.1.5.5.7\";\nexport const id_pe = `${id_pkix}.1`;\nexport const id_qt = `${id_pkix}.2`;\nexport const id_kp = `${id_pkix}.3`;\nexport const id_ad = `${id_pkix}.48`;\nexport const id_qt_csp = `${id_qt}.1`;\nexport const id_qt_unotice = `${id_qt}.2`;\nexport const id_ad_ocsp = `${id_ad}.1`;\nexport const id_ad_caIssuers = `${id_ad}.2`;\nexport const id_ad_timeStamping = `${id_ad}.3`;\nexport const id_ad_caRepository = `${id_ad}.5`;\nexport const id_ce = \"2.5.29\";\n", "import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnIntegerArrayBufferConverter, OctetString, } from \"@peculiar/asn1-schema\";\nimport { GeneralName } from \"../general_name\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_authorityKeyIdentifier = `${id_ce}.35`;\nexport class KeyIdentifier extends OctetString {\n}\nexport class AuthorityKeyIdentifier {\n    constructor(params = {}) {\n        if (params) {\n            Object.assign(this, params);\n        }\n    }\n}\n__decorate([\n    AsnProp({ type: KeyIdentifier, context: 0, optional: true, implicit: true })\n], AuthorityKeyIdentifier.prototype, \"keyIdentifier\", void 0);\n__decorate([\n    AsnProp({ type: GeneralName, context: 1, optional: true, implicit: true, repeated: \"sequence\" })\n], AuthorityKeyIdentifier.prototype, \"authorityCertIssuer\", void 0);\n__decorate([\n    AsnProp({\n        type: AsnPropTypes.Integer,\n        context: 2,\n        optional: true,\n        implicit: true,\n        converter: AsnIntegerArrayBufferConverter,\n    })\n], AuthorityKeyIdentifier.prototype, \"authorityCertSerialNumber\", void 0);\n", "import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_basicConstraints = `${id_ce}.19`;\nexport class BasicConstraints {\n    constructor(params = {}) {\n        this.cA = false;\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.Boolean, defaultValue: false })\n], BasicConstraints.prototype, \"cA\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, optional: true })\n], BasicConstraints.prototype, \"pathLenConstraint\", void 0);\n", "var CertificateIssuer_1;\nimport { __decorate } from \"tslib\";\nimport { AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { GeneralNames } from \"../general_names\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_certificateIssuer = `${id_ce}.29`;\nlet CertificateIssuer = CertificateIssuer_1 = class CertificateIssuer extends GeneralNames {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, CertificateIssuer_1.prototype);\n    }\n};\nCertificateIssuer = CertificateIssuer_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence })\n], CertificateIssuer);\nexport { CertificateIssuer };\n", "var GeneralNames_1;\nimport { __decorate } from \"tslib\";\nimport { AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { GeneralName } from \"./general_name\";\nimport { AsnArray } from \"@peculiar/asn1-schema\";\nlet GeneralNames = GeneralNames_1 = class GeneralNames extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, GeneralNames_1.prototype);\n    }\n};\nGeneralNames = GeneralNames_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: GeneralName })\n], GeneralNames);\nexport { GeneralNames };\n", "var CertificatePolicies_1;\nimport { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnType, AsnTypeTypes, AsnArray } from \"@peculiar/asn1-schema\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_certificatePolicies = `${id_ce}.32`;\nexport const id_ce_certificatePolicies_anyPolicy = `${id_ce_certificatePolicies}.0`;\nlet DisplayText = class DisplayText {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n    toString() {\n        return this.ia5String || this.visibleString || this.bmpString || this.utf8String || \"\";\n    }\n};\n__decorate([\n    AsnProp({ type: AsnPropTypes.IA5String })\n], DisplayText.prototype, \"ia5String\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.VisibleString })\n], DisplayText.prototype, \"visibleString\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.BmpString })\n], DisplayText.prototype, \"bmpString\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Utf8String })\n], DisplayText.prototype, \"utf8String\", void 0);\nDisplayText = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], DisplayText);\nexport { DisplayText };\nexport class NoticeReference {\n    constructor(params = {}) {\n        this.organization = new DisplayText();\n        this.noticeNumbers = [];\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: DisplayText })\n], NoticeReference.prototype, \"organization\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, repeated: \"sequence\" })\n], NoticeReference.prototype, \"noticeNumbers\", void 0);\nexport class UserNotice {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: NoticeReference, optional: true })\n], UserNotice.prototype, \"noticeRef\", void 0);\n__decorate([\n    AsnProp({ type: DisplayText, optional: true })\n], UserNotice.prototype, \"explicitText\", void 0);\nlet Qualifier = class Qualifier {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n};\n__decorate([\n    AsnProp({ type: AsnPropTypes.IA5String })\n], Qualifier.prototype, \"cPSuri\", void 0);\n__decorate([\n    AsnProp({ type: UserNotice })\n], Qualifier.prototype, \"userNotice\", void 0);\nQualifier = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], Qualifier);\nexport { Qualifier };\nexport class PolicyQualifierInfo {\n    constructor(params = {}) {\n        this.policyQualifierId = \"\";\n        this.qualifier = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], PolicyQualifierInfo.prototype, \"policyQualifierId\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Any })\n], PolicyQualifierInfo.prototype, \"qualifier\", void 0);\nexport class PolicyInformation {\n    constructor(params = {}) {\n        this.policyIdentifier = \"\";\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], PolicyInformation.prototype, \"policyIdentifier\", void 0);\n__decorate([\n    AsnProp({ type: PolicyQualifierInfo, repeated: \"sequence\", optional: true })\n], PolicyInformation.prototype, \"policyQualifiers\", void 0);\nlet CertificatePolicies = CertificatePolicies_1 = class CertificatePolicies extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, CertificatePolicies_1.prototype);\n    }\n};\nCertificatePolicies = CertificatePolicies_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: PolicyInformation })\n], CertificatePolicies);\nexport { CertificatePolicies };\n", "import { __decorate } from \"tslib\";\nimport { AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { id_ce } from \"../object_identifiers\";\nimport { CRLNumber } from \"./crl_number\";\nexport const id_ce_deltaCRLIndicator = `${id_ce}.27`;\nlet BaseCRLNumber = class BaseCRLNumber extends CRLNumber {\n};\nBaseCRLNumber = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], BaseCRLNumber);\nexport { BaseCRLNumber };\n", "import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_cRLNumber = `${id_ce}.20`;\nlet CRLNumber = class CRLNumber {\n    constructor(value = 0) {\n        this.value = value;\n    }\n};\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer })\n], CRLNumber.prototype, \"value\", void 0);\nCRLNumber = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], CRLNumber);\nexport { CRLNumber };\n", "var CRLDistributionPoints_1;\nimport { __decorate } from \"tslib\";\nimport { AsnProp, AsnType, AsnTypeTypes, AsnArray, BitString } from \"@peculiar/asn1-schema\";\nimport { RelativeDistinguishedName } from \"../name\";\nimport { GeneralName } from \"../general_name\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_cRLDistributionPoints = `${id_ce}.31`;\nexport var ReasonFlags;\n(function (ReasonFlags) {\n    ReasonFlags[ReasonFlags[\"unused\"] = 1] = \"unused\";\n    ReasonFlags[ReasonFlags[\"keyCompromise\"] = 2] = \"keyCompromise\";\n    ReasonFlags[ReasonFlags[\"cACompromise\"] = 4] = \"cACompromise\";\n    ReasonFlags[ReasonFlags[\"affiliationChanged\"] = 8] = \"affiliationChanged\";\n    ReasonFlags[ReasonFlags[\"superseded\"] = 16] = \"superseded\";\n    ReasonFlags[ReasonFlags[\"cessationOfOperation\"] = 32] = \"cessationOfOperation\";\n    ReasonFlags[ReasonFlags[\"certificateHold\"] = 64] = \"certificateHold\";\n    ReasonFlags[ReasonFlags[\"privilegeWithdrawn\"] = 128] = \"privilegeWithdrawn\";\n    ReasonFlags[ReasonFlags[\"aACompromise\"] = 256] = \"aACompromise\";\n})(ReasonFlags || (ReasonFlags = {}));\nexport class Reason extends BitString {\n    toJSON() {\n        const res = [];\n        const flags = this.toNumber();\n        if (flags & ReasonFlags.aACompromise) {\n            res.push(\"aACompromise\");\n        }\n        if (flags & ReasonFlags.affiliationChanged) {\n            res.push(\"affiliationChanged\");\n        }\n        if (flags & ReasonFlags.cACompromise) {\n            res.push(\"cACompromise\");\n        }\n        if (flags & ReasonFlags.certificateHold) {\n            res.push(\"certificateHold\");\n        }\n        if (flags & ReasonFlags.cessationOfOperation) {\n            res.push(\"cessationOfOperation\");\n        }\n        if (flags & ReasonFlags.keyCompromise) {\n            res.push(\"keyCompromise\");\n        }\n        if (flags & ReasonFlags.privilegeWithdrawn) {\n            res.push(\"privilegeWithdrawn\");\n        }\n        if (flags & ReasonFlags.superseded) {\n            res.push(\"superseded\");\n        }\n        if (flags & ReasonFlags.unused) {\n            res.push(\"unused\");\n        }\n        return res;\n    }\n    toString() {\n        return `[${this.toJSON().join(\", \")}]`;\n    }\n}\nlet DistributionPointName = class DistributionPointName {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n};\n__decorate([\n    AsnProp({ type: GeneralName, context: 0, repeated: \"sequence\", implicit: true })\n], DistributionPointName.prototype, \"fullName\", void 0);\n__decorate([\n    AsnProp({ type: RelativeDistinguishedName, context: 1, implicit: true })\n], DistributionPointName.prototype, \"nameRelativeToCRLIssuer\", void 0);\nDistributionPointName = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], DistributionPointName);\nexport { DistributionPointName };\nexport class DistributionPoint {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: DistributionPointName, context: 0, optional: true })\n], DistributionPoint.prototype, \"distributionPoint\", void 0);\n__decorate([\n    AsnProp({ type: Reason, context: 1, optional: true, implicit: true })\n], DistributionPoint.prototype, \"reasons\", void 0);\n__decorate([\n    AsnProp({ type: GeneralName, context: 2, optional: true, repeated: \"sequence\", implicit: true })\n], DistributionPoint.prototype, \"cRLIssuer\", void 0);\nlet CRLDistributionPoints = CRLDistributionPoints_1 = class CRLDistributionPoints extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, CRLDistributionPoints_1.prototype);\n    }\n};\nCRLDistributionPoints = CRLDistributionPoints_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: DistributionPoint })\n], CRLDistributionPoints);\nexport { CRLDistributionPoints };\n", "var FreshestCRL_1;\nimport { __decorate } from \"tslib\";\nimport { AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { id_ce } from \"../object_identifiers\";\nimport { CRLDistributionPoints, DistributionPoint } from \"./crl_distribution_points\";\nexport const id_ce_freshestCRL = `${id_ce}.46`;\nlet FreshestCRL = FreshestCRL_1 = class FreshestCRL extends CRLDistributionPoints {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, FreshestCRL_1.prototype);\n    }\n};\nFreshestCRL = FreshestCRL_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: DistributionPoint })\n], FreshestCRL);\nexport { FreshestCRL };\n", "import { __decorate } from \"tslib\";\nimport { AsnProp } from \"@peculiar/asn1-schema\";\nimport { DistributionPointName, Reason } from \"./crl_distribution_points\";\nimport { id_ce } from \"../object_identifiers\";\nimport { AsnPropTypes } from \"@peculiar/asn1-schema\";\nexport const id_ce_issuingDistributionPoint = `${id_ce}.28`;\nexport class IssuingDistributionPoint {\n    constructor(params = {}) {\n        this.onlyContainsUserCerts = IssuingDistributionPoint.ONLY;\n        this.onlyContainsCACerts = IssuingDistributionPoint.ONLY;\n        this.indirectCRL = IssuingDistributionPoint.ONLY;\n        this.onlyContainsAttributeCerts = IssuingDistributionPoint.ONLY;\n        Object.assign(this, params);\n    }\n}\nIssuingDistributionPoint.ONLY = false;\n__decorate([\n    AsnProp({ type: DistributionPointName, context: 0, optional: true })\n], IssuingDistributionPoint.prototype, \"distributionPoint\", void 0);\n__decorate([\n    AsnProp({\n        type: AsnPropTypes.Boolean,\n        context: 1,\n        defaultValue: IssuingDistributionPoint.ONLY,\n        implicit: true,\n    })\n], IssuingDistributionPoint.prototype, \"onlyContainsUserCerts\", void 0);\n__decorate([\n    AsnProp({\n        type: AsnPropTypes.Boolean,\n        context: 2,\n        defaultValue: IssuingDistributionPoint.ONLY,\n        implicit: true,\n    })\n], IssuingDistributionPoint.prototype, \"onlyContainsCACerts\", void 0);\n__decorate([\n    AsnProp({ type: Reason, context: 3, optional: true, implicit: true })\n], IssuingDistributionPoint.prototype, \"onlySomeReasons\", void 0);\n__decorate([\n    AsnProp({\n        type: AsnPropTypes.Boolean,\n        context: 4,\n        defaultValue: IssuingDistributionPoint.ONLY,\n        implicit: true,\n    })\n], IssuingDistributionPoint.prototype, \"indirectCRL\", void 0);\n__decorate([\n    AsnProp({\n        type: AsnPropTypes.Boolean,\n        context: 5,\n        defaultValue: IssuingDistributionPoint.ONLY,\n        implicit: true,\n    })\n], IssuingDistributionPoint.prototype, \"onlyContainsAttributeCerts\", void 0);\n", "import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_cRLReasons = `${id_ce}.21`;\nexport var CRLReasons;\n(function (CRLReasons) {\n    CRLReasons[CRLReasons[\"unspecified\"] = 0] = \"unspecified\";\n    CRLReasons[CRLReasons[\"keyCompromise\"] = 1] = \"keyCompromise\";\n    CRLReasons[CRLReasons[\"cACompromise\"] = 2] = \"cACompromise\";\n    CRLReasons[CRLReasons[\"affiliationChanged\"] = 3] = \"affiliationChanged\";\n    CRLReasons[CRLReasons[\"superseded\"] = 4] = \"superseded\";\n    CRLReasons[CRLReasons[\"cessationOfOperation\"] = 5] = \"cessationOfOperation\";\n    CRLReasons[CRLReasons[\"certificateHold\"] = 6] = \"certificateHold\";\n    CRLReasons[CRLReasons[\"removeFromCRL\"] = 8] = \"removeFromCRL\";\n    CRLReasons[CRLReasons[\"privilegeWithdrawn\"] = 9] = \"privilegeWithdrawn\";\n    CRLReasons[CRLReasons[\"aACompromise\"] = 10] = \"aACompromise\";\n})(CRLReasons || (CRLReasons = {}));\nlet CRLReason = class CRLReason {\n    constructor(reason = CRLReasons.unspecified) {\n        this.reason = CRLReasons.unspecified;\n        this.reason = reason;\n    }\n    toJSON() {\n        return CRLReasons[this.reason];\n    }\n    toString() {\n        return this.toJSON();\n    }\n};\n__decorate([\n    AsnProp({ type: AsnPropTypes.Enumerated })\n], CRLReason.prototype, \"reason\", void 0);\nCRLReason = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], CRLReason);\nexport { CRLReason };\n", "var ExtendedKeyUsage_1;\nimport { __decorate } from \"tslib\";\nimport { AsnPropTypes, AsnArray, AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { id_ce, id_kp } from \"../object_identifiers\";\nexport const id_ce_extKeyUsage = `${id_ce}.37`;\nlet ExtendedKeyUsage = ExtendedKeyUsage_1 = class ExtendedKeyUsage extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, ExtendedKeyUsage_1.prototype);\n    }\n};\nExtendedKeyUsage = ExtendedKeyUsage_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: AsnPropTypes.ObjectIdentifier })\n], ExtendedKeyUsage);\nexport { ExtendedKeyUsage };\nexport const anyExtendedKeyUsage = `${id_ce_extKeyUsage}.0`;\nexport const id_kp_serverAuth = `${id_kp}.1`;\nexport const id_kp_clientAuth = `${id_kp}.2`;\nexport const id_kp_codeSigning = `${id_kp}.3`;\nexport const id_kp_emailProtection = `${id_kp}.4`;\nexport const id_kp_timeStamping = `${id_kp}.8`;\nexport const id_kp_OCSPSigning = `${id_kp}.9`;\n", "import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnType, AsnTypeTypes, AsnIntegerArrayBufferConverter, } from \"@peculiar/asn1-schema\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_inhibitAnyPolicy = `${id_ce}.54`;\nlet InhibitAnyPolicy = class InhibitAnyPolicy {\n    constructor(value = new ArrayBuffer(0)) {\n        this.value = value;\n    }\n};\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], InhibitAnyPolicy.prototype, \"value\", void 0);\nInhibitAnyPolicy = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], InhibitAnyPolicy);\nexport { InhibitAnyPolicy };\n", "import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_invalidityDate = `${id_ce}.24`;\nlet InvalidityDate = class InvalidityDate {\n    constructor(value) {\n        this.value = new Date();\n        if (value) {\n            this.value = value;\n        }\n    }\n};\n__decorate([\n    AsnProp({ type: AsnPropTypes.GeneralizedTime })\n], InvalidityDate.prototype, \"value\", void 0);\nInvalidityDate = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], InvalidityDate);\nexport { InvalidityDate };\n", "var IssueAlternativeName_1;\nimport { __decorate } from \"tslib\";\nimport { AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { GeneralNames } from \"../general_names\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_issuerAltName = `${id_ce}.18`;\nlet IssueAlternativeName = IssueAlternativeName_1 = class IssueAlternativeName extends GeneralNames {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, IssueAlternativeName_1.prototype);\n    }\n};\nIssueAlternativeName = IssueAlternativeName_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence })\n], IssueAlternativeName);\nexport { IssueAlternativeName };\n", "import { BitString } from \"@peculiar/asn1-schema\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_keyUsage = `${id_ce}.15`;\nexport var KeyUsageFlags;\n(function (KeyUsageFlags) {\n    KeyUsageFlags[KeyUsageFlags[\"digitalSignature\"] = 1] = \"digitalSignature\";\n    KeyUsageFlags[KeyUsageFlags[\"nonRepudiation\"] = 2] = \"nonRepudiation\";\n    KeyUsageFlags[KeyUsageFlags[\"keyEncipherment\"] = 4] = \"keyEncipherment\";\n    KeyUsageFlags[KeyUsageFlags[\"dataEncipherment\"] = 8] = \"dataEncipherment\";\n    KeyUsageFlags[KeyUsageFlags[\"keyAgreement\"] = 16] = \"keyAgreement\";\n    KeyUsageFlags[KeyUsageFlags[\"keyCertSign\"] = 32] = \"keyCertSign\";\n    KeyUsageFlags[KeyUsageFlags[\"cRLSign\"] = 64] = \"cRLSign\";\n    KeyUsageFlags[KeyUsageFlags[\"encipherOnly\"] = 128] = \"encipherOnly\";\n    KeyUsageFlags[KeyUsageFlags[\"decipherOnly\"] = 256] = \"decipherOnly\";\n})(KeyUsageFlags || (KeyUsageFlags = {}));\nexport class KeyUsage extends BitString {\n    toJSON() {\n        const flag = this.toNumber();\n        const res = [];\n        if (flag & KeyUsageFlags.cRLSign) {\n            res.push(\"crlSign\");\n        }\n        if (flag & KeyUsageFlags.dataEncipherment) {\n            res.push(\"dataEncipherment\");\n        }\n        if (flag & KeyUsageFlags.decipherOnly) {\n            res.push(\"decipherOnly\");\n        }\n        if (flag & KeyUsageFlags.digitalSignature) {\n            res.push(\"digitalSignature\");\n        }\n        if (flag & KeyUsageFlags.encipherOnly) {\n            res.push(\"encipherOnly\");\n        }\n        if (flag & KeyUsageFlags.keyAgreement) {\n            res.push(\"keyAgreement\");\n        }\n        if (flag & KeyUsageFlags.keyCertSign) {\n            res.push(\"keyCertSign\");\n        }\n        if (flag & KeyUsageFlags.keyEncipherment) {\n            res.push(\"keyEncipherment\");\n        }\n        if (flag & KeyUsageFlags.nonRepudiation) {\n            res.push(\"nonRepudiation\");\n        }\n        return res;\n    }\n    toString() {\n        return `[${this.toJSON().join(\", \")}]`;\n    }\n}\n", "var GeneralSubtrees_1;\nimport { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnArray, AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { GeneralName } from \"../general_name\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_nameConstraints = `${id_ce}.30`;\nexport class GeneralSubtree {\n    constructor(params = {}) {\n        this.base = new GeneralName();\n        this.minimum = 0;\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: GeneralName })\n], GeneralSubtree.prototype, \"base\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, context: 0, defaultValue: 0, implicit: true })\n], GeneralSubtree.prototype, \"minimum\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, context: 1, optional: true, implicit: true })\n], GeneralSubtree.prototype, \"maximum\", void 0);\nlet GeneralSubtrees = GeneralSubtrees_1 = class GeneralSubtrees extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, GeneralSubtrees_1.prototype);\n    }\n};\nGeneralSubtrees = GeneralSubtrees_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: GeneralSubtree })\n], GeneralSubtrees);\nexport { GeneralSubtrees };\nexport class NameConstraints {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: GeneralSubtrees, context: 0, optional: true, implicit: true })\n], NameConstraints.prototype, \"permittedSubtrees\", void 0);\n__decorate([\n    AsnProp({ type: GeneralSubtrees, context: 1, optional: true, implicit: true })\n], NameConstraints.prototype, \"excludedSubtrees\", void 0);\n", "import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnIntegerArrayBufferConverter } from \"@peculiar/asn1-schema\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_policyConstraints = `${id_ce}.36`;\nexport class PolicyConstraints {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({\n        type: AsnPropTypes.Integer,\n        context: 0,\n        implicit: true,\n        optional: true,\n        converter: AsnIntegerArrayBufferConverter,\n    })\n], PolicyConstraints.prototype, \"requireExplicitPolicy\", void 0);\n__decorate([\n    AsnProp({\n        type: AsnPropTypes.Integer,\n        context: 1,\n        implicit: true,\n        optional: true,\n        converter: AsnIntegerArrayBufferConverter,\n    })\n], PolicyConstraints.prototype, \"inhibitPolicyMapping\", void 0);\n", "var PolicyMappings_1;\nimport { __decorate } from \"tslib\";\nimport { AsnArray, AsnProp, AsnPropTypes, AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_policyMappings = `${id_ce}.33`;\nexport class PolicyMapping {\n    constructor(params = {}) {\n        this.issuerDomainPolicy = \"\";\n        this.subjectDomainPolicy = \"\";\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], PolicyMapping.prototype, \"issuerDomainPolicy\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], PolicyMapping.prototype, \"subjectDomainPolicy\", void 0);\nlet PolicyMappings = PolicyMappings_1 = class PolicyMappings extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, PolicyMappings_1.prototype);\n    }\n};\nPolicyMappings = PolicyMappings_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: PolicyMapping })\n], PolicyMappings);\nexport { PolicyMappings };\n", "var SubjectAlternativeName_1;\nimport { __decorate } from \"tslib\";\nimport { AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { GeneralNames } from \"../general_names\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_subjectAltName = `${id_ce}.17`;\nlet SubjectAlternativeName = SubjectAlternativeName_1 = class SubjectAlternativeName extends GeneralNames {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, SubjectAlternativeName_1.prototype);\n    }\n};\nSubjectAlternativeName = SubjectAlternativeName_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence })\n], SubjectAlternativeName);\nexport { SubjectAlternativeName };\n", "var SubjectDirectoryAttributes_1;\nimport { __decorate } from \"tslib\";\nimport { AsnArray, AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { Attribute } from \"../attribute\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_subjectDirectoryAttributes = `${id_ce}.9`;\nlet SubjectDirectoryAttributes = SubjectDirectoryAttributes_1 = class SubjectDirectoryAttributes extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, SubjectDirectoryAttributes_1.prototype);\n    }\n};\nSubjectDirectoryAttributes = SubjectDirectoryAttributes_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: Attribute })\n], SubjectDirectoryAttributes);\nexport { SubjectDirectoryAttributes };\n", "import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nexport class Attribute {\n    constructor(params = {}) {\n        this.type = \"\";\n        this.values = [];\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], Attribute.prototype, \"type\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Any, repeated: \"set\" })\n], Attribute.prototype, \"values\", void 0);\n", "import { id_ce } from \"../object_identifiers\";\nimport { KeyIdentifier } from \"./authority_key_identifier\";\nexport const id_ce_subjectKeyIdentifier = `${id_ce}.14`;\nexport class SubjectKeyIdentifier extends KeyIdentifier {\n}\n", "import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_privateKeyUsagePeriod = `${id_ce}.16`;\nexport class PrivateKeyUsagePeriod {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.GeneralizedTime, context: 0, implicit: true, optional: true })\n], PrivateKeyUsagePeriod.prototype, \"notBefore\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.GeneralizedTime, context: 1, implicit: true, optional: true })\n], PrivateKeyUsagePeriod.prototype, \"notAfter\", void 0);\n", "import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, BitString } from \"@peculiar/asn1-schema\";\nexport const id_entrust_entrustVersInfo = \"1.2.840.113533.7.65.0\";\nexport var EntrustInfoFlags;\n(function (EntrustInfoFlags) {\n    EntrustInfoFlags[EntrustInfoFlags[\"keyUpdateAllowed\"] = 1] = \"keyUpdateAllowed\";\n    EntrustInfoFlags[EntrustInfoFlags[\"newExtensions\"] = 2] = \"newExtensions\";\n    EntrustInfoFlags[EntrustInfoFlags[\"pKIXCertificate\"] = 4] = \"pKIXCertificate\";\n})(EntrustInfoFlags || (EntrustInfoFlags = {}));\nexport class EntrustInfo extends BitString {\n    toJSON() {\n        const res = [];\n        const flags = this.toNumber();\n        if (flags & EntrustInfoFlags.pKIXCertificate) {\n            res.push(\"pKIXCertificate\");\n        }\n        if (flags & EntrustInfoFlags.newExtensions) {\n            res.push(\"newExtensions\");\n        }\n        if (flags & EntrustInfoFlags.keyUpdateAllowed) {\n            res.push(\"keyUpdateAllowed\");\n        }\n        return res;\n    }\n    toString() {\n        return `[${this.toJSON().join(\", \")}]`;\n    }\n}\nexport class EntrustVersionInfo {\n    constructor(params = {}) {\n        this.entrustVers = \"\";\n        this.entrustInfoFlags = new EntrustInfo();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.GeneralString })\n], EntrustVersionInfo.prototype, \"entrustVers\", void 0);\n__decorate([\n    AsnProp({ type: EntrustInfo })\n], EntrustVersionInfo.prototype, \"entrustInfoFlags\", void 0);\n", "var SubjectInfoAccessSyntax_1;\nimport { __decorate } from \"tslib\";\nimport { AsnArray, AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { id_pe } from \"../object_identifiers\";\nimport { AccessDescription } from \"./authority_information_access\";\nexport const id_pe_subjectInfoAccess = `${id_pe}.11`;\nlet SubjectInfoAccessSyntax = SubjectInfoAccessSyntax_1 = class SubjectInfoAccessSyntax extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, SubjectInfoAccessSyntax_1.prototype);\n    }\n};\nSubjectInfoAccessSyntax = SubjectInfoAccessSyntax_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: AccessDescription })\n], SubjectInfoAccessSyntax);\nexport { SubjectInfoAccessSyntax };\n", "import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nimport * as pvtsutils from \"pvtsutils\";\nexport class AlgorithmIdentifier {\n    constructor(params = {}) {\n        this.algorithm = \"\";\n        Object.assign(this, params);\n    }\n    isEqual(data) {\n        return (data instanceof AlgorithmIdentifier &&\n            data.algorithm == this.algorithm &&\n            ((data.parameters &&\n                this.parameters &&\n                pvtsutils.isEqual(data.parameters, this.parameters)) ||\n                data.parameters === this.parameters));\n    }\n}\n__decorate([\n    AsnProp({\n        type: AsnPropTypes.ObjectIdentifier,\n    })\n], AlgorithmIdentifier.prototype, \"algorithm\", void 0);\n__decorate([\n    AsnProp({\n        type: AsnPropTypes.Any,\n        optional: true,\n    })\n], AlgorithmIdentifier.prototype, \"parameters\", void 0);\n", "import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nimport { AlgorithmIdentifier } from \"./algorithm_identifier\";\nimport { TBSCertificate } from \"./tbs_certificate\";\nexport class Certificate {\n    constructor(params = {}) {\n        this.tbsCertificate = new TBSCertificate();\n        this.signatureAlgorithm = new AlgorithmIdentifier();\n        this.signatureValue = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: TBSCertificate, raw: true })\n], Certificate.prototype, \"tbsCertificate\", void 0);\n__decorate([\n    AsnProp({ type: AlgorithmIdentifier })\n], Certificate.prototype, \"signatureAlgorithm\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.BitString })\n], Certificate.prototype, \"signatureValue\", void 0);\n", "import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnIntegerArrayBufferConverter } from \"@peculiar/asn1-schema\";\nimport { AlgorithmIdentifier } from \"./algorithm_identifier\";\nimport { Name } from \"./name\";\nimport { SubjectPublicKeyInfo } from \"./subject_public_key_info\";\nimport { Validity } from \"./validity\";\nimport { Extensions } from \"./extension\";\nimport { Version } from \"./types\";\nexport class TBSCertificate {\n    constructor(params = {}) {\n        this.version = Version.v1;\n        this.serialNumber = new ArrayBuffer(0);\n        this.signature = new AlgorithmIdentifier();\n        this.issuer = new Name();\n        this.validity = new Validity();\n        this.subject = new Name();\n        this.subjectPublicKeyInfo = new SubjectPublicKeyInfo();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({\n        type: AsnPropTypes.Integer,\n        context: 0,\n        defaultValue: Version.v1,\n    })\n], TBSCertificate.prototype, \"version\", void 0);\n__decorate([\n    AsnProp({\n        type: AsnPropTypes.Integer,\n        converter: AsnIntegerArrayBufferConverter,\n    })\n], TBSCertificate.prototype, \"serialNumber\", void 0);\n__decorate([\n    AsnProp({ type: AlgorithmIdentifier })\n], TBSCertificate.prototype, \"signature\", void 0);\n__decorate([\n    AsnProp({ type: Name })\n], TBSCertificate.prototype, \"issuer\", void 0);\n__decorate([\n    AsnProp({ type: Validity })\n], TBSCertificate.prototype, \"validity\", void 0);\n__decorate([\n    AsnProp({ type: Name })\n], TBSCertificate.prototype, \"subject\", void 0);\n__decorate([\n    AsnProp({ type: SubjectPublicKeyInfo })\n], TBSCertificate.prototype, \"subjectPublicKeyInfo\", void 0);\n__decorate([\n    AsnProp({\n        type: AsnPropTypes.BitString,\n        context: 1,\n        implicit: true,\n        optional: true,\n    })\n], TBSCertificate.prototype, \"issuerUniqueID\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.BitString, context: 2, implicit: true, optional: true })\n], TBSCertificate.prototype, \"subjectUniqueID\", void 0);\n__decorate([\n    AsnProp({ type: Extensions, context: 3, optional: true })\n], TBSCertificate.prototype, \"extensions\", void 0);\n", "import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nimport { AlgorithmIdentifier } from \"./algorithm_identifier\";\nexport class SubjectPublicKeyInfo {\n    constructor(params = {}) {\n        this.algorithm = new AlgorithmIdentifier();\n        this.subjectPublicKey = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AlgorithmIdentifier })\n], SubjectPublicKeyInfo.prototype, \"algorithm\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.BitString })\n], SubjectPublicKeyInfo.prototype, \"subjectPublicKey\", void 0);\n", "import { __decorate } from \"tslib\";\nimport { AsnProp } from \"@peculiar/asn1-schema\";\nimport { Time } from \"./time\";\nexport class Validity {\n    constructor(params) {\n        this.notBefore = new Time(new Date());\n        this.notAfter = new Time(new Date());\n        if (params) {\n            this.notBefore = new Time(params.notBefore);\n            this.notAfter = new Time(params.notAfter);\n        }\n    }\n}\n__decorate([\n    AsnProp({ type: Time })\n], Validity.prototype, \"notBefore\", void 0);\n__decorate([\n    AsnProp({ type: Time })\n], Validity.prototype, \"notAfter\", void 0);\n", "import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nlet Time = class Time {\n    constructor(time) {\n        if (time) {\n            if (typeof time === \"string\" || typeof time === \"number\" || time instanceof Date) {\n                const date = new Date(time);\n                if (date.getUTCFullYear() > 2049) {\n                    this.generalTime = date;\n                }\n                else {\n                    this.utcTime = date;\n                }\n            }\n            else {\n                Object.assign(this, time);\n            }\n        }\n    }\n    getTime() {\n        const time = this.utcTime || this.generalTime;\n        if (!time) {\n            throw new Error(\"Cannot get time from CHOICE object\");\n        }\n        return time;\n    }\n};\n__decorate([\n    AsnProp({\n        type: AsnPropTypes.UTCTime,\n    })\n], Time.prototype, \"utcTime\", void 0);\n__decorate([\n    AsnProp({\n        type: AsnPropTypes.GeneralizedTime,\n    })\n], Time.prototype, \"generalTime\", void 0);\nTime = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], Time);\nexport { Time };\n", "var Extensions_1;\nimport { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnArray, AsnType, AsnTypeTypes, OctetString, } from \"@peculiar/asn1-schema\";\nexport class Extension {\n    constructor(params = {}) {\n        this.extnID = \"\";\n        this.critical = Extension.CRITICAL;\n        this.extnValue = new OctetString();\n        Object.assign(this, params);\n    }\n}\nExtension.CRITICAL = false;\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], Extension.prototype, \"extnID\", void 0);\n__decorate([\n    AsnProp({\n        type: AsnPropTypes.Boolean,\n        defaultValue: Extension.CRITICAL,\n    })\n], Extension.prototype, \"critical\", void 0);\n__decorate([\n    AsnProp({ type: OctetString })\n], Extension.prototype, \"extnValue\", void 0);\nlet Extensions = Extensions_1 = class Extensions extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, Extensions_1.prototype);\n    }\n};\nExtensions = Extensions_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: Extension })\n], Extensions);\nexport { Extensions };\n", "export var Version;\n(function (Version) {\n    Version[Version[\"v1\"] = 0] = \"v1\";\n    Version[Version[\"v2\"] = 1] = \"v2\";\n    Version[Version[\"v3\"] = 2] = \"v3\";\n})(Version || (Version = {}));\n", "import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nimport { AlgorithmIdentifier } from \"./algorithm_identifier\";\nimport { TBSCertList } from \"./tbs_cert_list\";\nexport class CertificateList {\n    constructor(params = {}) {\n        this.tbsCertList = new TBSCertList();\n        this.signatureAlgorithm = new AlgorithmIdentifier();\n        this.signature = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: TBSCertList, raw: true })\n], CertificateList.prototype, \"tbsCertList\", void 0);\n__decorate([\n    AsnProp({ type: AlgorithmIdentifier })\n], CertificateList.prototype, \"signatureAlgorithm\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.BitString })\n], CertificateList.prototype, \"signature\", void 0);\n", "import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnIntegerArrayBufferConverter } from \"@peculiar/asn1-schema\";\nimport { AlgorithmIdentifier } from \"./algorithm_identifier\";\nimport { Name } from \"./name\";\nimport { Time } from \"./time\";\nimport { Extension } from \"./extension\";\nexport class RevokedCertificate {\n    constructor(params = {}) {\n        this.userCertificate = new ArrayBuffer(0);\n        this.revocationDate = new Time();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], RevokedCertificate.prototype, \"userCertificate\", void 0);\n__decorate([\n    AsnProp({ type: Time })\n], RevokedCertificate.prototype, \"revocationDate\", void 0);\n__decorate([\n    AsnProp({ type: Extension, optional: true, repeated: \"sequence\" })\n], RevokedCertificate.prototype, \"crlEntryExtensions\", void 0);\nexport class TBSCertList {\n    constructor(params = {}) {\n        this.signature = new AlgorithmIdentifier();\n        this.issuer = new Name();\n        this.thisUpdate = new Time();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, optional: true })\n], TBSCertList.prototype, \"version\", void 0);\n__decorate([\n    AsnProp({ type: AlgorithmIdentifier })\n], TBSCertList.prototype, \"signature\", void 0);\n__decorate([\n    AsnProp({ type: Name })\n], TBSCertList.prototype, \"issuer\", void 0);\n__decorate([\n    AsnProp({ type: Time })\n], TBSCertList.prototype, \"thisUpdate\", void 0);\n__decorate([\n    AsnProp({ type: Time, optional: true })\n], TBSCertList.prototype, \"nextUpdate\", void 0);\n__decorate([\n    AsnProp({ type: RevokedCertificate, repeated: \"sequence\", optional: true })\n], TBSCertList.prototype, \"revokedCertificates\", void 0);\n__decorate([\n    AsnProp({ type: Extension, optional: true, context: 0, repeated: \"sequence\" })\n], TBSCertList.prototype, \"crlExtensions\", void 0);\n", "export * from \"./algorithms\";\nexport * from \"./ec_parameters\";\nexport * from \"./ec_private_key\";\nexport * from \"./ec_signature_value\";\nexport * from \"./object_identifiers\";\nexport * from \"./rfc3279\";\n", "import { AlgorithmIdentifier } from \"@peculiar/asn1-x509\";\nimport * as oid from \"./object_identifiers\";\nfunction create(algorithm) {\n    return new AlgorithmIdentifier({ algorithm });\n}\nexport const ecdsaWithSHA1 = create(oid.id_ecdsaWithSHA1);\nexport const ecdsaWithSHA224 = create(oid.id_ecdsaWithSHA224);\nexport const ecdsaWithSHA256 = create(oid.id_ecdsaWithSHA256);\nexport const ecdsaWithSHA384 = create(oid.id_ecdsaWithSHA384);\nexport const ecdsaWithSHA512 = create(oid.id_ecdsaWithSHA512);\n", "export const id_ecPublicKey = \"1.2.840.10045.2.1\";\nexport const id_ecDH = \"1.3.132.1.12\";\nexport const id_ecMQV = \"1.3.132.1.13\";\nexport const id_ecdsaWithSHA1 = \"1.2.840.10045.4.1\";\nexport const id_ecdsaWithSHA224 = \"1.2.840.10045.4.3.1\";\nexport const id_ecdsaWithSHA256 = \"1.2.840.10045.4.3.2\";\nexport const id_ecdsaWithSHA384 = \"1.2.840.10045.4.3.3\";\nexport const id_ecdsaWithSHA512 = \"1.2.840.10045.4.3.4\";\nexport const id_secp192r1 = \"1.2.840.10045.3.1.1\";\nexport const id_sect163k1 = \"1.3.132.0.1\";\nexport const id_sect163r2 = \"1.3.132.0.15\";\nexport const id_secp224r1 = \"1.3.132.0.33\";\nexport const id_sect233k1 = \"1.3.132.0.26\";\nexport const id_sect233r1 = \"1.3.132.0.27\";\nexport const id_secp256r1 = \"1.2.840.10045.3.1.7\";\nexport const id_sect283k1 = \"1.3.132.0.16\";\nexport const id_sect283r1 = \"1.3.132.0.17\";\nexport const id_secp384r1 = \"1.3.132.0.34\";\nexport const id_sect409k1 = \"1.3.132.0.36\";\nexport const id_sect409r1 = \"1.3.132.0.37\";\nexport const id_secp521r1 = \"1.3.132.0.35\";\nexport const id_sect571k1 = \"1.3.132.0.38\";\nexport const id_sect571r1 = \"1.3.132.0.39\";\n", "import { __decorate } from \"tslib\";\nimport { AsnType, AsnTypeTypes, AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nimport { SpecifiedECDomain } from \"./rfc3279\";\nlet ECParameters = class ECParameters {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n};\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], ECParameters.prototype, \"namedCurve\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Null })\n], ECParameters.prototype, \"implicitCurve\", void 0);\n__decorate([\n    AsnProp({ type: SpecifiedECDomain })\n], ECParameters.prototype, \"specifiedCurve\", void 0);\nECParameters = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], ECParameters);\nexport { ECParameters };\n", "import { __decorate } from \"tslib\";\nimport { AsnType, AsnTypeTypes, AsnProp, AsnPropTypes, OctetString, AsnIntegerArrayBufferConverter, } from \"@peculiar/asn1-schema\";\nlet FieldID = class FieldID {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n};\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], FieldID.prototype, \"fieldType\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Any })\n], FieldID.prototype, \"parameters\", void 0);\nFieldID = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence })\n], FieldID);\nexport { FieldID };\nexport class ECPoint extends OctetString {\n}\nexport class FieldElement extends OctetString {\n}\nlet Curve = class Curve {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n};\n__decorate([\n    AsnProp({ type: AsnPropTypes.OctetString })\n], Curve.prototype, \"a\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.OctetString })\n], Curve.prototype, \"b\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.BitString, optional: true })\n], Curve.prototype, \"seed\", void 0);\nCurve = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence })\n], Curve);\nexport { Curve };\nexport var ECPVer;\n(function (ECPVer) {\n    ECPVer[ECPVer[\"ecpVer1\"] = 1] = \"ecpVer1\";\n})(ECPVer || (ECPVer = {}));\nlet SpecifiedECDomain = class SpecifiedECDomain {\n    constructor(params = {}) {\n        this.version = ECPVer.ecpVer1;\n        Object.assign(this, params);\n    }\n};\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer })\n], SpecifiedECDomain.prototype, \"version\", void 0);\n__decorate([\n    AsnProp({ type: FieldID })\n], SpecifiedECDomain.prototype, \"fieldID\", void 0);\n__decorate([\n    AsnProp({ type: Curve })\n], SpecifiedECDomain.prototype, \"curve\", void 0);\n__decorate([\n    AsnProp({ type: ECPoint })\n], SpecifiedECDomain.prototype, \"base\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], SpecifiedECDomain.prototype, \"order\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, optional: true })\n], SpecifiedECDomain.prototype, \"cofactor\", void 0);\nSpecifiedECDomain = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence })\n], SpecifiedECDomain);\nexport { SpecifiedECDomain };\n", "import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, OctetString } from \"@peculiar/asn1-schema\";\nimport { ECParameters } from \"./ec_parameters\";\nexport class ECPrivateKey {\n    constructor(params = {}) {\n        this.version = 1;\n        this.privateKey = new OctetString();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer })\n], ECPrivateKey.prototype, \"version\", void 0);\n__decorate([\n    AsnProp({ type: OctetString })\n], ECPrivateKey.prototype, \"privateKey\", void 0);\n__decorate([\n    AsnProp({ type: ECParameters, context: 0, optional: true })\n], ECPrivateKey.prototype, \"parameters\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.BitString, context: 1, optional: true })\n], ECPrivateKey.prototype, \"publicKey\", void 0);\n", "import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnIntegerArrayBufferConverter } from \"@peculiar/asn1-schema\";\nexport class ECDSASigValue {\n    constructor(params = {}) {\n        this.r = new ArrayBuffer(0);\n        this.s = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], ECDSASigValue.prototype, \"r\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], ECDSASigValue.prototype, \"s\", void 0);\n", "export * from \"./parameters\";\nexport * from \"./algorithms\";\nexport * from \"./object_identifiers\";\nexport * from \"./other_prime_info\";\nexport * from \"./rsa_private_key\";\nexport * from \"./rsa_public_key\";\n", "export * from \"./rsaes_oaep\";\nexport * from \"./rsassa_pss\";\nexport * from \"./rsassa_pkcs1_v1_5\";\n", "import { __decorate } from \"tslib\";\nimport { AsnProp, AsnConvert } from \"@peculiar/asn1-schema\";\nimport { AlgorithmIdentifier } from \"@peculiar/asn1-x509\";\nimport { id_mgf1, id_RSAES_OAEP } from \"../object_identifiers\";\nimport { sha1, mgf1SHA1, pSpecifiedEmpty } from \"../algorithms\";\nexport class RsaEsOaepParams {\n    constructor(params = {}) {\n        this.hashAlgorithm = new AlgorithmIdentifier(sha1);\n        this.maskGenAlgorithm = new AlgorithmIdentifier({\n            algorithm: id_mgf1,\n            parameters: AsnConvert.serialize(sha1),\n        });\n        this.pSourceAlgorithm = new AlgorithmIdentifier(pSpecifiedEmpty);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AlgorithmIdentifier, context: 0, defaultValue: sha1 })\n], RsaEsOaepParams.prototype, \"hashAlgorithm\", void 0);\n__decorate([\n    AsnProp({ type: AlgorithmIdentifier, context: 1, defaultValue: mgf1SHA1 })\n], RsaEsOaepParams.prototype, \"maskGenAlgorithm\", void 0);\n__decorate([\n    AsnProp({ type: AlgorithmIdentifier, context: 2, defaultValue: pSpecifiedEmpty })\n], RsaEsOaepParams.prototype, \"pSourceAlgorithm\", void 0);\nexport const RSAES_OAEP = new AlgorithmIdentifier({\n    algorithm: id_RSAES_OAEP,\n    parameters: AsnConvert.serialize(new RsaEsOaepParams()),\n});\n", "export const id_pkcs_1 = \"1.2.840.113549.1.1\";\nexport const id_rsaEncryption = `${id_pkcs_1}.1`;\nexport const id_RSAES_OAEP = `${id_pkcs_1}.7`;\nexport const id_pSpecified = `${id_pkcs_1}.9`;\nexport const id_RSASSA_PSS = `${id_pkcs_1}.10`;\nexport const id_md2WithRSAEncryption = `${id_pkcs_1}.2`;\nexport const id_md5WithRSAEncryption = `${id_pkcs_1}.4`;\nexport const id_sha1WithRSAEncryption = `${id_pkcs_1}.5`;\nexport const id_sha224WithRSAEncryption = `${id_pkcs_1}.14`;\nexport const id_ssha224WithRSAEncryption = id_sha224WithRSAEncryption;\nexport const id_sha256WithRSAEncryption = `${id_pkcs_1}.11`;\nexport const id_sha384WithRSAEncryption = `${id_pkcs_1}.12`;\nexport const id_sha512WithRSAEncryption = `${id_pkcs_1}.13`;\nexport const id_sha512_224WithRSAEncryption = `${id_pkcs_1}.15`;\nexport const id_sha512_256WithRSAEncryption = `${id_pkcs_1}.16`;\nexport const id_sha1 = \"1.3.14.3.2.26\";\nexport const id_sha224 = \"2.16.840.1.101.3.4.2.4\";\nexport const id_sha256 = \"2.16.840.1.101.3.4.2.1\";\nexport const id_sha384 = \"2.16.840.1.101.3.4.2.2\";\nexport const id_sha512 = \"2.16.840.1.101.3.4.2.3\";\nexport const id_sha512_224 = \"2.16.840.1.101.3.4.2.5\";\nexport const id_sha512_256 = \"2.16.840.1.101.3.4.2.6\";\nexport const id_md2 = \"1.2.840.113549.2.2\";\nexport const id_md5 = \"1.2.840.113549.2.5\";\nexport const id_mgf1 = `${id_pkcs_1}.8`;\n", "import { AsnConvert, AsnOctetStringConverter } from \"@peculiar/asn1-schema\";\nimport { AlgorithmIdentifier } from \"@peculiar/asn1-x509\";\nimport * as oid from \"./object_identifiers\";\nfunction create(algorithm) {\n    return new AlgorithmIdentifier({ algorithm, parameters: null });\n}\nexport const md2 = create(oid.id_md2);\nexport const md4 = create(oid.id_md5);\nexport const sha1 = create(oid.id_sha1);\nexport const sha224 = create(oid.id_sha224);\nexport const sha256 = create(oid.id_sha256);\nexport const sha384 = create(oid.id_sha384);\nexport const sha512 = create(oid.id_sha512);\nexport const sha512_224 = create(oid.id_sha512_224);\nexport const sha512_256 = create(oid.id_sha512_256);\nexport const mgf1SHA1 = new AlgorithmIdentifier({\n    algorithm: oid.id_mgf1,\n    parameters: AsnConvert.serialize(sha1),\n});\nexport const pSpecifiedEmpty = new AlgorithmIdentifier({\n    algorithm: oid.id_pSpecified,\n    parameters: AsnConvert.serialize(AsnOctetStringConverter.toASN(new Uint8Array([\n        0xda, 0x39, 0xa3, 0xee, 0x5e, 0x6b, 0x4b, 0x0d, 0x32, 0x55, 0xbf, 0xef, 0x95, 0x60, 0x18,\n        0x90, 0xaf, 0xd8, 0x07, 0x09,\n    ]).buffer)),\n});\nexport const rsaEncryption = create(oid.id_rsaEncryption);\nexport const md2WithRSAEncryption = create(oid.id_md2WithRSAEncryption);\nexport const md5WithRSAEncryption = create(oid.id_md5WithRSAEncryption);\nexport const sha1WithRSAEncryption = create(oid.id_sha1WithRSAEncryption);\nexport const sha224WithRSAEncryption = create(oid.id_sha512_224WithRSAEncryption);\nexport const sha256WithRSAEncryption = create(oid.id_sha512_256WithRSAEncryption);\nexport const sha384WithRSAEncryption = create(oid.id_sha384WithRSAEncryption);\nexport const sha512WithRSAEncryption = create(oid.id_sha512WithRSAEncryption);\nexport const sha512_224WithRSAEncryption = create(oid.id_sha512_224WithRSAEncryption);\nexport const sha512_256WithRSAEncryption = create(oid.id_sha512_256WithRSAEncryption);\n", "import { __decorate } from \"tslib\";\nimport { AsnProp, AsnConvert, AsnPropTypes } from \"@peculiar/asn1-schema\";\nimport { AlgorithmIdentifier } from \"@peculiar/asn1-x509\";\nimport { id_mgf1, id_RSASSA_PSS } from \"../object_identifiers\";\nimport { sha1, mgf1SHA1 } from \"../algorithms\";\nexport class RsaSaPssParams {\n    constructor(params = {}) {\n        this.hashAlgorithm = new AlgorithmIdentifier(sha1);\n        this.maskGenAlgorithm = new AlgorithmIdentifier({\n            algorithm: id_mgf1,\n            parameters: AsnConvert.serialize(sha1),\n        });\n        this.saltLength = 20;\n        this.trailerField = 1;\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AlgorithmIdentifier, context: 0, defaultValue: sha1 })\n], RsaSaPssParams.prototype, \"hashAlgorithm\", void 0);\n__decorate([\n    AsnProp({ type: AlgorithmIdentifier, context: 1, defaultValue: mgf1SHA1 })\n], RsaSaPssParams.prototype, \"maskGenAlgorithm\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, context: 2, defaultValue: 20 })\n], RsaSaPssParams.prototype, \"saltLength\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, context: 3, defaultValue: 1 })\n], RsaSaPssParams.prototype, \"trailerField\", void 0);\nexport const RSASSA_PSS = new AlgorithmIdentifier({\n    algorithm: id_RSASSA_PSS,\n    parameters: AsnConvert.serialize(new RsaSaPssParams()),\n});\n", "import { __decorate } from \"tslib\";\nimport { AlgorithmIdentifier } from \"@peculiar/asn1-x509\";\nimport { AsnProp, OctetString } from \"@peculiar/asn1-schema\";\nexport class DigestInfo {\n    constructor(params = {}) {\n        this.digestAlgorithm = new AlgorithmIdentifier();\n        this.digest = new OctetString();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AlgorithmIdentifier })\n], DigestInfo.prototype, \"digestAlgorithm\", void 0);\n__decorate([\n    AsnProp({ type: OctetString })\n], DigestInfo.prototype, \"digest\", void 0);\n", "var OtherPrimeInfos_1;\nimport { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnIntegerArrayBufferConverter, AsnArray, AsnType, AsnTypeTypes, } from \"@peculiar/asn1-schema\";\nexport class OtherPrimeInfo {\n    constructor(params = {}) {\n        this.prime = new ArrayBuffer(0);\n        this.exponent = new ArrayBuffer(0);\n        this.coefficient = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], OtherPrimeInfo.prototype, \"prime\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], OtherPrimeInfo.prototype, \"exponent\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], OtherPrimeInfo.prototype, \"coefficient\", void 0);\nlet OtherPrimeInfos = OtherPrimeInfos_1 = class OtherPrimeInfos extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, OtherPrimeInfos_1.prototype);\n    }\n};\nOtherPrimeInfos = OtherPrimeInfos_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: OtherPrimeInfo })\n], OtherPrimeInfos);\nexport { OtherPrimeInfos };\n", "import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnIntegerArrayBufferConverter } from \"@peculiar/asn1-schema\";\nimport { OtherPrimeInfos } from \"./other_prime_info\";\nexport class RSAPrivateKey {\n    constructor(params = {}) {\n        this.version = 0;\n        this.modulus = new ArrayBuffer(0);\n        this.publicExponent = new ArrayBuffer(0);\n        this.privateExponent = new ArrayBuffer(0);\n        this.prime1 = new ArrayBuffer(0);\n        this.prime2 = new ArrayBuffer(0);\n        this.exponent1 = new ArrayBuffer(0);\n        this.exponent2 = new ArrayBuffer(0);\n        this.coefficient = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer })\n], RSAPrivateKey.prototype, \"version\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], RSAPrivateKey.prototype, \"modulus\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], RSAPrivateKey.prototype, \"publicExponent\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], RSAPrivateKey.prototype, \"privateExponent\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], RSAPrivateKey.prototype, \"prime1\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], RSAPrivateKey.prototype, \"prime2\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], RSAPrivateKey.prototype, \"exponent1\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], RSAPrivateKey.prototype, \"exponent2\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], RSAPrivateKey.prototype, \"coefficient\", void 0);\n__decorate([\n    AsnProp({ type: OtherPrimeInfos, optional: true })\n], RSAPrivateKey.prototype, \"otherPrimeInfos\", void 0);\n", "import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnIntegerArrayBufferConverter } from \"@peculiar/asn1-schema\";\nexport class RSAPublicKey {\n    constructor(params = {}) {\n        this.modulus = new ArrayBuffer(0);\n        this.publicExponent = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], RSAPublicKey.prototype, \"modulus\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], RSAPublicKey.prototype, \"publicExponent\", void 0);\n", "export * from \"./key_description\";\nexport * from \"./nonstandard\";\nexport * from \"./attestation\";\n", "var IntegerSet_1;\nimport { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnArray, AsnType, AsnTypeTypes, OctetString, } from \"@peculiar/asn1-schema\";\nexport const id_ce_keyDescription = \"1.3.6.1.4.1.11129.2.1.17\";\nexport var VerifiedBootState;\n(function (VerifiedBootState) {\n    VerifiedBootState[VerifiedBootState[\"verified\"] = 0] = \"verified\";\n    VerifiedBootState[VerifiedBootState[\"selfSigned\"] = 1] = \"selfSigned\";\n    VerifiedBootState[VerifiedBootState[\"unverified\"] = 2] = \"unverified\";\n    VerifiedBootState[VerifiedBootState[\"failed\"] = 3] = \"failed\";\n})(VerifiedBootState || (VerifiedBootState = {}));\nexport class RootOfTrust {\n    constructor(params = {}) {\n        this.verifiedBootKey = new OctetString();\n        this.deviceLocked = false;\n        this.verifiedBootState = VerifiedBootState.verified;\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: OctetString })\n], RootOfTrust.prototype, \"verifiedBootKey\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Boolean })\n], RootOfTrust.prototype, \"deviceLocked\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Enumerated })\n], RootOfTrust.prototype, \"verifiedBootState\", void 0);\n__decorate([\n    AsnProp({ type: OctetString, optional: true })\n], RootOfTrust.prototype, \"verifiedBootHash\", void 0);\nlet IntegerSet = IntegerSet_1 = class IntegerSet extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, IntegerSet_1.prototype);\n    }\n};\nIntegerSet = IntegerSet_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Set, itemType: AsnPropTypes.Integer })\n], IntegerSet);\nexport { IntegerSet };\nexport class AuthorizationList {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ context: 1, type: IntegerSet, optional: true })\n], AuthorizationList.prototype, \"purpose\", void 0);\n__decorate([\n    AsnProp({ context: 2, type: AsnPropTypes.Integer, optional: true })\n], AuthorizationList.prototype, \"algorithm\", void 0);\n__decorate([\n    AsnProp({ context: 3, type: AsnPropTypes.Integer, optional: true })\n], AuthorizationList.prototype, \"keySize\", void 0);\n__decorate([\n    AsnProp({ context: 5, type: IntegerSet, optional: true })\n], AuthorizationList.prototype, \"digest\", void 0);\n__decorate([\n    AsnProp({ context: 6, type: IntegerSet, optional: true })\n], AuthorizationList.prototype, \"padding\", void 0);\n__decorate([\n    AsnProp({ context: 10, type: AsnPropTypes.Integer, optional: true })\n], AuthorizationList.prototype, \"ecCurve\", void 0);\n__decorate([\n    AsnProp({ context: 200, type: AsnPropTypes.Integer, optional: true })\n], AuthorizationList.prototype, \"rsaPublicExponent\", void 0);\n__decorate([\n    AsnProp({ context: 203, type: IntegerSet, optional: true })\n], AuthorizationList.prototype, \"mgfDigest\", void 0);\n__decorate([\n    AsnProp({ context: 303, type: AsnPropTypes.Null, optional: true })\n], AuthorizationList.prototype, \"rollbackResistance\", void 0);\n__decorate([\n    AsnProp({ context: 305, type: AsnPropTypes.Null, optional: true })\n], AuthorizationList.prototype, \"earlyBootOnly\", void 0);\n__decorate([\n    AsnProp({ context: 400, type: AsnPropTypes.Integer, optional: true })\n], AuthorizationList.prototype, \"activeDateTime\", void 0);\n__decorate([\n    AsnProp({ context: 401, type: AsnPropTypes.Integer, optional: true })\n], AuthorizationList.prototype, \"originationExpireDateTime\", void 0);\n__decorate([\n    AsnProp({ context: 402, type: AsnPropTypes.Integer, optional: true })\n], AuthorizationList.prototype, \"usageExpireDateTime\", void 0);\n__decorate([\n    AsnProp({ context: 405, type: AsnPropTypes.Integer, optional: true })\n], AuthorizationList.prototype, \"usageCountLimit\", void 0);\n__decorate([\n    AsnProp({ context: 503, type: AsnPropTypes.Null, optional: true })\n], AuthorizationList.prototype, \"noAuthRequired\", void 0);\n__decorate([\n    AsnProp({ context: 504, type: AsnPropTypes.Integer, optional: true })\n], AuthorizationList.prototype, \"userAuthType\", void 0);\n__decorate([\n    AsnProp({ context: 505, type: AsnPropTypes.Integer, optional: true })\n], AuthorizationList.prototype, \"authTimeout\", void 0);\n__decorate([\n    AsnProp({ context: 506, type: AsnPropTypes.Null, optional: true })\n], AuthorizationList.prototype, \"allowWhileOnBody\", void 0);\n__decorate([\n    AsnProp({ context: 507, type: AsnPropTypes.Null, optional: true })\n], AuthorizationList.prototype, \"trustedUserPresenceRequired\", void 0);\n__decorate([\n    AsnProp({ context: 508, type: AsnPropTypes.Null, optional: true })\n], AuthorizationList.prototype, \"trustedConfirmationRequired\", void 0);\n__decorate([\n    AsnProp({ context: 509, type: AsnPropTypes.Null, optional: true })\n], AuthorizationList.prototype, \"unlockedDeviceRequired\", void 0);\n__decorate([\n    AsnProp({ context: 600, type: AsnPropTypes.Null, optional: true })\n], AuthorizationList.prototype, \"allApplications\", void 0);\n__decorate([\n    AsnProp({ context: 601, type: OctetString, optional: true })\n], AuthorizationList.prototype, \"applicationId\", void 0);\n__decorate([\n    AsnProp({ context: 701, type: AsnPropTypes.Integer, optional: true })\n], AuthorizationList.prototype, \"creationDateTime\", void 0);\n__decorate([\n    AsnProp({ context: 702, type: AsnPropTypes.Integer, optional: true })\n], AuthorizationList.prototype, \"origin\", void 0);\n__decorate([\n    AsnProp({ context: 703, type: AsnPropTypes.Null, optional: true })\n], AuthorizationList.prototype, \"rollbackResistant\", void 0);\n__decorate([\n    AsnProp({ context: 704, type: RootOfTrust, optional: true })\n], AuthorizationList.prototype, \"rootOfTrust\", void 0);\n__decorate([\n    AsnProp({ context: 705, type: AsnPropTypes.Integer, optional: true })\n], AuthorizationList.prototype, \"osVersion\", void 0);\n__decorate([\n    AsnProp({ context: 706, type: AsnPropTypes.Integer, optional: true })\n], AuthorizationList.prototype, \"osPatchLevel\", void 0);\n__decorate([\n    AsnProp({ context: 709, type: OctetString, optional: true })\n], AuthorizationList.prototype, \"attestationApplicationId\", void 0);\n__decorate([\n    AsnProp({ context: 710, type: OctetString, optional: true })\n], AuthorizationList.prototype, \"attestationIdBrand\", void 0);\n__decorate([\n    AsnProp({ context: 711, type: OctetString, optional: true })\n], AuthorizationList.prototype, \"attestationIdDevice\", void 0);\n__decorate([\n    AsnProp({ context: 712, type: OctetString, optional: true })\n], AuthorizationList.prototype, \"attestationIdProduct\", void 0);\n__decorate([\n    AsnProp({ context: 713, type: OctetString, optional: true })\n], AuthorizationList.prototype, \"attestationIdSerial\", void 0);\n__decorate([\n    AsnProp({ context: 714, type: OctetString, optional: true })\n], AuthorizationList.prototype, \"attestationIdImei\", void 0);\n__decorate([\n    AsnProp({ context: 715, type: OctetString, optional: true })\n], AuthorizationList.prototype, \"attestationIdMeid\", void 0);\n__decorate([\n    AsnProp({ context: 716, type: OctetString, optional: true })\n], AuthorizationList.prototype, \"attestationIdManufacturer\", void 0);\n__decorate([\n    AsnProp({ context: 717, type: OctetString, optional: true })\n], AuthorizationList.prototype, \"attestationIdModel\", void 0);\n__decorate([\n    AsnProp({ context: 718, type: AsnPropTypes.Integer, optional: true })\n], AuthorizationList.prototype, \"vendorPatchLevel\", void 0);\n__decorate([\n    AsnProp({ context: 719, type: AsnPropTypes.Integer, optional: true })\n], AuthorizationList.prototype, \"bootPatchLevel\", void 0);\n__decorate([\n    AsnProp({ context: 720, type: AsnPropTypes.Null, optional: true })\n], AuthorizationList.prototype, \"deviceUniqueAttestation\", void 0);\n__decorate([\n    AsnProp({ context: 723, type: OctetString, optional: true })\n], AuthorizationList.prototype, \"attestationIdSecondImei\", void 0);\n__decorate([\n    AsnProp({ context: 724, type: OctetString, optional: true })\n], AuthorizationList.prototype, \"moduleHash\", void 0);\nexport var SecurityLevel;\n(function (SecurityLevel) {\n    SecurityLevel[SecurityLevel[\"software\"] = 0] = \"software\";\n    SecurityLevel[SecurityLevel[\"trustedEnvironment\"] = 1] = \"trustedEnvironment\";\n    SecurityLevel[SecurityLevel[\"strongBox\"] = 2] = \"strongBox\";\n})(SecurityLevel || (SecurityLevel = {}));\nexport var Version;\n(function (Version) {\n    Version[Version[\"KM2\"] = 1] = \"KM2\";\n    Version[Version[\"KM3\"] = 2] = \"KM3\";\n    Version[Version[\"KM4\"] = 3] = \"KM4\";\n    Version[Version[\"KM4_1\"] = 4] = \"KM4_1\";\n    Version[Version[\"keyMint1\"] = 100] = \"keyMint1\";\n    Version[Version[\"keyMint2\"] = 200] = \"keyMint2\";\n    Version[Version[\"keyMint3\"] = 300] = \"keyMint3\";\n    Version[Version[\"keyMint4\"] = 400] = \"keyMint4\";\n})(Version || (Version = {}));\nexport class KeyDescription {\n    constructor(params = {}) {\n        this.attestationVersion = Version.KM4;\n        this.attestationSecurityLevel = SecurityLevel.software;\n        this.keymasterVersion = 0;\n        this.keymasterSecurityLevel = SecurityLevel.software;\n        this.attestationChallenge = new OctetString();\n        this.uniqueId = new OctetString();\n        this.softwareEnforced = new AuthorizationList();\n        this.teeEnforced = new AuthorizationList();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer })\n], KeyDescription.prototype, \"attestationVersion\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Enumerated })\n], KeyDescription.prototype, \"attestationSecurityLevel\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer })\n], KeyDescription.prototype, \"keymasterVersion\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Enumerated })\n], KeyDescription.prototype, \"keymasterSecurityLevel\", void 0);\n__decorate([\n    AsnProp({ type: OctetString })\n], KeyDescription.prototype, \"attestationChallenge\", void 0);\n__decorate([\n    AsnProp({ type: OctetString })\n], KeyDescription.prototype, \"uniqueId\", void 0);\n__decorate([\n    AsnProp({ type: AuthorizationList })\n], KeyDescription.prototype, \"softwareEnforced\", void 0);\n__decorate([\n    AsnProp({ type: AuthorizationList })\n], KeyDescription.prototype, \"teeEnforced\", void 0);\nexport class KeyMintKeyDescription {\n    constructor(params = {}) {\n        this.attestationVersion = Version.keyMint4;\n        this.attestationSecurityLevel = SecurityLevel.software;\n        this.keyMintVersion = 0;\n        this.keyMintSecurityLevel = SecurityLevel.software;\n        this.attestationChallenge = new OctetString();\n        this.uniqueId = new OctetString();\n        this.softwareEnforced = new AuthorizationList();\n        this.hardwareEnforced = new AuthorizationList();\n        Object.assign(this, params);\n    }\n    toLegacyKeyDescription() {\n        return new KeyDescription({\n            attestationVersion: this.attestationVersion,\n            attestationSecurityLevel: this.attestationSecurityLevel,\n            keymasterVersion: this.keyMintVersion,\n            keymasterSecurityLevel: this.keyMintSecurityLevel,\n            attestationChallenge: this.attestationChallenge,\n            uniqueId: this.uniqueId,\n            softwareEnforced: this.softwareEnforced,\n            teeEnforced: this.hardwareEnforced,\n        });\n    }\n    static fromLegacyKeyDescription(keyDesc) {\n        return new KeyMintKeyDescription({\n            attestationVersion: keyDesc.attestationVersion,\n            attestationSecurityLevel: keyDesc.attestationSecurityLevel,\n            keyMintVersion: keyDesc.keymasterVersion,\n            keyMintSecurityLevel: keyDesc.keymasterSecurityLevel,\n            attestationChallenge: keyDesc.attestationChallenge,\n            uniqueId: keyDesc.uniqueId,\n            softwareEnforced: keyDesc.softwareEnforced,\n            hardwareEnforced: keyDesc.teeEnforced,\n        });\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer })\n], KeyMintKeyDescription.prototype, \"attestationVersion\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Enumerated })\n], KeyMintKeyDescription.prototype, \"attestationSecurityLevel\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer })\n], KeyMintKeyDescription.prototype, \"keyMintVersion\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Enumerated })\n], KeyMintKeyDescription.prototype, \"keyMintSecurityLevel\", void 0);\n__decorate([\n    AsnProp({ type: OctetString })\n], KeyMintKeyDescription.prototype, \"attestationChallenge\", void 0);\n__decorate([\n    AsnProp({ type: OctetString })\n], KeyMintKeyDescription.prototype, \"uniqueId\", void 0);\n__decorate([\n    AsnProp({ type: AuthorizationList })\n], KeyMintKeyDescription.prototype, \"softwareEnforced\", void 0);\n__decorate([\n    AsnProp({ type: AuthorizationList })\n], KeyMintKeyDescription.prototype, \"hardwareEnforced\", void 0);\n", "var NonStandardAuthorizationList_1;\nimport { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnArray, AsnType, AsnTypeTypes, OctetString, } from \"@peculiar/asn1-schema\";\nimport { AuthorizationList, SecurityLevel, Version } from \"./key_description\";\nlet NonStandardAuthorization = class NonStandardAuthorization extends AuthorizationList {\n};\nNonStandardAuthorization = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], NonStandardAuthorization);\nexport { NonStandardAuthorization };\nlet NonStandardAuthorizationList = NonStandardAuthorizationList_1 = class NonStandardAuthorizationList extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, NonStandardAuthorizationList_1.prototype);\n    }\n    findProperty(key) {\n        const prop = this.find((o) => key in o);\n        if (prop) {\n            return prop[key];\n        }\n        return undefined;\n    }\n};\nNonStandardAuthorizationList = NonStandardAuthorizationList_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: NonStandardAuthorization })\n], NonStandardAuthorizationList);\nexport { NonStandardAuthorizationList };\nexport class NonStandardKeyDescription {\n    get keyMintVersion() {\n        return this.keymasterVersion;\n    }\n    set keyMintVersion(value) {\n        this.keymasterVersion = value;\n    }\n    get keyMintSecurityLevel() {\n        return this.keymasterSecurityLevel;\n    }\n    set keyMintSecurityLevel(value) {\n        this.keymasterSecurityLevel = value;\n    }\n    get hardwareEnforced() {\n        return this.teeEnforced;\n    }\n    set hardwareEnforced(value) {\n        this.teeEnforced = value;\n    }\n    constructor(params = {}) {\n        this.attestationVersion = Version.KM4;\n        this.attestationSecurityLevel = SecurityLevel.software;\n        this.keymasterVersion = 0;\n        this.keymasterSecurityLevel = SecurityLevel.software;\n        this.attestationChallenge = new OctetString();\n        this.uniqueId = new OctetString();\n        this.softwareEnforced = new NonStandardAuthorizationList();\n        this.teeEnforced = new NonStandardAuthorizationList();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer })\n], NonStandardKeyDescription.prototype, \"attestationVersion\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Enumerated })\n], NonStandardKeyDescription.prototype, \"attestationSecurityLevel\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer })\n], NonStandardKeyDescription.prototype, \"keymasterVersion\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Enumerated })\n], NonStandardKeyDescription.prototype, \"keymasterSecurityLevel\", void 0);\n__decorate([\n    AsnProp({ type: OctetString })\n], NonStandardKeyDescription.prototype, \"attestationChallenge\", void 0);\n__decorate([\n    AsnProp({ type: OctetString })\n], NonStandardKeyDescription.prototype, \"uniqueId\", void 0);\n__decorate([\n    AsnProp({ type: NonStandardAuthorizationList })\n], NonStandardKeyDescription.prototype, \"softwareEnforced\", void 0);\n__decorate([\n    AsnProp({ type: NonStandardAuthorizationList })\n], NonStandardKeyDescription.prototype, \"teeEnforced\", void 0);\nlet NonStandardKeyMintKeyDescription = class NonStandardKeyMintKeyDescription extends NonStandardKeyDescription {\n    constructor(params = {}) {\n        if (\"keymasterVersion\" in params && !(\"keyMintVersion\" in params)) {\n            params.keyMintVersion = params.keymasterVersion;\n        }\n        if (\"keymasterSecurityLevel\" in params && !(\"keyMintSecurityLevel\" in params)) {\n            params.keyMintSecurityLevel = params.keymasterSecurityLevel;\n        }\n        if (\"teeEnforced\" in params && !(\"hardwareEnforced\" in params)) {\n            params.hardwareEnforced = params.teeEnforced;\n        }\n        super(params);\n    }\n};\nNonStandardKeyMintKeyDescription = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence })\n], NonStandardKeyMintKeyDescription);\nexport { NonStandardKeyMintKeyDescription };\n", "import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nexport class AttestationPackageInfo {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.OctetString })\n], AttestationPackageInfo.prototype, \"packageName\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer })\n], AttestationPackageInfo.prototype, \"version\", void 0);\nexport class AttestationApplicationId {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AttestationPackageInfo, repeated: \"set\" })\n], AttestationApplicationId.prototype, \"packageInfos\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.OctetString, repeated: \"set\" })\n], AttestationApplicationId.prototype, \"signatureDigests\", void 0);\n", "import { tinyCbor } from '../../deps.js';\n/**\n * Whatever CBOR encoder is used should keep CBOR data the same length when data is re-encoded\n *\n * MOST CRITICALLY, this means the following needs to be true of whatever CBOR library we use:\n * - CBOR Map type values MUST decode to JavaScript Maps\n * - CBOR tag 64 (uint8 Typed Array) MUST NOT be used when encoding Uint8Arrays back to CBOR\n *\n * So long as these requirements are maintained, then CBOR sequences can be encoded and decoded\n * freely while maintaining their lengths for the most accurate pointer movement across them.\n */\n/**\n * Decode and return the first item in a sequence of CBOR-encoded values\n *\n * @param input The CBOR data to decode\n * @param asObject (optional) Whether to convert any CBOR Maps into JavaScript Objects. Defaults to\n * `false`\n */\nexport function decodeFirst(input) {\n    // Make a copy so we don't mutate the original\n    const _input = new Uint8Array(input);\n    const decoded = tinyCbor.decodePartialCBOR(_input, 0);\n    const [first] = decoded;\n    return first;\n}\n/**\n * Encode data to CBOR\n */\nexport function encode(input) {\n    return tinyCbor.encodeCBOR(input);\n}\n", "export { digest } from './digest.js';\nexport { getRandomValues } from './getRandomValues.js';\nexport { verify } from './verify.js';\n", "import { mapCoseAlgToWebCryptoAlg } from './mapCoseAlgToWebCryptoAlg.js';\nimport { getWebCrypto } from './getWebCrypto.js';\n/**\n * Generate a digest of the provided data.\n *\n * @param data The data to generate a digest of\n * @param algorithm A COSE algorithm ID that maps to a desired SHA algorithm\n */\nexport async function digest(data, algorithm) {\n    const WebCrypto = await getWebCrypto();\n    const subtleAlgorithm = mapCoseAlgToWebCryptoAlg(algorithm);\n    const hashed = await WebCrypto.subtle.digest(subtleAlgorithm, data);\n    return new Uint8Array(hashed);\n}\n", "import { COSEALG } from '../../cose.js';\n/**\n * Convert a COSE alg ID into a corresponding string value that WebCrypto APIs expect\n */\nexport function mapCoseAlgToWebCryptoAlg(alg) {\n    if ([COSEALG.RS1].indexOf(alg) >= 0) {\n        return 'SHA-1';\n    }\n    else if ([COSEALG.ES256, COSEALG.PS256, COSEALG.RS256].indexOf(alg) >= 0) {\n        return 'SHA-256';\n    }\n    else if ([COSEALG.ES384, COSEALG.PS384, COSEALG.RS384].indexOf(alg) >= 0) {\n        return 'SHA-384';\n    }\n    else if ([COSEALG.ES512, COSEALG.PS512, COSEALG.RS512, COSEALG.EdDSA].indexOf(alg) >=\n        0) {\n        return 'SHA-512';\n    }\n    throw new Error(`Could not map COSE alg value of ${alg} to a WebCrypto alg`);\n}\n", "export function isCOSEPublicKeyOKP(cosePublicKey) {\n    const kty = cosePublicKey.get(COSEKEYS.kty);\n    return isCOSEKty(kty) && kty === COSEKTY.OKP;\n}\nexport function isCOSEPublicKeyEC2(cosePublicKey) {\n    const kty = cosePublicKey.get(COSEKEYS.kty);\n    return isCOSEKty(kty) && kty === COSEKTY.EC2;\n}\nexport function isCOSEPublicKeyRSA(cosePublicKey) {\n    const kty = cosePublicKey.get(COSEKEYS.kty);\n    return isCOSEKty(kty) && kty === COSEKTY.RSA;\n}\n/**\n * COSE Keys\n *\n * https://www.iana.org/assignments/cose/cose.xhtml#key-common-parameters\n * https://www.iana.org/assignments/cose/cose.xhtml#key-type-parameters\n */\nexport var COSEKEYS;\n(function (COSEKEYS) {\n    COSEKEYS[COSEKEYS[\"kty\"] = 1] = \"kty\";\n    COSEKEYS[COSEKEYS[\"alg\"] = 3] = \"alg\";\n    COSEKEYS[COSEKEYS[\"crv\"] = -1] = \"crv\";\n    COSEKEYS[COSEKEYS[\"x\"] = -2] = \"x\";\n    COSEKEYS[COSEKEYS[\"y\"] = -3] = \"y\";\n    COSEKEYS[COSEKEYS[\"n\"] = -1] = \"n\";\n    COSEKEYS[COSEKEYS[\"e\"] = -2] = \"e\";\n})(COSEKEYS || (COSEKEYS = {}));\n/**\n * COSE Key Types\n *\n * https://www.iana.org/assignments/cose/cose.xhtml#key-type\n */\nexport var COSEKTY;\n(function (COSEKTY) {\n    COSEKTY[COSEKTY[\"OKP\"] = 1] = \"OKP\";\n    COSEKTY[COSEKTY[\"EC2\"] = 2] = \"EC2\";\n    COSEKTY[COSEKTY[\"RSA\"] = 3] = \"RSA\";\n})(COSEKTY || (COSEKTY = {}));\nexport function isCOSEKty(kty) {\n    return Object.values(COSEKTY).indexOf(kty) >= 0;\n}\n/**\n * COSE Curves\n *\n * https://www.iana.org/assignments/cose/cose.xhtml#elliptic-curves\n */\nexport var COSECRV;\n(function (COSECRV) {\n    COSECRV[COSECRV[\"P256\"] = 1] = \"P256\";\n    COSECRV[COSECRV[\"P384\"] = 2] = \"P384\";\n    COSECRV[COSECRV[\"P521\"] = 3] = \"P521\";\n    COSECRV[COSECRV[\"ED25519\"] = 6] = \"ED25519\";\n    COSECRV[COSECRV[\"SECP256K1\"] = 8] = \"SECP256K1\";\n})(COSECRV || (COSECRV = {}));\nexport function isCOSECrv(crv) {\n    return Object.values(COSECRV).indexOf(crv) >= 0;\n}\n/**\n * COSE Algorithms\n *\n * https://www.iana.org/assignments/cose/cose.xhtml#algorithms\n */\nexport var COSEALG;\n(function (COSEALG) {\n    COSEALG[COSEALG[\"ES256\"] = -7] = \"ES256\";\n    COSEALG[COSEALG[\"EdDSA\"] = -8] = \"EdDSA\";\n    COSEALG[COSEALG[\"ES384\"] = -35] = \"ES384\";\n    COSEALG[COSEALG[\"ES512\"] = -36] = \"ES512\";\n    COSEALG[COSEALG[\"PS256\"] = -37] = \"PS256\";\n    COSEALG[COSEALG[\"PS384\"] = -38] = \"PS384\";\n    COSEALG[COSEALG[\"PS512\"] = -39] = \"PS512\";\n    COSEALG[COSEALG[\"ES256K\"] = -47] = \"ES256K\";\n    COSEALG[COSEALG[\"RS256\"] = -257] = \"RS256\";\n    COSEALG[COSEALG[\"RS384\"] = -258] = \"RS384\";\n    COSEALG[COSEALG[\"RS512\"] = -259] = \"RS512\";\n    COSEALG[COSEALG[\"RS1\"] = -65535] = \"RS1\";\n})(COSEALG || (COSEALG = {}));\nexport function isCOSEAlg(alg) {\n    return Object.values(COSEALG).indexOf(alg) >= 0;\n}\n", "let webCrypto = undefined;\n/**\n * Try to get an instance of the Crypto API from the current runtime. Should support Node,\n * as well as others, like Deno, that implement Web APIs.\n */\nexport function getWebCrypto() {\n    /**\n     * Hello there! If you came here wondering why this method is asynchronous when use of\n     * `globalThis.crypto` is not, it's to minimize a bunch of refactor related to making this\n     * synchronous. For example, `generateRegistrationOptions()` and `generateAuthenticationOptions()`\n     * become synchronous if we make this synchronous (since nothing else in that method is async)\n     * which represents a breaking API change in this library's core API.\n     *\n     * TODO: If it's after February 2025 when you read this then consider whether it still makes sense\n     * to keep this method asynchronous.\n     */\n    const toResolve = new Promise((resolve, reject) => {\n        if (webCrypto) {\n            return resolve(webCrypto);\n        }\n        /**\n         * Naively attempt to access Crypto as a global object, which popular ESM-centric run-times\n         * support (and Node v20+)\n         */\n        const _globalThisCrypto = _getWebCryptoInternals.stubThisGlobalThisCrypto();\n        if (_globalThisCrypto) {\n            webCrypto = _globalThisCrypto;\n            return resolve(webCrypto);\n        }\n        // We tried to access it both in Node and globally, so bail out\n        return reject(new MissingWebCrypto());\n    });\n    return toResolve;\n}\nexport class MissingWebCrypto extends Error {\n    constructor() {\n        const message = 'An instance of the Crypto API could not be located';\n        super(message);\n        this.name = 'MissingWebCrypto';\n    }\n}\n// Make it possible to stub return values during testing\nexport const _getWebCryptoInternals = {\n    stubThisGlobalThisCrypto: () => globalThis.crypto,\n    // Make it possible to reset the `webCrypto` at the top of the file\n    setCachedCrypto: (newCrypto) => {\n        webCrypto = newCrypto;\n    },\n};\n", "import { getWebCrypto } from './getWebCrypto.js';\n/**\n * Fill up the provided bytes array with random bytes equal to its length.\n *\n * @returns the same bytes array passed into the method\n */\nexport async function getRandomValues(array) {\n    const WebCrypto = await getWebCrypto();\n    WebCrypto.getRandomValues(array);\n    return array;\n}\n", "import { COSEKEYS, isCOSECrv, isCOSEPublicKeyEC2, isCOSEPublicKeyOKP, isCOSEPublicKeyRSA, } from '../../cose.js';\nimport { verifyEC2 } from './verifyEC2.js';\nimport { verifyRSA } from './verifyRSA.js';\nimport { verifyOKP } from './verifyOKP.js';\nimport { unwrapEC2Signature } from './unwrapEC2Signature.js';\n/**\n * Verify signatures with their public key. Supports EC2 and RSA public keys.\n */\nexport function verify(opts) {\n    const { cosePublicKey, signature, data, shaHashOverride } = opts;\n    if (isCOSEPublicKeyEC2(cosePublicKey)) {\n        const crv = cosePublicKey.get(COSEKEYS.crv);\n        if (!isCOSECrv(crv)) {\n            throw new Error(`unknown COSE curve ${crv}`);\n        }\n        const unwrappedSignature = unwrapEC2Signature(signature, crv);\n        return verifyEC2({\n            cosePublicKey,\n            signature: unwrappedSignature,\n            data,\n            shaHashOverride,\n        });\n    }\n    else if (isCOSEPublicKeyRSA(cosePublicKey)) {\n        return verifyRSA({ cosePublicKey, signature, data, shaHashOverride });\n    }\n    else if (isCOSEPublicKeyOKP(cosePublicKey)) {\n        return verifyOKP({ cosePublicKey, signature, data });\n    }\n    const kty = cosePublicKey.get(COSEKEYS.kty);\n    throw new Error(`Signature verification with public key of kty ${kty} is not supported by this method`);\n}\n", "import { COSECRV, COSEKEYS } from '../../cose.js';\nimport { mapCoseAlgToWebCryptoAlg } from './mapCoseAlgToWebCryptoAlg.js';\nimport { importKey } from './importKey.js';\nimport { isoBase64URL } from '../index.js';\nimport { getWebCrypto } from './getWebCrypto.js';\n/**\n * Verify a signature using an EC2 public key\n */\nexport async function verifyEC2(opts) {\n    const { cosePublicKey, signature, data, shaHashOverride } = opts;\n    const WebCrypto = await getWebCrypto();\n    // Import the public key\n    const alg = cosePublicKey.get(COSEKEYS.alg);\n    const crv = cosePublicKey.get(COSEKEYS.crv);\n    const x = cosePublicKey.get(COSEKEYS.x);\n    const y = cosePublicKey.get(COSEKEYS.y);\n    if (!alg) {\n        throw new Error('Public key was missing alg (EC2)');\n    }\n    if (!crv) {\n        throw new Error('Public key was missing crv (EC2)');\n    }\n    if (!x) {\n        throw new Error('Public key was missing x (EC2)');\n    }\n    if (!y) {\n        throw new Error('Public key was missing y (EC2)');\n    }\n    let _crv;\n    if (crv === COSECRV.P256) {\n        _crv = 'P-256';\n    }\n    else if (crv === COSECRV.P384) {\n        _crv = 'P-384';\n    }\n    else if (crv === COSECRV.P521) {\n        _crv = 'P-521';\n    }\n    else {\n        throw new Error(`Unexpected COSE crv value of ${crv} (EC2)`);\n    }\n    const keyData = {\n        kty: 'EC',\n        crv: _crv,\n        x: isoBase64URL.fromBuffer(x),\n        y: isoBase64URL.fromBuffer(y),\n        ext: false,\n    };\n    const keyAlgorithm = {\n        /**\n         * Note to future self: you can't use `mapCoseAlgToWebCryptoKeyAlgName()` here because some\n         * leaf certs from actual devices specified an RSA SHA value for `alg` (e.g. `-257`) which\n         * would then map here to `'RSASSA-PKCS1-v1_5'`. We always want `'ECDSA'` here so we'll\n         * hard-code this.\n         */\n        name: 'ECDSA',\n        namedCurve: _crv,\n    };\n    const key = await importKey({\n        keyData,\n        algorithm: keyAlgorithm,\n    });\n    // Determine which SHA algorithm to use for signature verification\n    let subtleAlg = mapCoseAlgToWebCryptoAlg(alg);\n    if (shaHashOverride) {\n        subtleAlg = mapCoseAlgToWebCryptoAlg(shaHashOverride);\n    }\n    const verifyAlgorithm = {\n        name: 'ECDSA',\n        hash: { name: subtleAlg },\n    };\n    return WebCrypto.subtle.verify(verifyAlgorithm, key, signature, data);\n}\n", "import { getWebCrypto } from './getWebCrypto.js';\nexport async function importKey(opts) {\n    const WebCrypto = await getWebCrypto();\n    const { keyData, algorithm } = opts;\n    return WebCrypto.subtle.importKey('jwk', keyData, algorithm, false, [\n        'verify',\n    ]);\n}\n", "import { COSEKEYS, isCOSEAlg } from '../../cose.js';\nimport { mapCoseAlgToWebCryptoAlg } from './mapCoseAlgToWebCryptoAlg.js';\nimport { importKey } from './importKey.js';\nimport { isoBase64URL } from '../index.js';\nimport { mapCoseAlgToWebCryptoKeyAlgName } from './mapCoseAlgToWebCryptoKeyAlgName.js';\nimport { getWebCrypto } from './getWebCrypto.js';\n/**\n * Verify a signature using an RSA public key\n */\nexport async function verifyRSA(opts) {\n    const { cosePublicKey, signature, data, shaHashOverride } = opts;\n    const WebCrypto = await getWebCrypto();\n    const alg = cosePublicKey.get(COSEKEYS.alg);\n    const n = cosePublicKey.get(COSEKEYS.n);\n    const e = cosePublicKey.get(COSEKEYS.e);\n    if (!alg) {\n        throw new Error('Public key was missing alg (RSA)');\n    }\n    if (!isCOSEAlg(alg)) {\n        throw new Error(`Public key had invalid alg ${alg} (RSA)`);\n    }\n    if (!n) {\n        throw new Error('Public key was missing n (RSA)');\n    }\n    if (!e) {\n        throw new Error('Public key was missing e (RSA)');\n    }\n    const keyData = {\n        kty: 'RSA',\n        alg: '',\n        n: isoBase64URL.fromBuffer(n),\n        e: isoBase64URL.fromBuffer(e),\n        ext: false,\n    };\n    const keyAlgorithm = {\n        name: mapCoseAlgToWebCryptoKeyAlgName(alg),\n        hash: { name: mapCoseAlgToWebCryptoAlg(alg) },\n    };\n    const verifyAlgorithm = {\n        name: mapCoseAlgToWebCryptoKeyAlgName(alg),\n    };\n    if (shaHashOverride) {\n        keyAlgorithm.hash.name = mapCoseAlgToWebCryptoAlg(shaHashOverride);\n    }\n    if (keyAlgorithm.name === 'RSASSA-PKCS1-v1_5') {\n        if (keyAlgorithm.hash.name === 'SHA-256') {\n            keyData.alg = 'RS256';\n        }\n        else if (keyAlgorithm.hash.name === 'SHA-384') {\n            keyData.alg = 'RS384';\n        }\n        else if (keyAlgorithm.hash.name === 'SHA-512') {\n            keyData.alg = 'RS512';\n        }\n        else if (keyAlgorithm.hash.name === 'SHA-1') {\n            keyData.alg = 'RS1';\n        }\n    }\n    else if (keyAlgorithm.name === 'RSA-PSS') {\n        /**\n         * salt length. The default value is 20 but the convention is to use hLen, the length of the\n         * output of the hash function in bytes. A salt length of zero is permitted and will result in\n         * a deterministic signature value. The actual salt length used can be determined from the\n         * signature value.\n         *\n         * From https://www.cryptosys.net/pki/manpki/pki_rsaschemes.html\n         */\n        let saltLength = 0;\n        if (keyAlgorithm.hash.name === 'SHA-256') {\n            keyData.alg = 'PS256';\n            saltLength = 32; // 256 bits => 32 bytes\n        }\n        else if (keyAlgorithm.hash.name === 'SHA-384') {\n            keyData.alg = 'PS384';\n            saltLength = 48; // 384 bits => 48 bytes\n        }\n        else if (keyAlgorithm.hash.name === 'SHA-512') {\n            keyData.alg = 'PS512';\n            saltLength = 64; // 512 bits => 64 bytes\n        }\n        verifyAlgorithm.saltLength = saltLength;\n    }\n    else {\n        throw new Error(`Unexpected RSA key algorithm ${alg} (${keyAlgorithm.name})`);\n    }\n    const key = await importKey({\n        keyData,\n        algorithm: keyAlgorithm,\n    });\n    return WebCrypto.subtle.verify(verifyAlgorithm, key, signature, data);\n}\n", "import { COSEALG } from '../../cose.js';\n/**\n * Convert a COSE alg ID into a corresponding key algorithm string value that WebCrypto APIs expect\n */\nexport function mapCoseAlgToWebCryptoKeyAlgName(alg) {\n    if ([COSEALG.EdDSA].indexOf(alg) >= 0) {\n        return 'Ed25519';\n    }\n    else if ([COSEALG.ES256, COSEALG.ES384, COSEALG.ES512, COSEALG.ES256K].indexOf(alg) >= 0) {\n        return 'ECDSA';\n    }\n    else if ([COSEALG.RS256, COSEALG.RS384, COSEALG.RS512, COSEALG.RS1].indexOf(alg) >= 0) {\n        return 'RSASSA-PKCS1-v1_5';\n    }\n    else if ([COSEALG.PS256, COSEALG.PS384, COSEALG.PS512].indexOf(alg) >= 0) {\n        return 'RSA-PSS';\n    }\n    throw new Error(`Could not map COSE alg value of ${alg} to a WebCrypto key alg name`);\n}\n", "import { COSECRV, COSEKEYS, isCOSEAlg } from '../../cose.js';\nimport { isoBase64URL } from '../../index.js';\nimport { importKey } from './importKey.js';\nimport { getWebCrypto } from './getWebCrypto.js';\nexport async function verifyOKP(opts) {\n    const { cosePublicKey, signature, data } = opts;\n    const WebCrypto = await getWebCrypto();\n    const alg = cosePublicKey.get(COSEKEYS.alg);\n    const crv = cosePublicKey.get(COSEKEYS.crv);\n    const x = cosePublicKey.get(COSEKEYS.x);\n    if (!alg) {\n        throw new Error('Public key was missing alg (OKP)');\n    }\n    if (!isCOSEAlg(alg)) {\n        throw new Error(`Public key had invalid alg ${alg} (OKP)`);\n    }\n    if (!crv) {\n        throw new Error('Public key was missing crv (OKP)');\n    }\n    if (!x) {\n        throw new Error('Public key was missing x (OKP)');\n    }\n    // Pulled key import steps from here:\n    // https://wicg.github.io/webcrypto-secure-curves/#ed25519-operations\n    let _crv;\n    if (crv === COSECRV.ED25519) {\n        _crv = 'Ed25519';\n    }\n    else {\n        throw new Error(`Unexpected COSE crv value of ${crv} (OKP)`);\n    }\n    const keyData = {\n        kty: 'OKP',\n        crv: _crv,\n        alg: 'EdDSA',\n        x: isoBase64URL.fromBuffer(x),\n        ext: false,\n    };\n    const keyAlgorithm = {\n        name: _crv,\n        namedCurve: _crv,\n    };\n    const key = await importKey({\n        keyData,\n        algorithm: keyAlgorithm,\n    });\n    const verifyAlgorithm = {\n        name: _crv,\n    };\n    return WebCrypto.subtle.verify(verifyAlgorithm, key, signature, data);\n}\n", "import { convertAAGUIDToString } from './convertAAGUIDToString.js';\nimport { convertCertBufferToPEM } from './convertCertBufferToPEM.js';\nimport { convertCOSEtoPKCS } from './convertCOSEtoPKCS.js';\nimport { decodeAttestationObject } from './decodeAttestationObject.js';\nimport { decodeClientDataJSON } from './decodeClientDataJSON.js';\nimport { decodeCredentialPublicKey } from './decodeCredentialPublicKey.js';\nimport { generateChallenge } from './generateChallenge.js';\nimport { generateUserID } from './generateUserID.js';\nimport { getCertificateInfo } from './getCertificateInfo.js';\nimport { isCertRevoked } from './isCertRevoked.js';\nimport { parseAuthenticatorData } from './parseAuthenticatorData.js';\nimport { toHash } from './toHash.js';\nimport { validateCertificatePath } from './validateCertificatePath.js';\nimport { verifySignature } from './verifySignature.js';\nimport { isoBase64URL, isoCBOR, isoCrypto, isoUint8Array } from './iso/index.js';\nimport * as cose from './cose.js';\nexport { convertAAGUIDToString, convertCertBufferToPEM, convertCOSEtoPKCS, cose, decodeAttestationObject, decodeClientDataJSON, decodeCredentialPublicKey, generateChallenge, generateUserID, getCertificateInfo, isCertRevoked, isoBase64URL, isoCBOR, isoCrypto, isoUint8Array, parseAuthenticatorData, toHash, validateCertificatePath, verifySignature, };\n", "import { isoUint8Array } from './iso/index.js';\n/**\n * Convert the aaguid buffer in authData into a UUID string\n */\nexport function convertAAGUIDToString(aaguid) {\n    // Raw Hex: adce000235bcc60a648b0b25f1f05503\n    const hex = isoUint8Array.toHex(aaguid);\n    const segments = [\n        hex.slice(0, 8),\n        hex.slice(8, 12),\n        hex.slice(12, 16),\n        hex.slice(16, 20),\n        hex.slice(20, 32), // 8\n    ];\n    // Formatted: adce0002-35bc-c60a-648b-0b25f1f05503\n    return segments.join('-');\n}\n", "import { isoBase64URL } from './iso/index.js';\n/**\n * Convert buffer to an OpenSSL-compatible PEM text format.\n */\nexport function convertCertBufferToPEM(certBuffer) {\n    let b64cert;\n    /**\n     * Get certBuffer to a base64 representation\n     */\n    if (typeof certBuffer === 'string') {\n        if (isoBase64URL.isBase64URL(certBuffer)) {\n            b64cert = isoBase64URL.toBase64(certBuffer);\n        }\n        else if (isoBase64URL.isBase64(certBuffer)) {\n            b64cert = certBuffer;\n        }\n        else {\n            throw new Error('Certificate is not a valid base64 or base64url string');\n        }\n    }\n    else {\n        b64cert = isoBase64URL.fromBuffer(certBuffer, 'base64');\n    }\n    let PEMKey = '';\n    for (let i = 0; i < Math.ceil(b64cert.length / 64); i += 1) {\n        const start = 64 * i;\n        PEMKey += `${b64cert.substr(start, 64)}\\n`;\n    }\n    PEMKey = `-----BEGIN CERTIFICATE-----\\n${PEMKey}-----END CERTIFICATE-----\\n`;\n    return PEMKey;\n}\n", "import { isoCBOR, isoUint8Array } from './iso/index.js';\nimport { COSEKEYS } from './cose.js';\n/**\n * Takes COSE-encoded public key and converts it to PKCS key\n */\nexport function convertCOSEtoPKCS(cosePublicKey) {\n    // This is a little sloppy, I'm using COSEPublicKeyEC2 since it could have both x and y, but when\n    // there's no y it means it's probably better typed as COSEPublicKeyOKP. I'll leave this for now\n    // and revisit it later if it ever becomes an actual problem.\n    const struct = isoCBOR.decodeFirst(cosePublicKey);\n    const tag = Uint8Array.from([0x04]);\n    const x = struct.get(COSEKEYS.x);\n    const y = struct.get(COSEKEYS.y);\n    if (!x) {\n        throw new Error('COSE public key was missing x');\n    }\n    if (y) {\n        return isoUint8Array.concat([tag, x, y]);\n    }\n    return isoUint8Array.concat([tag, x]);\n}\n", "import { isoCBOR } from './iso/index.js';\n/**\n * Convert an AttestationObject buffer to a proper object\n *\n * @param base64AttestationObject Attestation Object buffer\n */\nexport function decodeAttestationObject(attestationObject) {\n    return _decodeAttestationObjectInternals.stubThis(isoCBOR.decodeFirst(attestationObject));\n}\n// Make it possible to stub the return value during testing\nexport const _decodeAttestationObjectInternals = {\n    stubThis: (value) => value,\n};\n", "import { isoBase64URL } from './iso/index.js';\n/**\n * Decode an authenticator's base64url-encoded clientDataJSON to JSON\n */\nexport function decodeClientDataJSON(data) {\n    const toString = isoBase64URL.toUTF8String(data);\n    const clientData = JSON.parse(toString);\n    return _decodeClientDataJSONInternals.stubThis(clientData);\n}\n// Make it possible to stub the return value during testing\nexport const _decodeClientDataJSONInternals = {\n    stubThis: (value) => value,\n};\n", "import { isoCBOR } from './iso/index.js';\nexport function decodeCredentialPublicKey(publicKey) {\n    return _decodeCredentialPublicKeyInternals.stubThis(isoCBOR.decodeFirst(publicKey));\n}\n// Make it possible to stub the return value during testing\nexport const _decodeCredentialPublicKeyInternals = {\n    stubThis: (value) => value,\n};\n", "import { isoCrypto } from './iso/index.js';\n/**\n * Generate a suitably random value to be used as user ID\n */\nexport async function generateUserID() {\n    /**\n     * WebAuthn spec says user.id has a max length of 64 bytes. I prefer how 32 random bytes look\n     * after they're base64url-encoded so I'm choosing to go with that here.\n     */\n    const newUserID = new Uint8Array(32);\n    await isoCrypto.getRandomValues(newUserID);\n    return _generateUserIDInternals.stubThis(newUserID);\n}\n// Make it possible to stub the return value during testing\nexport const _generateUserIDInternals = {\n    stubThis: (value) => value,\n};\n", "import { AsnParser, BasicConstraints, Certificate, id_ce_basicConstraints } from '../deps.js';\nconst issuerSubjectIDKey = {\n    '2.5.4.6': 'C',\n    '2.5.4.10': 'O',\n    '2.5.4.11': 'OU',\n    '2.5.4.3': 'CN',\n};\n/**\n * Extract PEM certificate info\n *\n * @param pemCertificate Result from call to `convertASN1toPEM(x5c[0])`\n */\nexport function getCertificateInfo(leafCertBuffer) {\n    const x509 = AsnParser.parse(leafCertBuffer, Certificate);\n    const parsedCert = x509.tbsCertificate;\n    // Issuer\n    const issuer = { combined: '' };\n    parsedCert.issuer.forEach(([iss]) => {\n        const key = issuerSubjectIDKey[iss.type];\n        if (key) {\n            issuer[key] = iss.value.toString();\n        }\n    });\n    issuer.combined = issuerSubjectToString(issuer);\n    // Subject\n    const subject = { combined: '' };\n    parsedCert.subject.forEach(([iss]) => {\n        const key = issuerSubjectIDKey[iss.type];\n        if (key) {\n            subject[key] = iss.value.toString();\n        }\n    });\n    subject.combined = issuerSubjectToString(subject);\n    let basicConstraintsCA = false;\n    if (parsedCert.extensions) {\n        // console.log(parsedCert.extensions);\n        for (const ext of parsedCert.extensions) {\n            if (ext.extnID === id_ce_basicConstraints) {\n                const basicConstraints = AsnParser.parse(ext.extnValue, BasicConstraints);\n                basicConstraintsCA = basicConstraints.cA;\n            }\n        }\n    }\n    return {\n        issuer,\n        subject,\n        version: parsedCert.version,\n        basicConstraintsCA,\n        notBefore: parsedCert.validity.notBefore.getTime(),\n        notAfter: parsedCert.validity.notAfter.getTime(),\n        parsedCertificate: x509,\n    };\n}\n/**\n * Stringify the parts of Issuer or Subject info for easier comparison of subject issuers with\n * issuer subjects.\n *\n * The order might seem arbitrary, because it is. It should be enough that the two are stringified\n * in the same order.\n */\nfunction issuerSubjectToString(input) {\n    const parts = [];\n    if (input.C) {\n        parts.push(input.C);\n    }\n    if (input.O) {\n        parts.push(input.O);\n    }\n    if (input.OU) {\n        parts.push(input.OU);\n    }\n    if (input.CN) {\n        parts.push(input.CN);\n    }\n    return parts.join(' : ');\n}\n", "import { AsnParser, AuthorityKeyIdentifier, CertificateList, CRLDistributionPoints, id_ce_authorityKeyIdentifier, id_ce_cRLDistributionPoints, id_ce_subjectKeyIdentifier, SubjectKeyIdentifier, } from '../deps.js';\nimport { isoUint8Array } from './iso/index.js';\nimport { fetch } from './fetch.js';\nconst cacheRevokedCerts = {};\n/**\n * A method to pull a CRL from a certificate and compare its serial number to the list of revoked\n * certificate serial numbers within the CRL.\n *\n * CRL certificate structure referenced from https://tools.ietf.org/html/rfc5280#page-117\n */\nexport async function isCertRevoked(cert) {\n    const { extensions } = cert.tbsCertificate;\n    if (!extensions) {\n        return false;\n    }\n    let extAuthorityKeyID;\n    let extSubjectKeyID;\n    let extCRLDistributionPoints;\n    extensions.forEach((ext) => {\n        if (ext.extnID === id_ce_authorityKeyIdentifier) {\n            extAuthorityKeyID = AsnParser.parse(ext.extnValue, AuthorityKeyIdentifier);\n        }\n        else if (ext.extnID === id_ce_subjectKeyIdentifier) {\n            extSubjectKeyID = AsnParser.parse(ext.extnValue, SubjectKeyIdentifier);\n        }\n        else if (ext.extnID === id_ce_cRLDistributionPoints) {\n            extCRLDistributionPoints = AsnParser.parse(ext.extnValue, CRLDistributionPoints);\n        }\n    });\n    // Check to see if we've got cached info for the cert's CA\n    let keyIdentifier = undefined;\n    if (extAuthorityKeyID && extAuthorityKeyID.keyIdentifier) {\n        keyIdentifier = isoUint8Array.toHex(new Uint8Array(extAuthorityKeyID.keyIdentifier.buffer));\n    }\n    else if (extSubjectKeyID) {\n        /**\n         * We might be dealing with a self-signed root certificate. Check the\n         * Subject key Identifier extension next.\n         */\n        keyIdentifier = isoUint8Array.toHex(new Uint8Array(extSubjectKeyID.buffer));\n    }\n    const certSerialHex = isoUint8Array.toHex(new Uint8Array(cert.tbsCertificate.serialNumber));\n    if (keyIdentifier) {\n        const cached = cacheRevokedCerts[keyIdentifier];\n        if (cached) {\n            const now = new Date();\n            // If there's a nextUpdate then make sure we're before it\n            if (!cached.nextUpdate || cached.nextUpdate > now) {\n                return cached.revokedCerts.indexOf(certSerialHex) >= 0;\n            }\n        }\n    }\n    const crlURL = extCRLDistributionPoints?.[0].distributionPoint?.fullName?.[0]\n        .uniformResourceIdentifier;\n    // If no URL is provided then we have nothing to check\n    if (!crlURL) {\n        return false;\n    }\n    // Download and read the CRL\n    let certListBytes;\n    try {\n        const respCRL = await fetch(crlURL);\n        certListBytes = await respCRL.arrayBuffer();\n    }\n    catch (_err) {\n        return false;\n    }\n    let data;\n    try {\n        data = AsnParser.parse(certListBytes, CertificateList);\n    }\n    catch (_err) {\n        // Something was malformed with the CRL, so pass\n        return false;\n    }\n    const newCached = {\n        revokedCerts: [],\n        nextUpdate: undefined,\n    };\n    // nextUpdate\n    if (data.tbsCertList.nextUpdate) {\n        newCached.nextUpdate = data.tbsCertList.nextUpdate.getTime();\n    }\n    // revokedCertificates\n    const revokedCerts = data.tbsCertList.revokedCertificates;\n    if (revokedCerts) {\n        for (const cert of revokedCerts) {\n            const revokedHex = isoUint8Array.toHex(new Uint8Array(cert.userCertificate));\n            newCached.revokedCerts.push(revokedHex);\n        }\n        // Cache the results\n        if (keyIdentifier) {\n            cacheRevokedCerts[keyIdentifier] = newCached;\n        }\n        return newCached.revokedCerts.indexOf(certSerialHex) >= 0;\n    }\n    return false;\n}\n", "import { crossFetch } from '../deps.js';\n/**\n * A simple method for requesting data via standard `fetch`. Should work\n * across multiple runtimes.\n */\nexport function fetch(url) {\n    return _fetchInternals.stubThis(url);\n}\n// Make it possible to stub the return value during testing\nexport const _fetchInternals = {\n    stubThis: (url) => crossFetch(url),\n};\n", "import { decodeAuthenticatorExtensions, } from './decodeAuthenticatorExtensions.js';\nimport { isoCBOR, isoUint8Array } from './iso/index.js';\n/**\n * Make sense of the authData buffer contained in an Attestation\n */\nexport function parseAuthenticatorData(authData) {\n    if (authData.byteLength < 37) {\n        throw new Error(`Authenticator data was ${authData.byteLength} bytes, expected at least 37 bytes`);\n    }\n    let pointer = 0;\n    const dataView = isoUint8Array.toDataView(authData);\n    const rpIdHash = authData.slice(pointer, pointer += 32);\n    const flagsBuf = authData.slice(pointer, pointer += 1);\n    const flagsInt = flagsBuf[0];\n    // Bit positions can be referenced here:\n    // https://www.w3.org/TR/webauthn-2/#flags\n    const flags = {\n        up: !!(flagsInt & (1 << 0)),\n        uv: !!(flagsInt & (1 << 2)),\n        be: !!(flagsInt & (1 << 3)),\n        bs: !!(flagsInt & (1 << 4)),\n        at: !!(flagsInt & (1 << 6)),\n        ed: !!(flagsInt & (1 << 7)),\n        flagsInt,\n    };\n    const counterBuf = authData.slice(pointer, pointer + 4);\n    const counter = dataView.getUint32(pointer, false);\n    pointer += 4;\n    let aaguid = undefined;\n    let credentialID = undefined;\n    let credentialPublicKey = undefined;\n    if (flags.at) {\n        aaguid = authData.slice(pointer, pointer += 16);\n        const credIDLen = dataView.getUint16(pointer);\n        pointer += 2;\n        credentialID = authData.slice(pointer, pointer += credIDLen);\n        /**\n         * Firefox 117 incorrectly CBOR-encodes authData when EdDSA (-8) is used for the public key.\n         * A CBOR \"Map of 3 items\" (0xa3) should be \"Map of 4 items\" (0xa4), and if we manually adjust\n         * the single byte there's a good chance the authData can be correctly parsed.\n         *\n         * This browser release also incorrectly uses the string labels \"OKP\" and \"Ed25519\" instead of\n         * their integer representations for kty and crv respectively. That's why the COSE public key\n         * in the hex below looks so odd.\n         */\n        // Bytes decode to `{ 1: \"OKP\", 3: -8, -1: \"Ed25519\" }` (it's missing key -2 a.k.a. COSEKEYS.x)\n        const badEdDSACBOR = isoUint8Array.fromHex('a301634f4b500327206745643235353139');\n        const bytesAtCurrentPosition = authData.slice(pointer, pointer + badEdDSACBOR.byteLength);\n        let foundBadCBOR = false;\n        if (isoUint8Array.areEqual(badEdDSACBOR, bytesAtCurrentPosition)) {\n            // Change the bad CBOR 0xa3 to 0xa4 so that the credential public key can be recognized\n            foundBadCBOR = true;\n            authData[pointer] = 0xa4;\n        }\n        // Decode the next CBOR item in the buffer, then re-encode it back to a Buffer\n        const firstDecoded = isoCBOR.decodeFirst(authData.slice(pointer));\n        const firstEncoded = Uint8Array.from(\n        /**\n         * Casting to `Map` via `as unknown` here because TS doesn't make it possible to define Maps\n         * with discrete keys and properties with known types per pair, and CBOR libs typically parse\n         * CBOR Major Type 5 to `Map` because you can have numbers for keys. A `COSEPublicKey` can be\n         * generalized as \"a Map with numbers for keys and either numbers or bytes for values\" though.\n         * If this presumption falls apart then other parts of verification later on will fail so we\n         * should be safe doing this here.\n         */\n        isoCBOR.encode(firstDecoded));\n        if (foundBadCBOR) {\n            // Restore the bit we changed so that `authData` is the same as it came in and won't break\n            // signature verification.\n            authData[pointer] = 0xa3;\n        }\n        credentialPublicKey = firstEncoded;\n        pointer += firstEncoded.byteLength;\n    }\n    let extensionsData = undefined;\n    let extensionsDataBuffer = undefined;\n    if (flags.ed) {\n        const firstDecoded = isoCBOR.decodeFirst(authData.slice(pointer));\n        extensionsDataBuffer = Uint8Array.from(isoCBOR.encode(firstDecoded));\n        extensionsData = decodeAuthenticatorExtensions(extensionsDataBuffer);\n        pointer += extensionsDataBuffer.byteLength;\n    }\n    // Pointer should be at the end of the authenticator data, otherwise too much data was sent\n    if (authData.byteLength > pointer) {\n        throw new Error('Leftover bytes detected while parsing authenticator data');\n    }\n    return _parseAuthenticatorDataInternals.stubThis({\n        rpIdHash,\n        flagsBuf,\n        flags,\n        counter,\n        counterBuf,\n        aaguid,\n        credentialID,\n        credentialPublicKey,\n        extensionsData,\n        extensionsDataBuffer,\n    });\n}\n// Make it possible to stub the return value during testing\nexport const _parseAuthenticatorDataInternals = {\n    stubThis: (value) => value,\n};\n", "import { isoCBOR } from './iso/index.js';\n/**\n * Convert authenticator extension data buffer to a proper object\n *\n * @param extensionData Authenticator Extension Data buffer\n */\nexport function decodeAuthenticatorExtensions(extensionData) {\n    let toCBOR;\n    try {\n        toCBOR = isoCBOR.decodeFirst(extensionData);\n    }\n    catch (err) {\n        const _err = err;\n        throw new Error(`Error decoding authenticator extensions: ${_err.message}`);\n    }\n    return convertMapToObjectDeep(toCBOR);\n}\n/**\n * CBOR-encoded extensions can be deeply-nested Maps, which are too deep for a simple\n * `Object.entries()`. This method will recursively make sure that all Maps are converted into\n * basic objects.\n */\nfunction convertMapToObjectDeep(input) {\n    const mapped = {};\n    for (const [key, value] of input) {\n        if (value instanceof Map) {\n            mapped[key] = convertMapToObjectDeep(value);\n        }\n        else {\n            mapped[key] = value;\n        }\n    }\n    return mapped;\n}\n", "import { isoCrypto, isoUint8Array } from './iso/index.js';\n/**\n * Returns hash digest of the given data, using the given algorithm when provided. Defaults to using\n * SHA-256.\n */\nexport function toHash(data, algorithm = -7) {\n    if (typeof data === 'string') {\n        data = isoUint8Array.fromUTF8String(data);\n    }\n    const digest = isoCrypto.digest(data, algorithm);\n    return digest;\n}\n", "import { AsnSerializer } from '../deps.js';\nimport { isCertRevoked } from './isCertRevoked.js';\nimport { verifySignature } from './verifySignature.js';\nimport { mapX509SignatureAlgToCOSEAlg } from './mapX509SignatureAlgToCOSEAlg.js';\nimport { getCertificateInfo } from './getCertificateInfo.js';\nimport { convertPEMToBytes } from './convertPEMToBytes.js';\n/**\n * Traverse an array of PEM certificates and ensure they form a proper chain\n * @param certificates Typically the result of `x5c.map(convertASN1toPEM)`\n * @param rootCertificates Possible root certificates to complete the path\n */\nexport async function validateCertificatePath(certificates, rootCertificates = []) {\n    if (rootCertificates.length === 0) {\n        // We have no root certs with which to create a full path, so skip path validation\n        // TODO: Is this going to be acceptable default behavior??\n        return true;\n    }\n    let invalidSubjectAndIssuerError = false;\n    let certificateNotYetValidOrExpiredErrorMessage = undefined;\n    for (const rootCert of rootCertificates) {\n        try {\n            const certsWithRoot = certificates.concat([rootCert]);\n            await _validatePath(certsWithRoot);\n            // If we successfully validated a path then there's no need to continue. Reset any existing\n            // errors that were thrown by earlier root certificates\n            invalidSubjectAndIssuerError = false;\n            certificateNotYetValidOrExpiredErrorMessage = undefined;\n            break;\n        }\n        catch (err) {\n            if (err instanceof InvalidSubjectAndIssuer) {\n                invalidSubjectAndIssuerError = true;\n            }\n            else if (err instanceof CertificateNotYetValidOrExpired) {\n                certificateNotYetValidOrExpiredErrorMessage = err.message;\n            }\n            else {\n                throw err;\n            }\n        }\n    }\n    // We tried multiple root certs and none of them worked\n    if (invalidSubjectAndIssuerError) {\n        throw new InvalidSubjectAndIssuer();\n    }\n    else if (certificateNotYetValidOrExpiredErrorMessage) {\n        throw new CertificateNotYetValidOrExpired(certificateNotYetValidOrExpiredErrorMessage);\n    }\n    return true;\n}\nasync function _validatePath(certificates) {\n    if (new Set(certificates).size !== certificates.length) {\n        throw new Error('Invalid certificate path: found duplicate certificates');\n    }\n    // From leaf to root, make sure each cert is issued by the next certificate in the chain\n    for (let i = 0; i < certificates.length; i += 1) {\n        const subjectPem = certificates[i];\n        const isLeafCert = i === 0;\n        const isRootCert = i + 1 >= certificates.length;\n        let issuerPem = '';\n        if (isRootCert) {\n            issuerPem = subjectPem;\n        }\n        else {\n            issuerPem = certificates[i + 1];\n        }\n        const subjectInfo = getCertificateInfo(convertPEMToBytes(subjectPem));\n        const issuerInfo = getCertificateInfo(convertPEMToBytes(issuerPem));\n        const x509Subject = subjectInfo.parsedCertificate;\n        // Check for certificate revocation\n        const subjectCertRevoked = await isCertRevoked(x509Subject);\n        if (subjectCertRevoked) {\n            throw new Error(`Found revoked certificate in certificate path`);\n        }\n        // Check that intermediate certificate is within its valid time window\n        const { notBefore, notAfter } = issuerInfo;\n        const now = new Date(Date.now());\n        if (notBefore > now || notAfter < now) {\n            if (isLeafCert) {\n                throw new CertificateNotYetValidOrExpired(`Leaf certificate is not yet valid or expired: ${issuerPem}`);\n            }\n            else if (isRootCert) {\n                throw new CertificateNotYetValidOrExpired(`Root certificate is not yet valid or expired: ${issuerPem}`);\n            }\n            else {\n                throw new CertificateNotYetValidOrExpired(`Intermediate certificate is not yet valid or expired: ${issuerPem}`);\n            }\n        }\n        if (subjectInfo.issuer.combined !== issuerInfo.subject.combined) {\n            throw new InvalidSubjectAndIssuer();\n        }\n        // Verify the subject certificate's signature with the issuer cert's public key\n        const data = AsnSerializer.serialize(x509Subject.tbsCertificate);\n        const signature = x509Subject.signatureValue;\n        const signatureAlgorithm = mapX509SignatureAlgToCOSEAlg(x509Subject.signatureAlgorithm.algorithm);\n        const issuerCertBytes = convertPEMToBytes(issuerPem);\n        const verified = await verifySignature({\n            data: new Uint8Array(data),\n            signature: new Uint8Array(signature),\n            x509Certificate: issuerCertBytes,\n            hashAlgorithm: signatureAlgorithm,\n        });\n        if (!verified) {\n            throw new Error('Invalid certificate path: invalid signature');\n        }\n    }\n    return true;\n}\n// Custom errors to help pass on certain errors\nclass InvalidSubjectAndIssuer extends Error {\n    constructor() {\n        const message = 'Subject issuer did not match issuer subject';\n        super(message);\n        this.name = 'InvalidSubjectAndIssuer';\n    }\n}\nclass CertificateNotYetValidOrExpired extends Error {\n    constructor(message) {\n        super(message);\n        this.name = 'CertificateNotYetValidOrExpired';\n    }\n}\n", "import { isoCrypto } from './iso/index.js';\nimport { decodeCredentialPublicKey } from './decodeCredentialPublicKey.js';\nimport { convertX509PublicKeyToCOSE } from './convertX509PublicKeyToCOSE.js';\n/**\n * Verify an authenticator's signature\n */\nexport function verifySignature(opts) {\n    const { signature, data, credentialPublicKey, x509Certificate, hashAlgorithm, } = opts;\n    if (!x509Certificate && !credentialPublicKey) {\n        throw new Error('Must declare either \"leafCert\" or \"credentialPublicKey\"');\n    }\n    if (x509Certificate && credentialPublicKey) {\n        throw new Error('Must not declare both \"leafCert\" and \"credentialPublicKey\"');\n    }\n    let cosePublicKey = new Map();\n    if (credentialPublicKey) {\n        cosePublicKey = decodeCredentialPublicKey(credentialPublicKey);\n    }\n    else if (x509Certificate) {\n        cosePublicKey = convertX509PublicKeyToCOSE(x509Certificate);\n    }\n    return _verifySignatureInternals.stubThis(isoCrypto.verify({\n        cosePublicKey,\n        signature,\n        data,\n        shaHashOverride: hashAlgorithm,\n    }));\n}\n// Make it possible to stub the return value during testing\nexport const _verifySignatureInternals = {\n    stubThis: (value) => value,\n};\n", "import { AsnParser, Certificate, ECParameters, id_ecPublicKey, id_secp256r1, id_secp384r1, RSAPublicKey, } from '../deps.js';\nimport { COSECRV, COSEKEYS, COSEKTY, } from './cose.js';\nimport { mapX509SignatureAlgToCOSEAlg } from './mapX509SignatureAlgToCOSEAlg.js';\nexport function convertX509PublicKeyToCOSE(x509Certificate) {\n    let cosePublicKey = new Map();\n    /**\n     * Time to extract the public key from an X.509 certificate\n     */\n    const x509 = AsnParser.parse(x509Certificate, Certificate);\n    const { tbsCertificate } = x509;\n    const { subjectPublicKeyInfo, signature: _tbsSignature } = tbsCertificate;\n    const signatureAlgorithm = _tbsSignature.algorithm;\n    const publicKeyAlgorithmID = subjectPublicKeyInfo.algorithm.algorithm;\n    if (publicKeyAlgorithmID === id_ecPublicKey) {\n        /**\n         * EC2 Public Key\n         */\n        if (!subjectPublicKeyInfo.algorithm.parameters) {\n            throw new Error('Certificate public key was missing parameters (EC2)');\n        }\n        const ecParameters = AsnParser.parse(new Uint8Array(subjectPublicKeyInfo.algorithm.parameters), ECParameters);\n        let crv = -999;\n        const { namedCurve } = ecParameters;\n        if (namedCurve === id_secp256r1) {\n            crv = COSECRV.P256;\n        }\n        else if (namedCurve === id_secp384r1) {\n            crv = COSECRV.P384;\n        }\n        else {\n            throw new Error(`Certificate public key contained unexpected namedCurve ${namedCurve} (EC2)`);\n        }\n        const subjectPublicKey = new Uint8Array(subjectPublicKeyInfo.subjectPublicKey);\n        let x;\n        let y;\n        if (subjectPublicKey[0] === 0x04) {\n            // Public key is in \"uncompressed form\", so we can split the remaining bytes in half\n            let pointer = 1;\n            const halfLength = (subjectPublicKey.length - 1) / 2;\n            x = subjectPublicKey.slice(pointer, pointer += halfLength);\n            y = subjectPublicKey.slice(pointer);\n        }\n        else {\n            throw new Error('TODO: Figure out how to handle public keys in \"compressed form\"');\n        }\n        const coseEC2PubKey = new Map();\n        coseEC2PubKey.set(COSEKEYS.kty, COSEKTY.EC2);\n        coseEC2PubKey.set(COSEKEYS.alg, mapX509SignatureAlgToCOSEAlg(signatureAlgorithm));\n        coseEC2PubKey.set(COSEKEYS.crv, crv);\n        coseEC2PubKey.set(COSEKEYS.x, x);\n        coseEC2PubKey.set(COSEKEYS.y, y);\n        cosePublicKey = coseEC2PubKey;\n    }\n    else if (publicKeyAlgorithmID === '1.2.840.113549.1.1.1') {\n        /**\n         * RSA public key\n         */\n        const rsaPublicKey = AsnParser.parse(subjectPublicKeyInfo.subjectPublicKey, RSAPublicKey);\n        const coseRSAPubKey = new Map();\n        coseRSAPubKey.set(COSEKEYS.kty, COSEKTY.RSA);\n        coseRSAPubKey.set(COSEKEYS.alg, mapX509SignatureAlgToCOSEAlg(signatureAlgorithm));\n        coseRSAPubKey.set(COSEKEYS.n, new Uint8Array(rsaPublicKey.modulus));\n        coseRSAPubKey.set(COSEKEYS.e, new Uint8Array(rsaPublicKey.publicExponent));\n        cosePublicKey = coseRSAPubKey;\n    }\n    else {\n        throw new Error(`Certificate public key contained unexpected algorithm ID ${publicKeyAlgorithmID}`);\n    }\n    return cosePublicKey;\n}\n", "import { COSEALG } from './cose.js';\n/**\n * Map X.509 signature algorithm OIDs to COSE algorithm IDs\n *\n * - EC2 OIDs: https://oidref.com/1.2.840.10045.4.3\n * - RSA OIDs: https://oidref.com/1.2.840.113549.1.1\n */\nexport function mapX509SignatureAlgToCOSEAlg(signatureAlgorithm) {\n    let alg;\n    if (signatureAlgorithm === '1.2.840.10045.4.3.2') {\n        alg = COSEALG.ES256;\n    }\n    else if (signatureAlgorithm === '1.2.840.10045.4.3.3') {\n        alg = COSEALG.ES384;\n    }\n    else if (signatureAlgorithm === '1.2.840.10045.4.3.4') {\n        alg = COSEALG.ES512;\n    }\n    else if (signatureAlgorithm === '1.2.840.113549.1.1.11') {\n        alg = COSEALG.RS256;\n    }\n    else if (signatureAlgorithm === '1.2.840.113549.1.1.12') {\n        alg = COSEALG.RS384;\n    }\n    else if (signatureAlgorithm === '1.2.840.113549.1.1.13') {\n        alg = COSEALG.RS512;\n    }\n    else if (signatureAlgorithm === '1.2.840.113549.1.1.5') {\n        alg = COSEALG.RS1;\n    }\n    else {\n        throw new Error(`Unable to map X.509 signature algorithm ${signatureAlgorithm} to a COSE algorithm`);\n    }\n    return alg;\n}\n", "import { isoBase64URL } from './iso/index.js';\n/**\n * Take a certificate in PEM format and convert it to bytes\n */\nexport function convertPEMToBytes(pem) {\n    const certBase64 = pem\n        .replace('-----BEGIN CERTIFICATE-----', '')\n        .replace('-----END CERTIFICATE-----', '')\n        .replace(/[\\n ]/g, '');\n    return isoBase64URL.toBuffer(certBase64, 'base64');\n}\n", "import { AsnParser, ECDSASigValue } from '../../../deps.js';\nimport { COSECRV } from '../../cose.js';\nimport { isoUint8Array } from '../index.js';\n/**\n * In WebAuthn, EC2 signatures are wrapped in ASN.1 structure so we need to peel r and s apart.\n *\n * See https://www.w3.org/TR/webauthn-2/#sctn-signature-attestation-types\n */\nexport function unwrapEC2Signature(signature, crv) {\n    const parsedSignature = AsnParser.parse(signature, ECDSASigValue);\n    const rBytes = new Uint8Array(parsedSignature.r);\n    const sBytes = new Uint8Array(parsedSignature.s);\n    const componentLength = getSignatureComponentLength(crv);\n    const rNormalizedBytes = toNormalizedBytes(rBytes, componentLength);\n    const sNormalizedBytes = toNormalizedBytes(sBytes, componentLength);\n    const finalSignature = isoUint8Array.concat([\n        rNormalizedBytes,\n        sNormalizedBytes,\n    ]);\n    return finalSignature;\n}\n/**\n * The SubtleCrypto Web Crypto API expects ECDSA signatures with `r` and `s` values to be encoded\n * to a specific length depending on the order of the curve. This function returns the expected\n * byte-length for each of the `r` and `s` signature components.\n *\n * See <https://www.w3.org/TR/WebCryptoAPI/#ecdsa-operations>\n */\nfunction getSignatureComponentLength(crv) {\n    switch (crv) {\n        case COSECRV.P256:\n            return 32;\n        case COSECRV.P384:\n            return 48;\n        case COSECRV.P521:\n            return 66;\n        default:\n            throw new Error(`Unexpected COSE crv value of ${crv} (EC2)`);\n    }\n}\n/**\n * Converts the ASN.1 integer representation to bytes of a specific length `n`.\n *\n * DER encodes integers as big-endian byte arrays, with as small as possible representation and\n * requires a leading `0` byte to disambiguate between negative and positive numbers. This means\n * that `r` and `s` can potentially not be the expected byte-length that is needed by the\n * SubtleCrypto Web Crypto API: if there are leading `0`s it can be shorter than expected, and if\n * it has a leading `1` bit, it can be one byte longer.\n *\n * See <https://www.itu.int/rec/T-REC-X.690-202102-I/en>\n * See <https://www.w3.org/TR/WebCryptoAPI/#ecdsa-operations>\n */\nfunction toNormalizedBytes(bytes, componentLength) {\n    let normalizedBytes;\n    if (bytes.length < componentLength) {\n        // In case the bytes are shorter than expected, we need to pad it with leading `0`s.\n        normalizedBytes = new Uint8Array(componentLength);\n        normalizedBytes.set(bytes, componentLength - bytes.length);\n    }\n    else if (bytes.length === componentLength) {\n        normalizedBytes = bytes;\n    }\n    else if (bytes.length === componentLength + 1 && bytes[0] === 0 && (bytes[1] & 0x80) === 0x80) {\n        // The bytes contain a leading `0` to encode that the integer is positive. This leading `0`\n        // needs to be removed for compatibility with the SubtleCrypto Web Crypto API.\n        normalizedBytes = bytes.subarray(1);\n    }\n    else {\n        throw new Error(`Invalid signature component length ${bytes.length}, expected ${componentLength}`);\n    }\n    return normalizedBytes;\n}\n", "/**\n * Make sure two Uint8Arrays are deeply equivalent\n */\nexport function areEqual(array1, array2) {\n    if (array1.length != array2.length) {\n        return false;\n    }\n    return array1.every((val, i) => val === array2[i]);\n}\n/**\n * Convert a Uint8Array to Hexadecimal.\n *\n * A replacement for `Buffer.toString('hex')`\n */\nexport function toHex(array) {\n    const hexParts = Array.from(array, (i) => i.toString(16).padStart(2, '0'));\n    // adce000235bcc60a648b0b25f1f05503\n    return hexParts.join('');\n}\n/**\n * Convert a hexadecimal string to isoUint8Array.\n *\n * A replacement for `Buffer.from('...', 'hex')`\n */\nexport function fromHex(hex) {\n    if (!hex) {\n        return Uint8Array.from([]);\n    }\n    const isValid = hex.length !== 0 && hex.length % 2 === 0 &&\n        !/[^a-fA-F0-9]/u.test(hex);\n    if (!isValid) {\n        throw new Error('Invalid hex string');\n    }\n    const byteStrings = hex.match(/.{1,2}/g) ?? [];\n    return Uint8Array.from(byteStrings.map((byte) => parseInt(byte, 16)));\n}\n/**\n * Combine multiple Uint8Arrays into a single Uint8Array\n */\nexport function concat(arrays) {\n    let pointer = 0;\n    const totalLength = arrays.reduce((prev, curr) => prev + curr.length, 0);\n    const toReturn = new Uint8Array(totalLength);\n    arrays.forEach((arr) => {\n        toReturn.set(arr, pointer);\n        pointer += arr.length;\n    });\n    return toReturn;\n}\n/**\n * Convert bytes into a UTF-8 string\n */\nexport function toUTF8String(array) {\n    const decoder = new globalThis.TextDecoder('utf-8');\n    return decoder.decode(array);\n}\n/**\n * Convert a UTF-8 string back into bytes\n */\nexport function fromUTF8String(utf8String) {\n    const encoder = new globalThis.TextEncoder();\n    return encoder.encode(utf8String);\n}\n/**\n * Convert an ASCII string to Uint8Array\n */\nexport function fromASCIIString(value) {\n    return Uint8Array.from(value.split('').map((x) => x.charCodeAt(0)));\n}\n/**\n * Prepare a DataView we can slice our way around in as we parse the bytes in a Uint8Array\n */\nexport function toDataView(array) {\n    return new DataView(array.buffer, array.byteOffset, array.length);\n}\n", "import { decodeAttestationObject, } from '../helpers/decodeAttestationObject.js';\nimport { decodeClientDataJSON } from '../helpers/decodeClientDataJSON.js';\nimport { parseAuthenticatorData } from '../helpers/parseAuthenticatorData.js';\nimport { toHash } from '../helpers/toHash.js';\nimport { decodeCredentialPublicKey } from '../helpers/decodeCredentialPublicKey.js';\nimport { COSEKEYS } from '../helpers/cose.js';\nimport { convertAAGUIDToString } from '../helpers/convertAAGUIDToString.js';\nimport { parseBackupFlags } from '../helpers/parseBackupFlags.js';\nimport { matchExpectedRPID } from '../helpers/matchExpectedRPID.js';\nimport { isoBase64URL } from '../helpers/iso/index.js';\nimport { SettingsService } from '../services/settingsService.js';\nimport { supportedCOSEAlgorithmIdentifiers } from './generateRegistrationOptions.js';\nimport { verifyAttestationFIDOU2F } from './verifications/verifyAttestationFIDOU2F.js';\nimport { verifyAttestationPacked } from './verifications/verifyAttestationPacked.js';\nimport { verifyAttestationAndroidSafetyNet } from './verifications/verifyAttestationAndroidSafetyNet.js';\nimport { verifyAttestationTPM } from './verifications/tpm/verifyAttestationTPM.js';\nimport { verifyAttestationAndroidKey } from './verifications/verifyAttestationAndroidKey.js';\nimport { verifyAttestationApple } from './verifications/verifyAttestationApple.js';\n/**\n * Verify that the user has legitimately completed the registration process\n *\n * **Options:**\n *\n * @param response - Response returned by **@simplewebauthn/browser**'s `startAuthentication()`\n * @param expectedChallenge - The base64url-encoded `options.challenge` returned by `generateRegistrationOptions()`\n * @param expectedOrigin - Website URL (or array of URLs) that the registration should have occurred on\n * @param expectedRPID - RP ID (or array of IDs) that was specified in the registration options\n * @param expectedType **(Optional)** - The response type expected ('webauthn.create')\n * @param requireUserVerification **(Optional)** - Enforce user verification by the authenticator (via PIN, fingerprint, etc...) Defaults to `true`\n * @param supportedAlgorithmIDs **(Optional)** - Array of numeric COSE algorithm identifiers supported for attestation by this RP. See https://www.iana.org/assignments/cose/cose.xhtml#algorithms. Defaults to all supported algorithm IDs\n */\nexport async function verifyRegistrationResponse(options) {\n    const { response, expectedChallenge, expectedOrigin, expectedRPID, expectedType, requireUserVerification = true, supportedAlgorithmIDs = supportedCOSEAlgorithmIdentifiers, } = options;\n    const { id, rawId, type: credentialType, response: attestationResponse } = response;\n    // Ensure credential specified an ID\n    if (!id) {\n        throw new Error('Missing credential ID');\n    }\n    // Ensure ID is base64url-encoded\n    if (id !== rawId) {\n        throw new Error('Credential ID was not base64url-encoded');\n    }\n    // Make sure credential type is public-key\n    if (credentialType !== 'public-key') {\n        throw new Error(`Unexpected credential type ${credentialType}, expected \"public-key\"`);\n    }\n    const clientDataJSON = decodeClientDataJSON(attestationResponse.clientDataJSON);\n    const { type, origin, challenge, tokenBinding } = clientDataJSON;\n    // Make sure we're handling an registration\n    if (Array.isArray(expectedType)) {\n        if (!expectedType.includes(type)) {\n            const joinedExpectedType = expectedType.join(', ');\n            throw new Error(`Unexpected registration response type \"${type}\", expected one of: ${joinedExpectedType}`);\n        }\n    }\n    else if (expectedType) {\n        if (type !== expectedType) {\n            throw new Error(`Unexpected registration response type \"${type}\", expected \"${expectedType}\"`);\n        }\n    }\n    else if (type !== 'webauthn.create') {\n        throw new Error(`Unexpected registration response type: ${type}`);\n    }\n    // Ensure the device provided the challenge we gave it\n    if (typeof expectedChallenge === 'function') {\n        if (!(await expectedChallenge(challenge))) {\n            throw new Error(`Custom challenge verifier returned false for registration response challenge \"${challenge}\"`);\n        }\n    }\n    else if (challenge !== expectedChallenge) {\n        throw new Error(`Unexpected registration response challenge \"${challenge}\", expected \"${expectedChallenge}\"`);\n    }\n    // Check that the origin is our site\n    if (Array.isArray(expectedOrigin)) {\n        if (!expectedOrigin.includes(origin)) {\n            throw new Error(`Unexpected registration response origin \"${origin}\", expected one of: ${expectedOrigin.join(', ')}`);\n        }\n    }\n    else {\n        if (origin !== expectedOrigin) {\n            throw new Error(`Unexpected registration response origin \"${origin}\", expected \"${expectedOrigin}\"`);\n        }\n    }\n    if (tokenBinding) {\n        if (typeof tokenBinding !== 'object') {\n            throw new Error(`Unexpected value for TokenBinding \"${tokenBinding}\"`);\n        }\n        if (['present', 'supported', 'not-supported'].indexOf(tokenBinding.status) < 0) {\n            throw new Error(`Unexpected tokenBinding.status value of \"${tokenBinding.status}\"`);\n        }\n    }\n    const attestationObject = isoBase64URL.toBuffer(attestationResponse.attestationObject);\n    const decodedAttestationObject = decodeAttestationObject(attestationObject);\n    const fmt = decodedAttestationObject.get('fmt');\n    const authData = decodedAttestationObject.get('authData');\n    const attStmt = decodedAttestationObject.get('attStmt');\n    const parsedAuthData = parseAuthenticatorData(authData);\n    const { aaguid, rpIdHash, flags, credentialID, counter, credentialPublicKey, extensionsData, } = parsedAuthData;\n    // Make sure the response's RP ID is ours\n    let matchedRPID;\n    if (expectedRPID) {\n        let expectedRPIDs = [];\n        if (typeof expectedRPID === 'string') {\n            expectedRPIDs = [expectedRPID];\n        }\n        else {\n            expectedRPIDs = expectedRPID;\n        }\n        matchedRPID = await matchExpectedRPID(rpIdHash, expectedRPIDs);\n    }\n    // Make sure someone was physically present\n    if (!flags.up) {\n        throw new Error('User not present during registration');\n    }\n    // Enforce user verification if specified\n    if (requireUserVerification && !flags.uv) {\n        throw new Error('User verification required, but user could not be verified');\n    }\n    if (!credentialID) {\n        throw new Error('No credential ID was provided by authenticator');\n    }\n    if (!credentialPublicKey) {\n        throw new Error('No public key was provided by authenticator');\n    }\n    if (!aaguid) {\n        throw new Error('No AAGUID was present during registration');\n    }\n    const decodedPublicKey = decodeCredentialPublicKey(credentialPublicKey);\n    const alg = decodedPublicKey.get(COSEKEYS.alg);\n    if (typeof alg !== 'number') {\n        throw new Error('Credential public key was missing numeric alg');\n    }\n    // Make sure the key algorithm is one we specified within the registration options\n    if (!supportedAlgorithmIDs.includes(alg)) {\n        const supported = supportedAlgorithmIDs.join(', ');\n        throw new Error(`Unexpected public key alg \"${alg}\", expected one of \"${supported}\"`);\n    }\n    const clientDataHash = await toHash(isoBase64URL.toBuffer(attestationResponse.clientDataJSON));\n    const rootCertificates = SettingsService.getRootCertificates({\n        identifier: fmt,\n    });\n    // Prepare arguments to pass to the relevant verification method\n    const verifierOpts = {\n        aaguid,\n        attStmt,\n        authData,\n        clientDataHash,\n        credentialID,\n        credentialPublicKey,\n        rootCertificates,\n        rpIdHash,\n    };\n    /**\n     * Verification can only be performed when attestation = 'direct'\n     */\n    let verified = false;\n    if (fmt === 'fido-u2f') {\n        verified = await verifyAttestationFIDOU2F(verifierOpts);\n    }\n    else if (fmt === 'packed') {\n        verified = await verifyAttestationPacked(verifierOpts);\n    }\n    else if (fmt === 'android-safetynet') {\n        verified = await verifyAttestationAndroidSafetyNet(verifierOpts);\n    }\n    else if (fmt === 'android-key') {\n        verified = await verifyAttestationAndroidKey(verifierOpts);\n    }\n    else if (fmt === 'tpm') {\n        verified = await verifyAttestationTPM(verifierOpts);\n    }\n    else if (fmt === 'apple') {\n        verified = await verifyAttestationApple(verifierOpts);\n    }\n    else if (fmt === 'none') {\n        if (attStmt.size > 0) {\n            throw new Error('None attestation had unexpected attestation statement');\n        }\n        // This is the weaker of the attestations, so there's nothing else to really check\n        verified = true;\n    }\n    else {\n        throw new Error(`Unsupported Attestation Format: ${fmt}`);\n    }\n    const toReturn = {\n        verified,\n    };\n    if (toReturn.verified) {\n        const { credentialDeviceType, credentialBackedUp } = parseBackupFlags(flags);\n        toReturn.registrationInfo = {\n            fmt,\n            counter,\n            aaguid: convertAAGUIDToString(aaguid),\n            credentialID: isoBase64URL.fromBuffer(credentialID),\n            credentialPublicKey,\n            credentialType,\n            attestationObject,\n            userVerified: flags.uv,\n            credentialDeviceType,\n            credentialBackedUp,\n            origin: clientDataJSON.origin,\n            rpID: matchedRPID,\n            authenticatorExtensionResults: extensionsData,\n        };\n    }\n    return toReturn;\n}\n", "/**\n * Make sense of Bits 3 and 4 in authenticator indicating:\n *\n * - Whether the credential can be used on multiple devices\n * - Whether the credential is backed up or not\n *\n * Invalid configurations will raise an `Error`\n */\nexport function parseBackupFlags({ be, bs }) {\n    const credentialBackedUp = bs;\n    let credentialDeviceType = 'singleDevice';\n    if (be) {\n        credentialDeviceType = 'multiDevice';\n    }\n    if (credentialDeviceType === 'singleDevice' && credentialBackedUp) {\n        throw new InvalidBackupFlags('Single-device credential indicated that it was backed up, which should be impossible.');\n    }\n    return { credentialDeviceType, credentialBackedUp };\n}\nexport class InvalidBackupFlags extends Error {\n    constructor(message) {\n        super(message);\n        this.name = 'InvalidBackupFlags';\n    }\n}\n", "import { toHash } from './toHash.js';\nimport { isoUint8Array } from './iso/index.js';\n/**\n * Go through each expected RP ID and try to find one that matches. Returns the unhashed RP ID\n * that matched the hash in the response.\n *\n * Raises an `UnexpectedRPIDHash` error if no match is found\n */\nexport async function matchExpectedRPID(rpIDHash, expectedRPIDs) {\n    try {\n        const matchedRPID = await Promise.any(expectedRPIDs.map((expected) => {\n            return new Promise((resolve, reject) => {\n                toHash(isoUint8Array.fromASCIIString(expected)).then((expectedRPIDHash) => {\n                    if (isoUint8Array.areEqual(rpIDHash, expectedRPIDHash)) {\n                        resolve(expected);\n                    }\n                    else {\n                        reject();\n                    }\n                });\n            });\n        }));\n        return matchedRPID;\n    }\n    catch (err) {\n        const _err = err;\n        // This means no matches were found\n        if (_err.name === 'AggregateError') {\n            throw new UnexpectedRPIDHash();\n        }\n        // An unexpected error occurred\n        throw err;\n    }\n}\nclass UnexpectedRPIDHash extends Error {\n    constructor() {\n        const message = 'Unexpected RP ID hash';\n        super(message);\n        this.name = 'UnexpectedRPIDHash';\n    }\n}\n", "import { convertCertBufferToPEM } from '../helpers/convertCertBufferToPEM.js';\nimport { GlobalSign_Root_CA } from './defaultRootCerts/android-safetynet.js';\nimport { Google_Hardware_Attestation_Root_1, Google_Hardware_Attestation_Root_2, } from './defaultRootCerts/android-key.js';\nimport { Apple_WebAuthn_Root_CA } from './defaultRootCerts/apple.js';\nimport { GlobalSign_Root_CA_R3 } from './defaultRootCerts/mds.js';\nclass BaseSettingsService {\n    constructor() {\n        // Certificates are stored as PEM-formatted strings\n        Object.defineProperty(this, \"pemCertificates\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.pemCertificates = new Map();\n    }\n    /**\n     * Set potential root certificates for attestation formats that use them. Root certs will be tried\n     * one-by-one when validating a certificate path.\n     *\n     * Certificates can be specified as a raw `Buffer`, or as a PEM-formatted string. If a\n     * `Buffer` is passed in it will be converted to PEM format.\n     */\n    setRootCertificates(opts) {\n        const { identifier, certificates } = opts;\n        const newCertificates = [];\n        for (const cert of certificates) {\n            if (cert instanceof Uint8Array) {\n                newCertificates.push(convertCertBufferToPEM(cert));\n            }\n            else {\n                newCertificates.push(cert);\n            }\n        }\n        this.pemCertificates.set(identifier, newCertificates);\n    }\n    /**\n     * Get any registered root certificates for the specified attestation format\n     */\n    getRootCertificates(opts) {\n        const { identifier } = opts;\n        return this.pemCertificates.get(identifier) ?? [];\n    }\n}\nexport const SettingsService = new BaseSettingsService();\n// Initialize default certificates\nSettingsService.setRootCertificates({\n    identifier: 'android-key',\n    certificates: [\n        Google_Hardware_Attestation_Root_1,\n        Google_Hardware_Attestation_Root_2,\n    ],\n});\nSettingsService.setRootCertificates({\n    identifier: 'android-safetynet',\n    certificates: [GlobalSign_Root_CA],\n});\nSettingsService.setRootCertificates({\n    identifier: 'apple',\n    certificates: [Apple_WebAuthn_Root_CA],\n});\nSettingsService.setRootCertificates({\n    identifier: 'mds',\n    certificates: [GlobalSign_Root_CA_R3],\n});\n", "/**\n * GlobalSign Root CA\n *\n * Downloaded from https://pki.goog/roots.pem\n *\n * Valid until 2028-01-28 @ 04:00 PST\n *\n * SHA256 Fingerprint\n * EB:D4:10:40:E4:BB:3E:C7:42:C9:E3:81:D3:1E:F2:A4:1A:48:B6:68:5C:96:E7:CE:F3:C1:DF:6C:D4:33:1C:99\n */\nexport const GlobalSign_Root_CA = `-----BEGIN CERTIFICATE-----\nMIIDdTCCAl2gAwIBAgILBAAAAAABFUtaw5QwDQYJKoZIhvcNAQEFBQAwVzELMAkG\nA1UEBhMCQkUxGTAXBgNVBAoTEEdsb2JhbFNpZ24gbnYtc2ExEDAOBgNVBAsTB1Jv\nb3QgQ0ExGzAZBgNVBAMTEkdsb2JhbFNpZ24gUm9vdCBDQTAeFw05ODA5MDExMjAw\nMDBaFw0yODAxMjgxMjAwMDBaMFcxCzAJBgNVBAYTAkJFMRkwFwYDVQQKExBHbG9i\nYWxTaWduIG52LXNhMRAwDgYDVQQLEwdSb290IENBMRswGQYDVQQDExJHbG9iYWxT\naWduIFJvb3QgQ0EwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDaDuaZ\njc6j40+Kfvvxi4Mla+pIH/EqsLmVEQS98GPR4mdmzxzdzxtIK+6NiY6arymAZavp\nxy0Sy6scTHAHoT0KMM0VjU/43dSMUBUc71DuxC73/OlS8pF94G3VNTCOXkNz8kHp\n1Wrjsok6Vjk4bwY8iGlbKk3Fp1S4bInMm/k8yuX9ifUSPJJ4ltbcdG6TRGHRjcdG\nsnUOhugZitVtbNV4FpWi6cgKOOvyJBNPc1STE4U6G7weNLWLBYy5d4ux2x8gkasJ\nU26Qzns3dLlwR5EiUWMWea6xrkEmCMgZK9FGqkjWZCrXgzT/LCrBbBlDSgeF59N8\n9iFo7+ryUp9/k5DPAgMBAAGjQjBAMA4GA1UdDwEB/wQEAwIBBjAPBgNVHRMBAf8E\nBTADAQH/MB0GA1UdDgQWBBRge2YaRQ2XyolQL30EzTSo//z9SzANBgkqhkiG9w0B\nAQUFAAOCAQEA1nPnfE920I2/7LqivjTFKDK1fPxsnCwrvQmeU79rXqoRSLblCKOz\nyj1hTdNGCbM+w6DjY1Ub8rrvrTnhQ7k4o+YviiY776BQVvnGCv04zcQLcFGUl5gE\n38NflNUVyRRBnMRddWQVDf9VMOyGj/8N7yy5Y0b2qvzfvGn9LhJIZJrglfCm7ymP\nAbEVtQwdpf5pLGkkeB6zpxxxYu7KyJesF12KwvhHhm4qxFYxldBniYUr+WymXUad\nDKqC5JlR3XC321Y9YeRq4VzW9v493kHMB65jUr9TU/Qr6cf9tveCX4XSQRjbgbME\nHMUfpIBvFSDJ3gyICh3WZlXi/EjJKSZp4A==\n-----END CERTIFICATE-----\n`;\n", "/**\n * Google Hardware Attestation Root 1\n *\n * Downloaded from https://developer.android.com/training/articles/security-key-attestation#root_certificate\n * (first entry)\n *\n * Valid until 2026-05-24 @ 09:28 PST\n *\n * SHA256 Fingerprint\n * C1:98:4A:3E:F4:5C:1E:2A:91:85:51:DE:10:60:3C:86:F7:05:1B:22:49:C4:89:1C:AE:32:30:EA:BD:0C:97:D5\n */\nexport const Google_Hardware_Attestation_Root_1 = `-----BEGIN CERTIFICATE-----\nMIIFYDCCA0igAwIBAgIJAOj6GWMU0voYMA0GCSqGSIb3DQEBCwUAMBsxGTAXBgNV\nBAUTEGY5MjAwOWU4NTNiNmIwNDUwHhcNMTYwNTI2MTYyODUyWhcNMjYwNTI0MTYy\nODUyWjAbMRkwFwYDVQQFExBmOTIwMDllODUzYjZiMDQ1MIICIjANBgkqhkiG9w0B\nAQEFAAOCAg8AMIICCgKCAgEAr7bHgiuxpwHsK7Qui8xUFmOr75gvMsd/dTEDDJdS\nSxtf6An7xyqpRR90PL2abxM1dEqlXnf2tqw1Ne4Xwl5jlRfdnJLmN0pTy/4lj4/7\ntv0Sk3iiKkypnEUtR6WfMgH0QZfKHM1+di+y9TFRtv6y//0rb+T+W8a9nsNL/ggj\nnar86461qO0rOs2cXjp3kOG1FEJ5MVmFmBGtnrKpa73XpXyTqRxB/M0n1n/W9nGq\nC4FSYa04T6N5RIZGBN2z2MT5IKGbFlbC8UrW0DxW7AYImQQcHtGl/m00QLVWutHQ\noVJYnFPlXTcHYvASLu+RhhsbDmxMgJJ0mcDpvsC4PjvB+TxywElgS70vE0XmLD+O\nJtvsBslHZvPBKCOdT0MS+tgSOIfga+z1Z1g7+DVagf7quvmag8jfPioyKvxnK/Eg\nsTUVi2ghzq8wm27ud/mIM7AY2qEORR8Go3TVB4HzWQgpZrt3i5MIlCaY504LzSRi\nigHCzAPlHws+W0rB5N+er5/2pJKnfBSDiCiFAVtCLOZ7gLiMm0jhO2B6tUXHI/+M\nRPjy02i59lINMRRev56GKtcd9qO/0kUJWdZTdA2XoS82ixPvZtXQpUpuL12ab+9E\naDK8Z4RHJYYfCT3Q5vNAXaiWQ+8PTWm2QgBR/bkwSWc+NpUFgNPN9PvQi8WEg5Um\nAGMCAwEAAaOBpjCBozAdBgNVHQ4EFgQUNmHhAHyIBQlRi0RsR/8aTMnqTxIwHwYD\nVR0jBBgwFoAUNmHhAHyIBQlRi0RsR/8aTMnqTxIwDwYDVR0TAQH/BAUwAwEB/zAO\nBgNVHQ8BAf8EBAMCAYYwQAYDVR0fBDkwNzA1oDOgMYYvaHR0cHM6Ly9hbmRyb2lk\nLmdvb2dsZWFwaXMuY29tL2F0dGVzdGF0aW9uL2NybC8wDQYJKoZIhvcNAQELBQAD\nggIBACDIw41L3KlXG0aMiS//cqrG+EShHUGo8HNsw30W1kJtjn6UBwRM6jnmiwfB\nPb8VA91chb2vssAtX2zbTvqBJ9+LBPGCdw/E53Rbf86qhxKaiAHOjpvAy5Y3m00m\nqC0w/Zwvju1twb4vhLaJ5NkUJYsUS7rmJKHHBnETLi8GFqiEsqTWpG/6ibYCv7rY\nDBJDcR9W62BW9jfIoBQcxUCUJouMPH25lLNcDc1ssqvC2v7iUgI9LeoM1sNovqPm\nQUiG9rHli1vXxzCyaMTjwftkJLkf6724DFhuKug2jITV0QkXvaJWF4nUaHOTNA4u\nJU9WDvZLI1j83A+/xnAJUucIv/zGJ1AMH2boHqF8CY16LpsYgBt6tKxxWH00XcyD\nCdW2KlBCeqbQPcsFmWyWugxdcekhYsAWyoSf818NUsZdBWBaR/OukXrNLfkQ79Iy\nZohZbvabO/X+MVT3rriAoKc8oE2Uws6DF+60PV7/WIPjNvXySdqspImSN78mflxD\nqwLqRBYkA3I75qppLGG9rp7UCdRjxMl8ZDBld+7yvHVgt1cVzJx9xnyGCC23Uaic\nMDSXYrB4I4WHXPGjxhZuCuPBLTdOLU8YRvMYdEvYebWHMpvwGCF6bAx3JBpIeOQ1\nwDB5y0USicV3YgYGmi+NZfhA4URSh77Yd6uuJOJENRaNVTzk\n-----END CERTIFICATE-----\n`;\n/**\n * Google Hardware Attestation Root 2\n *\n * Downloaded from https://developer.android.com/training/articles/security-key-attestation#root_certificate\n * (second entry)\n *\n * Valid until 2034-11-18 @ 12:37 PST\n *\n * SHA256 Fingerprint\n * 1E:F1:A0:4B:8B:A5:8A:B9:45:89:AC:49:8C:89:82:A7:83:F2:4E:A7:30:7E:01:59:A0:C3:A7:3B:37:7D:87:CC\n */\nexport const Google_Hardware_Attestation_Root_2 = `-----BEGIN CERTIFICATE-----\nMIIFHDCCAwSgAwIBAgIJANUP8luj8tazMA0GCSqGSIb3DQEBCwUAMBsxGTAXBgNV\nBAUTEGY5MjAwOWU4NTNiNmIwNDUwHhcNMTkxMTIyMjAzNzU4WhcNMzQxMTE4MjAz\nNzU4WjAbMRkwFwYDVQQFExBmOTIwMDllODUzYjZiMDQ1MIICIjANBgkqhkiG9w0B\nAQEFAAOCAg8AMIICCgKCAgEAr7bHgiuxpwHsK7Qui8xUFmOr75gvMsd/dTEDDJdS\nSxtf6An7xyqpRR90PL2abxM1dEqlXnf2tqw1Ne4Xwl5jlRfdnJLmN0pTy/4lj4/7\ntv0Sk3iiKkypnEUtR6WfMgH0QZfKHM1+di+y9TFRtv6y//0rb+T+W8a9nsNL/ggj\nnar86461qO0rOs2cXjp3kOG1FEJ5MVmFmBGtnrKpa73XpXyTqRxB/M0n1n/W9nGq\nC4FSYa04T6N5RIZGBN2z2MT5IKGbFlbC8UrW0DxW7AYImQQcHtGl/m00QLVWutHQ\noVJYnFPlXTcHYvASLu+RhhsbDmxMgJJ0mcDpvsC4PjvB+TxywElgS70vE0XmLD+O\nJtvsBslHZvPBKCOdT0MS+tgSOIfga+z1Z1g7+DVagf7quvmag8jfPioyKvxnK/Eg\nsTUVi2ghzq8wm27ud/mIM7AY2qEORR8Go3TVB4HzWQgpZrt3i5MIlCaY504LzSRi\nigHCzAPlHws+W0rB5N+er5/2pJKnfBSDiCiFAVtCLOZ7gLiMm0jhO2B6tUXHI/+M\nRPjy02i59lINMRRev56GKtcd9qO/0kUJWdZTdA2XoS82ixPvZtXQpUpuL12ab+9E\naDK8Z4RHJYYfCT3Q5vNAXaiWQ+8PTWm2QgBR/bkwSWc+NpUFgNPN9PvQi8WEg5Um\nAGMCAwEAAaNjMGEwHQYDVR0OBBYEFDZh4QB8iAUJUYtEbEf/GkzJ6k8SMB8GA1Ud\nIwQYMBaAFDZh4QB8iAUJUYtEbEf/GkzJ6k8SMA8GA1UdEwEB/wQFMAMBAf8wDgYD\nVR0PAQH/BAQDAgIEMA0GCSqGSIb3DQEBCwUAA4ICAQBOMaBc8oumXb2voc7XCWnu\nXKhBBK3e2KMGz39t7lA3XXRe2ZLLAkLM5y3J7tURkf5a1SutfdOyXAmeE6SRo83U\nh6WszodmMkxK5GM4JGrnt4pBisu5igXEydaW7qq2CdC6DOGjG+mEkN8/TA6p3cno\nL/sPyz6evdjLlSeJ8rFBH6xWyIZCbrcpYEJzXaUOEaxxXxgYz5/cTiVKN2M1G2ok\nQBUIYSY6bjEL4aUN5cfo7ogP3UvliEo3Eo0YgwuzR2v0KR6C1cZqZJSTnghIC/vA\nD32KdNQ+c3N+vl2OTsUVMC1GiWkngNx1OO1+kXW+YTnnTUOtOIswUP/Vqd5SYgAI\nmMAfY8U9/iIgkQj6T2W6FsScy94IN9fFhE1UtzmLoBIuUFsVXJMTz+Jucth+IqoW\nFua9v1R93/k98p41pjtFX+H8DslVgfP097vju4KDlqN64xV1grw3ZLl4CiOe/A91\noeLm2UHOq6wn3esB4r2EIQKb6jTVGu5sYCcdWpXr0AUVqcABPdgL+H7qJguBw09o\njm6xNIrw2OocrDKsudk/okr/AwqEyPKw9WnMlQgLIKw1rODG2NvU9oR3GVGdMkUB\nZutL8VuFkERQGt6vQ2OCw0sV47VMkuYbacK/xyZFiRcrPJPb41zgbQj9XAEyLKCH\nex0SdDrx+tWUDqG8At2JHA==\n-----END CERTIFICATE-----\n`;\n", "/**\n * Apple WebAuthn Root CA\n *\n * Downloaded from https://www.apple.com/certificateauthority/Apple_WebAuthn_Root_CA.pem\n *\n * Valid until 2045-03-14 @ 17:00 PST\n *\n * SHA256 Fingerprint\n * 09:15:DD:5C:07:A2:8D:B5:49:D1:F6:77:BB:5A:75:D4:BF:BE:95:61:A7:73:42:43:27:76:2E:9E:02:F9:BB:29\n */\nexport const Apple_WebAuthn_Root_CA = `-----BEGIN CERTIFICATE-----\nMIICEjCCAZmgAwIBAgIQaB0BbHo84wIlpQGUKEdXcTAKBggqhkjOPQQDAzBLMR8w\nHQYDVQQDDBZBcHBsZSBXZWJBdXRobiBSb290IENBMRMwEQYDVQQKDApBcHBsZSBJ\nbmMuMRMwEQYDVQQIDApDYWxpZm9ybmlhMB4XDTIwMDMxODE4MjEzMloXDTQ1MDMx\nNTAwMDAwMFowSzEfMB0GA1UEAwwWQXBwbGUgV2ViQXV0aG4gUm9vdCBDQTETMBEG\nA1UECgwKQXBwbGUgSW5jLjETMBEGA1UECAwKQ2FsaWZvcm5pYTB2MBAGByqGSM49\nAgEGBSuBBAAiA2IABCJCQ2pTVhzjl4Wo6IhHtMSAzO2cv+H9DQKev3//fG59G11k\nxu9eI0/7o6V5uShBpe1u6l6mS19S1FEh6yGljnZAJ+2GNP1mi/YK2kSXIuTHjxA/\npcoRf7XkOtO4o1qlcaNCMEAwDwYDVR0TAQH/BAUwAwEB/zAdBgNVHQ4EFgQUJtdk\n2cV4wlpn0afeaxLQG2PxxtcwDgYDVR0PAQH/BAQDAgEGMAoGCCqGSM49BAMDA2cA\nMGQCMFrZ+9DsJ1PW9hfNdBywZDsWDbWFp28it1d/5w2RPkRX3Bbn/UbDTNLx7Jr3\njAGGiQIwHFj+dJZYUJR786osByBelJYsVZd2GbHQu209b5RCmGQ21gpSAk9QZW4B\n1bWeT0vT\n-----END CERTIFICATE-----\n`;\n", "/**\n * GlobalSign Root CA - R3\n *\n * Downloaded from https://valid.r3.roots.globalsign.com/\n *\n * Valid until 2029-03-18 @ 00:00 PST\n *\n * SHA256 Fingerprint\n * CB:B5:22:D7:B7:F1:27:AD:6A:01:13:86:5B:DF:1C:D4:10:2E:7D:07:59:AF:63:5A:7C:F4:72:0D:C9:63:C5:3B\n */\nexport const GlobalSign_Root_CA_R3 = `-----BEGIN CERTIFICATE-----\n MIIDXzCCAkegAwIBAgILBAAAAAABIVhTCKIwDQYJKoZIhvcNAQELBQAwTDEgMB4G\n A1UECxMXR2xvYmFsU2lnbiBSb290IENBIC0gUjMxEzARBgNVBAoTCkdsb2JhbFNp\n Z24xEzARBgNVBAMTCkdsb2JhbFNpZ24wHhcNMDkwMzE4MTAwMDAwWhcNMjkwMzE4\n MTAwMDAwWjBMMSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEG\n A1UEChMKR2xvYmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjCCASIwDQYJKoZI\n hvcNAQEBBQADggEPADCCAQoCggEBAMwldpB5BngiFvXAg7aEyiie/QV2EcWtiHL8\n RgJDx7KKnQRfJMsuS+FggkbhUqsMgUdwbN1k0ev1LKMPgj0MK66X17YUhhB5uzsT\n gHeMCOFJ0mpiLx9e+pZo34knlTifBtc+ycsmWQ1z3rDI6SYOgxXG71uL0gRgykmm\n KPZpO/bLyCiR5Z2KYVc3rHQU3HTgOu5yLy6c+9C7v/U9AOEGM+iCK65TpjoWc4zd\n QQ4gOsC0p6Hpsk+QLjJg6VfLuQSSaGjlOCZgdbKfd/+RFO+uIEn8rUAVSNECMWEZ\n XriX7613t2Saer9fwRPvm2L7DWzgVGkWqQPabumDk3F2xmmFghcCAwEAAaNCMEAw\n DgYDVR0PAQH/BAQDAgEGMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFI/wS3+o\n LkUkrk1Q+mOai97i3Ru8MA0GCSqGSIb3DQEBCwUAA4IBAQBLQNvAUKr+yAzv95ZU\n RUm7lgAJQayzE4aGKAczymvmdLm6AC2upArT9fHxD4q/c2dKg8dEe3jgr25sbwMp\n jjM5RcOO5LlXbKr8EpbsU8Yt5CRsuZRj+9xTaGdWPoO4zzUhw8lo/s7awlOqzJCK\n 6fBdRoyV3XpYKBovHd7NADdBj+1EbddTKJd+82cEHhXXipa0095MJ6RMG3NzdvQX\n mcIfeg7jLQitChws/zyrVQ4PkX4268NXSb7hLi18YIvDQVETI53O9zJrlAGomecs\n Mx86OyXShkDOOyyGeMlhLxS67ttVb9+E7gUJTb0o2HLO02JQZR7rkpeDMdmztcpH\n WD9f\n -----END CERTIFICATE-----\n `;\n", "import { convertCOSEtoPKCS } from '../../helpers/convertCOSEtoPKCS.js';\nimport { convertCertBufferToPEM } from '../../helpers/convertCertBufferToPEM.js';\nimport { validateCertificatePath } from '../../helpers/validateCertificatePath.js';\nimport { verifySignature } from '../../helpers/verifySignature.js';\nimport { isoUint8Array } from '../../helpers/iso/index.js';\nimport { COSEALG } from '../../helpers/cose.js';\n/**\n * Verify an attestation response with fmt 'fido-u2f'\n */\nexport async function verifyAttestationFIDOU2F(options) {\n    const { attStmt, clientDataHash, rpIdHash, credentialID, credentialPublicKey, aaguid, rootCertificates, } = options;\n    const reservedByte = Uint8Array.from([0x00]);\n    const publicKey = convertCOSEtoPKCS(credentialPublicKey);\n    const signatureBase = isoUint8Array.concat([\n        reservedByte,\n        rpIdHash,\n        clientDataHash,\n        credentialID,\n        publicKey,\n    ]);\n    const sig = attStmt.get('sig');\n    const x5c = attStmt.get('x5c');\n    if (!x5c) {\n        throw new Error('No attestation certificate provided in attestation statement (FIDOU2F)');\n    }\n    if (!sig) {\n        throw new Error('No attestation signature provided in attestation statement (FIDOU2F)');\n    }\n    // FIDO spec says that aaguid _must_ equal 0x00 here to be legit\n    const aaguidToHex = Number.parseInt(isoUint8Array.toHex(aaguid), 16);\n    if (aaguidToHex !== 0x00) {\n        throw new Error(`AAGUID \"${aaguidToHex}\" was not expected value`);\n    }\n    try {\n        // Try validating the certificate path using the root certificates set via SettingsService\n        await validateCertificatePath(x5c.map(convertCertBufferToPEM), rootCertificates);\n    }\n    catch (err) {\n        const _err = err;\n        throw new Error(`${_err.message} (FIDOU2F)`);\n    }\n    return verifySignature({\n        signature: sig,\n        data: signatureBase,\n        x509Certificate: x5c[0],\n        hashAlgorithm: COSEALG.ES256,\n    });\n}\n", "import { isCOSEAlg } from '../../helpers/cose.js';\nimport { convertCertBufferToPEM } from '../../helpers/convertCertBufferToPEM.js';\nimport { validateCertificatePath } from '../../helpers/validateCertificatePath.js';\nimport { getCertificateInfo } from '../../helpers/getCertificateInfo.js';\nimport { verifySignature } from '../../helpers/verifySignature.js';\nimport { isoUint8Array } from '../../helpers/iso/index.js';\nimport { MetadataService } from '../../services/metadataService.js';\nimport { verifyAttestationWithMetadata } from '../../metadata/verifyAttestationWithMetadata.js';\n/**\n * Verify an attestation response with fmt 'packed'\n */\nexport async function verifyAttestationPacked(options) {\n    const { attStmt, clientDataHash, authData, credentialPublicKey, aaguid, rootCertificates, } = options;\n    const sig = attStmt.get('sig');\n    const x5c = attStmt.get('x5c');\n    const alg = attStmt.get('alg');\n    if (!sig) {\n        throw new Error('No attestation signature provided in attestation statement (Packed)');\n    }\n    if (!alg) {\n        throw new Error('Attestation statement did not contain alg (Packed)');\n    }\n    if (!isCOSEAlg(alg)) {\n        throw new Error(`Attestation statement contained invalid alg ${alg} (Packed)`);\n    }\n    const signatureBase = isoUint8Array.concat([authData, clientDataHash]);\n    let verified = false;\n    if (x5c) {\n        const { subject, basicConstraintsCA, version, notBefore, notAfter } = getCertificateInfo(x5c[0]);\n        const { OU, CN, O, C } = subject;\n        if (OU !== 'Authenticator Attestation') {\n            throw new Error('Certificate OU was not \"Authenticator Attestation\" (Packed|Full)');\n        }\n        if (!CN) {\n            throw new Error('Certificate CN was empty (Packed|Full)');\n        }\n        if (!O) {\n            throw new Error('Certificate O was empty (Packed|Full)');\n        }\n        if (!C || C.length !== 2) {\n            throw new Error('Certificate C was not two-character ISO 3166 code (Packed|Full)');\n        }\n        if (basicConstraintsCA) {\n            throw new Error('Certificate basic constraints CA was not `false` (Packed|Full)');\n        }\n        if (version !== 2) {\n            throw new Error('Certificate version was not `3` (ASN.1 value of 2) (Packed|Full)');\n        }\n        let now = new Date();\n        if (notBefore > now) {\n            throw new Error(`Certificate not good before \"${notBefore.toString()}\" (Packed|Full)`);\n        }\n        now = new Date();\n        if (notAfter < now) {\n            throw new Error(`Certificate not good after \"${notAfter.toString()}\" (Packed|Full)`);\n        }\n        // TODO: If certificate contains id-fido-gen-ce-aaguid(1.3.6.1.4.1.45724.1.1.4) extension, check\n        // that it\u2019s value is set to the same AAGUID as in authData.\n        // If available, validate attestation alg and x5c with info in the metadata statement\n        const statement = await MetadataService.getStatement(aaguid);\n        if (statement) {\n            // The presence of x5c means this is a full attestation. Check to see if attestationTypes\n            // includes packed attestations.\n            if (statement.attestationTypes.indexOf('basic_full') < 0) {\n                throw new Error('Metadata does not indicate support for full attestations (Packed|Full)');\n            }\n            try {\n                await verifyAttestationWithMetadata({\n                    statement,\n                    credentialPublicKey,\n                    x5c,\n                    attestationStatementAlg: alg,\n                });\n            }\n            catch (err) {\n                const _err = err;\n                throw new Error(`${_err.message} (Packed|Full)`);\n            }\n        }\n        else {\n            try {\n                // Try validating the certificate path using the root certificates set via SettingsService\n                await validateCertificatePath(x5c.map(convertCertBufferToPEM), rootCertificates);\n            }\n            catch (err) {\n                const _err = err;\n                throw new Error(`${_err.message} (Packed|Full)`);\n            }\n        }\n        verified = await verifySignature({\n            signature: sig,\n            data: signatureBase,\n            x509Certificate: x5c[0],\n        });\n    }\n    else {\n        verified = await verifySignature({\n            signature: sig,\n            data: signatureBase,\n            credentialPublicKey,\n            hashAlgorithm: alg,\n        });\n    }\n    return verified;\n}\n", "import { validateCertificatePath } from '../helpers/validateCertificatePath.js';\nimport { convertCertBufferToPEM } from '../helpers/convertCertBufferToPEM.js';\nimport { convertAAGUIDToString } from '../helpers/convertAAGUIDToString.js';\nimport { SettingsService } from './settingsService.js';\nimport { getLogger } from '../helpers/logging.js';\nimport { convertPEMToBytes } from '../helpers/convertPEMToBytes.js';\nimport { fetch } from '../helpers/fetch.js';\nimport { parseJWT } from '../metadata/parseJWT.js';\nimport { verifyJWT } from '../metadata/verifyJWT.js';\nconst defaultURLMDS = 'https://mds.fidoalliance.org/'; // v3\nvar SERVICE_STATE;\n(function (SERVICE_STATE) {\n    SERVICE_STATE[SERVICE_STATE[\"DISABLED\"] = 0] = \"DISABLED\";\n    SERVICE_STATE[SERVICE_STATE[\"REFRESHING\"] = 1] = \"REFRESHING\";\n    SERVICE_STATE[SERVICE_STATE[\"READY\"] = 2] = \"READY\";\n})(SERVICE_STATE || (SERVICE_STATE = {}));\nconst log = getLogger('MetadataService');\n/**\n * A basic service for coordinating interactions with the FIDO Metadata Service. This includes BLOB\n * download and parsing, and on-demand requesting and caching of individual metadata statements.\n *\n * https://fidoalliance.org/metadata/\n */\nexport class BaseMetadataService {\n    constructor() {\n        Object.defineProperty(this, \"mdsCache\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"statementCache\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"state\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: SERVICE_STATE.DISABLED\n        });\n        Object.defineProperty(this, \"verificationMode\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'strict'\n        });\n    }\n    /**\n     * Prepare the service to handle remote MDS servers and/or cache local metadata statements.\n     *\n     * **Options:**\n     *\n     * @param opts.mdsServers An array of URLs to FIDO Alliance Metadata Service\n     * (version 3.0)-compatible servers. Defaults to the official FIDO MDS server\n     * @param opts.statements An array of local metadata statements\n     * @param opts.verificationMode How MetadataService will handle unregistered AAGUIDs. Defaults to\n     * `\"strict\"` which throws errors during registration response verification when an\n     * unregistered AAGUID is encountered. Set to `\"permissive\"` to allow registration by\n     * authenticators with unregistered AAGUIDs\n     */\n    async initialize(opts = {}) {\n        const { mdsServers = [defaultURLMDS], statements, verificationMode } = opts;\n        this.setState(SERVICE_STATE.REFRESHING);\n        // If metadata statements are provided, load them into the cache first\n        if (statements?.length) {\n            let statementsAdded = 0;\n            statements.forEach((statement) => {\n                // Only cache statements that are for FIDO2-compatible authenticators\n                if (statement.aaguid) {\n                    this.statementCache[statement.aaguid] = {\n                        entry: {\n                            metadataStatement: statement,\n                            statusReports: [],\n                            timeOfLastStatusChange: '1970-01-01',\n                        },\n                        url: '',\n                    };\n                    statementsAdded += 1;\n                }\n            });\n            log(`Cached ${statementsAdded} local statements`);\n        }\n        // If MDS servers are provided, then process them and add their statements to the cache\n        if (mdsServers?.length) {\n            // Get a current count so we know how many new statements we've added from MDS servers\n            const currentCacheCount = Object.keys(this.statementCache).length;\n            let numServers = mdsServers.length;\n            for (const url of mdsServers) {\n                try {\n                    await this.downloadBlob({\n                        url,\n                        no: 0,\n                        nextUpdate: new Date(0),\n                    });\n                }\n                catch (err) {\n                    // Notify of the error and move on\n                    log(`Could not download BLOB from ${url}:`, err);\n                    numServers -= 1;\n                }\n            }\n            // Calculate the difference to get the total number of new statements we successfully added\n            const newCacheCount = Object.keys(this.statementCache).length;\n            const cacheDiff = newCacheCount - currentCacheCount;\n            log(`Cached ${cacheDiff} statements from ${numServers} metadata server(s)`);\n        }\n        if (verificationMode) {\n            this.verificationMode = verificationMode;\n        }\n        this.setState(SERVICE_STATE.READY);\n    }\n    /**\n     * Get a metadata statement for a given AAGUID.\n     *\n     * This method will coordinate updating the cache as per the `nextUpdate` property in the initial\n     * BLOB download.\n     */\n    async getStatement(aaguid) {\n        if (this.state === SERVICE_STATE.DISABLED) {\n            return;\n        }\n        if (!aaguid) {\n            return;\n        }\n        if (aaguid instanceof Uint8Array) {\n            aaguid = convertAAGUIDToString(aaguid);\n        }\n        // If a cache refresh is in progress then pause this until the service is ready\n        await this.pauseUntilReady();\n        // Try to grab a cached statement\n        const cachedStatement = this.statementCache[aaguid];\n        if (!cachedStatement) {\n            if (this.verificationMode === 'strict') {\n                // FIDO conformance requires RP's to only support registered AAGUID's\n                throw new Error(`No metadata statement found for aaguid \"${aaguid}\"`);\n            }\n            // Allow registration verification to continue without using metadata\n            return;\n        }\n        // If the statement points to an MDS API, check the MDS' nextUpdate to see if we need to refresh\n        if (cachedStatement.url) {\n            const mds = this.mdsCache[cachedStatement.url];\n            const now = new Date();\n            if (now > mds.nextUpdate) {\n                try {\n                    this.setState(SERVICE_STATE.REFRESHING);\n                    await this.downloadBlob(mds);\n                }\n                finally {\n                    this.setState(SERVICE_STATE.READY);\n                }\n            }\n        }\n        const { entry } = cachedStatement;\n        // Check to see if the this aaguid has a status report with a \"compromised\" status\n        for (const report of entry.statusReports) {\n            const { status } = report;\n            if (status === 'USER_VERIFICATION_BYPASS' ||\n                status === 'ATTESTATION_KEY_COMPROMISE' ||\n                status === 'USER_KEY_REMOTE_COMPROMISE' ||\n                status === 'USER_KEY_PHYSICAL_COMPROMISE') {\n                throw new Error(`Detected compromised aaguid \"${aaguid}\"`);\n            }\n        }\n        return entry.metadataStatement;\n    }\n    /**\n     * Download and process the latest BLOB from MDS\n     */\n    async downloadBlob(mds) {\n        const { url, no } = mds;\n        // Get latest \"BLOB\" (FIDO's terminology, not mine)\n        const resp = await fetch(url);\n        const data = await resp.text();\n        // Parse the JWT\n        const parsedJWT = parseJWT(data);\n        const header = parsedJWT[0];\n        const payload = parsedJWT[1];\n        if (payload.no <= no) {\n            // From FIDO MDS docs: \"also ignore the file if its number (no) is less or equal to the\n            // number of the last BLOB cached locally.\"\n            throw new Error(`Latest BLOB no. \"${payload.no}\" is not greater than previous ${no}`);\n        }\n        const headerCertsPEM = header.x5c.map(convertCertBufferToPEM);\n        try {\n            // Validate the certificate chain\n            const rootCerts = SettingsService.getRootCertificates({\n                identifier: 'mds',\n            });\n            await validateCertificatePath(headerCertsPEM, rootCerts);\n        }\n        catch (error) {\n            const _error = error;\n            // From FIDO MDS docs: \"ignore the file if the chain cannot be verified or if one of the\n            // chain certificates is revoked\"\n            throw new Error(`BLOB certificate path could not be validated: ${_error.message}`);\n        }\n        // Verify the BLOB JWT signature\n        const leafCert = headerCertsPEM[0];\n        const verified = await verifyJWT(data, convertPEMToBytes(leafCert));\n        if (!verified) {\n            // From FIDO MDS docs: \"The FIDO Server SHOULD ignore the file if the signature is invalid.\"\n            throw new Error('BLOB signature could not be verified');\n        }\n        // Cache statements for FIDO2 devices\n        for (const entry of payload.entries) {\n            // Only cache entries with an `aaguid`\n            if (entry.aaguid) {\n                this.statementCache[entry.aaguid] = { entry, url };\n            }\n        }\n        // Remember info about the server so we can refresh later\n        const [year, month, day] = payload.nextUpdate.split('-');\n        this.mdsCache[url] = {\n            ...mds,\n            // Store the payload `no` to make sure we're getting the next BLOB in the sequence\n            no: payload.no,\n            // Convert the nextUpdate property into a Date so we can determine when to re-download\n            nextUpdate: new Date(parseInt(year, 10), \n            // Months need to be zero-indexed\n            parseInt(month, 10) - 1, parseInt(day, 10)),\n        };\n    }\n    /**\n     * A helper method to pause execution until the service is ready\n     */\n    pauseUntilReady() {\n        if (this.state === SERVICE_STATE.READY) {\n            return new Promise((resolve) => {\n                resolve();\n            });\n        }\n        // State isn't ready, so set up polling\n        const readyPromise = new Promise((resolve, reject) => {\n            const totalTimeoutMS = 70000;\n            const intervalMS = 100;\n            let iterations = totalTimeoutMS / intervalMS;\n            // Check service state every `intervalMS` milliseconds\n            const intervalID = globalThis.setInterval(() => {\n                if (iterations < 1) {\n                    clearInterval(intervalID);\n                    reject(`State did not become ready in ${totalTimeoutMS / 1000} seconds`);\n                }\n                else if (this.state === SERVICE_STATE.READY) {\n                    clearInterval(intervalID);\n                    resolve();\n                }\n                iterations -= 1;\n            }, intervalMS);\n        });\n        return readyPromise;\n    }\n    /**\n     * Report service status on change\n     */\n    setState(newState) {\n        this.state = newState;\n        if (newState === SERVICE_STATE.DISABLED) {\n            log('MetadataService is DISABLED');\n        }\n        else if (newState === SERVICE_STATE.REFRESHING) {\n            log('MetadataService is REFRESHING');\n        }\n        else if (newState === SERVICE_STATE.READY) {\n            log('MetadataService is READY');\n        }\n    }\n}\n// Export a service singleton\nexport const MetadataService = new BaseMetadataService();\n", "// import { debug, Debugger } from '../deps.ts';\n// const defaultLogger = debug('SimpleWebAuthn');\n/**\n * Generate an instance of a `debug` logger that extends off of the \"simplewebauthn\" namespace for\n * consistent naming.\n *\n * See https://www.npmjs.com/package/debug for information on how to control logging output when\n * using @simplewebauthn/server\n *\n * Example:\n *\n * ```\n * const log = getLogger('mds');\n * log('hello'); // simplewebauthn:mds hello +0ms\n * ```\n */\nexport function getLogger(_name) {\n    // This is a noop for now while I search for a better debug logger technique\n    return (_message, ..._rest) => { };\n}\n", "import { isoBase64URL } from '../helpers/iso/index.js';\n/**\n * Process a JWT into Javascript-friendly data structures\n */\nexport function parseJWT(jwt) {\n    const parts = jwt.split('.');\n    return [\n        JSON.parse(isoBase64URL.toUTF8String(parts[0])),\n        JSON.parse(isoBase64URL.toUTF8String(parts[1])),\n        parts[2],\n    ];\n}\n", "import { convertX509PublicKeyToCOSE } from '../helpers/convertX509PublicKeyToCOSE.js';\nimport { isoBase64URL, isoUint8Array } from '../helpers/iso/index.js';\nimport { COSEALG, COSEKEYS, isCOSEPublicKeyEC2, isCOSEPublicKeyRSA } from '../helpers/cose.js';\nimport { verifyEC2 } from '../helpers/iso/isoCrypto/verifyEC2.js';\nimport { verifyRSA } from '../helpers/iso/isoCrypto/verifyRSA.js';\n/**\n * Lightweight verification for FIDO MDS JWTs. Supports use of EC2 and RSA.\n *\n * If this ever needs to support more JWS algorithms, here's the list of them:\n *\n * https://www.rfc-editor.org/rfc/rfc7518.html#section-3.1\n *\n * (Pulled from https://www.rfc-editor.org/rfc/rfc7515#section-4.1.1)\n */\nexport function verifyJWT(jwt, leafCert) {\n    const [header, payload, signature] = jwt.split('.');\n    const certCOSE = convertX509PublicKeyToCOSE(leafCert);\n    const data = isoUint8Array.fromUTF8String(`${header}.${payload}`);\n    const signatureBytes = isoBase64URL.toBuffer(signature);\n    if (isCOSEPublicKeyEC2(certCOSE)) {\n        return verifyEC2({\n            data,\n            signature: signatureBytes,\n            cosePublicKey: certCOSE,\n            shaHashOverride: COSEALG.ES256,\n        });\n    }\n    else if (isCOSEPublicKeyRSA(certCOSE)) {\n        return verifyRSA({\n            data,\n            signature: signatureBytes,\n            cosePublicKey: certCOSE,\n        });\n    }\n    const kty = certCOSE.get(COSEKEYS.kty);\n    throw new Error(`JWT verification with public key of kty ${kty} is not supported by this method`);\n}\n", "import { convertCertBufferToPEM } from '../helpers/convertCertBufferToPEM.js';\nimport { validateCertificatePath } from '../helpers/validateCertificatePath.js';\nimport { decodeCredentialPublicKey } from '../helpers/decodeCredentialPublicKey.js';\nimport { COSEKEYS, COSEKTY, isCOSEPublicKeyEC2 } from '../helpers/cose.js';\n/**\n * Match properties of the authenticator's attestation statement against expected values as\n * registered with the FIDO Alliance Metadata Service\n */\nexport async function verifyAttestationWithMetadata({ statement, credentialPublicKey, x5c, attestationStatementAlg, }) {\n    const { authenticationAlgorithms, authenticatorGetInfo, attestationRootCertificates, } = statement;\n    // Make sure the alg in the attestation statement matches one of the ones specified in metadata\n    const keypairCOSEAlgs = new Set();\n    authenticationAlgorithms.forEach((algSign) => {\n        // Map algSign string to { kty, alg, crv }\n        const algSignCOSEINFO = algSignToCOSEInfoMap[algSign];\n        // Keeping this statement here just in case MDS returns something unexpected\n        if (algSignCOSEINFO) {\n            keypairCOSEAlgs.add(algSignCOSEINFO);\n        }\n    });\n    // Extract the public key's COSE info for comparison\n    const decodedPublicKey = decodeCredentialPublicKey(credentialPublicKey);\n    const kty = decodedPublicKey.get(COSEKEYS.kty);\n    const alg = decodedPublicKey.get(COSEKEYS.alg);\n    if (!kty) {\n        throw new Error('Credential public key was missing kty');\n    }\n    if (!alg) {\n        throw new Error('Credential public key was missing alg');\n    }\n    if (!kty) {\n        throw new Error('Credential public key was missing kty');\n    }\n    // Assume everything is a number because these values should be\n    const publicKeyCOSEInfo = { kty, alg };\n    if (isCOSEPublicKeyEC2(decodedPublicKey)) {\n        const crv = decodedPublicKey.get(COSEKEYS.crv);\n        publicKeyCOSEInfo.crv = crv;\n    }\n    /**\n     * Attempt to match the credential public key's algorithm to one specified in the device's\n     * metadata\n     */\n    let foundMatch = false;\n    for (const keypairAlg of keypairCOSEAlgs) {\n        // Make sure algorithm and key type match\n        if (keypairAlg.alg === publicKeyCOSEInfo.alg &&\n            keypairAlg.kty === publicKeyCOSEInfo.kty) {\n            // If not an RSA keypair then make sure curve numbers match too\n            if ((keypairAlg.kty === COSEKTY.EC2 || keypairAlg.kty === COSEKTY.OKP) &&\n                keypairAlg.crv === publicKeyCOSEInfo.crv) {\n                foundMatch = true;\n            }\n            else {\n                // We've matched an RSA public key's properties\n                foundMatch = true;\n            }\n        }\n        if (foundMatch) {\n            break;\n        }\n    }\n    // Make sure the public key is one of the allowed algorithms\n    if (!foundMatch) {\n        /**\n         * Craft some useful error output from the MDS algorithms\n         *\n         * Example:\n         *\n         * ```\n         * [\n         *   'rsassa_pss_sha256_raw' (COSE info: { kty: 3, alg: -37 }),\n         *   'secp256k1_ecdsa_sha256_raw' (COSE info: { kty: 2, alg: -47, crv: 8 })\n         * ]\n         * ```\n         */\n        const debugMDSAlgs = authenticationAlgorithms.map((algSign) => `'${algSign}' (COSE info: ${stringifyCOSEInfo(algSignToCOSEInfoMap[algSign])})`);\n        const strMDSAlgs = JSON.stringify(debugMDSAlgs, null, 2).replace(/\"/g, '');\n        /**\n         * Construct useful error output about the public key\n         */\n        const strPubKeyAlg = stringifyCOSEInfo(publicKeyCOSEInfo);\n        throw new Error(`Public key parameters ${strPubKeyAlg} did not match any of the following metadata algorithms:\\n${strMDSAlgs}`);\n    }\n    /**\n     * Confirm the attestation statement's algorithm is one supported according to metadata\n     */\n    if (attestationStatementAlg !== undefined &&\n        authenticatorGetInfo?.algorithms !== undefined) {\n        const getInfoAlgs = authenticatorGetInfo.algorithms.map((_alg) => _alg.alg);\n        if (getInfoAlgs.indexOf(attestationStatementAlg) < 0) {\n            throw new Error(`Attestation statement alg ${attestationStatementAlg} did not match one of ${getInfoAlgs}`);\n        }\n    }\n    // Prepare to check the certificate chain\n    const authenticatorCerts = x5c.map(convertCertBufferToPEM);\n    const statementRootCerts = attestationRootCertificates.map(convertCertBufferToPEM);\n    /**\n     * If an authenticator returns exactly one certificate in its x5c, and that cert is found in the\n     * metadata statement then the authenticator is \"self-referencing\". In this case we forego\n     * certificate chain validation.\n     */\n    let authenticatorIsSelfReferencing = false;\n    if (authenticatorCerts.length === 1 &&\n        statementRootCerts.indexOf(authenticatorCerts[0]) >= 0) {\n        authenticatorIsSelfReferencing = true;\n    }\n    if (!authenticatorIsSelfReferencing) {\n        try {\n            await validateCertificatePath(authenticatorCerts, statementRootCerts);\n        }\n        catch (err) {\n            const _err = err;\n            throw new Error(`Could not validate certificate path with any metadata root certificates: ${_err.message}`);\n        }\n    }\n    return true;\n}\n/**\n * Convert ALG_SIGN values to COSE info\n *\n * Values pulled from `ALG_KEY_COSE` definitions in the FIDO Registry of Predefined Values\n *\n * https://fidoalliance.org/specs/common-specs/fido-registry-v2.2-ps-20220523.html#authentication-algorithms\n */\nexport const algSignToCOSEInfoMap = {\n    secp256r1_ecdsa_sha256_raw: { kty: 2, alg: -7, crv: 1 },\n    secp256r1_ecdsa_sha256_der: { kty: 2, alg: -7, crv: 1 },\n    rsassa_pss_sha256_raw: { kty: 3, alg: -37 },\n    rsassa_pss_sha256_der: { kty: 3, alg: -37 },\n    secp256k1_ecdsa_sha256_raw: { kty: 2, alg: -47, crv: 8 },\n    secp256k1_ecdsa_sha256_der: { kty: 2, alg: -47, crv: 8 },\n    rsassa_pss_sha384_raw: { kty: 3, alg: -38 },\n    rsassa_pkcsv15_sha256_raw: { kty: 3, alg: -257 },\n    rsassa_pkcsv15_sha384_raw: { kty: 3, alg: -258 },\n    rsassa_pkcsv15_sha512_raw: { kty: 3, alg: -259 },\n    rsassa_pkcsv15_sha1_raw: { kty: 3, alg: -65535 },\n    secp384r1_ecdsa_sha384_raw: { kty: 2, alg: -35, crv: 2 },\n    secp512r1_ecdsa_sha256_raw: { kty: 2, alg: -36, crv: 3 },\n    ed25519_eddsa_sha512_raw: { kty: 1, alg: -8, crv: 6 },\n};\n/**\n * A helper to format COSEInfo a little nicer than we can achieve with JSON.stringify()\n *\n * Input: `{ \"kty\": 3, \"alg\": -257 }`\n *\n * Output: `\"{ kty: 3, alg: -257 }\"`\n */\nfunction stringifyCOSEInfo(info) {\n    const { kty, alg, crv } = info;\n    let toReturn = '';\n    if (kty !== COSEKTY.RSA) {\n        toReturn = `{ kty: ${kty}, alg: ${alg}, crv: ${crv} }`;\n    }\n    else {\n        toReturn = `{ kty: ${kty}, alg: ${alg} }`;\n    }\n    return toReturn;\n}\n", "import { toHash } from '../../helpers/toHash.js';\nimport { verifySignature } from '../../helpers/verifySignature.js';\nimport { getCertificateInfo } from '../../helpers/getCertificateInfo.js';\nimport { validateCertificatePath } from '../../helpers/validateCertificatePath.js';\nimport { convertCertBufferToPEM } from '../../helpers/convertCertBufferToPEM.js';\nimport { isoBase64URL, isoUint8Array } from '../../helpers/iso/index.js';\nimport { MetadataService } from '../../services/metadataService.js';\nimport { verifyAttestationWithMetadata } from '../../metadata/verifyAttestationWithMetadata.js';\n/**\n * Verify an attestation response with fmt 'android-safetynet'\n */\nexport async function verifyAttestationAndroidSafetyNet(options) {\n    const { attStmt, clientDataHash, authData, aaguid, rootCertificates, verifyTimestampMS = true, credentialPublicKey, } = options;\n    const alg = attStmt.get('alg');\n    const response = attStmt.get('response');\n    const ver = attStmt.get('ver');\n    if (!ver) {\n        throw new Error('No ver value in attestation (SafetyNet)');\n    }\n    if (!response) {\n        throw new Error('No response was included in attStmt by authenticator (SafetyNet)');\n    }\n    // Prepare to verify a JWT\n    const jwt = isoUint8Array.toUTF8String(response);\n    const jwtParts = jwt.split('.');\n    const HEADER = JSON.parse(isoBase64URL.toUTF8String(jwtParts[0]));\n    const PAYLOAD = JSON.parse(isoBase64URL.toUTF8String(jwtParts[1]));\n    const SIGNATURE = jwtParts[2];\n    /**\n     * START Verify PAYLOAD\n     */\n    const { nonce, ctsProfileMatch, timestampMs } = PAYLOAD;\n    if (verifyTimestampMS) {\n        // Make sure timestamp is in the past\n        let now = Date.now();\n        if (timestampMs > Date.now()) {\n            throw new Error(`Payload timestamp \"${timestampMs}\" was later than \"${now}\" (SafetyNet)`);\n        }\n        // Consider a SafetyNet attestation valid within a minute of it being performed\n        const timestampPlusDelay = timestampMs + 60 * 1000;\n        now = Date.now();\n        if (timestampPlusDelay < now) {\n            throw new Error(`Payload timestamp \"${timestampPlusDelay}\" has expired (SafetyNet)`);\n        }\n    }\n    const nonceBase = isoUint8Array.concat([authData, clientDataHash]);\n    const nonceBuffer = await toHash(nonceBase);\n    const expectedNonce = isoBase64URL.fromBuffer(nonceBuffer, 'base64');\n    if (nonce !== expectedNonce) {\n        throw new Error('Could not verify payload nonce (SafetyNet)');\n    }\n    if (!ctsProfileMatch) {\n        throw new Error('Could not verify device integrity (SafetyNet)');\n    }\n    /**\n     * END Verify PAYLOAD\n     */\n    /**\n     * START Verify Header\n     */\n    // `HEADER.x5c[0]` is definitely a base64 string\n    const leafCertBuffer = isoBase64URL.toBuffer(HEADER.x5c[0], 'base64');\n    const leafCertInfo = getCertificateInfo(leafCertBuffer);\n    const { subject } = leafCertInfo;\n    // Ensure the certificate was issued to this hostname\n    // See https://developer.android.com/training/safetynet/attestation#verify-attestation-response\n    if (subject.CN !== 'attest.android.com') {\n        throw new Error('Certificate common name was not \"attest.android.com\" (SafetyNet)');\n    }\n    const statement = await MetadataService.getStatement(aaguid);\n    if (statement) {\n        try {\n            await verifyAttestationWithMetadata({\n                statement,\n                credentialPublicKey,\n                x5c: HEADER.x5c,\n                attestationStatementAlg: alg,\n            });\n        }\n        catch (err) {\n            const _err = err;\n            throw new Error(`${_err.message} (SafetyNet)`);\n        }\n    }\n    else {\n        try {\n            // Try validating the certificate path using the root certificates set via SettingsService\n            await validateCertificatePath(HEADER.x5c.map(convertCertBufferToPEM), rootCertificates);\n        }\n        catch (err) {\n            const _err = err;\n            throw new Error(`${_err.message} (SafetyNet)`);\n        }\n    }\n    /**\n     * END Verify Header\n     */\n    /**\n     * START Verify Signature\n     */\n    const signatureBaseBuffer = isoUint8Array.fromUTF8String(`${jwtParts[0]}.${jwtParts[1]}`);\n    const signatureBuffer = isoBase64URL.toBuffer(SIGNATURE);\n    const verified = await verifySignature({\n        signature: signatureBuffer,\n        data: signatureBaseBuffer,\n        x509Certificate: leafCertBuffer,\n    });\n    /**\n     * END Verify Signature\n     */\n    return verified;\n}\n", "import { AsnParser, Certificate, ExtendedKeyUsage, id_ce_extKeyUsage, id_ce_subjectAltName, SubjectAlternativeName, } from '../../../deps.js';\nimport { decodeCredentialPublicKey } from '../../../helpers/decodeCredentialPublicKey.js';\nimport { COSEALG, COSEKEYS, isCOSEAlg, isCOSEPublicKeyEC2, isCOSEPublicKeyRSA, } from '../../../helpers/cose.js';\nimport { toHash } from '../../../helpers/toHash.js';\nimport { convertCertBufferToPEM } from '../../../helpers/convertCertBufferToPEM.js';\nimport { validateCertificatePath } from '../../../helpers/validateCertificatePath.js';\nimport { getCertificateInfo } from '../../../helpers/getCertificateInfo.js';\nimport { verifySignature } from '../../../helpers/verifySignature.js';\nimport { isoUint8Array } from '../../../helpers/iso/index.js';\nimport { MetadataService } from '../../../services/metadataService.js';\nimport { verifyAttestationWithMetadata } from '../../../metadata/verifyAttestationWithMetadata.js';\nimport { TPM_ECC_CURVE_COSE_CRV_MAP, TPM_MANUFACTURERS } from './constants.js';\nimport { parseCertInfo } from './parseCertInfo.js';\nimport { parsePubArea } from './parsePubArea.js';\nexport async function verifyAttestationTPM(options) {\n    const { aaguid, attStmt, authData, credentialPublicKey, clientDataHash, rootCertificates, } = options;\n    const ver = attStmt.get('ver');\n    const sig = attStmt.get('sig');\n    const alg = attStmt.get('alg');\n    const x5c = attStmt.get('x5c');\n    const pubArea = attStmt.get('pubArea');\n    const certInfo = attStmt.get('certInfo');\n    /**\n     * Verify structures\n     */\n    if (ver !== '2.0') {\n        throw new Error(`Unexpected ver \"${ver}\", expected \"2.0\" (TPM)`);\n    }\n    if (!sig) {\n        throw new Error('No attestation signature provided in attestation statement (TPM)');\n    }\n    if (!alg) {\n        throw new Error(`Attestation statement did not contain alg (TPM)`);\n    }\n    if (!isCOSEAlg(alg)) {\n        throw new Error(`Attestation statement contained invalid alg ${alg} (TPM)`);\n    }\n    if (!x5c) {\n        throw new Error('No attestation certificate provided in attestation statement (TPM)');\n    }\n    if (!pubArea) {\n        throw new Error('Attestation statement did not contain pubArea (TPM)');\n    }\n    if (!certInfo) {\n        throw new Error('Attestation statement did not contain certInfo (TPM)');\n    }\n    const parsedPubArea = parsePubArea(pubArea);\n    const { unique, type: pubType, parameters } = parsedPubArea;\n    // Verify that the public key specified by the parameters and unique fields of pubArea is\n    // identical to the credentialPublicKey in the attestedCredentialData in authenticatorData.\n    const cosePublicKey = decodeCredentialPublicKey(credentialPublicKey);\n    if (pubType === 'TPM_ALG_RSA') {\n        if (!isCOSEPublicKeyRSA(cosePublicKey)) {\n            throw new Error(`Credential public key with kty ${cosePublicKey.get(COSEKEYS.kty)} did not match ${pubType}`);\n        }\n        const n = cosePublicKey.get(COSEKEYS.n);\n        const e = cosePublicKey.get(COSEKEYS.e);\n        if (!n) {\n            throw new Error('COSE public key missing n (TPM|RSA)');\n        }\n        if (!e) {\n            throw new Error('COSE public key missing e (TPM|RSA)');\n        }\n        if (!isoUint8Array.areEqual(unique, n)) {\n            throw new Error('PubArea unique is not same as credentialPublicKey (TPM|RSA)');\n        }\n        if (!parameters.rsa) {\n            throw new Error(`Parsed pubArea type is RSA, but missing parameters.rsa (TPM|RSA)`);\n        }\n        const eBuffer = e;\n        // If `exponent` is equal to 0x00, then exponent is the default RSA exponent of 2^16+1 (65537)\n        const pubAreaExponent = parameters.rsa.exponent || 65537;\n        // Do some bit shifting to get to an integer\n        const eSum = eBuffer[0] + (eBuffer[1] << 8) + (eBuffer[2] << 16);\n        if (pubAreaExponent !== eSum) {\n            throw new Error(`Unexpected public key exp ${eSum}, expected ${pubAreaExponent} (TPM|RSA)`);\n        }\n    }\n    else if (pubType === 'TPM_ALG_ECC') {\n        if (!isCOSEPublicKeyEC2(cosePublicKey)) {\n            throw new Error(`Credential public key with kty ${cosePublicKey.get(COSEKEYS.kty)} did not match ${pubType}`);\n        }\n        const crv = cosePublicKey.get(COSEKEYS.crv);\n        const x = cosePublicKey.get(COSEKEYS.x);\n        const y = cosePublicKey.get(COSEKEYS.y);\n        if (!crv) {\n            throw new Error('COSE public key missing crv (TPM|ECC)');\n        }\n        if (!x) {\n            throw new Error('COSE public key missing x (TPM|ECC)');\n        }\n        if (!y) {\n            throw new Error('COSE public key missing y (TPM|ECC)');\n        }\n        if (!isoUint8Array.areEqual(unique, isoUint8Array.concat([x, y]))) {\n            throw new Error('PubArea unique is not same as public key x and y (TPM|ECC)');\n        }\n        if (!parameters.ecc) {\n            throw new Error(`Parsed pubArea type is ECC, but missing parameters.ecc (TPM|ECC)`);\n        }\n        const pubAreaCurveID = parameters.ecc.curveID;\n        const pubAreaCurveIDMapToCOSECRV = TPM_ECC_CURVE_COSE_CRV_MAP[pubAreaCurveID];\n        if (pubAreaCurveIDMapToCOSECRV !== crv) {\n            throw new Error(`Public area key curve ID \"${pubAreaCurveID}\" mapped to \"${pubAreaCurveIDMapToCOSECRV}\" which did not match public key crv of \"${crv}\" (TPM|ECC)`);\n        }\n    }\n    else {\n        throw new Error(`Unsupported pubArea.type \"${pubType}\"`);\n    }\n    const parsedCertInfo = parseCertInfo(certInfo);\n    const { magic, type: certType, attested, extraData } = parsedCertInfo;\n    if (magic !== 0xff544347) {\n        throw new Error(`Unexpected magic value \"${magic}\", expected \"0xff544347\" (TPM)`);\n    }\n    if (certType !== 'TPM_ST_ATTEST_CERTIFY') {\n        throw new Error(`Unexpected type \"${certType}\", expected \"TPM_ST_ATTEST_CERTIFY\" (TPM)`);\n    }\n    // Hash pubArea to create pubAreaHash using the nameAlg in attested\n    const pubAreaHash = await toHash(pubArea, attestedNameAlgToCOSEAlg(attested.nameAlg));\n    // Concatenate attested.nameAlg and pubAreaHash to create attestedName.\n    const attestedName = isoUint8Array.concat([\n        attested.nameAlgBuffer,\n        pubAreaHash,\n    ]);\n    // Check that certInfo.attested.name is equals to attestedName.\n    if (!isoUint8Array.areEqual(attested.name, attestedName)) {\n        throw new Error(`Attested name comparison failed (TPM)`);\n    }\n    // Concatenate authData with clientDataHash to create attToBeSigned\n    const attToBeSigned = isoUint8Array.concat([authData, clientDataHash]);\n    // Hash attToBeSigned using the algorithm specified in attStmt.alg to create attToBeSignedHash\n    const attToBeSignedHash = await toHash(attToBeSigned, alg);\n    // Check that certInfo.extraData is equals to attToBeSignedHash.\n    if (!isoUint8Array.areEqual(extraData, attToBeSignedHash)) {\n        throw new Error('CertInfo extra data did not equal hashed attestation (TPM)');\n    }\n    /**\n     * Verify signature\n     */\n    if (x5c.length < 1) {\n        throw new Error('No certificates present in x5c array (TPM)');\n    }\n    // Pick a leaf AIK certificate of the x5c array and parse it.\n    const leafCertInfo = getCertificateInfo(x5c[0]);\n    const { basicConstraintsCA, version, subject, notAfter, notBefore } = leafCertInfo;\n    if (basicConstraintsCA) {\n        throw new Error('Certificate basic constraints CA was not `false` (TPM)');\n    }\n    // Check that certificate is of version 3 (value must be set to 2).\n    if (version !== 2) {\n        throw new Error('Certificate version was not `3` (ASN.1 value of 2) (TPM)');\n    }\n    // Check that Subject sequence is empty.\n    if (subject.combined.length > 0) {\n        throw new Error('Certificate subject was not empty (TPM)');\n    }\n    // Check that certificate is currently valid\n    let now = new Date();\n    if (notBefore > now) {\n        throw new Error(`Certificate not good before \"${notBefore.toString()}\" (TPM)`);\n    }\n    // Check that certificate has not expired\n    now = new Date();\n    if (notAfter < now) {\n        throw new Error(`Certificate not good after \"${notAfter.toString()}\" (TPM)`);\n    }\n    /**\n     * Plumb the depths of the certificate's ASN.1-formatted data for some values we need to verify\n     */\n    const parsedCert = AsnParser.parse(x5c[0], Certificate);\n    if (!parsedCert.tbsCertificate.extensions) {\n        throw new Error('Certificate was missing extensions (TPM)');\n    }\n    let subjectAltNamePresent;\n    let extKeyUsage;\n    parsedCert.tbsCertificate.extensions.forEach((ext) => {\n        if (ext.extnID === id_ce_subjectAltName) {\n            subjectAltNamePresent = AsnParser.parse(ext.extnValue, SubjectAlternativeName);\n        }\n        else if (ext.extnID === id_ce_extKeyUsage) {\n            extKeyUsage = AsnParser.parse(ext.extnValue, ExtendedKeyUsage);\n        }\n    });\n    // Check that certificate contains subjectAltName (2.5.29.17) extension,\n    if (!subjectAltNamePresent) {\n        throw new Error('Certificate did not contain subjectAltName extension (TPM)');\n    }\n    // TPM-specific values are buried within `directoryName`, so first make sure there are values\n    // there.\n    if (!subjectAltNamePresent[0].directoryName?.[0].length) {\n        throw new Error('Certificate subjectAltName extension directoryName was empty (TPM)');\n    }\n    const { tcgAtTpmManufacturer, tcgAtTpmModel, tcgAtTpmVersion } = getTcgAtTpmValues(subjectAltNamePresent[0].directoryName);\n    if (!tcgAtTpmManufacturer || !tcgAtTpmModel || !tcgAtTpmVersion) {\n        throw new Error('Certificate contained incomplete subjectAltName data (TPM)');\n    }\n    if (!extKeyUsage) {\n        throw new Error('Certificate did not contain ExtendedKeyUsage extension (TPM)');\n    }\n    // Check that tcpaTpmManufacturer (2.23.133.2.1) field is set to a valid manufacturer ID.\n    if (!TPM_MANUFACTURERS[tcgAtTpmManufacturer]) {\n        throw new Error(`Could not match TPM manufacturer \"${tcgAtTpmManufacturer}\" (TPM)`);\n    }\n    // Check that certificate contains extKeyUsage (2.5.29.37) extension and it must contain\n    // tcg-kp-AIKCertificate (2.23.133.8.3) OID.\n    if (extKeyUsage[0] !== '2.23.133.8.3') {\n        throw new Error(`Unexpected extKeyUsage \"${extKeyUsage[0]}\", expected \"2.23.133.8.3\" (TPM)`);\n    }\n    // TODO: If certificate contains id-fido-gen-ce-aaguid(1.3.6.1.4.1.45724.1.1.4) extension, check\n    // that it\u2019s value is set to the same AAGUID as in authData.\n    // Run some metadata checks if a statement exists for this authenticator\n    const statement = await MetadataService.getStatement(aaguid);\n    if (statement) {\n        try {\n            await verifyAttestationWithMetadata({\n                statement,\n                credentialPublicKey,\n                x5c,\n                attestationStatementAlg: alg,\n            });\n        }\n        catch (err) {\n            const _err = err;\n            throw new Error(`${_err.message} (TPM)`);\n        }\n    }\n    else {\n        try {\n            // Try validating the certificate path using the root certificates set via SettingsService\n            await validateCertificatePath(x5c.map(convertCertBufferToPEM), rootCertificates);\n        }\n        catch (err) {\n            const _err = err;\n            throw new Error(`${_err.message} (TPM)`);\n        }\n    }\n    // Verify signature over certInfo with the public key extracted from AIK certificate.\n    // In the wise words of Yuriy Ackermann: \"Get Martini friend, you are done!\"\n    return verifySignature({\n        signature: sig,\n        data: certInfo,\n        x509Certificate: x5c[0],\n        hashAlgorithm: alg,\n    });\n}\n/**\n * Contain logic for pulling TPM-specific values out of subjectAlternativeName extension\n */\nfunction getTcgAtTpmValues(root) {\n    const oidManufacturer = '2.23.133.2.1';\n    const oidModel = '2.23.133.2.2';\n    const oidVersion = '2.23.133.2.3';\n    let tcgAtTpmManufacturer;\n    let tcgAtTpmModel;\n    let tcgAtTpmVersion;\n    /**\n     * Iterate through the following potential structures:\n     *\n     * (Good, follows the spec)\n     * https://trustedcomputinggroup.org/wp-content/uploads/TCG_IWG_EKCredentialProfile_v2p3_r2_pub.pdf (page 33)\n     * Name [\n     *   RelativeDistinguishedName [\n     *     AttributeTypeAndValue { type, value }\n     *   ]\n     *   RelativeDistinguishedName [\n     *     AttributeTypeAndValue { type, value }\n     *   ]\n     *   RelativeDistinguishedName [\n     *     AttributeTypeAndValue { type, value }\n     *   ]\n     * ]\n     *\n     * (Bad, does not follow the spec)\n     * Name [\n     *   RelativeDistinguishedName [\n     *     AttributeTypeAndValue { type, value }\n     *     AttributeTypeAndValue { type, value }\n     *     AttributeTypeAndValue { type, value }\n     *   ]\n     * ]\n     *\n     * Both structures have been seen in the wild and need to be supported\n     */\n    root.forEach((relName) => {\n        relName.forEach((attr) => {\n            if (attr.type === oidManufacturer) {\n                tcgAtTpmManufacturer = attr.value.toString();\n            }\n            else if (attr.type === oidModel) {\n                tcgAtTpmModel = attr.value.toString();\n            }\n            else if (attr.type === oidVersion) {\n                tcgAtTpmVersion = attr.value.toString();\n            }\n        });\n    });\n    return {\n        tcgAtTpmManufacturer,\n        tcgAtTpmModel,\n        tcgAtTpmVersion,\n    };\n}\n/**\n * Convert TPM-specific SHA algorithm ID's with COSE-specific equivalents. Note that the choice to\n * use ECDSA SHA IDs is arbitrary; any such COSEALG that would map to SHA-256 in\n * `mapCoseAlgToWebCryptoAlg()`\n *\n * SHA IDs referenced from here:\n *\n * https://trustedcomputinggroup.org/wp-content/uploads/TCG_TPM2_r1p59_Part2_Structures_pub.pdf\n */\nfunction attestedNameAlgToCOSEAlg(alg) {\n    if (alg === 'TPM_ALG_SHA256') {\n        return COSEALG.ES256;\n    }\n    else if (alg === 'TPM_ALG_SHA384') {\n        return COSEALG.ES384;\n    }\n    else if (alg === 'TPM_ALG_SHA512') {\n        return COSEALG.ES512;\n    }\n    throw new Error(`Unexpected TPM attested name alg ${alg}`);\n}\n", "// deno-lint-ignore-file no-dupe-keys\n/**\n * A whole lotta domain knowledge is captured here, with hazy connections to source\n * documents. Good places to start searching for more info on these values are the\n * following Trusted Computing Group TPM Library docs linked in the WebAuthn API:\n *\n * - https://www.trustedcomputinggroup.org/wp-content/uploads/TPM-Rev-2.0-Part-1-Architecture-01.38.pdf\n * - https://www.trustedcomputinggroup.org/wp-content/uploads/TPM-Rev-2.0-Part-2-Structures-01.38.pdf\n * - https://www.trustedcomputinggroup.org/wp-content/uploads/TPM-Rev-2.0-Part-3-Commands-01.38.pdf\n */\n/**\n * 6.9 TPM_ST (Structure Tags)\n */\nexport const TPM_ST = {\n    0x00c4: 'TPM_ST_RSP_COMMAND',\n    0x8000: 'TPM_ST_NULL',\n    0x8001: 'TPM_ST_NO_SESSIONS',\n    0x8002: 'TPM_ST_SESSIONS',\n    0x8014: 'TPM_ST_ATTEST_NV',\n    0x8015: 'TPM_ST_ATTEST_COMMAND_AUDIT',\n    0x8016: 'TPM_ST_ATTEST_SESSION_AUDIT',\n    0x8017: 'TPM_ST_ATTEST_CERTIFY',\n    0x8018: 'TPM_ST_ATTEST_QUOTE',\n    0x8019: 'TPM_ST_ATTEST_TIME',\n    0x801a: 'TPM_ST_ATTEST_CREATION',\n    0x8021: 'TPM_ST_CREATION',\n    0x8022: 'TPM_ST_VERIFIED',\n    0x8023: 'TPM_ST_AUTH_SECRET',\n    0x8024: 'TPM_ST_HASHCHECK',\n    0x8025: 'TPM_ST_AUTH_SIGNED',\n    0x8029: 'TPM_ST_FU_MANIFEST',\n};\n/**\n * 6.3 TPM_ALG_ID\n */\nexport const TPM_ALG = {\n    0x0000: 'TPM_ALG_ERROR',\n    0x0001: 'TPM_ALG_RSA',\n    0x0004: 'TPM_ALG_SHA',\n    // @ts-ignore 2300\n    0x0004: 'TPM_ALG_SHA1',\n    0x0005: 'TPM_ALG_HMAC',\n    0x0006: 'TPM_ALG_AES',\n    0x0007: 'TPM_ALG_MGF1',\n    0x0008: 'TPM_ALG_KEYEDHASH',\n    0x000a: 'TPM_ALG_XOR',\n    0x000b: 'TPM_ALG_SHA256',\n    0x000c: 'TPM_ALG_SHA384',\n    0x000d: 'TPM_ALG_SHA512',\n    0x0010: 'TPM_ALG_NULL',\n    0x0012: 'TPM_ALG_SM3_256',\n    0x0013: 'TPM_ALG_SM4',\n    0x0014: 'TPM_ALG_RSASSA',\n    0x0015: 'TPM_ALG_RSAES',\n    0x0016: 'TPM_ALG_RSAPSS',\n    0x0017: 'TPM_ALG_OAEP',\n    0x0018: 'TPM_ALG_ECDSA',\n    0x0019: 'TPM_ALG_ECDH',\n    0x001a: 'TPM_ALG_ECDAA',\n    0x001b: 'TPM_ALG_SM2',\n    0x001c: 'TPM_ALG_ECSCHNORR',\n    0x001d: 'TPM_ALG_ECMQV',\n    0x0020: 'TPM_ALG_KDF1_SP800_56A',\n    0x0021: 'TPM_ALG_KDF2',\n    0x0022: 'TPM_ALG_KDF1_SP800_108',\n    0x0023: 'TPM_ALG_ECC',\n    0x0025: 'TPM_ALG_SYMCIPHER',\n    0x0026: 'TPM_ALG_CAMELLIA',\n    0x0040: 'TPM_ALG_CTR',\n    0x0041: 'TPM_ALG_OFB',\n    0x0042: 'TPM_ALG_CBC',\n    0x0043: 'TPM_ALG_CFB',\n    0x0044: 'TPM_ALG_ECB',\n};\n/**\n * 6.4 TPM_ECC_CURVE\n */\nexport const TPM_ECC_CURVE = {\n    0x0000: 'TPM_ECC_NONE',\n    0x0001: 'TPM_ECC_NIST_P192',\n    0x0002: 'TPM_ECC_NIST_P224',\n    0x0003: 'TPM_ECC_NIST_P256',\n    0x0004: 'TPM_ECC_NIST_P384',\n    0x0005: 'TPM_ECC_NIST_P521',\n    0x0010: 'TPM_ECC_BN_P256',\n    0x0011: 'TPM_ECC_BN_P638',\n    0x0020: 'TPM_ECC_SM2_P256',\n};\n/**\n * Sourced from https://trustedcomputinggroup.org/resource/vendor-id-registry/\n *\n * Latest version:\n * https://trustedcomputinggroup.org/wp-content/uploads/TCG-TPM-Vendor-ID-Registry-Version-1.02-Revision-1.00.pdf\n */\nexport const TPM_MANUFACTURERS = {\n    'id:414D4400': {\n        name: 'AMD',\n        id: 'AMD',\n    },\n    'id:41544D4C': {\n        name: 'Atmel',\n        id: 'ATML',\n    },\n    'id:4252434D': {\n        name: 'Broadcom',\n        id: 'BRCM',\n    },\n    'id:49424d00': {\n        name: 'IBM',\n        id: 'IBM',\n    },\n    'id:49465800': {\n        name: 'Infineon',\n        id: 'IFX',\n    },\n    'id:494E5443': {\n        name: 'Intel',\n        id: 'INTC',\n    },\n    'id:4C454E00': {\n        name: 'Lenovo',\n        id: 'LEN',\n    },\n    'id:4E534D20': {\n        name: 'National Semiconductor',\n        id: 'NSM',\n    },\n    'id:4E545A00': {\n        name: 'Nationz',\n        id: 'NTZ',\n    },\n    'id:4E544300': {\n        name: 'Nuvoton Technology',\n        id: 'NTC',\n    },\n    'id:51434F4D': {\n        name: 'Qualcomm',\n        id: 'QCOM',\n    },\n    'id:534D5343': {\n        name: 'SMSC',\n        id: 'SMSC',\n    },\n    'id:53544D20': {\n        name: 'ST Microelectronics',\n        id: 'STM',\n    },\n    'id:534D534E': {\n        name: 'Samsung',\n        id: 'SMSN',\n    },\n    'id:534E5300': {\n        name: 'Sinosun',\n        id: 'SNS',\n    },\n    'id:54584E00': {\n        name: 'Texas Instruments',\n        id: 'TXN',\n    },\n    'id:57454300': {\n        name: 'Winbond',\n        id: 'WEC',\n    },\n    'id:524F4343': {\n        name: 'Fuzhouk Rockchip',\n        id: 'ROCC',\n    },\n    'id:FFFFF1D0': {\n        name: 'FIDO Alliance',\n        id: 'FIDO',\n    },\n};\n/**\n * Match TPM public area curve ID's to `crv` numbers used in COSE public keys\n */\nexport const TPM_ECC_CURVE_COSE_CRV_MAP = {\n    TPM_ECC_NIST_P256: 1,\n    TPM_ECC_NIST_P384: 2,\n    TPM_ECC_NIST_P521: 3,\n    TPM_ECC_BN_P256: 1,\n    TPM_ECC_SM2_P256: 1, // p256\n};\n", "import { TPM_ALG, TPM_ST } from './constants.js';\nimport { isoUint8Array } from '../../../helpers/iso/index.js';\n/**\n * Cut up a TPM attestation's certInfo into intelligible chunks\n */\nexport function parseCertInfo(certInfo) {\n    let pointer = 0;\n    const dataView = isoUint8Array.toDataView(certInfo);\n    // Get a magic constant\n    const magic = dataView.getUint32(pointer);\n    pointer += 4;\n    // Determine the algorithm used for attestation\n    const typeBuffer = dataView.getUint16(pointer);\n    pointer += 2;\n    const type = TPM_ST[typeBuffer];\n    // The name of a parent entity, can be ignored\n    const qualifiedSignerLength = dataView.getUint16(pointer);\n    pointer += 2;\n    const qualifiedSigner = certInfo.slice(pointer, pointer += qualifiedSignerLength);\n    // Get the expected hash of `attsToBeSigned`\n    const extraDataLength = dataView.getUint16(pointer);\n    pointer += 2;\n    const extraData = certInfo.slice(pointer, pointer += extraDataLength);\n    // Information about the TPM device's internal clock, can be ignored\n    const clock = certInfo.slice(pointer, pointer += 8);\n    const resetCount = dataView.getUint32(pointer);\n    pointer += 4;\n    const restartCount = dataView.getUint32(pointer);\n    pointer += 4;\n    const safe = !!certInfo.slice(pointer, pointer += 1);\n    const clockInfo = { clock, resetCount, restartCount, safe };\n    // TPM device firmware version\n    const firmwareVersion = certInfo.slice(pointer, pointer += 8);\n    // Attested Name\n    const attestedNameLength = dataView.getUint16(pointer);\n    pointer += 2;\n    const attestedName = certInfo.slice(pointer, pointer += attestedNameLength);\n    const attestedNameDataView = isoUint8Array.toDataView(attestedName);\n    // Attested qualified name, can be ignored\n    const qualifiedNameLength = dataView.getUint16(pointer);\n    pointer += 2;\n    const qualifiedName = certInfo.slice(pointer, pointer += qualifiedNameLength);\n    const attested = {\n        nameAlg: TPM_ALG[attestedNameDataView.getUint16(0)],\n        nameAlgBuffer: attestedName.slice(0, 2),\n        name: attestedName,\n        qualifiedName,\n    };\n    return {\n        magic,\n        type,\n        qualifiedSigner,\n        extraData,\n        clockInfo,\n        firmwareVersion,\n        attested,\n    };\n}\n", "import { TPM_ALG, TPM_ECC_CURVE } from './constants.js';\nimport { isoUint8Array } from '../../../helpers/iso/index.js';\n/**\n * Break apart a TPM attestation's pubArea buffer\n *\n * See 12.2.4 TPMT_PUBLIC here:\n * https://trustedcomputinggroup.org/wp-content/uploads/TPM-Rev-2.0-Part-2-Structures-00.96-130315.pdf\n */\nexport function parsePubArea(pubArea) {\n    let pointer = 0;\n    const dataView = isoUint8Array.toDataView(pubArea);\n    const type = TPM_ALG[dataView.getUint16(pointer)];\n    pointer += 2;\n    const nameAlg = TPM_ALG[dataView.getUint16(pointer)];\n    pointer += 2;\n    // Get some authenticator attributes(?)\n    // const objectAttributesInt = pubArea.slice(pointer, (pointer += 4)).readUInt32BE(0);\n    const objectAttributesInt = dataView.getUint32(pointer);\n    pointer += 4;\n    const objectAttributes = {\n        fixedTPM: !!(objectAttributesInt & 1),\n        stClear: !!(objectAttributesInt & 2),\n        fixedParent: !!(objectAttributesInt & 8),\n        sensitiveDataOrigin: !!(objectAttributesInt & 16),\n        userWithAuth: !!(objectAttributesInt & 32),\n        adminWithPolicy: !!(objectAttributesInt & 64),\n        noDA: !!(objectAttributesInt & 512),\n        encryptedDuplication: !!(objectAttributesInt & 1024),\n        restricted: !!(objectAttributesInt & 32768),\n        decrypt: !!(objectAttributesInt & 65536),\n        signOrEncrypt: !!(objectAttributesInt & 131072),\n    };\n    // Slice out the authPolicy of dynamic length\n    const authPolicyLength = dataView.getUint16(pointer);\n    pointer += 2;\n    const authPolicy = pubArea.slice(pointer, pointer += authPolicyLength);\n    // Extract additional curve params according to type\n    const parameters = {};\n    let unique = Uint8Array.from([]);\n    if (type === 'TPM_ALG_RSA') {\n        const symmetric = TPM_ALG[dataView.getUint16(pointer)];\n        pointer += 2;\n        const scheme = TPM_ALG[dataView.getUint16(pointer)];\n        pointer += 2;\n        const keyBits = dataView.getUint16(pointer);\n        pointer += 2;\n        const exponent = dataView.getUint32(pointer);\n        pointer += 4;\n        parameters.rsa = { symmetric, scheme, keyBits, exponent };\n        /**\n         * See 11.2.4.5 TPM2B_PUBLIC_KEY_RSA here:\n         * https://trustedcomputinggroup.org/wp-content/uploads/TPM-Rev-2.0-Part-2-Structures-00.96-130315.pdf\n         */\n        // const uniqueLength = pubArea.slice(pointer, (pointer += 2)).readUInt16BE(0);\n        const uniqueLength = dataView.getUint16(pointer);\n        pointer += 2;\n        unique = pubArea.slice(pointer, pointer += uniqueLength);\n    }\n    else if (type === 'TPM_ALG_ECC') {\n        const symmetric = TPM_ALG[dataView.getUint16(pointer)];\n        pointer += 2;\n        const scheme = TPM_ALG[dataView.getUint16(pointer)];\n        pointer += 2;\n        const curveID = TPM_ECC_CURVE[dataView.getUint16(pointer)];\n        pointer += 2;\n        const kdf = TPM_ALG[dataView.getUint16(pointer)];\n        pointer += 2;\n        parameters.ecc = { symmetric, scheme, curveID, kdf };\n        /**\n         * See 11.2.5.1 TPM2B_ECC_PARAMETER here:\n         * https://trustedcomputinggroup.org/wp-content/uploads/TPM-Rev-2.0-Part-2-Structures-00.96-130315.pdf\n         */\n        // Retrieve X\n        const uniqueXLength = dataView.getUint16(pointer);\n        pointer += 2;\n        const uniqueX = pubArea.slice(pointer, pointer += uniqueXLength);\n        // Retrieve Y\n        const uniqueYLength = dataView.getUint16(pointer);\n        pointer += 2;\n        const uniqueY = pubArea.slice(pointer, pointer += uniqueYLength);\n        unique = isoUint8Array.concat([uniqueX, uniqueY]);\n    }\n    else {\n        throw new Error(`Unexpected type \"${type}\" (TPM)`);\n    }\n    return {\n        type,\n        nameAlg,\n        objectAttributes,\n        authPolicy,\n        parameters,\n        unique,\n    };\n}\n", "import { AsnParser, Certificate, id_ce_keyDescription, KeyDescription } from '../../deps.js';\nimport { convertCertBufferToPEM } from '../../helpers/convertCertBufferToPEM.js';\nimport { validateCertificatePath } from '../../helpers/validateCertificatePath.js';\nimport { verifySignature } from '../../helpers/verifySignature.js';\nimport { convertCOSEtoPKCS } from '../../helpers/convertCOSEtoPKCS.js';\nimport { isCOSEAlg } from '../../helpers/cose.js';\nimport { isoUint8Array } from '../../helpers/iso/index.js';\nimport { MetadataService } from '../../services/metadataService.js';\nimport { verifyAttestationWithMetadata } from '../../metadata/verifyAttestationWithMetadata.js';\n/**\n * Verify an attestation response with fmt 'android-key'\n */\nexport async function verifyAttestationAndroidKey(options) {\n    const { authData, clientDataHash, attStmt, credentialPublicKey, aaguid, rootCertificates, } = options;\n    const x5c = attStmt.get('x5c');\n    const sig = attStmt.get('sig');\n    const alg = attStmt.get('alg');\n    if (!x5c) {\n        throw new Error('No attestation certificate provided in attestation statement (AndroidKey)');\n    }\n    if (!sig) {\n        throw new Error('No attestation signature provided in attestation statement (AndroidKey)');\n    }\n    if (!alg) {\n        throw new Error(`Attestation statement did not contain alg (AndroidKey)`);\n    }\n    if (!isCOSEAlg(alg)) {\n        throw new Error(`Attestation statement contained invalid alg ${alg} (AndroidKey)`);\n    }\n    // Check that credentialPublicKey matches the public key in the attestation certificate\n    // Find the public cert in the certificate as PKCS\n    const parsedCert = AsnParser.parse(x5c[0], Certificate);\n    const parsedCertPubKey = new Uint8Array(parsedCert.tbsCertificate.subjectPublicKeyInfo.subjectPublicKey);\n    // Convert the credentialPublicKey to PKCS\n    const credPubKeyPKCS = convertCOSEtoPKCS(credentialPublicKey);\n    if (!isoUint8Array.areEqual(credPubKeyPKCS, parsedCertPubKey)) {\n        throw new Error('Credential public key does not equal leaf cert public key (AndroidKey)');\n    }\n    // Find Android KeyStore Extension in certificate extensions\n    const extKeyStore = parsedCert.tbsCertificate.extensions?.find((ext) => ext.extnID === id_ce_keyDescription);\n    if (!extKeyStore) {\n        throw new Error('Certificate did not contain extKeyStore (AndroidKey)');\n    }\n    const parsedExtKeyStore = AsnParser.parse(extKeyStore.extnValue, KeyDescription);\n    // Verify extKeyStore values\n    const { attestationChallenge, teeEnforced, softwareEnforced } = parsedExtKeyStore;\n    if (!isoUint8Array.areEqual(new Uint8Array(attestationChallenge.buffer), clientDataHash)) {\n        throw new Error('Attestation challenge was not equal to client data hash (AndroidKey)');\n    }\n    // Ensure that the key is strictly bound to the caller app identifier (shouldn't contain the\n    // [600] tag)\n    if (teeEnforced.allApplications !== undefined) {\n        throw new Error('teeEnforced contained \"allApplications [600]\" tag (AndroidKey)');\n    }\n    if (softwareEnforced.allApplications !== undefined) {\n        throw new Error('teeEnforced contained \"allApplications [600]\" tag (AndroidKey)');\n    }\n    const statement = await MetadataService.getStatement(aaguid);\n    if (statement) {\n        try {\n            await verifyAttestationWithMetadata({\n                statement,\n                credentialPublicKey,\n                x5c,\n                attestationStatementAlg: alg,\n            });\n        }\n        catch (err) {\n            const _err = err;\n            throw new Error(`${_err.message} (AndroidKey)`);\n        }\n    }\n    else {\n        try {\n            // Try validating the certificate path using the root certificates set via SettingsService\n            await validateCertificatePath(x5c.map(convertCertBufferToPEM), rootCertificates);\n        }\n        catch (err) {\n            const _err = err;\n            throw new Error(`${_err.message} (AndroidKey)`);\n        }\n    }\n    const signatureBase = isoUint8Array.concat([authData, clientDataHash]);\n    return verifySignature({\n        signature: sig,\n        data: signatureBase,\n        x509Certificate: x5c[0],\n        hashAlgorithm: alg,\n    });\n}\n", "import { AsnParser, Certificate } from '../../deps.js';\nimport { validateCertificatePath } from '../../helpers/validateCertificatePath.js';\nimport { convertCertBufferToPEM } from '../../helpers/convertCertBufferToPEM.js';\nimport { toHash } from '../../helpers/toHash.js';\nimport { convertCOSEtoPKCS } from '../../helpers/convertCOSEtoPKCS.js';\nimport { isoUint8Array } from '../../helpers/iso/index.js';\nexport async function verifyAttestationApple(options) {\n    const { attStmt, authData, clientDataHash, credentialPublicKey, rootCertificates, } = options;\n    const x5c = attStmt.get('x5c');\n    if (!x5c) {\n        throw new Error('No attestation certificate provided in attestation statement (Apple)');\n    }\n    /**\n     * Verify certificate path\n     */\n    try {\n        await validateCertificatePath(x5c.map(convertCertBufferToPEM), rootCertificates);\n    }\n    catch (err) {\n        const _err = err;\n        throw new Error(`${_err.message} (Apple)`);\n    }\n    /**\n     * Compare nonce in certificate extension to computed nonce\n     */\n    const parsedCredCert = AsnParser.parse(x5c[0], Certificate);\n    const { extensions, subjectPublicKeyInfo } = parsedCredCert.tbsCertificate;\n    if (!extensions) {\n        throw new Error('credCert missing extensions (Apple)');\n    }\n    const extCertNonce = extensions.find((ext) => ext.extnID === '1.2.840.113635.100.8.2');\n    if (!extCertNonce) {\n        throw new Error('credCert missing \"1.2.840.113635.100.8.2\" extension (Apple)');\n    }\n    const nonceToHash = isoUint8Array.concat([authData, clientDataHash]);\n    const nonce = await toHash(nonceToHash);\n    /**\n     * Ignore the first six ASN.1 structure bytes that define the nonce as an OCTET STRING. Should\n     * trim off <Buffer 30 24 a1 22 04 20>\n     *\n     * TODO: Try and get @peculiar (GitHub) to add a schema for \"1.2.840.113635.100.8.2\" when we\n     * find out where it's defined (doesn't seem to be publicly documented at the moment...)\n     */\n    const extNonce = new Uint8Array(extCertNonce.extnValue.buffer).slice(6);\n    if (!isoUint8Array.areEqual(nonce, extNonce)) {\n        throw new Error(`credCert nonce was not expected value (Apple)`);\n    }\n    /**\n     * Verify credential public key matches the Subject Public Key of credCert\n     */\n    const credPubKeyPKCS = convertCOSEtoPKCS(credentialPublicKey);\n    const credCertSubjectPublicKey = new Uint8Array(subjectPublicKeyInfo.subjectPublicKey);\n    if (!isoUint8Array.areEqual(credPubKeyPKCS, credCertSubjectPublicKey)) {\n        throw new Error('Credential public key does not equal credCert public key (Apple)');\n    }\n    return true;\n}\n", "import { isoBase64URL, isoUint8Array } from '../helpers/iso/index.js';\nimport { generateChallenge } from '../helpers/generateChallenge.js';\n/**\n * Prepare a value to pass into navigator.credentials.get(...) for authenticator authentication\n *\n * **Options:**\n *\n * @param rpID - Valid domain name (after `https://`)\n * @param allowCredentials **(Optional)** - Authenticators previously registered by the user, if any. If undefined the client will ask the user which credential they want to use\n * @param challenge **(Optional)** - Random value the authenticator needs to sign and pass back user for authentication. Defaults to generating a random value\n * @param timeout **(Optional)** - How long (in ms) the user can take to complete authentication. Defaults to `60000`\n * @param userVerification **(Optional)** - Set to `'discouraged'` when asserting as part of a 2FA flow, otherwise set to `'preferred'` or `'required'` as desired. Defaults to `\"preferred\"`\n * @param extensions **(Optional)** - Additional plugins the authenticator or browser should use during authentication\n */\nexport async function generateAuthenticationOptions(options) {\n    const { allowCredentials, challenge = await generateChallenge(), timeout = 60000, userVerification = 'preferred', extensions, rpID, } = options;\n    /**\n     * Preserve ability to specify `string` values for challenges\n     */\n    let _challenge = challenge;\n    if (typeof _challenge === 'string') {\n        _challenge = isoUint8Array.fromUTF8String(_challenge);\n    }\n    return {\n        rpId: rpID,\n        challenge: isoBase64URL.fromBuffer(_challenge),\n        allowCredentials: allowCredentials?.map((cred) => {\n            if (!isoBase64URL.isBase64URL(cred.id)) {\n                throw new Error(`excludeCredential id \"${cred.id}\" is not a valid base64url string`);\n            }\n            return {\n                ...cred,\n                id: isoBase64URL.trimPadding(cred.id),\n                type: 'public-key',\n            };\n        }),\n        timeout,\n        userVerification,\n        extensions,\n    };\n}\n", "import { decodeClientDataJSON } from '../helpers/decodeClientDataJSON.js';\nimport { toHash } from '../helpers/toHash.js';\nimport { verifySignature } from '../helpers/verifySignature.js';\nimport { parseAuthenticatorData } from '../helpers/parseAuthenticatorData.js';\nimport { parseBackupFlags } from '../helpers/parseBackupFlags.js';\nimport { matchExpectedRPID } from '../helpers/matchExpectedRPID.js';\nimport { isoBase64URL, isoUint8Array } from '../helpers/iso/index.js';\n/**\n * Verify that the user has legitimately completed the authentication process\n *\n * **Options:**\n *\n * @param response - Response returned by **@simplewebauthn/browser**'s `startAssertion()`\n * @param expectedChallenge - The base64url-encoded `options.challenge` returned by `generateAuthenticationOptions()`\n * @param expectedOrigin - Website URL (or array of URLs) that the registration should have occurred on\n * @param expectedRPID - RP ID (or array of IDs) that was specified in the registration options\n * @param authenticator - An internal {@link AuthenticatorDevice} matching the credential's ID\n * @param expectedType **(Optional)** - The response type expected ('webauthn.get')\n * @param requireUserVerification **(Optional)** - Enforce user verification by the authenticator (via PIN, fingerprint, etc...) Defaults to `true`\n * @param advancedFIDOConfig **(Optional)** - Options for satisfying more stringent FIDO RP feature requirements\n * @param advancedFIDOConfig.userVerification **(Optional)** - Enable alternative rules for evaluating the User Presence and User Verified flags in authenticator data: UV (and UP) flags are optional unless this value is `\"required\"`\n */\nexport async function verifyAuthenticationResponse(options) {\n    const { response, expectedChallenge, expectedOrigin, expectedRPID, expectedType, authenticator, requireUserVerification = true, advancedFIDOConfig, } = options;\n    const { id, rawId, type: credentialType, response: assertionResponse } = response;\n    // Ensure credential specified an ID\n    if (!id) {\n        throw new Error('Missing credential ID');\n    }\n    // Ensure ID is base64url-encoded\n    if (id !== rawId) {\n        throw new Error('Credential ID was not base64url-encoded');\n    }\n    // Make sure credential type is public-key\n    if (credentialType !== 'public-key') {\n        throw new Error(`Unexpected credential type ${credentialType}, expected \"public-key\"`);\n    }\n    if (!response) {\n        throw new Error('Credential missing response');\n    }\n    if (typeof assertionResponse?.clientDataJSON !== 'string') {\n        throw new Error('Credential response clientDataJSON was not a string');\n    }\n    const clientDataJSON = decodeClientDataJSON(assertionResponse.clientDataJSON);\n    const { type, origin, challenge, tokenBinding } = clientDataJSON;\n    // Make sure we're handling an authentication\n    if (Array.isArray(expectedType)) {\n        if (!expectedType.includes(type)) {\n            const joinedExpectedType = expectedType.join(', ');\n            throw new Error(`Unexpected authentication response type \"${type}\", expected one of: ${joinedExpectedType}`);\n        }\n    }\n    else if (expectedType) {\n        if (type !== expectedType) {\n            throw new Error(`Unexpected authentication response type \"${type}\", expected \"${expectedType}\"`);\n        }\n    }\n    else if (type !== 'webauthn.get') {\n        throw new Error(`Unexpected authentication response type: ${type}`);\n    }\n    // Ensure the device provided the challenge we gave it\n    if (typeof expectedChallenge === 'function') {\n        if (!(await expectedChallenge(challenge))) {\n            throw new Error(`Custom challenge verifier returned false for registration response challenge \"${challenge}\"`);\n        }\n    }\n    else if (challenge !== expectedChallenge) {\n        throw new Error(`Unexpected authentication response challenge \"${challenge}\", expected \"${expectedChallenge}\"`);\n    }\n    // Check that the origin is our site\n    if (Array.isArray(expectedOrigin)) {\n        if (!expectedOrigin.includes(origin)) {\n            const joinedExpectedOrigin = expectedOrigin.join(', ');\n            throw new Error(`Unexpected authentication response origin \"${origin}\", expected one of: ${joinedExpectedOrigin}`);\n        }\n    }\n    else {\n        if (origin !== expectedOrigin) {\n            throw new Error(`Unexpected authentication response origin \"${origin}\", expected \"${expectedOrigin}\"`);\n        }\n    }\n    if (!isoBase64URL.isBase64URL(assertionResponse.authenticatorData)) {\n        throw new Error('Credential response authenticatorData was not a base64url string');\n    }\n    if (!isoBase64URL.isBase64URL(assertionResponse.signature)) {\n        throw new Error('Credential response signature was not a base64url string');\n    }\n    if (assertionResponse.userHandle &&\n        typeof assertionResponse.userHandle !== 'string') {\n        throw new Error('Credential response userHandle was not a string');\n    }\n    if (tokenBinding) {\n        if (typeof tokenBinding !== 'object') {\n            throw new Error('ClientDataJSON tokenBinding was not an object');\n        }\n        if (['present', 'supported', 'notSupported'].indexOf(tokenBinding.status) < 0) {\n            throw new Error(`Unexpected tokenBinding status ${tokenBinding.status}`);\n        }\n    }\n    const authDataBuffer = isoBase64URL.toBuffer(assertionResponse.authenticatorData);\n    const parsedAuthData = parseAuthenticatorData(authDataBuffer);\n    const { rpIdHash, flags, counter, extensionsData } = parsedAuthData;\n    // Make sure the response's RP ID is ours\n    let expectedRPIDs = [];\n    if (typeof expectedRPID === 'string') {\n        expectedRPIDs = [expectedRPID];\n    }\n    else {\n        expectedRPIDs = expectedRPID;\n    }\n    const matchedRPID = await matchExpectedRPID(rpIdHash, expectedRPIDs);\n    if (advancedFIDOConfig !== undefined) {\n        const { userVerification: fidoUserVerification } = advancedFIDOConfig;\n        /**\n         * Use FIDO Conformance-defined rules for verifying UP and UV flags\n         */\n        if (fidoUserVerification === 'required') {\n            // Require `flags.uv` be true (implies `flags.up` is true)\n            if (!flags.uv) {\n                throw new Error('User verification required, but user could not be verified');\n            }\n        }\n        else if (fidoUserVerification === 'preferred' ||\n            fidoUserVerification === 'discouraged') {\n            // Ignore `flags.uv`\n        }\n    }\n    else {\n        /**\n         * Use WebAuthn spec-defined rules for verifying UP and UV flags\n         */\n        // WebAuthn only requires the user presence flag be true\n        if (!flags.up) {\n            throw new Error('User not present during authentication');\n        }\n        // Enforce user verification if required\n        if (requireUserVerification && !flags.uv) {\n            throw new Error('User verification required, but user could not be verified');\n        }\n    }\n    const clientDataHash = await toHash(isoBase64URL.toBuffer(assertionResponse.clientDataJSON));\n    const signatureBase = isoUint8Array.concat([authDataBuffer, clientDataHash]);\n    const signature = isoBase64URL.toBuffer(assertionResponse.signature);\n    if ((counter > 0 || authenticator.counter > 0) &&\n        counter <= authenticator.counter) {\n        // Error out when the counter in the DB is greater than or equal to the counter in the\n        // dataStruct. It's related to how the authenticator maintains the number of times its been\n        // used for this client. If this happens, then someone's somehow increased the counter\n        // on the device without going through this site\n        throw new Error(`Response counter value ${counter} was lower than expected ${authenticator.counter}`);\n    }\n    const { credentialDeviceType, credentialBackedUp } = parseBackupFlags(flags);\n    const toReturn = {\n        verified: await verifySignature({\n            signature,\n            data: signatureBase,\n            credentialPublicKey: authenticator.credentialPublicKey,\n        }),\n        authenticationInfo: {\n            newCounter: counter,\n            credentialID: authenticator.credentialID,\n            userVerified: flags.uv,\n            credentialDeviceType,\n            credentialBackedUp,\n            authenticatorExtensionResults: extensionsData,\n            origin: clientDataJSON.origin,\n            rpID: matchedRPID,\n        },\n    };\n    return toReturn;\n}\n", "// AuthForge - OAuth Routes (Google, GitHub)\r\n\r\nimport { Hono } from 'hono';\r\nimport { Env, User, OAuthAccount } from '../types';\r\nimport { \r\n  generateId, \r\n  generateToken,\r\n  sha256,\r\n  createSession,\r\n  logAudit \r\n} from '../lib/utils';\r\nimport { rateLimit } from '../lib/middleware';\r\n\r\nconst oauth = new Hono<{ Bindings: Env }>();\r\n\r\n// OAuth state management\r\ninterface OAuthState {\r\n  provider: string;\r\n  returnUrl?: string;\r\n  linkToUser?: string; // User ID if linking account\r\n  nonce: string;\r\n}\r\n\r\n// Generate OAuth authorization URL\r\noauth.get('/:provider/authorize', rateLimit(20, 60), async (c) => {\r\n  const provider = c.req.param('provider');\r\n  const returnUrl = c.req.query('returnUrl') || '/';\r\n  const linkToUser = c.req.query('link'); // For account linking\r\n\r\n  if (!['google', 'github'].includes(provider)) {\r\n    return c.json({ error: 'Unsupported provider' }, 400);\r\n  }\r\n\r\n  // Generate state token\r\n  const state: OAuthState = {\r\n    provider,\r\n    returnUrl,\r\n    linkToUser,\r\n    nonce: generateToken()\r\n  };\r\n  \r\n  const stateToken = generateToken();\r\n  const stateHash = await sha256(stateToken);\r\n  \r\n  await c.env.SESSIONS.put(`oauth_state:${stateHash}`, JSON.stringify(state), {\r\n    expirationTtl: 600 // 10 minutes\r\n  });\r\n\r\n  let authUrl: string;\r\n\r\n  if (provider === 'google') {\r\n    if (!c.env.GOOGLE_CLIENT_ID) {\r\n      return c.json({ error: 'Google OAuth not configured' }, 500);\r\n    }\r\n    \r\n    const params = new URLSearchParams({\r\n      client_id: c.env.GOOGLE_CLIENT_ID,\r\n      redirect_uri: `${c.env.WEBAUTHN_ORIGIN || 'http://localhost:8787'}/oauth/google/callback`,\r\n      response_type: 'code',\r\n      scope: 'openid email profile',\r\n      state: stateToken,\r\n      access_type: 'offline',\r\n      prompt: 'select_account'\r\n    });\r\n    authUrl = `https://accounts.google.com/o/oauth2/v2/auth?${params}`;\r\n\r\n  } else if (provider === 'github') {\r\n    if (!c.env.GITHUB_CLIENT_ID) {\r\n      return c.json({ error: 'GitHub OAuth not configured' }, 500);\r\n    }\r\n    \r\n    const params = new URLSearchParams({\r\n      client_id: c.env.GITHUB_CLIENT_ID,\r\n      redirect_uri: `${c.env.WEBAUTHN_ORIGIN || 'http://localhost:8787'}/oauth/github/callback`,\r\n      scope: 'user:email',\r\n      state: stateToken\r\n    });\r\n    authUrl = `https://github.com/login/oauth/authorize?${params}`;\r\n  } else {\r\n    return c.json({ error: 'Provider not supported' }, 400);\r\n  }\r\n\r\n  return c.json({ success: true, authUrl });\r\n});\r\n\r\n// Google OAuth callback\r\noauth.get('/google/callback', async (c) => {\r\n  const code = c.req.query('code');\r\n  const stateToken = c.req.query('state');\r\n  const error = c.req.query('error');\r\n\r\n  if (error) {\r\n    return c.redirect(`/login?error=oauth_denied`);\r\n  }\r\n\r\n  if (!code || !stateToken) {\r\n    return c.redirect(`/login?error=missing_params`);\r\n  }\r\n\r\n  // Verify state\r\n  const stateHash = await sha256(stateToken);\r\n  const stateJson = await c.env.SESSIONS.get(`oauth_state:${stateHash}`);\r\n  \r\n  if (!stateJson) {\r\n    return c.redirect(`/login?error=invalid_state`);\r\n  }\r\n\r\n  const state: OAuthState = JSON.parse(stateJson);\r\n  await c.env.SESSIONS.delete(`oauth_state:${stateHash}`);\r\n\r\n  if (state.provider !== 'google') {\r\n    return c.redirect(`/login?error=provider_mismatch`);\r\n  }\r\n\r\n  // Exchange code for tokens\r\n  const tokenResponse = await fetch('https://oauth2.googleapis.com/token', {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\r\n    body: new URLSearchParams({\r\n      client_id: c.env.GOOGLE_CLIENT_ID!,\r\n      client_secret: c.env.GOOGLE_CLIENT_SECRET!,\r\n      code,\r\n      grant_type: 'authorization_code',\r\n      redirect_uri: `${c.env.WEBAUTHN_ORIGIN}/oauth/google/callback`\r\n    })\r\n  });\r\n\r\n  if (!tokenResponse.ok) {\r\n    console.error('Google token error:', await tokenResponse.text());\r\n    return c.redirect(`/login?error=token_exchange_failed`);\r\n  }\r\n\r\n  const tokens = await tokenResponse.json<{\r\n    access_token: string;\r\n    id_token: string;\r\n    refresh_token?: string;\r\n    expires_in: number;\r\n  }>();\r\n\r\n  // Get user info\r\n  const userInfoResponse = await fetch('https://www.googleapis.com/oauth2/v2/userinfo', {\r\n    headers: { Authorization: `Bearer ${tokens.access_token}` }\r\n  });\r\n\r\n  if (!userInfoResponse.ok) {\r\n    return c.redirect(`/login?error=userinfo_failed`);\r\n  }\r\n\r\n  const googleUser = await userInfoResponse.json<{\r\n    id: string;\r\n    email: string;\r\n    verified_email: boolean;\r\n    name: string;\r\n    picture: string;\r\n  }>();\r\n\r\n  // Process OAuth login/signup\r\n  return await processOAuthCallback(c, {\r\n    provider: 'google',\r\n    providerId: googleUser.id,\r\n    email: googleUser.email,\r\n    emailVerified: googleUser.verified_email,\r\n    name: googleUser.name,\r\n    avatarUrl: googleUser.picture,\r\n    accessToken: tokens.access_token,\r\n    refreshToken: tokens.refresh_token,\r\n    expiresAt: new Date(Date.now() + tokens.expires_in * 1000).toISOString(),\r\n    state\r\n  });\r\n});\r\n\r\n// GitHub OAuth callback\r\noauth.get('/github/callback', async (c) => {\r\n  const code = c.req.query('code');\r\n  const stateToken = c.req.query('state');\r\n  const error = c.req.query('error');\r\n\r\n  if (error) {\r\n    return c.redirect(`/login?error=oauth_denied`);\r\n  }\r\n\r\n  if (!code || !stateToken) {\r\n    return c.redirect(`/login?error=missing_params`);\r\n  }\r\n\r\n  // Verify state\r\n  const stateHash = await sha256(stateToken);\r\n  const stateJson = await c.env.SESSIONS.get(`oauth_state:${stateHash}`);\r\n  \r\n  if (!stateJson) {\r\n    return c.redirect(`/login?error=invalid_state`);\r\n  }\r\n\r\n  const state: OAuthState = JSON.parse(stateJson);\r\n  await c.env.SESSIONS.delete(`oauth_state:${stateHash}`);\r\n\r\n  if (state.provider !== 'github') {\r\n    return c.redirect(`/login?error=provider_mismatch`);\r\n  }\r\n\r\n  // Exchange code for tokens\r\n  const tokenResponse = await fetch('https://github.com/login/oauth/access_token', {\r\n    method: 'POST',\r\n    headers: { \r\n      'Content-Type': 'application/json',\r\n      'Accept': 'application/json'\r\n    },\r\n    body: JSON.stringify({\r\n      client_id: c.env.GITHUB_CLIENT_ID,\r\n      client_secret: c.env.GITHUB_CLIENT_SECRET,\r\n      code\r\n    })\r\n  });\r\n\r\n  if (!tokenResponse.ok) {\r\n    console.error('GitHub token error:', await tokenResponse.text());\r\n    return c.redirect(`/login?error=token_exchange_failed`);\r\n  }\r\n\r\n  const tokens = await tokenResponse.json<{\r\n    access_token: string;\r\n    token_type: string;\r\n    scope: string;\r\n    error?: string;\r\n  }>();\r\n\r\n  if (tokens.error) {\r\n    return c.redirect(`/login?error=${tokens.error}`);\r\n  }\r\n\r\n  // Get user info\r\n  const userResponse = await fetch('https://api.github.com/user', {\r\n    headers: { \r\n      Authorization: `Bearer ${tokens.access_token}`,\r\n      'User-Agent': 'AuthForge'\r\n    }\r\n  });\r\n\r\n  if (!userResponse.ok) {\r\n    return c.redirect(`/login?error=userinfo_failed`);\r\n  }\r\n\r\n  const githubUser = await userResponse.json<{\r\n    id: number;\r\n    login: string;\r\n    name: string;\r\n    avatar_url: string;\r\n    email: string | null;\r\n  }>();\r\n\r\n  // Get email if not public\r\n  let email = githubUser.email;\r\n  if (!email) {\r\n    const emailsResponse = await fetch('https://api.github.com/user/emails', {\r\n      headers: { \r\n        Authorization: `Bearer ${tokens.access_token}`,\r\n        'User-Agent': 'AuthForge'\r\n      }\r\n    });\r\n\r\n    if (emailsResponse.ok) {\r\n      const emails = await emailsResponse.json<Array<{\r\n        email: string;\r\n        primary: boolean;\r\n        verified: boolean;\r\n      }>>();\r\n      \r\n      const primaryEmail = emails.find(e => e.primary && e.verified);\r\n      email = primaryEmail?.email || emails[0]?.email;\r\n    }\r\n  }\r\n\r\n  if (!email) {\r\n    return c.redirect(`/login?error=email_required`);\r\n  }\r\n\r\n  // Process OAuth login/signup\r\n  return await processOAuthCallback(c, {\r\n    provider: 'github',\r\n    providerId: String(githubUser.id),\r\n    email,\r\n    emailVerified: true, // GitHub verifies emails\r\n    name: githubUser.name || githubUser.login,\r\n    avatarUrl: githubUser.avatar_url,\r\n    accessToken: tokens.access_token,\r\n    refreshToken: null,\r\n    expiresAt: null, // GitHub tokens don't expire\r\n    state\r\n  });\r\n});\r\n\r\n// Process OAuth callback - shared logic\r\ninterface OAuthData {\r\n  provider: string;\r\n  providerId: string;\r\n  email: string;\r\n  emailVerified: boolean;\r\n  name: string;\r\n  avatarUrl: string | null;\r\n  accessToken: string;\r\n  refreshToken: string | null | undefined;\r\n  expiresAt: string | null;\r\n  state: OAuthState;\r\n}\r\n\r\nasync function processOAuthCallback(c: any, data: OAuthData) {\r\n  const { provider, providerId, email, emailVerified, name, avatarUrl, accessToken, refreshToken, expiresAt, state } = data;\r\n\r\n  // Check if this OAuth account is already linked\r\n  const existingOAuth = await c.env.DB.prepare(`\r\n    SELECT * FROM oauth_accounts WHERE provider = ? AND provider_user_id = ?\r\n  `).bind(provider, providerId).first<OAuthAccount>();\r\n\r\n  let user: User | null = null;\r\n\r\n  if (existingOAuth) {\r\n    // User has logged in with this provider before\r\n    user = await c.env.DB.prepare('SELECT * FROM users WHERE id = ?')\r\n      .bind(existingOAuth.user_id)\r\n      .first<User>();\r\n\r\n    if (!user || user.status !== 'active') {\r\n      return c.redirect(`/login?error=account_inactive`);\r\n    }\r\n\r\n    // Update OAuth tokens\r\n    await c.env.DB.prepare(`\r\n      UPDATE oauth_accounts \r\n      SET access_token = ?, refresh_token = COALESCE(?, refresh_token), expires_at = ?, updated_at = datetime('now')\r\n      WHERE id = ?\r\n    `).bind(accessToken, refreshToken, expiresAt, existingOAuth.id).run();\r\n\r\n  } else if (state.linkToUser) {\r\n    // Linking to existing account\r\n    user = await c.env.DB.prepare('SELECT * FROM users WHERE id = ?')\r\n      .bind(state.linkToUser)\r\n      .first<User>();\r\n\r\n    if (!user) {\r\n      return c.redirect(`/settings?error=user_not_found`);\r\n    }\r\n\r\n    // Create OAuth link\r\n    await c.env.DB.prepare(`\r\n      INSERT INTO oauth_accounts (id, user_id, provider, provider_user_id, email, access_token, refresh_token, expires_at)\r\n      VALUES (?, ?, ?, ?, ?, ?, ?, ?)\r\n    `).bind(\r\n      generateId(), user.id, provider, providerId, email, accessToken, refreshToken || null, expiresAt\r\n    ).run();\r\n\r\n    await logAudit(c.env.DB, `oauth.linked.${provider}`, user.id, c.req.raw);\r\n\r\n    return c.redirect(`/settings?success=account_linked`);\r\n\r\n  } else {\r\n    // Check if user exists with this email\r\n    user = await c.env.DB.prepare('SELECT * FROM users WHERE email = ?')\r\n      .bind(email.toLowerCase())\r\n      .first<User>();\r\n\r\n    if (user) {\r\n      // Link OAuth to existing user\r\n      await c.env.DB.prepare(`\r\n        INSERT INTO oauth_accounts (id, user_id, provider, provider_user_id, email, access_token, refresh_token, expires_at)\r\n        VALUES (?, ?, ?, ?, ?, ?, ?, ?)\r\n      `).bind(\r\n        generateId(), user.id, provider, providerId, email, accessToken, refreshToken || null, expiresAt\r\n      ).run();\r\n\r\n      // Update user info if empty\r\n      if (!user.name || !user.avatar_url) {\r\n        await c.env.DB.prepare(`\r\n          UPDATE users SET \r\n            name = COALESCE(name, ?), \r\n            avatar_url = COALESCE(avatar_url, ?),\r\n            email_verified = CASE WHEN ? = 1 THEN 1 ELSE email_verified END,\r\n            updated_at = datetime('now')\r\n          WHERE id = ?\r\n        `).bind(name, avatarUrl, emailVerified ? 1 : 0, user.id).run();\r\n      }\r\n\r\n    } else {\r\n      // Create new user\r\n      const userId = generateId();\r\n      await c.env.DB.prepare(`\r\n        INSERT INTO users (id, email, name, avatar_url, email_verified)\r\n        VALUES (?, ?, ?, ?, ?)\r\n      `).bind(userId, email.toLowerCase(), name, avatarUrl, emailVerified ? 1 : 0).run();\r\n\r\n      // Create OAuth link\r\n      await c.env.DB.prepare(`\r\n        INSERT INTO oauth_accounts (id, user_id, provider, provider_user_id, email, access_token, refresh_token, expires_at)\r\n        VALUES (?, ?, ?, ?, ?, ?, ?, ?)\r\n      `).bind(\r\n        generateId(), userId, provider, providerId, email, accessToken, refreshToken || null, expiresAt\r\n      ).run();\r\n\r\n      user = await c.env.DB.prepare('SELECT * FROM users WHERE id = ?')\r\n        .bind(userId)\r\n        .first<User>();\r\n\r\n      await logAudit(c.env.DB, `user.register.oauth.${provider}`, userId, c.req.raw);\r\n    }\r\n  }\r\n\r\n  if (!user) {\r\n    return c.redirect(`/login?error=create_failed`);\r\n  }\r\n\r\n  // Create session\r\n  const { session, token } = await createSession(c.env.DB, c.env.SESSIONS, user, c.req.raw);\r\n\r\n  await logAudit(c.env.DB, `user.login.oauth.${provider}`, user.id, c.req.raw);\r\n\r\n  // Set cookie and redirect\r\n  const returnUrl = state.returnUrl || '/';\r\n  const response = c.redirect(returnUrl);\r\n  response.headers.set('Set-Cookie', `authforge_token=${token}; HttpOnly; Secure; SameSite=Lax; Path=/; Max-Age=${7 * 24 * 60 * 60}`);\r\n  \r\n  return response;\r\n}\r\n\r\n// List linked OAuth accounts (for authenticated user)\r\noauth.get('/accounts', async (c) => {\r\n  const token = c.req.header('Authorization')?.replace('Bearer ', '') || \r\n                c.req.raw.headers.get('cookie')?.match(/authforge_token=([^;]+)/)?.[1];\r\n\r\n  if (!token) {\r\n    return c.json({ error: 'Unauthorized' }, 401);\r\n  }\r\n\r\n  const tokenHash = await sha256(token);\r\n  const sessionData = await c.env.SESSIONS.get(`session:${tokenHash}`);\r\n  \r\n  if (!sessionData) {\r\n    return c.json({ error: 'Session expired' }, 401);\r\n  }\r\n\r\n  const { userId } = JSON.parse(sessionData);\r\n\r\n  const accounts = await c.env.DB.prepare(`\r\n    SELECT id, provider, email, created_at FROM oauth_accounts WHERE user_id = ?\r\n  `).bind(userId).all<OAuthAccount>();\r\n\r\n  return c.json({\r\n    success: true,\r\n    accounts: accounts.results.map(a => ({\r\n      id: a.id,\r\n      provider: a.provider,\r\n      email: a.email,\r\n      createdAt: a.created_at\r\n    }))\r\n  });\r\n});\r\n\r\n// Unlink OAuth account\r\noauth.delete('/accounts/:id', async (c) => {\r\n  const accountId = c.req.param('id');\r\n  const token = c.req.header('Authorization')?.replace('Bearer ', '') || \r\n                c.req.raw.headers.get('cookie')?.match(/authforge_token=([^;]+)/)?.[1];\r\n\r\n  if (!token) {\r\n    return c.json({ error: 'Unauthorized' }, 401);\r\n  }\r\n\r\n  const tokenHash = await sha256(token);\r\n  const sessionData = await c.env.SESSIONS.get(`session:${tokenHash}`);\r\n  \r\n  if (!sessionData) {\r\n    return c.json({ error: 'Session expired' }, 401);\r\n  }\r\n\r\n  const { userId } = JSON.parse(sessionData);\r\n\r\n  // Check user has other auth methods\r\n  const user = await c.env.DB.prepare('SELECT password_hash FROM users WHERE id = ?')\r\n    .bind(userId)\r\n    .first<{ password_hash: string | null }>();\r\n\r\n  const passkeysCount = await c.env.DB.prepare(\r\n    'SELECT COUNT(*) as count FROM passkeys WHERE user_id = ?'\r\n  ).bind(userId).first<{ count: number }>();\r\n\r\n  const oauthCount = await c.env.DB.prepare(\r\n    'SELECT COUNT(*) as count FROM oauth_accounts WHERE user_id = ?'\r\n  ).bind(userId).first<{ count: number }>();\r\n\r\n  const hasPassword = user?.password_hash !== null;\r\n  const hasPasskeys = (passkeysCount?.count || 0) > 0;\r\n  const oauthAccountsCount = oauthCount?.count || 0;\r\n\r\n  if (!hasPassword && !hasPasskeys && oauthAccountsCount <= 1) {\r\n    return c.json({ \r\n      error: 'Cannot unlink your only sign-in method' \r\n    }, 400);\r\n  }\r\n\r\n  const result = await c.env.DB.prepare(\r\n    'DELETE FROM oauth_accounts WHERE id = ? AND user_id = ?'\r\n  ).bind(accountId, userId).run();\r\n\r\n  if (!result.meta.changes) {\r\n    return c.json({ error: 'Account not found' }, 404);\r\n  }\r\n\r\n  await logAudit(c.env.DB, 'oauth.unlinked', userId, c.req.raw, { accountId });\r\n\r\n  return c.json({ success: true, message: 'Account unlinked' });\r\n});\r\n\r\nexport { oauth as oauthRoutes };\r\n", "// AuthForge - OpenID Connect (OIDC) Routes\r\n// Enables enterprise SSO integration with any OIDC-compatible application\r\n\r\nimport { Hono } from 'hono';\r\nimport { Env, User } from '../types';\r\nimport { generateId, verifyPassword } from '../lib/utils';\r\nimport { requireAuth } from '../lib/middleware';\r\nimport { sign, verify } from 'hono/jwt';\r\n\r\nconst oidc = new Hono<{ Bindings: Env }>();\r\n\r\n// Helper to get the issuer URL\r\nconst getIssuer = (c: any) => {\r\n  const origin = c.req.header('origin') || c.req.header('host') || 'localhost:8787';\r\n  const protocol = origin.includes('localhost') ? 'http' : 'https';\r\n  return `${protocol}://${origin.replace(/^https?:\\/\\//, '')}`;\r\n};\r\n\r\n// ============================================\r\n// OIDC Discovery Endpoint\r\n// ============================================\r\n// This is the magic endpoint that allows any app to auto-configure\r\n// GET /.well-known/openid-configuration\r\n\r\noidc.get('/.well-known/openid-configuration', (c) => {\r\n  const issuer = getIssuer(c);\r\n  \r\n  return c.json({\r\n    // Required fields\r\n    issuer,\r\n    authorization_endpoint: `${issuer}/api/oidc/authorize`,\r\n    token_endpoint: `${issuer}/api/oidc/token`,\r\n    userinfo_endpoint: `${issuer}/api/oidc/userinfo`,\r\n    jwks_uri: `${issuer}/api/oidc/jwks`,\r\n    \r\n    // Supported features\r\n    response_types_supported: ['code', 'token', 'id_token', 'code token', 'code id_token'],\r\n    subject_types_supported: ['public'],\r\n    id_token_signing_alg_values_supported: ['HS256', 'RS256'],\r\n    scopes_supported: ['openid', 'profile', 'email', 'offline_access'],\r\n    token_endpoint_auth_methods_supported: ['client_secret_basic', 'client_secret_post'],\r\n    claims_supported: [\r\n      'sub', 'iss', 'aud', 'exp', 'iat', 'name', 'email', 'email_verified', 'picture'\r\n    ],\r\n    \r\n    // Optional endpoints\r\n    revocation_endpoint: `${issuer}/api/oidc/revoke`,\r\n    introspection_endpoint: `${issuer}/api/oidc/introspect`,\r\n    end_session_endpoint: `${issuer}/api/oidc/logout`,\r\n    \r\n    // PKCE support (recommended for public clients)\r\n    code_challenge_methods_supported: ['S256', 'plain'],\r\n    \r\n    // Grant types\r\n    grant_types_supported: ['authorization_code', 'refresh_token', 'client_credentials'],\r\n    \r\n    // Additional metadata\r\n    service_documentation: `${issuer}/docs`,\r\n    ui_locales_supported: ['en'],\r\n    op_policy_uri: `${issuer}/privacy`,\r\n    op_tos_uri: `${issuer}/terms`\r\n  });\r\n});\r\n\r\n// ============================================\r\n// JWKS Endpoint (JSON Web Key Set)\r\n// ============================================\r\n// Returns public keys for token verification\r\n\r\noidc.get('/jwks', async (c) => {\r\n  // In production, you'd generate and store RSA keys\r\n  // For now, we return a placeholder indicating HS256 is used\r\n  return c.json({\r\n    keys: [\r\n      {\r\n        kty: 'oct',\r\n        alg: 'HS256',\r\n        use: 'sig',\r\n        kid: 'authforge-key-1'\r\n      }\r\n    ]\r\n  });\r\n});\r\n\r\n// ============================================\r\n// Authorization Endpoint\r\n// ============================================\r\n// Initiates the OAuth2/OIDC flow\r\n\r\noidc.get('/authorize', async (c) => {\r\n  const {\r\n    client_id,\r\n    redirect_uri,\r\n    response_type,\r\n    scope,\r\n    state,\r\n    nonce,\r\n    code_challenge,\r\n    code_challenge_method\r\n  } = c.req.query();\r\n\r\n  // Validate required params\r\n  if (!client_id || !redirect_uri || !response_type) {\r\n    return c.json({ \r\n      error: 'invalid_request',\r\n      error_description: 'Missing required parameters: client_id, redirect_uri, response_type'\r\n    }, 400);\r\n  }\r\n\r\n  // Validate client (in production, check against registered clients)\r\n  const client = await c.env.DB.prepare(\r\n    'SELECT * FROM oauth_clients WHERE client_id = ? AND status = ?'\r\n  ).bind(client_id, 'active').first();\r\n\r\n  if (!client) {\r\n    return c.json({ \r\n      error: 'invalid_client',\r\n      error_description: 'Unknown or inactive client'\r\n    }, 401);\r\n  }\r\n\r\n  // Store authorization request for the login flow\r\n  const authRequestId = generateId();\r\n  await c.env.SESSIONS.put(`oidc_auth:${authRequestId}`, JSON.stringify({\r\n    client_id,\r\n    redirect_uri,\r\n    response_type,\r\n    scope: scope || 'openid',\r\n    state,\r\n    nonce,\r\n    code_challenge,\r\n    code_challenge_method,\r\n    created_at: Date.now()\r\n  }), { expirationTtl: 600 }); // 10 minutes\r\n\r\n  // Redirect to login page with auth request ID\r\n  const loginUrl = new URL('/login', c.req.url);\r\n  loginUrl.searchParams.set('oidc_request', authRequestId);\r\n  \r\n  return c.redirect(loginUrl.toString());\r\n});\r\n\r\n// ============================================\r\n// Token Endpoint\r\n// ============================================\r\n// Exchanges authorization code for tokens\r\n\r\noidc.post('/token', async (c) => {\r\n  const body = await c.req.parseBody();\r\n  const grant_type = body.grant_type as string;\r\n  \r\n  if (grant_type === 'authorization_code') {\r\n    const code = body.code as string;\r\n    const redirect_uri = body.redirect_uri as string;\r\n    const client_id = body.client_id as string;\r\n    const client_secret = body.client_secret as string;\r\n    const code_verifier = body.code_verifier as string;\r\n\r\n    // Retrieve stored authorization code\r\n    const storedCode = await c.env.SESSIONS.get(`oidc_code:${code}`);\r\n    if (!storedCode) {\r\n      return c.json({ error: 'invalid_grant', error_description: 'Invalid or expired code' }, 400);\r\n    }\r\n\r\n    const codeData = JSON.parse(storedCode);\r\n    \r\n    // Validate redirect_uri matches\r\n    if (codeData.redirect_uri !== redirect_uri) {\r\n      return c.json({ error: 'invalid_grant', error_description: 'Redirect URI mismatch' }, 400);\r\n    }\r\n\r\n    // Validate PKCE if used\r\n    if (codeData.code_challenge) {\r\n      if (!code_verifier) {\r\n        return c.json({ error: 'invalid_grant', error_description: 'Code verifier required' }, 400);\r\n      }\r\n      // Verify code_challenge matches hash of code_verifier\r\n      const encoder = new TextEncoder();\r\n      const data = encoder.encode(code_verifier);\r\n      const hashBuffer = await crypto.subtle.digest('SHA-256', data);\r\n      const hashArray = Array.from(new Uint8Array(hashBuffer));\r\n      const calculatedChallenge = btoa(String.fromCharCode(...hashArray))\r\n        .replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=/g, '');\r\n      \r\n      if (calculatedChallenge !== codeData.code_challenge) {\r\n        return c.json({ error: 'invalid_grant', error_description: 'Invalid code verifier' }, 400);\r\n      }\r\n    }\r\n\r\n    // Delete used code\r\n    await c.env.SESSIONS.delete(`oidc_code:${code}`);\r\n\r\n    // Get user\r\n    const user = await c.env.DB.prepare('SELECT * FROM users WHERE id = ?')\r\n      .bind(codeData.user_id).first<User>();\r\n\r\n    if (!user) {\r\n      return c.json({ error: 'invalid_grant', error_description: 'User not found' }, 400);\r\n    }\r\n\r\n    const issuer = getIssuer(c);\r\n    const now = Math.floor(Date.now() / 1000);\r\n\r\n    // Generate access token\r\n    const accessToken = await sign({\r\n      sub: user.id,\r\n      iss: issuer,\r\n      aud: client_id,\r\n      exp: now + 3600, // 1 hour\r\n      iat: now,\r\n      scope: codeData.scope\r\n    }, c.env.JWT_SECRET);\r\n\r\n    // Generate ID token (OIDC specific)\r\n    const idToken = await sign({\r\n      sub: user.id,\r\n      iss: issuer,\r\n      aud: client_id,\r\n      exp: now + 3600,\r\n      iat: now,\r\n      nonce: codeData.nonce,\r\n      name: user.name,\r\n      email: user.email,\r\n      email_verified: user.email_verified === 1,\r\n      picture: user.avatar_url\r\n    }, c.env.JWT_SECRET);\r\n\r\n    // Generate refresh token\r\n    const refreshToken = generateId() + generateId();\r\n    await c.env.SESSIONS.put(`oidc_refresh:${refreshToken}`, JSON.stringify({\r\n      user_id: user.id,\r\n      client_id,\r\n      scope: codeData.scope,\r\n      created_at: Date.now()\r\n    }), { expirationTtl: 30 * 24 * 60 * 60 }); // 30 days\r\n\r\n    return c.json({\r\n      access_token: accessToken,\r\n      token_type: 'Bearer',\r\n      expires_in: 3600,\r\n      refresh_token: refreshToken,\r\n      id_token: idToken,\r\n      scope: codeData.scope\r\n    });\r\n\r\n  } else if (grant_type === 'refresh_token') {\r\n    const refresh_token = body.refresh_token as string;\r\n    \r\n    const storedRefresh = await c.env.SESSIONS.get(`oidc_refresh:${refresh_token}`);\r\n    if (!storedRefresh) {\r\n      return c.json({ error: 'invalid_grant', error_description: 'Invalid refresh token' }, 400);\r\n    }\r\n\r\n    const refreshData = JSON.parse(storedRefresh);\r\n    const user = await c.env.DB.prepare('SELECT * FROM users WHERE id = ?')\r\n      .bind(refreshData.user_id).first<User>();\r\n\r\n    if (!user) {\r\n      return c.json({ error: 'invalid_grant', error_description: 'User not found' }, 400);\r\n    }\r\n\r\n    const issuer = getIssuer(c);\r\n    const now = Math.floor(Date.now() / 1000);\r\n\r\n    const accessToken = await sign({\r\n      sub: user.id,\r\n      iss: issuer,\r\n      aud: refreshData.client_id,\r\n      exp: now + 3600,\r\n      iat: now,\r\n      scope: refreshData.scope\r\n    }, c.env.JWT_SECRET);\r\n\r\n    return c.json({\r\n      access_token: accessToken,\r\n      token_type: 'Bearer',\r\n      expires_in: 3600,\r\n      scope: refreshData.scope\r\n    });\r\n  }\r\n\r\n  return c.json({ error: 'unsupported_grant_type' }, 400);\r\n});\r\n\r\n// ============================================\r\n// UserInfo Endpoint\r\n// ============================================\r\n// Returns claims about the authenticated user\r\n\r\noidc.get('/userinfo', requireAuth, async (c) => {\r\n  const user = c.get('user');\r\n  \r\n  return c.json({\r\n    sub: user.id,\r\n    name: user.name,\r\n    email: user.email,\r\n    email_verified: user.email_verified === 1,\r\n    picture: user.avatar_url,\r\n    updated_at: Math.floor(new Date(user.updated_at || user.created_at).getTime() / 1000)\r\n  });\r\n});\r\n\r\n// ============================================\r\n// Token Revocation Endpoint\r\n// ============================================\r\n\r\noidc.post('/revoke', async (c) => {\r\n  const body = await c.req.parseBody();\r\n  const token = body.token as string;\r\n  const token_type_hint = body.token_type_hint as string;\r\n\r\n  if (!token) {\r\n    return c.json({ error: 'invalid_request' }, 400);\r\n  }\r\n\r\n  // Try to revoke as refresh token\r\n  if (!token_type_hint || token_type_hint === 'refresh_token') {\r\n    await c.env.SESSIONS.delete(`oidc_refresh:${token}`);\r\n  }\r\n\r\n  // Always return 200 per RFC 7009\r\n  return c.json({ success: true });\r\n});\r\n\r\n// ============================================\r\n// Introspection Endpoint\r\n// ============================================\r\n// Allows resource servers to validate tokens\r\n\r\noidc.post('/introspect', async (c) => {\r\n  const body = await c.req.parseBody();\r\n  const token = body.token as string;\r\n\r\n  if (!token) {\r\n    return c.json({ active: false });\r\n  }\r\n\r\n  try {\r\n    const payload = await verify(token, c.env.JWT_SECRET);\r\n    const now = Math.floor(Date.now() / 1000);\r\n\r\n    if (payload.exp && payload.exp < now) {\r\n      return c.json({ active: false });\r\n    }\r\n\r\n    return c.json({\r\n      active: true,\r\n      sub: payload.sub,\r\n      client_id: payload.aud,\r\n      scope: payload.scope,\r\n      exp: payload.exp,\r\n      iat: payload.iat,\r\n      iss: payload.iss,\r\n      token_type: 'Bearer'\r\n    });\r\n  } catch {\r\n    return c.json({ active: false });\r\n  }\r\n});\r\n\r\n// ============================================\r\n// End Session (Logout) Endpoint\r\n// ============================================\r\n\r\noidc.get('/logout', async (c) => {\r\n  const { post_logout_redirect_uri, id_token_hint, state } = c.req.query();\r\n\r\n  // Invalidate session if id_token_hint provided\r\n  if (id_token_hint) {\r\n    try {\r\n      const payload = await verify(id_token_hint, c.env.JWT_SECRET);\r\n      // Could invalidate user sessions here\r\n    } catch {\r\n      // Token invalid, continue with logout anyway\r\n    }\r\n  }\r\n\r\n  if (post_logout_redirect_uri) {\r\n    const redirectUrl = new URL(post_logout_redirect_uri);\r\n    if (state) {\r\n      redirectUrl.searchParams.set('state', state);\r\n    }\r\n    return c.redirect(redirectUrl.toString());\r\n  }\r\n\r\n  return c.json({ success: true, message: 'Logged out' });\r\n});\r\n\r\n// ============================================\r\n// Client Registration Endpoint (Dynamic)\r\n// ============================================\r\n// Allows apps to register themselves (optional)\r\n\r\noidc.post('/register', async (c) => {\r\n  const body = await c.req.json<{\r\n    client_name: string;\r\n    redirect_uris: string[];\r\n    grant_types?: string[];\r\n    response_types?: string[];\r\n    application_type?: string;\r\n    contacts?: string[];\r\n    logo_uri?: string;\r\n    client_uri?: string;\r\n    policy_uri?: string;\r\n    tos_uri?: string;\r\n  }>();\r\n\r\n  if (!body.client_name || !body.redirect_uris?.length) {\r\n    return c.json({ \r\n      error: 'invalid_client_metadata',\r\n      error_description: 'client_name and redirect_uris are required'\r\n    }, 400);\r\n  }\r\n\r\n  const clientId = generateId();\r\n  const clientSecret = generateId() + generateId();\r\n\r\n  await c.env.DB.prepare(`\r\n    INSERT INTO oauth_clients (\r\n      id, client_id, client_secret, name, redirect_uris, \r\n      grant_types, response_types, application_type, status, created_at\r\n    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, 'active', datetime('now'))\r\n  `).bind(\r\n    generateId(),\r\n    clientId,\r\n    clientSecret, // In production, hash this\r\n    body.client_name,\r\n    JSON.stringify(body.redirect_uris),\r\n    JSON.stringify(body.grant_types || ['authorization_code']),\r\n    JSON.stringify(body.response_types || ['code']),\r\n    body.application_type || 'web'\r\n  ).run();\r\n\r\n  const issuer = getIssuer(c);\r\n\r\n  return c.json({\r\n    client_id: clientId,\r\n    client_secret: clientSecret,\r\n    client_name: body.client_name,\r\n    redirect_uris: body.redirect_uris,\r\n    grant_types: body.grant_types || ['authorization_code'],\r\n    response_types: body.response_types || ['code'],\r\n    token_endpoint_auth_method: 'client_secret_basic',\r\n    registration_access_token: clientSecret, // Simplified\r\n    registration_client_uri: `${issuer}/api/oidc/register/${clientId}`\r\n  }, 201);\r\n});\r\n\r\nexport { oidc as oidcRoutes };\r\n", "// src/middleware/jwt/index.ts\nimport { jwt, verifyWithJwks, verify, decode, sign } from \"./jwt.js\";\nexport {\n  decode,\n  jwt,\n  sign,\n  verify,\n  verifyWithJwks\n};\n", "// src/middleware/jwt/jwt.ts\nimport { getCookie, getSignedCookie } from \"../../helper/cookie/index.js\";\nimport { HTTPException } from \"../../http-exception.js\";\nimport { Jwt } from \"../../utils/jwt/index.js\";\nimport \"../../context.js\";\nvar jwt = (options) => {\n  const verifyOpts = options.verification || {};\n  if (!options || !options.secret) {\n    throw new Error('JWT auth middleware requires options for \"secret\"');\n  }\n  if (!crypto.subtle || !crypto.subtle.importKey) {\n    throw new Error(\"`crypto.subtle.importKey` is undefined. JWT auth middleware requires it.\");\n  }\n  return async function jwt2(ctx, next) {\n    const headerName = options.headerName || \"Authorization\";\n    const credentials = ctx.req.raw.headers.get(headerName);\n    let token;\n    if (credentials) {\n      const parts = credentials.split(/\\s+/);\n      if (parts.length !== 2) {\n        const errDescription = \"invalid credentials structure\";\n        throw new HTTPException(401, {\n          message: errDescription,\n          res: unauthorizedResponse({\n            ctx,\n            error: \"invalid_request\",\n            errDescription\n          })\n        });\n      } else {\n        token = parts[1];\n      }\n    } else if (options.cookie) {\n      if (typeof options.cookie == \"string\") {\n        token = getCookie(ctx, options.cookie);\n      } else if (options.cookie.secret) {\n        if (options.cookie.prefixOptions) {\n          token = await getSignedCookie(\n            ctx,\n            options.cookie.secret,\n            options.cookie.key,\n            options.cookie.prefixOptions\n          );\n        } else {\n          token = await getSignedCookie(ctx, options.cookie.secret, options.cookie.key);\n        }\n      } else {\n        if (options.cookie.prefixOptions) {\n          token = getCookie(ctx, options.cookie.key, options.cookie.prefixOptions);\n        } else {\n          token = getCookie(ctx, options.cookie.key);\n        }\n      }\n    }\n    if (!token) {\n      const errDescription = \"no authorization included in request\";\n      throw new HTTPException(401, {\n        message: errDescription,\n        res: unauthorizedResponse({\n          ctx,\n          error: \"invalid_request\",\n          errDescription\n        })\n      });\n    }\n    let payload;\n    let cause;\n    try {\n      payload = await Jwt.verify(token, options.secret, {\n        alg: options.alg,\n        ...verifyOpts\n      });\n    } catch (e) {\n      cause = e;\n    }\n    if (!payload) {\n      throw new HTTPException(401, {\n        message: \"Unauthorized\",\n        res: unauthorizedResponse({\n          ctx,\n          error: \"invalid_token\",\n          statusText: \"Unauthorized\",\n          errDescription: \"token verification failure\"\n        }),\n        cause\n      });\n    }\n    ctx.set(\"jwtPayload\", payload);\n    await next();\n  };\n};\nfunction unauthorizedResponse(opts) {\n  return new Response(\"Unauthorized\", {\n    status: 401,\n    statusText: opts.statusText,\n    headers: {\n      \"WWW-Authenticate\": `Bearer realm=\"${opts.ctx.req.url}\",error=\"${opts.error}\",error_description=\"${opts.errDescription}\"`\n    }\n  });\n}\nvar verifyWithJwks = Jwt.verifyWithJwks;\nvar verify = Jwt.verify;\nvar decode = Jwt.decode;\nvar sign = Jwt.sign;\nexport {\n  decode,\n  jwt,\n  sign,\n  verify,\n  verifyWithJwks\n};\n", "// src/helper/cookie/index.ts\nimport { parse, parseSigned, serialize, serializeSigned } from \"../../utils/cookie.js\";\nvar getCookie = (c, key, prefix) => {\n  const cookie = c.req.raw.headers.get(\"Cookie\");\n  if (typeof key === \"string\") {\n    if (!cookie) {\n      return void 0;\n    }\n    let finalKey = key;\n    if (prefix === \"secure\") {\n      finalKey = \"__Secure-\" + key;\n    } else if (prefix === \"host\") {\n      finalKey = \"__Host-\" + key;\n    }\n    const obj2 = parse(cookie, finalKey);\n    return obj2[finalKey];\n  }\n  if (!cookie) {\n    return {};\n  }\n  const obj = parse(cookie);\n  return obj;\n};\nvar getSignedCookie = async (c, secret, key, prefix) => {\n  const cookie = c.req.raw.headers.get(\"Cookie\");\n  if (typeof key === \"string\") {\n    if (!cookie) {\n      return void 0;\n    }\n    let finalKey = key;\n    if (prefix === \"secure\") {\n      finalKey = \"__Secure-\" + key;\n    } else if (prefix === \"host\") {\n      finalKey = \"__Host-\" + key;\n    }\n    const obj2 = await parseSigned(cookie, secret, finalKey);\n    return obj2[finalKey];\n  }\n  if (!cookie) {\n    return {};\n  }\n  const obj = await parseSigned(cookie, secret);\n  return obj;\n};\nvar generateCookie = (name, value, opt) => {\n  let cookie;\n  if (opt?.prefix === \"secure\") {\n    cookie = serialize(\"__Secure-\" + name, value, { path: \"/\", ...opt, secure: true });\n  } else if (opt?.prefix === \"host\") {\n    cookie = serialize(\"__Host-\" + name, value, {\n      ...opt,\n      path: \"/\",\n      secure: true,\n      domain: void 0\n    });\n  } else {\n    cookie = serialize(name, value, { path: \"/\", ...opt });\n  }\n  return cookie;\n};\nvar setCookie = (c, name, value, opt) => {\n  const cookie = generateCookie(name, value, opt);\n  c.header(\"Set-Cookie\", cookie, { append: true });\n};\nvar generateSignedCookie = async (name, value, secret, opt) => {\n  let cookie;\n  if (opt?.prefix === \"secure\") {\n    cookie = await serializeSigned(\"__Secure-\" + name, value, secret, {\n      path: \"/\",\n      ...opt,\n      secure: true\n    });\n  } else if (opt?.prefix === \"host\") {\n    cookie = await serializeSigned(\"__Host-\" + name, value, secret, {\n      ...opt,\n      path: \"/\",\n      secure: true,\n      domain: void 0\n    });\n  } else {\n    cookie = await serializeSigned(name, value, secret, { path: \"/\", ...opt });\n  }\n  return cookie;\n};\nvar setSignedCookie = async (c, name, value, secret, opt) => {\n  const cookie = await generateSignedCookie(name, value, secret, opt);\n  c.header(\"set-cookie\", cookie, { append: true });\n};\nvar deleteCookie = (c, name, opt) => {\n  const deletedCookie = getCookie(c, name, opt?.prefix);\n  setCookie(c, name, \"\", { ...opt, maxAge: 0 });\n  return deletedCookie;\n};\nexport {\n  deleteCookie,\n  generateCookie,\n  generateSignedCookie,\n  getCookie,\n  getSignedCookie,\n  setCookie,\n  setSignedCookie\n};\n", "// src/utils/cookie.ts\nimport { decodeURIComponent_, tryDecode } from \"./url.js\";\nvar algorithm = { name: \"HMAC\", hash: \"SHA-256\" };\nvar getCryptoKey = async (secret) => {\n  const secretBuf = typeof secret === \"string\" ? new TextEncoder().encode(secret) : secret;\n  return await crypto.subtle.importKey(\"raw\", secretBuf, algorithm, false, [\"sign\", \"verify\"]);\n};\nvar makeSignature = async (value, secret) => {\n  const key = await getCryptoKey(secret);\n  const signature = await crypto.subtle.sign(algorithm.name, key, new TextEncoder().encode(value));\n  return btoa(String.fromCharCode(...new Uint8Array(signature)));\n};\nvar verifySignature = async (base64Signature, value, secret) => {\n  try {\n    const signatureBinStr = atob(base64Signature);\n    const signature = new Uint8Array(signatureBinStr.length);\n    for (let i = 0, len = signatureBinStr.length; i < len; i++) {\n      signature[i] = signatureBinStr.charCodeAt(i);\n    }\n    return await crypto.subtle.verify(algorithm, secret, signature, new TextEncoder().encode(value));\n  } catch {\n    return false;\n  }\n};\nvar validCookieNameRegEx = /^[\\w!#$%&'*.^`|~+-]+$/;\nvar validCookieValueRegEx = /^[ !#-:<-[\\]-~]*$/;\nvar parse = (cookie, name) => {\n  if (name && cookie.indexOf(name) === -1) {\n    return {};\n  }\n  const pairs = cookie.trim().split(\";\");\n  const parsedCookie = {};\n  for (let pairStr of pairs) {\n    pairStr = pairStr.trim();\n    const valueStartPos = pairStr.indexOf(\"=\");\n    if (valueStartPos === -1) {\n      continue;\n    }\n    const cookieName = pairStr.substring(0, valueStartPos).trim();\n    if (name && name !== cookieName || !validCookieNameRegEx.test(cookieName)) {\n      continue;\n    }\n    let cookieValue = pairStr.substring(valueStartPos + 1).trim();\n    if (cookieValue.startsWith('\"') && cookieValue.endsWith('\"')) {\n      cookieValue = cookieValue.slice(1, -1);\n    }\n    if (validCookieValueRegEx.test(cookieValue)) {\n      parsedCookie[cookieName] = cookieValue.indexOf(\"%\") !== -1 ? tryDecode(cookieValue, decodeURIComponent_) : cookieValue;\n      if (name) {\n        break;\n      }\n    }\n  }\n  return parsedCookie;\n};\nvar parseSigned = async (cookie, secret, name) => {\n  const parsedCookie = {};\n  const secretKey = await getCryptoKey(secret);\n  for (const [key, value] of Object.entries(parse(cookie, name))) {\n    const signatureStartPos = value.lastIndexOf(\".\");\n    if (signatureStartPos < 1) {\n      continue;\n    }\n    const signedValue = value.substring(0, signatureStartPos);\n    const signature = value.substring(signatureStartPos + 1);\n    if (signature.length !== 44 || !signature.endsWith(\"=\")) {\n      continue;\n    }\n    const isVerified = await verifySignature(signature, signedValue, secretKey);\n    parsedCookie[key] = isVerified ? signedValue : false;\n  }\n  return parsedCookie;\n};\nvar _serialize = (name, value, opt = {}) => {\n  let cookie = `${name}=${value}`;\n  if (name.startsWith(\"__Secure-\") && !opt.secure) {\n    throw new Error(\"__Secure- Cookie must have Secure attributes\");\n  }\n  if (name.startsWith(\"__Host-\")) {\n    if (!opt.secure) {\n      throw new Error(\"__Host- Cookie must have Secure attributes\");\n    }\n    if (opt.path !== \"/\") {\n      throw new Error('__Host- Cookie must have Path attributes with \"/\"');\n    }\n    if (opt.domain) {\n      throw new Error(\"__Host- Cookie must not have Domain attributes\");\n    }\n  }\n  if (opt && typeof opt.maxAge === \"number\" && opt.maxAge >= 0) {\n    if (opt.maxAge > 3456e4) {\n      throw new Error(\n        \"Cookies Max-Age SHOULD NOT be greater than 400 days (34560000 seconds) in duration.\"\n      );\n    }\n    cookie += `; Max-Age=${opt.maxAge | 0}`;\n  }\n  if (opt.domain && opt.prefix !== \"host\") {\n    cookie += `; Domain=${opt.domain}`;\n  }\n  if (opt.path) {\n    cookie += `; Path=${opt.path}`;\n  }\n  if (opt.expires) {\n    if (opt.expires.getTime() - Date.now() > 3456e7) {\n      throw new Error(\n        \"Cookies Expires SHOULD NOT be greater than 400 days (34560000 seconds) in the future.\"\n      );\n    }\n    cookie += `; Expires=${opt.expires.toUTCString()}`;\n  }\n  if (opt.httpOnly) {\n    cookie += \"; HttpOnly\";\n  }\n  if (opt.secure) {\n    cookie += \"; Secure\";\n  }\n  if (opt.sameSite) {\n    cookie += `; SameSite=${opt.sameSite.charAt(0).toUpperCase() + opt.sameSite.slice(1)}`;\n  }\n  if (opt.priority) {\n    cookie += `; Priority=${opt.priority.charAt(0).toUpperCase() + opt.priority.slice(1)}`;\n  }\n  if (opt.partitioned) {\n    if (!opt.secure) {\n      throw new Error(\"Partitioned Cookie must have Secure attributes\");\n    }\n    cookie += \"; Partitioned\";\n  }\n  return cookie;\n};\nvar serialize = (name, value, opt) => {\n  value = encodeURIComponent(value);\n  return _serialize(name, value, opt);\n};\nvar serializeSigned = async (name, value, secret, opt = {}) => {\n  const signature = await makeSignature(value, secret);\n  value = `${value}.${signature}`;\n  value = encodeURIComponent(value);\n  return _serialize(name, value, opt);\n};\nexport {\n  parse,\n  parseSigned,\n  serialize,\n  serializeSigned\n};\n", "// src/utils/jwt/index.ts\nimport { decode, sign, verify, verifyWithJwks } from \"./jwt.js\";\nvar Jwt = { sign, verify, decode, verifyWithJwks };\nexport {\n  Jwt\n};\n", "// src/utils/jwt/jwt.ts\nimport { decodeBase64Url, encodeBase64Url } from \"../../utils/encode.js\";\nimport { AlgorithmTypes } from \"./jwa.js\";\nimport { signing, verifying } from \"./jws.js\";\nimport {\n  JwtHeaderInvalid,\n  JwtHeaderRequiresKid,\n  JwtPayloadRequiresAud,\n  JwtTokenAudience,\n  JwtTokenExpired,\n  JwtTokenInvalid,\n  JwtTokenIssuedAt,\n  JwtTokenIssuer,\n  JwtTokenNotBefore,\n  JwtTokenSignatureMismatched\n} from \"./types.js\";\nimport { utf8Decoder, utf8Encoder } from \"./utf8.js\";\nvar encodeJwtPart = (part) => encodeBase64Url(utf8Encoder.encode(JSON.stringify(part)).buffer).replace(/=/g, \"\");\nvar encodeSignaturePart = (buf) => encodeBase64Url(buf).replace(/=/g, \"\");\nvar decodeJwtPart = (part) => JSON.parse(utf8Decoder.decode(decodeBase64Url(part)));\nfunction isTokenHeader(obj) {\n  if (typeof obj === \"object\" && obj !== null) {\n    const objWithAlg = obj;\n    return \"alg\" in objWithAlg && Object.values(AlgorithmTypes).includes(objWithAlg.alg) && (!(\"typ\" in objWithAlg) || objWithAlg.typ === \"JWT\");\n  }\n  return false;\n}\nvar sign = async (payload, privateKey, alg = \"HS256\") => {\n  const encodedPayload = encodeJwtPart(payload);\n  let encodedHeader;\n  if (typeof privateKey === \"object\" && \"alg\" in privateKey) {\n    alg = privateKey.alg;\n    encodedHeader = encodeJwtPart({ alg, typ: \"JWT\", kid: privateKey.kid });\n  } else {\n    encodedHeader = encodeJwtPart({ alg, typ: \"JWT\" });\n  }\n  const partialToken = `${encodedHeader}.${encodedPayload}`;\n  const signaturePart = await signing(privateKey, alg, utf8Encoder.encode(partialToken));\n  const signature = encodeSignaturePart(signaturePart);\n  return `${partialToken}.${signature}`;\n};\nvar verify = async (token, publicKey, algOrOptions) => {\n  const {\n    alg = \"HS256\",\n    iss,\n    nbf = true,\n    exp = true,\n    iat = true,\n    aud\n  } = typeof algOrOptions === \"string\" ? { alg: algOrOptions } : algOrOptions || {};\n  const tokenParts = token.split(\".\");\n  if (tokenParts.length !== 3) {\n    throw new JwtTokenInvalid(token);\n  }\n  const { header, payload } = decode(token);\n  if (!isTokenHeader(header)) {\n    throw new JwtHeaderInvalid(header);\n  }\n  const now = Date.now() / 1e3 | 0;\n  if (nbf && payload.nbf && payload.nbf > now) {\n    throw new JwtTokenNotBefore(token);\n  }\n  if (exp && payload.exp && payload.exp <= now) {\n    throw new JwtTokenExpired(token);\n  }\n  if (iat && payload.iat && now < payload.iat) {\n    throw new JwtTokenIssuedAt(now, payload.iat);\n  }\n  if (iss) {\n    if (!payload.iss) {\n      throw new JwtTokenIssuer(iss, null);\n    }\n    if (typeof iss === \"string\" && payload.iss !== iss) {\n      throw new JwtTokenIssuer(iss, payload.iss);\n    }\n    if (iss instanceof RegExp && !iss.test(payload.iss)) {\n      throw new JwtTokenIssuer(iss, payload.iss);\n    }\n  }\n  if (aud) {\n    if (!payload.aud) {\n      throw new JwtPayloadRequiresAud(payload);\n    }\n    const audiences = Array.isArray(payload.aud) ? payload.aud : [payload.aud];\n    const matched = audiences.some(\n      (payloadAud) => aud instanceof RegExp ? aud.test(payloadAud) : typeof aud === \"string\" ? payloadAud === aud : Array.isArray(aud) && aud.includes(payloadAud)\n    );\n    if (!matched) {\n      throw new JwtTokenAudience(aud, payload.aud);\n    }\n  }\n  const headerPayload = token.substring(0, token.lastIndexOf(\".\"));\n  const verified = await verifying(\n    publicKey,\n    alg,\n    decodeBase64Url(tokenParts[2]),\n    utf8Encoder.encode(headerPayload)\n  );\n  if (!verified) {\n    throw new JwtTokenSignatureMismatched(token);\n  }\n  return payload;\n};\nvar verifyWithJwks = async (token, options, init) => {\n  const verifyOpts = options.verification || {};\n  const header = decodeHeader(token);\n  if (!isTokenHeader(header)) {\n    throw new JwtHeaderInvalid(header);\n  }\n  if (!header.kid) {\n    throw new JwtHeaderRequiresKid(header);\n  }\n  if (options.jwks_uri) {\n    const response = await fetch(options.jwks_uri, init);\n    if (!response.ok) {\n      throw new Error(`failed to fetch JWKS from ${options.jwks_uri}`);\n    }\n    const data = await response.json();\n    if (!data.keys) {\n      throw new Error('invalid JWKS response. \"keys\" field is missing');\n    }\n    if (!Array.isArray(data.keys)) {\n      throw new Error('invalid JWKS response. \"keys\" field is not an array');\n    }\n    if (options.keys) {\n      options.keys.push(...data.keys);\n    } else {\n      options.keys = data.keys;\n    }\n  } else if (!options.keys) {\n    throw new Error('verifyWithJwks requires options for either \"keys\" or \"jwks_uri\" or both');\n  }\n  const matchingKey = options.keys.find((key) => key.kid === header.kid);\n  if (!matchingKey) {\n    throw new JwtTokenInvalid(token);\n  }\n  return await verify(token, matchingKey, {\n    alg: matchingKey.alg || header.alg,\n    ...verifyOpts\n  });\n};\nvar decode = (token) => {\n  try {\n    const [h, p] = token.split(\".\");\n    const header = decodeJwtPart(h);\n    const payload = decodeJwtPart(p);\n    return {\n      header,\n      payload\n    };\n  } catch {\n    throw new JwtTokenInvalid(token);\n  }\n};\nvar decodeHeader = (token) => {\n  try {\n    const [h] = token.split(\".\");\n    return decodeJwtPart(h);\n  } catch {\n    throw new JwtTokenInvalid(token);\n  }\n};\nexport {\n  decode,\n  decodeHeader,\n  isTokenHeader,\n  sign,\n  verify,\n  verifyWithJwks\n};\n", "// src/utils/jwt/jwa.ts\nvar AlgorithmTypes = /* @__PURE__ */ ((AlgorithmTypes2) => {\n  AlgorithmTypes2[\"HS256\"] = \"HS256\";\n  AlgorithmTypes2[\"HS384\"] = \"HS384\";\n  AlgorithmTypes2[\"HS512\"] = \"HS512\";\n  AlgorithmTypes2[\"RS256\"] = \"RS256\";\n  AlgorithmTypes2[\"RS384\"] = \"RS384\";\n  AlgorithmTypes2[\"RS512\"] = \"RS512\";\n  AlgorithmTypes2[\"PS256\"] = \"PS256\";\n  AlgorithmTypes2[\"PS384\"] = \"PS384\";\n  AlgorithmTypes2[\"PS512\"] = \"PS512\";\n  AlgorithmTypes2[\"ES256\"] = \"ES256\";\n  AlgorithmTypes2[\"ES384\"] = \"ES384\";\n  AlgorithmTypes2[\"ES512\"] = \"ES512\";\n  AlgorithmTypes2[\"EdDSA\"] = \"EdDSA\";\n  return AlgorithmTypes2;\n})(AlgorithmTypes || {});\nexport {\n  AlgorithmTypes\n};\n", "// src/utils/jwt/jws.ts\nimport { getRuntimeKey } from \"../../helper/adapter/index.js\";\nimport { decodeBase64 } from \"../encode.js\";\nimport { CryptoKeyUsage, JwtAlgorithmNotImplemented } from \"./types.js\";\nimport { utf8Encoder } from \"./utf8.js\";\nasync function signing(privateKey, alg, data) {\n  const algorithm = getKeyAlgorithm(alg);\n  const cryptoKey = await importPrivateKey(privateKey, algorithm);\n  return await crypto.subtle.sign(algorithm, cryptoKey, data);\n}\nasync function verifying(publicKey, alg, signature, data) {\n  const algorithm = getKeyAlgorithm(alg);\n  const cryptoKey = await importPublicKey(publicKey, algorithm);\n  return await crypto.subtle.verify(algorithm, cryptoKey, signature, data);\n}\nfunction pemToBinary(pem) {\n  return decodeBase64(pem.replace(/-+(BEGIN|END).*/g, \"\").replace(/\\s/g, \"\"));\n}\nasync function importPrivateKey(key, alg) {\n  if (!crypto.subtle || !crypto.subtle.importKey) {\n    throw new Error(\"`crypto.subtle.importKey` is undefined. JWT auth middleware requires it.\");\n  }\n  if (isCryptoKey(key)) {\n    if (key.type !== \"private\" && key.type !== \"secret\") {\n      throw new Error(\n        `unexpected key type: CryptoKey.type is ${key.type}, expected private or secret`\n      );\n    }\n    return key;\n  }\n  const usages = [CryptoKeyUsage.Sign];\n  if (typeof key === \"object\") {\n    return await crypto.subtle.importKey(\"jwk\", key, alg, false, usages);\n  }\n  if (key.includes(\"PRIVATE\")) {\n    return await crypto.subtle.importKey(\"pkcs8\", pemToBinary(key), alg, false, usages);\n  }\n  return await crypto.subtle.importKey(\"raw\", utf8Encoder.encode(key), alg, false, usages);\n}\nasync function importPublicKey(key, alg) {\n  if (!crypto.subtle || !crypto.subtle.importKey) {\n    throw new Error(\"`crypto.subtle.importKey` is undefined. JWT auth middleware requires it.\");\n  }\n  if (isCryptoKey(key)) {\n    if (key.type === \"public\" || key.type === \"secret\") {\n      return key;\n    }\n    key = await exportPublicJwkFrom(key);\n  }\n  if (typeof key === \"string\" && key.includes(\"PRIVATE\")) {\n    const privateKey = await crypto.subtle.importKey(\"pkcs8\", pemToBinary(key), alg, true, [\n      CryptoKeyUsage.Sign\n    ]);\n    key = await exportPublicJwkFrom(privateKey);\n  }\n  const usages = [CryptoKeyUsage.Verify];\n  if (typeof key === \"object\") {\n    return await crypto.subtle.importKey(\"jwk\", key, alg, false, usages);\n  }\n  if (key.includes(\"PUBLIC\")) {\n    return await crypto.subtle.importKey(\"spki\", pemToBinary(key), alg, false, usages);\n  }\n  return await crypto.subtle.importKey(\"raw\", utf8Encoder.encode(key), alg, false, usages);\n}\nasync function exportPublicJwkFrom(privateKey) {\n  if (privateKey.type !== \"private\") {\n    throw new Error(`unexpected key type: ${privateKey.type}`);\n  }\n  if (!privateKey.extractable) {\n    throw new Error(\"unexpected private key is unextractable\");\n  }\n  const jwk = await crypto.subtle.exportKey(\"jwk\", privateKey);\n  const { kty } = jwk;\n  const { alg, e, n } = jwk;\n  const { crv, x, y } = jwk;\n  return { kty, alg, e, n, crv, x, y, key_ops: [CryptoKeyUsage.Verify] };\n}\nfunction getKeyAlgorithm(name) {\n  switch (name) {\n    case \"HS256\":\n      return {\n        name: \"HMAC\",\n        hash: {\n          name: \"SHA-256\"\n        }\n      };\n    case \"HS384\":\n      return {\n        name: \"HMAC\",\n        hash: {\n          name: \"SHA-384\"\n        }\n      };\n    case \"HS512\":\n      return {\n        name: \"HMAC\",\n        hash: {\n          name: \"SHA-512\"\n        }\n      };\n    case \"RS256\":\n      return {\n        name: \"RSASSA-PKCS1-v1_5\",\n        hash: {\n          name: \"SHA-256\"\n        }\n      };\n    case \"RS384\":\n      return {\n        name: \"RSASSA-PKCS1-v1_5\",\n        hash: {\n          name: \"SHA-384\"\n        }\n      };\n    case \"RS512\":\n      return {\n        name: \"RSASSA-PKCS1-v1_5\",\n        hash: {\n          name: \"SHA-512\"\n        }\n      };\n    case \"PS256\":\n      return {\n        name: \"RSA-PSS\",\n        hash: {\n          name: \"SHA-256\"\n        },\n        saltLength: 32\n        // 256 >> 3\n      };\n    case \"PS384\":\n      return {\n        name: \"RSA-PSS\",\n        hash: {\n          name: \"SHA-384\"\n        },\n        saltLength: 48\n        // 384 >> 3\n      };\n    case \"PS512\":\n      return {\n        name: \"RSA-PSS\",\n        hash: {\n          name: \"SHA-512\"\n        },\n        saltLength: 64\n        // 512 >> 3,\n      };\n    case \"ES256\":\n      return {\n        name: \"ECDSA\",\n        hash: {\n          name: \"SHA-256\"\n        },\n        namedCurve: \"P-256\"\n      };\n    case \"ES384\":\n      return {\n        name: \"ECDSA\",\n        hash: {\n          name: \"SHA-384\"\n        },\n        namedCurve: \"P-384\"\n      };\n    case \"ES512\":\n      return {\n        name: \"ECDSA\",\n        hash: {\n          name: \"SHA-512\"\n        },\n        namedCurve: \"P-521\"\n      };\n    case \"EdDSA\":\n      return {\n        name: \"Ed25519\",\n        namedCurve: \"Ed25519\"\n      };\n    default:\n      throw new JwtAlgorithmNotImplemented(name);\n  }\n}\nfunction isCryptoKey(key) {\n  const runtime = getRuntimeKey();\n  if (runtime === \"node\" && !!crypto.webcrypto) {\n    return key instanceof crypto.webcrypto.CryptoKey;\n  }\n  return key instanceof CryptoKey;\n}\nexport {\n  signing,\n  verifying\n};\n", "// src/helper/adapter/index.ts\nvar env = (c, runtime) => {\n  const global = globalThis;\n  const globalEnv = global?.process?.env;\n  runtime ??= getRuntimeKey();\n  const runtimeEnvHandlers = {\n    bun: () => globalEnv,\n    node: () => globalEnv,\n    \"edge-light\": () => globalEnv,\n    deno: () => {\n      return Deno.env.toObject();\n    },\n    workerd: () => c.env,\n    // On Fastly Compute, you can use the ConfigStore to manage user-defined data.\n    fastly: () => ({}),\n    other: () => ({})\n  };\n  return runtimeEnvHandlers[runtime]();\n};\nvar knownUserAgents = {\n  deno: \"Deno\",\n  bun: \"Bun\",\n  workerd: \"Cloudflare-Workers\",\n  node: \"Node.js\"\n};\nvar getRuntimeKey = () => {\n  const global = globalThis;\n  const userAgentSupported = typeof navigator !== \"undefined\" && typeof navigator.userAgent === \"string\";\n  if (userAgentSupported) {\n    for (const [runtimeKey, userAgent] of Object.entries(knownUserAgents)) {\n      if (checkUserAgentEquals(userAgent)) {\n        return runtimeKey;\n      }\n    }\n  }\n  if (typeof global?.EdgeRuntime === \"string\") {\n    return \"edge-light\";\n  }\n  if (global?.fastly !== void 0) {\n    return \"fastly\";\n  }\n  if (global?.process?.release?.name === \"node\") {\n    return \"node\";\n  }\n  return \"other\";\n};\nvar checkUserAgentEquals = (platform) => {\n  const userAgent = navigator.userAgent;\n  return userAgent.startsWith(platform);\n};\nexport {\n  checkUserAgentEquals,\n  env,\n  getRuntimeKey,\n  knownUserAgents\n};\n", "// src/utils/jwt/types.ts\nvar JwtAlgorithmNotImplemented = class extends Error {\n  constructor(alg) {\n    super(`${alg} is not an implemented algorithm`);\n    this.name = \"JwtAlgorithmNotImplemented\";\n  }\n};\nvar JwtTokenInvalid = class extends Error {\n  constructor(token) {\n    super(`invalid JWT token: ${token}`);\n    this.name = \"JwtTokenInvalid\";\n  }\n};\nvar JwtTokenNotBefore = class extends Error {\n  constructor(token) {\n    super(`token (${token}) is being used before it's valid`);\n    this.name = \"JwtTokenNotBefore\";\n  }\n};\nvar JwtTokenExpired = class extends Error {\n  constructor(token) {\n    super(`token (${token}) expired`);\n    this.name = \"JwtTokenExpired\";\n  }\n};\nvar JwtTokenIssuedAt = class extends Error {\n  constructor(currentTimestamp, iat) {\n    super(\n      `Invalid \"iat\" claim, must be a valid number lower than \"${currentTimestamp}\" (iat: \"${iat}\")`\n    );\n    this.name = \"JwtTokenIssuedAt\";\n  }\n};\nvar JwtTokenIssuer = class extends Error {\n  constructor(expected, iss) {\n    super(`expected issuer \"${expected}\", got ${iss ? `\"${iss}\"` : \"none\"} `);\n    this.name = \"JwtTokenIssuer\";\n  }\n};\nvar JwtHeaderInvalid = class extends Error {\n  constructor(header) {\n    super(`jwt header is invalid: ${JSON.stringify(header)}`);\n    this.name = \"JwtHeaderInvalid\";\n  }\n};\nvar JwtHeaderRequiresKid = class extends Error {\n  constructor(header) {\n    super(`required \"kid\" in jwt header: ${JSON.stringify(header)}`);\n    this.name = \"JwtHeaderRequiresKid\";\n  }\n};\nvar JwtTokenSignatureMismatched = class extends Error {\n  constructor(token) {\n    super(`token(${token}) signature mismatched`);\n    this.name = \"JwtTokenSignatureMismatched\";\n  }\n};\nvar JwtPayloadRequiresAud = class extends Error {\n  constructor(payload) {\n    super(`required \"aud\" in jwt payload: ${JSON.stringify(payload)}`);\n    this.name = \"JwtPayloadRequiresAud\";\n  }\n};\nvar JwtTokenAudience = class extends Error {\n  constructor(expected, aud) {\n    super(\n      `expected audience \"${Array.isArray(expected) ? expected.join(\", \") : expected}\", got \"${aud}\"`\n    );\n    this.name = \"JwtTokenAudience\";\n  }\n};\nvar CryptoKeyUsage = /* @__PURE__ */ ((CryptoKeyUsage2) => {\n  CryptoKeyUsage2[\"Encrypt\"] = \"encrypt\";\n  CryptoKeyUsage2[\"Decrypt\"] = \"decrypt\";\n  CryptoKeyUsage2[\"Sign\"] = \"sign\";\n  CryptoKeyUsage2[\"Verify\"] = \"verify\";\n  CryptoKeyUsage2[\"DeriveKey\"] = \"deriveKey\";\n  CryptoKeyUsage2[\"DeriveBits\"] = \"deriveBits\";\n  CryptoKeyUsage2[\"WrapKey\"] = \"wrapKey\";\n  CryptoKeyUsage2[\"UnwrapKey\"] = \"unwrapKey\";\n  return CryptoKeyUsage2;\n})(CryptoKeyUsage || {});\nexport {\n  CryptoKeyUsage,\n  JwtAlgorithmNotImplemented,\n  JwtHeaderInvalid,\n  JwtHeaderRequiresKid,\n  JwtPayloadRequiresAud,\n  JwtTokenAudience,\n  JwtTokenExpired,\n  JwtTokenInvalid,\n  JwtTokenIssuedAt,\n  JwtTokenIssuer,\n  JwtTokenNotBefore,\n  JwtTokenSignatureMismatched\n};\n", "// src/utils/jwt/utf8.ts\nvar utf8Encoder = new TextEncoder();\nvar utf8Decoder = new TextDecoder();\nexport {\n  utf8Decoder,\n  utf8Encoder\n};\n", "// AuthForge - Sessions Management Routes\r\n\r\nimport { Hono } from 'hono';\r\nimport { Env, Session } from '../types';\r\nimport { sha256, logAudit } from '../lib/utils';\r\nimport { requireAuth } from '../lib/middleware';\r\n\r\nconst sessions = new Hono<{ Bindings: Env }>();\r\n\r\n// List all sessions for current user\r\nsessions.get('/', requireAuth, async (c) => {\r\n  const user = c.get('user');\r\n  const currentSession = c.get('session');\r\n\r\n  const result = await c.env.DB.prepare(`\r\n    SELECT id, user_agent, device_name, ip_address, location, last_active_at, created_at\r\n    FROM sessions \r\n    WHERE user_id = ? AND expires_at > datetime('now')\r\n    ORDER BY last_active_at DESC\r\n  `).bind(user.id).all<Session>();\r\n\r\n  const sessionsData = result.results.map(s => {\r\n    // Parse user agent for browser/OS info\r\n    const ua = s.user_agent || '';\r\n    let browser = 'Unknown';\r\n    let os = 'Unknown';\r\n    \r\n    // Simple UA parsing\r\n    if (ua.includes('Chrome')) browser = 'Chrome';\r\n    else if (ua.includes('Firefox')) browser = 'Firefox';\r\n    else if (ua.includes('Safari')) browser = 'Safari';\r\n    else if (ua.includes('Edge')) browser = 'Edge';\r\n    \r\n    if (ua.includes('Windows')) os = 'Windows';\r\n    else if (ua.includes('Mac')) os = 'macOS';\r\n    else if (ua.includes('Linux')) os = 'Linux';\r\n    else if (ua.includes('Android')) os = 'Android';\r\n    else if (ua.includes('iPhone') || ua.includes('iPad')) os = 'iOS';\r\n\r\n    return {\r\n      id: s.id,\r\n      browser,\r\n      os,\r\n      device: s.device_name || 'Unknown Device',\r\n      ipAddress: s.ip_address,\r\n      location: s.location,\r\n      lastActiveAt: s.last_active_at,\r\n      createdAt: s.created_at,\r\n      isCurrent: s.id === currentSession.id\r\n    };\r\n  });\r\n\r\n  return c.json({\r\n    success: true,\r\n    sessions: sessionsData,\r\n    currentSessionId: currentSession.id\r\n  });\r\n});\r\n\r\n// Revoke a specific session\r\nsessions.delete('/:id', requireAuth, async (c) => {\r\n  const user = c.get('user');\r\n  const currentSession = c.get('session');\r\n  const sessionId = c.req.param('id');\r\n\r\n  if (sessionId === currentSession.id) {\r\n    return c.json({ error: 'Cannot revoke current session. Use /auth/logout instead.' }, 400);\r\n  }\r\n\r\n  // Get session to delete from KV\r\n  const sessionToDelete = await c.env.DB.prepare(`\r\n    SELECT token_hash FROM sessions WHERE id = ? AND user_id = ?\r\n  `).bind(sessionId, user.id).first<{ token_hash: string }>();\r\n\r\n  if (!sessionToDelete) {\r\n    return c.json({ error: 'Session not found' }, 404);\r\n  }\r\n\r\n  // Delete from DB\r\n  await c.env.DB.prepare('DELETE FROM sessions WHERE id = ?')\r\n    .bind(sessionId)\r\n    .run();\r\n\r\n  // Delete from KV\r\n  await c.env.SESSIONS.delete(`session:${sessionToDelete.token_hash}`);\r\n\r\n  await logAudit(c.env.DB, 'session.revoked', user.id, c.req.raw, { sessionId });\r\n\r\n  return c.json({ success: true, message: 'Session revoked' });\r\n});\r\n\r\n// Revoke all sessions except current\r\nsessions.post('/revoke-all', requireAuth, async (c) => {\r\n  const user = c.get('user');\r\n  const currentSession = c.get('session');\r\n\r\n  // Get all sessions to delete\r\n  const sessionsToDelete = await c.env.DB.prepare(`\r\n    SELECT id, token_hash FROM sessions WHERE user_id = ? AND id != ?\r\n  `).bind(user.id, currentSession.id).all<{ id: string; token_hash: string }>();\r\n\r\n  // Delete from KV\r\n  for (const session of sessionsToDelete.results) {\r\n    await c.env.SESSIONS.delete(`session:${session.token_hash}`);\r\n  }\r\n\r\n  // Delete from DB\r\n  await c.env.DB.prepare('DELETE FROM sessions WHERE user_id = ? AND id != ?')\r\n    .bind(user.id, currentSession.id)\r\n    .run();\r\n\r\n  await logAudit(c.env.DB, 'sessions.revoked_all', user.id, c.req.raw, { \r\n    count: sessionsToDelete.results.length \r\n  });\r\n\r\n  return c.json({ \r\n    success: true, \r\n    message: `Revoked ${sessionsToDelete.results.length} sessions` \r\n  });\r\n});\r\n\r\n// Get current session info\r\nsessions.get('/current', requireAuth, async (c) => {\r\n  const session = c.get('session');\r\n  const user = c.get('user');\r\n\r\n  // Parse user agent for browser/OS info\r\n  const ua = session.user_agent || '';\r\n  let browser = 'Unknown';\r\n  let os = 'Unknown';\r\n  \r\n  if (ua.includes('Chrome')) browser = 'Chrome';\r\n  else if (ua.includes('Firefox')) browser = 'Firefox';\r\n  else if (ua.includes('Safari')) browser = 'Safari';\r\n  else if (ua.includes('Edge')) browser = 'Edge';\r\n  \r\n  if (ua.includes('Windows')) os = 'Windows';\r\n  else if (ua.includes('Mac')) os = 'macOS';\r\n  else if (ua.includes('Linux')) os = 'Linux';\r\n  else if (ua.includes('Android')) os = 'Android';\r\n  else if (ua.includes('iPhone') || ua.includes('iPad')) os = 'iOS';\r\n\r\n  // Check 2FA status for this session\r\n  const is2FAVerified = await c.env.SESSIONS.get(`2fa:${session.id}`);\r\n\r\n  return c.json({\r\n    success: true,\r\n    session: {\r\n      id: session.id,\r\n      browser,\r\n      os,\r\n      device: session.device_name || 'Unknown Device',\r\n      ipAddress: session.ip_address,\r\n      lastActiveAt: session.last_active_at,\r\n      createdAt: session.created_at,\r\n      expiresAt: session.expires_at,\r\n      is2FAVerified: is2FAVerified === '1'\r\n    },\r\n    user: {\r\n      id: user.id,\r\n      email: user.email,\r\n      name: user.name,\r\n      emailVerified: user.email_verified === 1,\r\n      has2FA: user.totp_enabled === 1,\r\n      hasPassword: user.password_hash !== null,\r\n      hasVault: user.vault_key !== null,\r\n      avatarUrl: user.avatar_url\r\n    }\r\n  });\r\n});\r\n\r\nexport { sessions as sessionsRoutes };\r\n", "// AuthForge - Encrypted Vault Routes\r\n\r\nimport { Hono } from 'hono';\r\nimport { Env, VaultItem, VaultFolder } from '../types';\r\nimport { generateId, sha256, logAudit } from '../lib/utils';\r\nimport { requireAuth, requireVerified } from '../lib/middleware';\r\n\r\nconst vault = new Hono<{ Bindings: Env }>();\r\n\r\n// All vault routes require authentication\r\nvault.use('*', requireAuth);\r\n\r\n/*\r\n * VAULT ARCHITECTURE:\r\n * - Items are encrypted client-side using user's vault key\r\n * - Server stores encrypted_data (ciphertext) and metadata\r\n * - Server never sees plaintext passwords/notes/cards\r\n * - User's vault key is derived from their master password\r\n */\r\n\r\n// Setup vault (store salt and verification hash)\r\nvault.post('/setup', async (c) => {\r\n  const user = c.get('user');\r\n  const body = await c.req.json<{\r\n    salt: string;\r\n    verificationHash: string;\r\n  }>();\r\n\r\n  if (!body.salt || !body.verificationHash) {\r\n    return c.json({ error: 'Salt and verification hash are required' }, 400);\r\n  }\r\n\r\n  // Check if vault is already set up\r\n  const existing = await c.env.DB.prepare(\r\n    'SELECT vault_key FROM users WHERE id = ?'\r\n  ).bind(user.id).first<{ vault_key: string | null }>();\r\n\r\n  if (existing?.vault_key) {\r\n    return c.json({ error: 'Vault already set up' }, 400);\r\n  }\r\n\r\n  // Store salt and verification hash combined\r\n  const vaultData = JSON.stringify({\r\n    salt: body.salt,\r\n    verificationHash: body.verificationHash\r\n  });\r\n\r\n  await c.env.DB.prepare(\r\n    'UPDATE users SET vault_key = ? WHERE id = ?'\r\n  ).bind(vaultData, user.id).run();\r\n\r\n  await logAudit(c.env.DB, 'vault.setup', user.id, c.req.raw, {});\r\n\r\n  return c.json({ success: true, message: 'Vault created' });\r\n});\r\n\r\n// Get vault salt (for unlocking)\r\nvault.get('/salt', async (c) => {\r\n  const user = c.get('user');\r\n\r\n  const result = await c.env.DB.prepare(\r\n    'SELECT vault_key FROM users WHERE id = ?'\r\n  ).bind(user.id).first<{ vault_key: string | null }>();\r\n\r\n  if (!result?.vault_key) {\r\n    return c.json({ error: 'Vault not set up' }, 404);\r\n  }\r\n\r\n  try {\r\n    const vaultData = JSON.parse(result.vault_key);\r\n    return c.json({\r\n      success: true,\r\n      salt: vaultData.salt,\r\n      verificationHash: vaultData.verificationHash\r\n    });\r\n  } catch {\r\n    return c.json({ error: 'Invalid vault data' }, 500);\r\n  }\r\n});\r\n\r\n// List vault items\r\nvault.get('/items', async (c) => {\r\n  const user = c.get('user');\r\n  const folderId = c.req.query('folderId');\r\n  const type = c.req.query('type') as 'login' | 'note' | 'card' | 'identity' | undefined;\r\n  const search = c.req.query('search');\r\n\r\n  let query = `\r\n    SELECT id, folder_id, type, name, favorite, created_at, updated_at\r\n    FROM vault_items \r\n    WHERE user_id = ?\r\n  `;\r\n  const params: any[] = [user.id];\r\n\r\n  if (folderId) {\r\n    query += ` AND folder_id = ?`;\r\n    params.push(folderId);\r\n  } else if (folderId === '') {\r\n    query += ` AND folder_id IS NULL`;\r\n  }\r\n\r\n  if (type) {\r\n    query += ` AND type = ?`;\r\n    params.push(type);\r\n  }\r\n\r\n  if (search) {\r\n    query += ` AND name LIKE ?`;\r\n    params.push(`%${search}%`);\r\n  }\r\n\r\n  query += ` ORDER BY favorite DESC, name ASC`;\r\n\r\n  const result = await c.env.DB.prepare(query).bind(...params).all<VaultItem>();\r\n\r\n  return c.json({\r\n    success: true,\r\n    items: result.results.map(item => ({\r\n      id: item.id,\r\n      folderId: item.folder_id,\r\n      type: item.type,\r\n      name: item.name,\r\n      favorite: item.favorite === 1,\r\n      createdAt: item.created_at,\r\n      updatedAt: item.updated_at\r\n    }))\r\n  });\r\n});\r\n\r\n// Get single vault item (includes encrypted data)\r\nvault.get('/items/:id', async (c) => {\r\n  const user = c.get('user');\r\n  const itemId = c.req.param('id');\r\n\r\n  const item = await c.env.DB.prepare(`\r\n    SELECT * FROM vault_items WHERE id = ? AND user_id = ?\r\n  `).bind(itemId, user.id).first<VaultItem>();\r\n\r\n  if (!item) {\r\n    return c.json({ error: 'Item not found' }, 404);\r\n  }\r\n\r\n  return c.json({\r\n    success: true,\r\n    item: {\r\n      id: item.id,\r\n      folderId: item.folder_id,\r\n      type: item.type,\r\n      name: item.name,\r\n      encryptedData: item.encrypted_data,\r\n      iv: item.iv,\r\n      favorite: item.favorite === 1,\r\n      createdAt: item.created_at,\r\n      updatedAt: item.updated_at\r\n    }\r\n  });\r\n});\r\n\r\n// Create vault item\r\nvault.post('/items', async (c) => {\r\n  const user = c.get('user');\r\n  const body = await c.req.json<{\r\n    type: 'login' | 'note' | 'card' | 'identity';\r\n    name: string;\r\n    encryptedData: string;\r\n    iv?: string;\r\n    folderId?: string;\r\n    favorite?: boolean;\r\n    notes?: string;\r\n  }>();\r\n\r\n  if (!body.type || !body.name || !body.encryptedData) {\r\n    return c.json({ error: 'Type, name, and encryptedData are required' }, 400);\r\n  }\r\n\r\n  // Schema uses 'password' not 'login' for type\r\n  const typeMap: Record<string, string> = {\r\n    'login': 'password',\r\n    'password': 'password',\r\n    'note': 'note',\r\n    'card': 'card',\r\n    'identity': 'identity'\r\n  };\r\n  const dbType = typeMap[body.type] || body.type;\r\n  const validTypes = ['password', 'note', 'card', 'identity'];\r\n  if (!validTypes.includes(dbType)) {\r\n    return c.json({ error: 'Invalid item type' }, 400);\r\n  }\r\n\r\n  // Verify folder exists if provided\r\n  if (body.folderId) {\r\n    const folder = await c.env.DB.prepare(\r\n      'SELECT id FROM vault_folders WHERE id = ? AND user_id = ?'\r\n    ).bind(body.folderId, user.id).first();\r\n\r\n    if (!folder) {\r\n      return c.json({ error: 'Folder not found' }, 404);\r\n    }\r\n  }\r\n\r\n  const itemId = generateId();\r\n  // Use client-provided IV or generate a random one\r\n  const iv = body.iv || crypto.randomUUID().replace(/-/g, '').slice(0, 24);\r\n  \r\n  await c.env.DB.prepare(`\r\n    INSERT INTO vault_items (id, user_id, folder_id, type, name, encrypted_data, iv, favorite)\r\n    VALUES (?, ?, ?, ?, ?, ?, ?, ?)\r\n  `).bind(\r\n    itemId,\r\n    user.id,\r\n    body.folderId || null,\r\n    dbType,\r\n    body.name,\r\n    body.encryptedData,\r\n    iv,\r\n    body.favorite ? 1 : 0\r\n  ).run();\r\n\r\n  await logAudit(c.env.DB, 'vault.item.created', user.id, c.req.raw, { itemId, type: body.type });\r\n\r\n  return c.json({\r\n    success: true,\r\n    message: 'Item created',\r\n    item: { id: itemId }\r\n  }, 201);\r\n});\r\n\r\n// Update vault item\r\nvault.put('/items/:id', async (c) => {\r\n  const user = c.get('user');\r\n  const itemId = c.req.param('id');\r\n  const body = await c.req.json<{\r\n    name?: string;\r\n    encryptedData?: string;\r\n    folderId?: string | null;\r\n    favorite?: boolean;\r\n    notes?: string;\r\n  }>();\r\n\r\n  // Build update query\r\n  const updates: string[] = [];\r\n  const params: any[] = [];\r\n\r\n  if (body.name !== undefined) {\r\n    updates.push('name = ?');\r\n    params.push(body.name);\r\n  }\r\n\r\n  if (body.encryptedData !== undefined) {\r\n    updates.push('encrypted_data = ?');\r\n    params.push(body.encryptedData);\r\n  }\r\n\r\n  if (body.folderId !== undefined) {\r\n    updates.push('folder_id = ?');\r\n    params.push(body.folderId);\r\n  }\r\n\r\n  if (body.favorite !== undefined) {\r\n    updates.push('favorite = ?');\r\n    params.push(body.favorite ? 1 : 0);\r\n  }\r\n\r\n  if (body.notes !== undefined) {\r\n    updates.push('notes = ?');\r\n    params.push(body.notes);\r\n  }\r\n\r\n  if (updates.length === 0) {\r\n    return c.json({ error: 'No fields to update' }, 400);\r\n  }\r\n\r\n  updates.push('updated_at = datetime(\\'now\\')');\r\n\r\n  const result = await c.env.DB.prepare(`\r\n    UPDATE vault_items SET ${updates.join(', ')} WHERE id = ? AND user_id = ?\r\n  `).bind(...params, itemId, user.id).run();\r\n\r\n  if (!result.meta.changes) {\r\n    return c.json({ error: 'Item not found' }, 404);\r\n  }\r\n\r\n  await logAudit(c.env.DB, 'vault.item.updated', user.id, c.req.raw, { itemId });\r\n\r\n  return c.json({ success: true, message: 'Item updated' });\r\n});\r\n\r\n// Delete vault item\r\nvault.delete('/items/:id', async (c) => {\r\n  const user = c.get('user');\r\n  const itemId = c.req.param('id');\r\n\r\n  const result = await c.env.DB.prepare(\r\n    'DELETE FROM vault_items WHERE id = ? AND user_id = ?'\r\n  ).bind(itemId, user.id).run();\r\n\r\n  if (!result.meta.changes) {\r\n    return c.json({ error: 'Item not found' }, 404);\r\n  }\r\n\r\n  await logAudit(c.env.DB, 'vault.item.deleted', user.id, c.req.raw, { itemId });\r\n\r\n  return c.json({ success: true, message: 'Item deleted' });\r\n});\r\n\r\n// ============ FOLDERS ============\r\n\r\n// List folders\r\nvault.get('/folders', async (c) => {\r\n  const user = c.get('user');\r\n\r\n  const result = await c.env.DB.prepare(`\r\n    SELECT id, name, parent_id, created_at\r\n    FROM vault_folders \r\n    WHERE user_id = ?\r\n    ORDER BY name ASC\r\n  `).bind(user.id).all<VaultFolder>();\r\n\r\n  // Also get item counts\r\n  const counts = await c.env.DB.prepare(`\r\n    SELECT folder_id, COUNT(*) as count\r\n    FROM vault_items\r\n    WHERE user_id = ?\r\n    GROUP BY folder_id\r\n  `).bind(user.id).all<{ folder_id: string | null; count: number }>();\r\n\r\n  const countMap = new Map(counts.results.map(c => [c.folder_id, c.count]));\r\n\r\n  return c.json({\r\n    success: true,\r\n    folders: result.results.map(f => ({\r\n      id: f.id,\r\n      name: f.name,\r\n      parentId: f.parent_id,\r\n      itemCount: countMap.get(f.id) || 0,\r\n      createdAt: f.created_at\r\n    })),\r\n    unfiledCount: countMap.get(null) || 0\r\n  });\r\n});\r\n\r\n// Create folder\r\nvault.post('/folders', async (c) => {\r\n  const user = c.get('user');\r\n  const body = await c.req.json<{ name: string; parentId?: string }>();\r\n\r\n  if (!body.name) {\r\n    return c.json({ error: 'Name is required' }, 400);\r\n  }\r\n\r\n  // Verify parent exists if provided\r\n  if (body.parentId) {\r\n    const parent = await c.env.DB.prepare(\r\n      'SELECT id FROM vault_folders WHERE id = ? AND user_id = ?'\r\n    ).bind(body.parentId, user.id).first();\r\n\r\n    if (!parent) {\r\n      return c.json({ error: 'Parent folder not found' }, 404);\r\n    }\r\n  }\r\n\r\n  const folderId = generateId();\r\n  await c.env.DB.prepare(`\r\n    INSERT INTO vault_folders (id, user_id, name, parent_id)\r\n    VALUES (?, ?, ?, ?)\r\n  `).bind(folderId, user.id, body.name, body.parentId || null).run();\r\n\r\n  return c.json({\r\n    success: true,\r\n    message: 'Folder created',\r\n    folder: { id: folderId }\r\n  }, 201);\r\n});\r\n\r\n// Rename folder\r\nvault.patch('/folders/:id', async (c) => {\r\n  const user = c.get('user');\r\n  const folderId = c.req.param('id');\r\n  const body = await c.req.json<{ name: string }>();\r\n\r\n  if (!body.name) {\r\n    return c.json({ error: 'Name is required' }, 400);\r\n  }\r\n\r\n  const result = await c.env.DB.prepare(\r\n    'UPDATE vault_folders SET name = ? WHERE id = ? AND user_id = ?'\r\n  ).bind(body.name, folderId, user.id).run();\r\n\r\n  if (!result.meta.changes) {\r\n    return c.json({ error: 'Folder not found' }, 404);\r\n  }\r\n\r\n  return c.json({ success: true, message: 'Folder renamed' });\r\n});\r\n\r\n// Delete folder (moves items to unfiled)\r\nvault.delete('/folders/:id', async (c) => {\r\n  const user = c.get('user');\r\n  const folderId = c.req.param('id');\r\n\r\n  // Move items to unfiled\r\n  await c.env.DB.prepare(\r\n    'UPDATE vault_items SET folder_id = NULL WHERE folder_id = ? AND user_id = ?'\r\n  ).bind(folderId, user.id).run();\r\n\r\n  // Move subfolders to root\r\n  await c.env.DB.prepare(\r\n    'UPDATE vault_folders SET parent_id = NULL WHERE parent_id = ? AND user_id = ?'\r\n  ).bind(folderId, user.id).run();\r\n\r\n  // Delete folder\r\n  const result = await c.env.DB.prepare(\r\n    'DELETE FROM vault_folders WHERE id = ? AND user_id = ?'\r\n  ).bind(folderId, user.id).run();\r\n\r\n  if (!result.meta.changes) {\r\n    return c.json({ error: 'Folder not found' }, 404);\r\n  }\r\n\r\n  return c.json({ success: true, message: 'Folder deleted' });\r\n});\r\n\r\n// ============ VAULT KEY ============\r\n\r\n// Check if vault is unlocked (has key)\r\nvault.get('/status', async (c) => {\r\n  const user = c.get('user');\r\n\r\n  return c.json({\r\n    success: true,\r\n    hasVaultKey: user.vault_key !== null,\r\n    itemCount: (await c.env.DB.prepare(\r\n      'SELECT COUNT(*) as count FROM vault_items WHERE user_id = ?'\r\n    ).bind(user.id).first<{ count: number }>())?.count || 0\r\n  });\r\n});\r\n\r\n// Set/update vault key (encrypted master key)\r\nvault.post('/key', async (c) => {\r\n  const user = c.get('user');\r\n  const body = await c.req.json<{ encryptedKey: string }>();\r\n\r\n  if (!body.encryptedKey) {\r\n    return c.json({ error: 'Encrypted key is required' }, 400);\r\n  }\r\n\r\n  await c.env.DB.prepare(\r\n    'UPDATE users SET vault_key = ?, updated_at = datetime(\\'now\\') WHERE id = ?'\r\n  ).bind(body.encryptedKey, user.id).run();\r\n\r\n  await logAudit(c.env.DB, 'vault.key.updated', user.id, c.req.raw);\r\n\r\n  return c.json({ success: true, message: 'Vault key updated' });\r\n});\r\n\r\n// Export vault (encrypted)\r\nvault.get('/export', async (c) => {\r\n  const user = c.get('user');\r\n\r\n  const items = await c.env.DB.prepare(`\r\n    SELECT id, folder_id, type, name, encrypted_data, favorite, notes, created_at\r\n    FROM vault_items WHERE user_id = ?\r\n  `).bind(user.id).all<VaultItem>();\r\n\r\n  const folders = await c.env.DB.prepare(`\r\n    SELECT id, name, parent_id FROM vault_folders WHERE user_id = ?\r\n  `).bind(user.id).all<VaultFolder>();\r\n\r\n  await logAudit(c.env.DB, 'vault.exported', user.id, c.req.raw);\r\n\r\n  return c.json({\r\n    success: true,\r\n    export: {\r\n      version: 1,\r\n      exportedAt: new Date().toISOString(),\r\n      folders: folders.results,\r\n      items: items.results\r\n    }\r\n  });\r\n});\r\n\r\n// Import vault (encrypted)\r\nvault.post('/import', async (c) => {\r\n  const user = c.get('user');\r\n  const body = await c.req.json<{\r\n    folders: VaultFolder[];\r\n    items: VaultItem[];\r\n    merge?: boolean;\r\n  }>();\r\n\r\n  if (!body.items) {\r\n    return c.json({ error: 'Items are required' }, 400);\r\n  }\r\n\r\n  // If not merging, clear existing\r\n  if (!body.merge) {\r\n    await c.env.DB.prepare('DELETE FROM vault_items WHERE user_id = ?').bind(user.id).run();\r\n    await c.env.DB.prepare('DELETE FROM vault_folders WHERE user_id = ?').bind(user.id).run();\r\n  }\r\n\r\n  // Create folder ID mapping (old -> new)\r\n  const folderMap = new Map<string, string>();\r\n\r\n  // Import folders first\r\n  if (body.folders) {\r\n    for (const folder of body.folders) {\r\n      const newId = generateId();\r\n      folderMap.set(folder.id, newId);\r\n      \r\n      await c.env.DB.prepare(`\r\n        INSERT INTO vault_folders (id, user_id, name, parent_id)\r\n        VALUES (?, ?, ?, ?)\r\n      `).bind(\r\n        newId,\r\n        user.id,\r\n        folder.name,\r\n        folder.parent_id ? folderMap.get(folder.parent_id) || null : null\r\n      ).run();\r\n    }\r\n  }\r\n\r\n  // Import items\r\n  let imported = 0;\r\n  for (const item of body.items) {\r\n    const newId = generateId();\r\n    await c.env.DB.prepare(`\r\n      INSERT INTO vault_items (id, user_id, folder_id, type, name, encrypted_data, favorite, notes)\r\n      VALUES (?, ?, ?, ?, ?, ?, ?, ?)\r\n    `).bind(\r\n      newId,\r\n      user.id,\r\n      item.folder_id ? folderMap.get(item.folder_id) || null : null,\r\n      item.type,\r\n      item.name,\r\n      item.encrypted_data,\r\n      item.favorite ? 1 : 0,\r\n      item.notes || null\r\n    ).run();\r\n    imported++;\r\n  }\r\n\r\n  await logAudit(c.env.DB, 'vault.imported', user.id, c.req.raw, { \r\n    itemCount: imported,\r\n    folderCount: body.folders?.length || 0 \r\n  });\r\n\r\n  return c.json({\r\n    success: true,\r\n    message: `Imported ${imported} items`,\r\n    imported\r\n  });\r\n});\r\n\r\nexport { vault as vaultRoutes };\r\n", "// AuthForge - User Profile & Settings Routes\r\n\r\nimport { Hono } from 'hono';\r\nimport { Env, User, AuditLog } from '../types';\r\nimport { generateId, hashPassword, verifyPassword, isValidEmail, validatePassword, logAudit } from '../lib/utils';\r\nimport { requireAuth, rateLimit } from '../lib/middleware';\r\n\r\nconst users = new Hono<{ Bindings: Env }>();\r\n\r\n// Get current user profile\r\nusers.get('/me', requireAuth, async (c) => {\r\n  const user = c.get('user');\r\n\r\n  // Get auth methods\r\n  const passkeysCount = await c.env.DB.prepare(\r\n    'SELECT COUNT(*) as count FROM passkeys WHERE user_id = ?'\r\n  ).bind(user.id).first<{ count: number }>();\r\n\r\n  const oauthAccounts = await c.env.DB.prepare(\r\n    'SELECT provider FROM oauth_accounts WHERE user_id = ?'\r\n  ).bind(user.id).all<{ provider: string }>();\r\n\r\n  return c.json({\r\n    success: true,\r\n    user: {\r\n      id: user.id,\r\n      email: user.email,\r\n      name: user.name,\r\n      avatarUrl: user.avatar_url,\r\n      emailVerified: user.email_verified === 1,\r\n      has2FA: user.totp_enabled === 1,\r\n      hasPassword: user.password_hash !== null,\r\n      hasVault: user.vault_key !== null,\r\n      status: user.status,\r\n      createdAt: user.created_at,\r\n      authMethods: {\r\n        password: user.password_hash !== null,\r\n        passkeys: passkeysCount?.count || 0,\r\n        oauth: oauthAccounts.results.map(a => a.provider)\r\n      }\r\n    }\r\n  });\r\n});\r\n\r\n// Update profile\r\nusers.patch('/me', requireAuth, async (c) => {\r\n  const user = c.get('user');\r\n  const body = await c.req.json<{ name?: string; avatarUrl?: string }>();\r\n\r\n  const updates: string[] = [];\r\n  const params: any[] = [];\r\n\r\n  if (body.name !== undefined) {\r\n    updates.push('name = ?');\r\n    params.push(body.name || null);\r\n  }\r\n\r\n  if (body.avatarUrl !== undefined) {\r\n    updates.push('avatar_url = ?');\r\n    params.push(body.avatarUrl || null);\r\n  }\r\n\r\n  if (updates.length === 0) {\r\n    return c.json({ error: 'No fields to update' }, 400);\r\n  }\r\n\r\n  updates.push('updated_at = datetime(\\'now\\')');\r\n\r\n  await c.env.DB.prepare(`\r\n    UPDATE users SET ${updates.join(', ')} WHERE id = ?\r\n  `).bind(...params, user.id).run();\r\n\r\n  await logAudit(c.env.DB, 'user.profile.updated', user.id, c.req.raw);\r\n\r\n  return c.json({ success: true, message: 'Profile updated' });\r\n});\r\n\r\n// Change email\r\nusers.post('/me/email', requireAuth, rateLimit(3, 3600), async (c) => {\r\n  const user = c.get('user');\r\n  const body = await c.req.json<{ newEmail: string; password?: string }>();\r\n\r\n  if (!body.newEmail || !isValidEmail(body.newEmail)) {\r\n    return c.json({ error: 'Valid email is required' }, 400);\r\n  }\r\n\r\n  // If user has password, require it for email change\r\n  if (user.password_hash) {\r\n    if (!body.password) {\r\n      return c.json({ error: 'Current password is required' }, 400);\r\n    }\r\n\r\n    const validPassword = await verifyPassword(body.password, user.password_hash);\r\n    if (!validPassword) {\r\n      return c.json({ error: 'Invalid password' }, 401);\r\n    }\r\n  }\r\n\r\n  // Check if email is taken\r\n  const existing = await c.env.DB.prepare('SELECT id FROM users WHERE email = ?')\r\n    .bind(body.newEmail.toLowerCase())\r\n    .first();\r\n\r\n  if (existing) {\r\n    return c.json({ error: 'Email is already in use' }, 409);\r\n  }\r\n\r\n  // Update email (mark as unverified)\r\n  await c.env.DB.prepare(`\r\n    UPDATE users SET email = ?, email_verified = 0, updated_at = datetime('now')\r\n    WHERE id = ?\r\n  `).bind(body.newEmail.toLowerCase(), user.id).run();\r\n\r\n  await logAudit(c.env.DB, 'user.email.changed', user.id, c.req.raw, { \r\n    oldEmail: user.email,\r\n    newEmail: body.newEmail.toLowerCase()\r\n  });\r\n\r\n  // TODO: Send verification email\r\n\r\n  return c.json({ success: true, message: 'Email updated. Please verify your new email.' });\r\n});\r\n\r\n// Set or change password\r\nusers.post('/me/password', requireAuth, async (c) => {\r\n  const user = c.get('user');\r\n  const body = await c.req.json<{ currentPassword?: string; newPassword: string }>();\r\n\r\n  if (!body.newPassword) {\r\n    return c.json({ error: 'New password is required' }, 400);\r\n  }\r\n\r\n  // If user already has password, require current password\r\n  if (user.password_hash) {\r\n    if (!body.currentPassword) {\r\n      return c.json({ error: 'Current password is required' }, 400);\r\n    }\r\n\r\n    const validPassword = await verifyPassword(body.currentPassword, user.password_hash);\r\n    if (!validPassword) {\r\n      return c.json({ error: 'Invalid current password' }, 401);\r\n    }\r\n  }\r\n\r\n  const passwordCheck = validatePassword(body.newPassword);\r\n  if (!passwordCheck.valid) {\r\n    return c.json({ error: 'Password too weak', details: passwordCheck.errors }, 400);\r\n  }\r\n\r\n  const newHash = await hashPassword(body.newPassword);\r\n\r\n  await c.env.DB.prepare(`\r\n    UPDATE users SET password_hash = ?, updated_at = datetime('now')\r\n    WHERE id = ?\r\n  `).bind(newHash, user.id).run();\r\n\r\n  await logAudit(c.env.DB, 'user.password.changed', user.id, c.req.raw);\r\n\r\n  return c.json({ success: true, message: 'Password updated' });\r\n});\r\n\r\n// Request password reset (for users who forgot password)\r\nusers.post('/password-reset', rateLimit(3, 300), async (c) => {\r\n  const body = await c.req.json<{ email: string }>();\r\n\r\n  if (!body.email || !isValidEmail(body.email)) {\r\n    return c.json({ error: 'Valid email is required' }, 400);\r\n  }\r\n\r\n  // Always return success to prevent email enumeration\r\n  const response = { success: true, message: 'If an account exists, a password reset link has been sent' };\r\n\r\n  const user = await c.env.DB.prepare('SELECT id FROM users WHERE email = ?')\r\n    .bind(body.email.toLowerCase())\r\n    .first<{ id: string }>();\r\n\r\n  if (!user) {\r\n    return c.json(response);\r\n  }\r\n\r\n  // Create reset token\r\n  const token = generateId() + generateId(); // 40 chars\r\n  const tokenHash = await (async () => {\r\n    const encoder = new TextEncoder();\r\n    const data = encoder.encode(token);\r\n    const hashBuffer = await crypto.subtle.digest('SHA-256', data);\r\n    return Array.from(new Uint8Array(hashBuffer)).map(b => b.toString(16).padStart(2, '0')).join('');\r\n  })();\r\n\r\n  const expiresAt = new Date(Date.now() + 60 * 60 * 1000).toISOString(); // 1 hour\r\n\r\n  await c.env.DB.prepare(`\r\n    INSERT INTO password_resets (id, user_id, token_hash, expires_at)\r\n    VALUES (?, ?, ?, ?)\r\n  `).bind(generateId(), user.id, tokenHash, expiresAt).run();\r\n\r\n  // TODO: Send email with reset link\r\n  console.log(`Password reset for ${body.email}: /reset-password?token=${token}`);\r\n\r\n  await logAudit(c.env.DB, 'user.password_reset.requested', user.id, c.req.raw);\r\n\r\n  return c.json(response);\r\n});\r\n\r\n// Complete password reset\r\nusers.post('/password-reset/complete', rateLimit(5, 300), async (c) => {\r\n  const body = await c.req.json<{ token: string; newPassword: string }>();\r\n\r\n  if (!body.token || !body.newPassword) {\r\n    return c.json({ error: 'Token and new password are required' }, 400);\r\n  }\r\n\r\n  const tokenHash = await (async () => {\r\n    const encoder = new TextEncoder();\r\n    const data = encoder.encode(body.token);\r\n    const hashBuffer = await crypto.subtle.digest('SHA-256', data);\r\n    return Array.from(new Uint8Array(hashBuffer)).map(b => b.toString(16).padStart(2, '0')).join('');\r\n  })();\r\n\r\n  const reset = await c.env.DB.prepare(`\r\n    SELECT * FROM password_resets \r\n    WHERE token_hash = ? AND used = 0 AND expires_at > datetime('now')\r\n  `).bind(tokenHash).first<{ id: string; user_id: string }>();\r\n\r\n  if (!reset) {\r\n    return c.json({ error: 'Invalid or expired reset token' }, 401);\r\n  }\r\n\r\n  const passwordCheck = validatePassword(body.newPassword);\r\n  if (!passwordCheck.valid) {\r\n    return c.json({ error: 'Password too weak', details: passwordCheck.errors }, 400);\r\n  }\r\n\r\n  const newHash = await hashPassword(body.newPassword);\r\n\r\n  // Update password\r\n  await c.env.DB.prepare(`\r\n    UPDATE users SET password_hash = ?, updated_at = datetime('now')\r\n    WHERE id = ?\r\n  `).bind(newHash, reset.user_id).run();\r\n\r\n  // Mark token as used\r\n  await c.env.DB.prepare('UPDATE password_resets SET used = 1 WHERE id = ?')\r\n    .bind(reset.id)\r\n    .run();\r\n\r\n  await logAudit(c.env.DB, 'user.password_reset.completed', reset.user_id, c.req.raw);\r\n\r\n  return c.json({ success: true, message: 'Password has been reset. You can now log in.' });\r\n});\r\n\r\n// Get audit log\r\nusers.get('/me/audit-log', requireAuth, async (c) => {\r\n  const user = c.get('user');\r\n  const limit = Math.min(parseInt(c.req.query('limit') || '50'), 100);\r\n  const offset = parseInt(c.req.query('offset') || '0');\r\n\r\n  const result = await c.env.DB.prepare(`\r\n    SELECT * FROM audit_logs \r\n    WHERE user_id = ?\r\n    ORDER BY created_at DESC\r\n    LIMIT ? OFFSET ?\r\n  `).bind(user.id, limit, offset).all<AuditLog>();\r\n\r\n  const total = await c.env.DB.prepare(\r\n    'SELECT COUNT(*) as count FROM audit_logs WHERE user_id = ?'\r\n  ).bind(user.id).first<{ count: number }>();\r\n\r\n  return c.json({\r\n    success: true,\r\n    logs: result.results.map(log => ({\r\n      id: log.id,\r\n      action: log.action,\r\n      ipAddress: log.ip_address,\r\n      userAgent: log.user_agent,\r\n      metadata: log.metadata ? JSON.parse(log.metadata) : null,\r\n      createdAt: log.created_at\r\n    })),\r\n    pagination: {\r\n      total: total?.count || 0,\r\n      limit,\r\n      offset\r\n    }\r\n  });\r\n});\r\n\r\n// Delete account\r\nusers.delete('/me', requireAuth, async (c) => {\r\n  const user = c.get('user');\r\n  const body = await c.req.json<{ password?: string; confirmation: string }>();\r\n\r\n  if (body.confirmation !== 'DELETE MY ACCOUNT') {\r\n    return c.json({ error: 'Please confirm by typing \"DELETE MY ACCOUNT\"' }, 400);\r\n  }\r\n\r\n  // If user has password, require it\r\n  if (user.password_hash) {\r\n    if (!body.password) {\r\n      return c.json({ error: 'Password is required' }, 400);\r\n    }\r\n\r\n    const validPassword = await verifyPassword(body.password, user.password_hash);\r\n    if (!validPassword) {\r\n      return c.json({ error: 'Invalid password' }, 401);\r\n    }\r\n  }\r\n\r\n  // Soft delete - mark as deleted\r\n  await c.env.DB.prepare(`\r\n    UPDATE users SET status = 'deleted', email = ?, updated_at = datetime('now')\r\n    WHERE id = ?\r\n  `).bind(`deleted_${user.id}@deleted.local`, user.id).run();\r\n\r\n  // Revoke all sessions\r\n  const sessions = await c.env.DB.prepare(\r\n    'SELECT token_hash FROM sessions WHERE user_id = ?'\r\n  ).bind(user.id).all<{ token_hash: string }>();\r\n\r\n  for (const session of sessions.results) {\r\n    await c.env.SESSIONS.delete(`session:${session.token_hash}`);\r\n  }\r\n\r\n  await c.env.DB.prepare('DELETE FROM sessions WHERE user_id = ?').bind(user.id).run();\r\n\r\n  // Delete auth methods\r\n  await c.env.DB.prepare('DELETE FROM passkeys WHERE user_id = ?').bind(user.id).run();\r\n  await c.env.DB.prepare('DELETE FROM oauth_accounts WHERE user_id = ?').bind(user.id).run();\r\n\r\n  // Delete vault\r\n  await c.env.DB.prepare('DELETE FROM vault_items WHERE user_id = ?').bind(user.id).run();\r\n  await c.env.DB.prepare('DELETE FROM vault_folders WHERE user_id = ?').bind(user.id).run();\r\n\r\n  await logAudit(c.env.DB, 'user.deleted', user.id, c.req.raw);\r\n\r\n  c.header('Set-Cookie', 'authforge_token=; HttpOnly; Secure; SameSite=Lax; Path=/; Max-Age=0');\r\n\r\n  return c.json({ success: true, message: 'Account deleted' });\r\n});\r\n\r\n// Request email verification\r\nusers.post('/me/verify-email', requireAuth, rateLimit(3, 300), async (c) => {\r\n  const user = c.get('user');\r\n\r\n  if (user.email_verified) {\r\n    return c.json({ error: 'Email is already verified' }, 400);\r\n  }\r\n\r\n  // Create verification token (reuse magic link table)\r\n  const token = generateId() + generateId();\r\n  const tokenHash = await (async () => {\r\n    const encoder = new TextEncoder();\r\n    const data = encoder.encode(token);\r\n    const hashBuffer = await crypto.subtle.digest('SHA-256', data);\r\n    return Array.from(new Uint8Array(hashBuffer)).map(b => b.toString(16).padStart(2, '0')).join('');\r\n  })();\r\n\r\n  const expiresAt = new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString(); // 24 hours\r\n\r\n  await c.env.DB.prepare(`\r\n    INSERT INTO magic_links (id, email, token_hash, expires_at)\r\n    VALUES (?, ?, ?, ?)\r\n  `).bind(generateId(), user.email, tokenHash, expiresAt).run();\r\n\r\n  // TODO: Send email\r\n  console.log(`Verification link for ${user.email}: /verify-email?token=${token}`);\r\n\r\n  return c.json({ success: true, message: 'Verification email sent' });\r\n});\r\n\r\n// Demo: Instant email verification (for demo/development only)\r\nusers.post('/me/verify-email-demo', requireAuth, async (c) => {\r\n  const user = c.get('user');\r\n\r\n  if (user.email_verified) {\r\n    return c.json({ error: 'Email is already verified' }, 400);\r\n  }\r\n\r\n  // Directly mark email as verified (demo mode)\r\n  await c.env.DB.prepare(`\r\n    UPDATE users SET email_verified = 1, updated_at = datetime('now')\r\n    WHERE id = ?\r\n  `).bind(user.id).run();\r\n\r\n  await logAudit(c.env.DB, 'user.email.verified.demo', user.id, c.req.raw);\r\n\r\n  return c.json({ success: true, message: 'Email verified (demo mode)' });\r\n});\r\n\r\nexport { users as usersRoutes };\r\n", "import type { Middleware } from \"./common\";\n\nconst drainBody: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} finally {\n\t\ttry {\n\t\t\tif (request.body !== null && !request.bodyUsed) {\n\t\t\t\tconst reader = request.body.getReader();\n\t\t\t\twhile (!(await reader.read()).done) {}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to drain the unused request body.\", e);\n\t\t}\n\t}\n};\n\nexport default drainBody;\n", "import type { Middleware } from \"./common\";\n\ninterface JsonError {\n\tmessage?: string;\n\tname?: string;\n\tstack?: string;\n\tcause?: JsonError;\n}\n\nfunction reduceError(e: any): JsonError {\n\treturn {\n\t\tname: e?.name,\n\t\tmessage: e?.message ?? String(e),\n\t\tstack: e?.stack,\n\t\tcause: e?.cause === undefined ? undefined : reduceError(e.cause),\n\t};\n}\n\n// See comment in `bundle.ts` for details on why this is needed\nconst jsonError: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} catch (e: any) {\n\t\tconst error = reduceError(e);\n\t\treturn Response.json(error, {\n\t\t\tstatus: 500,\n\t\t\theaders: { \"MF-Experimental-Error-Stack\": \"true\" },\n\t\t});\n\t}\n};\n\nexport default jsonError;\n", "export type Awaitable<T> = T | Promise<T>;\n// TODO: allow dispatching more events?\nexport type Dispatcher = (\n\ttype: \"scheduled\",\n\tinit: { cron?: string }\n) => Awaitable<void>;\n\nexport type IncomingRequest = Request<\n\tunknown,\n\tIncomingRequestCfProperties<unknown>\n>;\n\nexport interface MiddlewareContext {\n\tdispatch: Dispatcher;\n\tnext(request: IncomingRequest, env: any): Awaitable<Response>;\n}\n\nexport type Middleware = (\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tmiddlewareCtx: MiddlewareContext\n) => Awaitable<Response>;\n\nconst __facade_middleware__: Middleware[] = [];\n\n// The register functions allow for the insertion of one or many middleware,\n// We register internal middleware first in the stack, but have no way of controlling\n// the order that addMiddleware is run in service workers so need an internal function.\nexport function __facade_register__(...args: (Middleware | Middleware[])[]) {\n\t__facade_middleware__.push(...args.flat());\n}\nexport function __facade_registerInternal__(\n\t...args: (Middleware | Middleware[])[]\n) {\n\t__facade_middleware__.unshift(...args.flat());\n}\n\nfunction __facade_invokeChain__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tmiddlewareChain: Middleware[]\n): Awaitable<Response> {\n\tconst [head, ...tail] = middlewareChain;\n\tconst middlewareCtx: MiddlewareContext = {\n\t\tdispatch,\n\t\tnext(newRequest, newEnv) {\n\t\t\treturn __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);\n\t\t},\n\t};\n\treturn head(request, env, ctx, middlewareCtx);\n}\n\nexport function __facade_invoke__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tfinalMiddleware: Middleware\n): Awaitable<Response> {\n\treturn __facade_invokeChain__(request, env, ctx, dispatch, [\n\t\t...__facade_middleware__,\n\t\tfinalMiddleware,\n\t]);\n}\n"],
  "mappings": "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O,OAAO;AAAA,QAClC,cAAc;AAAA,QACd,KAAK;AAAA,QACL,UAAU;AAAA,QACV,WAAW;AAAA,QACX,UAAU;AAAA,MACX,IAAI,EAAE,KAAK,MAAM,EAAE,CAAC;AAAA,MACpB,aAAa;AAAA,MACb,SAAS;AAAA,MACT,OAAO;AAAA,MACP,WAAW;AAAA,MACX,UAAU;AAAA,MACV,UAAU;AAAA,MACV,UAAU;AAAA,MACV,SAAS;AAAA,MACT,YAAY;AAAA,MACZ,SAAS;AAAA,MACT,UAAU;AAAA,MACV,UAAU;AAAA,MACV,SAAS;AAAA,MACT,YAAY;AAAA,MACZ,SAAS;AAAA,MACT,UAAU;AAAA,MACV,eAAe;AAAA,MACf,WAAW;AAAA,MACX,gBAAgB;AAAA,MAChB,YAAY;AAAA,MACZ,gBAAgB;AAAA,MAChB,kBAAkB;AAAA,MAClB,oBAAoB;AAAA,MACpB,qBAAqB;AAAA,MACrB,QAAQ;AAAA,MACR,mBAAmB;AAAA,MACnB,YAAY;AAAA,MACZ,6BAA6B;AAAA,MAC7B,4BAA4B;AAAA,MAC5B,gBAAgB;AAAA,MAChB,cAAc;AAAA,MACd,eAAe;AAAA,MACf,kBAAkB;AAAA,MAClB,WAAW;AAAA,MACX,QAAQ;AAAA,MACR,iBAAiB;AAAA,IAClB;AAzNa;AAAA;AAAA;;;ACHb,IAEM,eACO,kBACE,MAAM,UAAU,UAGzB,cAMJ,OACA,aACA,6BACA,qCACA,qCACA,aACA,mBACA,MACA,MACA,OACA,OACA,QACA,WACA,mBACA,iBACA,UACA,KACA,WACA,QACA,YACA,MACA,aACA,KACA,YACA,UACA,UACA,cACA,UACA,wBACA,iBACAC,SACA,MACA,WACA,eACA,aACA,IACA,KACA,MACA,KACA,MACA,iBACA,qBACA,cACA,SACA,oBACA,gBACA,QACA,eACA,iBACA,sBACA,QACA,OACA,QACA,OACA,kBACA,kBACA,OACA,QACA,SACA,UACA,QACA,YACA,gBACA,YACA,WACAC,SACA,SACA,MACA,UACA,SACA,SACA,SACA,QACA,WACA,QACA,SACA,SACA,QACA,WACA,QACA,YACA,YACA,SACA,cACA,UACA,eACA,WACA,eACA,iBACA,mBACA,oBACA,OACA,kBACA,WACA,4BACA,2BACA,eACA,aACA,cACA,iBACA,UACA,OACA,gBAEI,UA8GC;AAnOP,IAAAC,gBAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAAC;AAAA;AACA;AACA,IAAM,gBAAgB,WAAW,SAAS;AACnC,IAAM,mBAAmB,cAAc;AACvC,KAAM,EAAE,MAAM,UAAU,aAAa;AAAA,MAC1C;AAAA,IACF;AACA,IAAM,eAAe,IAAI,QAAa;AAAA,MACpC,KAAK,cAAc;AAAA,MACnB;AAAA,MACA;AAAA,IACF,CAAC;AACM,KAAM;AAAA,MACX;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA,QAAAH;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA,QAAAC;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,QACE;AACJ,IAAM,WAAW;AAAA,MACf;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA,QAAAD;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MAEA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA,QAAAC;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAA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",
  "names": ["init_performance", "init_performance", "PerformanceMark", "init_performance", "init_performance", "init_performance", "init_performance", "clear", "count", "countReset", "createTask", "debug", "dir", "dirxml", "error", "group", "groupCollapsed", "groupEnd", "info", "log", "profile", "profileEnd", "table", "time", "timeEnd", "timeLog", "timeStamp", "trace", "warn", "init_console", "init_performance", "init_console", "init_performance", "hrtime", "init_performance", "Socket", "init_performance", "dir", "env", "count", "init_performance", "init_performance", "cwd", "hrtime", "assert", "init_process", "init_performance", "init_process", "init_performance", "init_performance", "init_performance", "version", "init_performance", "init_performance", "init_performance", "init_performance", "version", "init_performance", "version", "init_performance", "module", "init_performance", "version", "init_performance", "log", "init_performance", "init_performance", "encode", "init_performance", "version", "init_performance", "init_performance", "version", "init_performance", "version", "init_performance", "init_performance", "group", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "version", "table", "init_performance", "Version", "version", "create", "require_utils", "init_performance", "init_performance", "init_performance", "init_performance", "QRCode", "init_performance", "BufferSourceConverter", "Convert", "base64", "isEqual", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "context", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "match", "raw", "init_performance", "context", "init_performance", "init_performance", "app", "env", "context", "init_performance", "init_performance", "init_performance", "init_performance", "context", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "Node", "_Node", "Node", "Hono", "init_performance", "init_performance", "init_performance", "init_performance", "match", "init_performance", "init_performance", "Deno", "navigator", "time", "log", "init_performance", "init_performance", "init_performance", "init_performance", "match", "session", "user", "count", "init_performance", "match", "init_performance", "isLE", "_32n", "sha256", "digest", "window", "Hono", "QRCode", "code", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "ENCODER", "init_performance", "init_performance", "fetch", "Headers", "Request", "Response", "init_performance", "init_performance", "Boolean", "Set", "init_performance", "init_performance", "retBuf", "retView", "log2", "_a", "error", "retView", "count", "tempBufferView", "Boolean", "Set", "init_performance", "AsnTypeTypes", "AsnPropTypes", "init_performance", "init_performance", "BitString", "init_performance", "import_pvtsutils", "OctetString", "Boolean", "init_performance", "init_performance", "init_performance", "init_performance", "_a", "Set", "defaultConverter", "init_performance", "init_performance", "init_performance", "error", "_a", "Set", "init_performance", "Set", "init_performance", "init_performance", "import_pvtsutils", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "import_pvtsutils", "match", "init_performance", "import_pvtsutils", "DirectoryString", "AttributeValue", "RelativeDistinguishedName", "RDNSequence", "Name", "GeneralName", "init_performance", "AuthorityInfoAccessSyntax", "init_performance", "OctetString", "init_performance", "init_performance", "init_performance", "GeneralNames", "CertificateIssuer", "init_performance", "DisplayText", "Qualifier", "CertificatePolicies", "init_performance", "init_performance", "CRLNumber", "BaseCRLNumber", "init_performance", "ReasonFlags", "BitString", "DistributionPointName", "CRLDistributionPoints", "init_performance", "FreshestCRL", "init_performance", "init_performance", "CRLReasons", "CRLReason", "init_performance", "ExtendedKeyUsage", "init_performance", "InhibitAnyPolicy", "init_performance", "InvalidityDate", "init_performance", "IssueAlternativeName", "init_performance", "KeyUsageFlags", "init_performance", "GeneralSubtrees", "init_performance", "init_performance", "PolicyMappings", "init_performance", "SubjectAlternativeName", "init_performance", "init_performance", "SubjectDirectoryAttributes", "init_performance", "init_performance", "init_performance", "EntrustInfoFlags", "BitString", "init_performance", "SubjectInfoAccessSyntax", "init_performance", "pvtsutils", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "Time", "time", "init_performance", "OctetString", "Extensions", "init_performance", "Version", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "FieldID", "OctetString", "Curve", "ECPVer", "SpecifiedECDomain", "ECParameters", "init_performance", "OctetString", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "create", "sha1", "sha224", "sha256", "sha384", "sha512", "sha1", "init_performance", "sha1", "init_performance", "OctetString", "init_performance", "OtherPrimeInfos", "init_performance", "init_performance", "init_performance", "init_performance", "VerifiedBootState", "OctetString", "IntegerSet", "OctetString", "SecurityLevel", "Version", "init_performance", "NonStandardAuthorization", "NonStandardAuthorizationList", "Version", "OctetString", "NonStandardKeyMintKeyDescription", "init_performance", "toBase64", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "COSEKEYS", "COSEKTY", "COSECRV", "COSEALG", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "fetch", "fetch", "cert", "init_performance", "init_performance", "init_performance", "digest", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "concat", "fromUTF8String", "toUTF8String", "init_performance", "concat", "toUTF8String", "fromUTF8String", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "jwt", "init_performance", "jwt", "SERVICE_STATE", "log", "report", "fetch", "error", "init_performance", "info", "version", "init_performance", "jwt", "init_performance", "init_performance", "init_performance", "init_performance", "version", "init_performance", "init_performance", "init_performance", "init_performance", "Hono", "env", "error", "c", "init_performance", "Hono", "error", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "global", "platform", "init_performance", "init_performance", "verify", "verify", "verifyWithJwks", "verify", "decode", "sign", "Hono", "sign", "verify", "init_performance", "Hono", "init_performance", "Hono", "c", "init_performance", "Hono", "log", "sessions", "Hono", "init_performance", "env", "init_performance", "env", "error", "init_performance", "env", "env"]
}
